YUI.add("tictac-atm",function(a){var b=0,c;a.namespace("Tictac.atm").loader=function(b,d,e,f){var g=a.Tictac.base.getAssetURL("js/","tictac-atm",null),h=a.Tictac.base.getTictacVersion("atm").filter||"min";f=f||{},a.Tictac.base.defineModuleGroup("tictacs",{filter:h,modules:{"tictac-atm-strings":{path:g+"strings/lang_"+(window.NeoConfig?window.NeoConfig.lang:"en-US")+"-min.js"}}},h==="min"),a.use("tictac-base-stats","tictac-base-batch-transport","tictac-att-attachments","tictac-att-downloader","tictac-att-slideshow","tictac-att-filter","tictac-base-utils","tictac-att-attachment-tray","tictac-atm-strings",function(){c=new a.Tictac.base.Stats({name:"atm",ywa:{appId:"1000501477056",isSampled:Math.floor(Math.random()*1e3)===0,actionEnums:{dropbox_saveall_selected:11,dropbox_saveto_selected:12,invoke:13,norton:14,dropbox_save_slideshow:15,docpreview_preconvert:16,total_attachments:20,total_attachment_emails:21,slideshow_next:27,slideshow_prev:28,download_thumbnail_selected:31,download_menu_selected:32,download_all_selected:33,slideshow_thumbnail_selected:34,slideshow_menu_selected:35,slideshow_all_selected:36,slideshow_download_single:38,download_success:41,download_error_general:43,download_error_json:44,download_success_warnings:45,download_success_errors:46,download_success_warning:47,download_success_error:48,download_success_success:49,download_success_nourl:50},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,count:29,time:30}},ultActions:{norton:!0,slideshow_next:!0,slideshow_prev:!0,download_thumbnail_selected:!0,download_menu_selected:!0,download_all_selected:!0,slideshow_thumbnail_selected:!0,slideshow_menu_selected:!0,slideshow_all_selected:!0,slideshow_download_single:!0,download_success:!0,download_error_general:!0,download_error_json:!0,download_success_warnings:!0,download_success_errors:!0,download_success_warning:!0,download_success_error:!0,download_success_success:!0,dropbox_saveto_selected:!0,dropbox_saveall_selected:!0,slideshow_file_selected:!0,slideshow_photo_selected:!0}}),b.target!==a&&(a.Tictac.atm._nortonHandler||(a.Tictac.atm._nortonHandler=a.on("click",function(){c.stat("norton")},".tictac-att-norton-logo")),c.stat("invoke"),a.Tictac.atm.callback(b,d,e,f))})},a.Tictac.atm.callback=function(d,e,f,g){function y(){return f.one(".icon.file")}function z(){var a=y();a&&a.addClass("hidden")}function A(a){var b=y();b&&(r.push(b.on("click",function(a){f.one(".tictac-att-tray-base").getDOMNode().scrollIntoView(),a.halt()})),b.addClass("s-tp"),b.set("title",p[a>1?"str_view_attachments":"str_view_attachment"]))}function B(){var a=y();a&&(a.removeClass("s-tp"),a.removeAttribute("title"))}function C(a){while(t<a.length){if((a[t].type==="ics"||a[t].subtype==="ics"||a[t].filetype==="ics"||a[t].type==="vcs"||a[t].subtype==="vcs"||a[t].filetype==="vcs"||a[t].type==="calendar"||a[t].subtype==="calendar"||a[t].filetype==="calendar")&&a[t].filename!=="reply.ics"&&e.header.subject.indexOf("Accepted:")!==0&&e.header.subject.indexOf("Declined:")!==0&&e.header.subject.indexOf("Tentative:")!==0){a.splice(t,1);break}t++}}function D(b,d,e){var f,g=a.Tictac.att.downloader;d&&d.getObject?f=[d.getObject({simple:!0})]:f=a.Array.map(d,function(a){return a.getObject({simple:!0})}),g.setStats(c),g.download(b,f,e)}function E(b){return b&&b.getObject?[b.getObject({simple:!0})]:a.Array.map(b,function(a){return a.getObject({simple:!0})})}function F(a,b){var d=a.currentTarget.ancestor("li",!0),e=j.get(d.getAttribute("data-id"));e.isViewable()&&!b?(v.show(e.getId(),!0),c.stat("slideshow_thumbnail_selected"),e.isImage()?c.stat("slideshow_photo_selected"):c.stat("slideshow_file_selected")):(D(s,e),c.stat("download_thumbnail_selected")),setTimeout(function(){d.blur()},0),a.halt()}function G(){r.push(s.on("menu-item-selected",function(b){var d;b.action==="download"&&b.attachment?(D(s,b.attachment),c.stat("download_menu_selected")):b.action==="save_dropbox"&&(d=E(b.attachment),c.stat("dropbox_saveto_selected"),a.use("tictac-dropbox-controller",function(a){a.Tictac.dropbox.controller.saveTo(s,d,c)})),setTimeout(function(){b.node.blur()},0)})),r.push(s.on("download_all",function(){D(s,j.getArray({},!0)),c.stat("download_all_selected")})),r.push(s.on("save_dropbox_all",function(){var b=E(j.getArray({},!0));c.stat("dropbox_saveall_selected"),a.use("tictac-dropbox-controller",function(a){a.Tictac.dropbox.controller.saveTo(s,b,c)})})),r.push(u.delegate("click",function(a){if(a.target.ancestor(".tictac-att-thumb-save-options"))return;var c=new Date,d=c-b;d>1e3&&F(a),b=c},".tictac-att-viewer")),r.push(u.one(".tictac-att-thumb-flow").delegate("key",function(a){a.keyCode===13&&a.shiftKey?F(a,!0):a.keyCode===13&&F(a)},"down:13",".tictac-att-thumb")),r.push(v.on("download:single",function(a){var b=a.data.aid,d=j.get(b);c.stat("slideshow_download_single"),D(v,d,a.callback)})),r.push(v.on("dropbox:single",function(b){c.stat("dropbox_save_slideshow"),a.use("tictac-dropbox-controller",function(a){a.Tictac.dropbox.controller.saveTo(v,[b.data.downloadInfo],c)})})),w=u.one(".tictac-att-header-view"),w&&r.push(w.on("click",function(){v.show(0),c.stat("slideshow_all_selected")}))}var h="."+g.headerClassName||"message-header",i,j=new a.Tictac.att.Collection,k=g.att?f.one(g.att.container):f.one(h),l=a.common.net.SessionMgr,m="/ws/docpreview/v1",n=a.Tictac.base.utils,o=n.getVal,p=a.Tictac.atm.strings,q,r=[],s,t=0,u,v,w,x;if(!k||k.ancestor("div").one(".tictac-att")||!e.attachments)return z(),!1;q=e.attachments.slice(0),C(q),q=a.Tictac.att.filter.attachments(q,{fid:e.fid,mid:e.mid});if(q.length===0)return z(),!1;c.stat("total_attachment_emails",{count:q.length});for(t=0;t<q.length;t++)j.add(new a.Tictac.att.Attachment(q[t])),x={type:q[t].type+"/"+q[t].filetype,size:Math.round(q[t].size/1024)},q[t].disposition==="inline"&&(x.size=Math.round(q[t].size/1024)),c.stat("total_attachments",x);u=a.Node.create('<div class="tictac-att-tray-base"></div>'),i=g.att?g.att.insertPos:g.insertPos||"after",i==="prepend"?k.prepend(u):i==="append"?k.append(u):k.insert(u,"after"),s=new a.Tictac.att.AttachmentTray({attachments:j,isRead:!0,instanceId:"msgRead"}),s.render(u),v=new a.Tictac.att.Slideshow({attachments:s.get("attachments").getViewableArray(),position:0,stats:c}),window.ttTray=s,window.ttSlideshow=v,d.currentTarget&&r.push(d.currentTarget.on("MessagePane:unload",function(b){if(b&&b.getDOMNode&&b.getDOMNode()!==f.getDOMNode())return;a.Array.each(r,function(a){a.detach()}),s.destroy(),v.destroy(),B()})),G(),A(q.length);if(!(NeoConfig.isInternal||NeoConfig.farm==="f9323"||NeoConfig.partnerType&&NeoConfig.partnerType==="ycorp"))return;var H=[],I=a.Array.filter(j.getFileArray(),function(a){return a.isDoc&&a.getAttachmentUrl});I=I.slice(0,3),c.stat("docpreview_preconvert",{count:I.length}),a.each(I,function(a){var b=a.filename.split(".").pop();H.push({id:"CreatingViewSession_"+a.aid,uri:m+"/ViewingSession",method:"POST",payload:{tenantId:"YahooMail",countOfInitialPages:0,startConverting:"initialPages",serverCaching:"none",render:{flash:{optimizationLevel:1},html5:{alwaysUseRaster:!1}}},filters:{iterator:null,range:null,select:null,exportSelect:{sessionId:"$..viewingSessionId"},exportResponse:!1,importIds:null},suppressResponse:!1},{id:"GetAttachment_"+a.aid,uri:a.getAttachmentUrl+"&wssid="+l.getWssid(),method:"GET",filters:{iterator:null,range:null,select:null,exportSelect:null,exportResponse:!0,importIds:["CreatingViewSession_"+a.aid]},suppressResponse:!0,requests:[{id:"PutAttachment_"+a.aid,uri:["/ws/docpreview/v1/ViewingSession/q/SourceFile?","ViewingSessionId=u$(CreatingViewSession_"+a.aid+".sessionId)","&FileExtension="+b].join(""),method:"PUT",payloadFromExport:"$(GetAttachment_"+a.aid+")",filters:{iterator:null,range:null,select:null,exportSelect:null,exportResponse:!1,importIds:["CreatingViewSession_"+a.aid]},requests:[{id:"StartSession_"+a.aid,uri:["/ws/docpreview/v1/ViewingSession/q/Notification/SessionStarted?","ViewingSessionId=u$(CreatingViewSession_"+a.aid+".sessionId)"].join(""),method:"POST",payload:{viewer:"HTML5"},filters:{iterator:null,range:null,select:null,exportSelect:null,exportResponse:!1,importIds:["CreatingViewSession_"+a.aid]}}]}]})}),a.Tictac.base.BatchTransport.send({requests:H},{success:function(b,c,d){a.each(I,function(a){var b=o(d,"CreatingViewSession_"+a.aid+".body.viewingSessionId");b&&(a.sessionId=b)})}})}},"1.0.0",{requires:["tictac-base","tictac-att"]});yui.add("tictac-inlinr",function(a){a.Tictac=a.Tictac||{},a.Tictac.inlinr=a.Tictac.inlinr||{},a.Tictac.inlinr.loader=function(b,c){a.use("swfdetect","node","tictac-base-stats","tictac-inlinr-listeners",function(){b.target!==a&&a.Tictac.inlinr.callback(b,c)})},a.Tictac.inlinr.callback=function(b,c){var d=c.header.from.email,e=["@yahoo-email.com","@one.yahoo-email.com","@email.macys.com","@premiumbrandsnow.com","@members.nationalsurveypanel.com","@members.rewardsonthego.com","@members.techsavvyrewards.com","@members.brandsurveypanel.com","@members.consumerincentivepromotions.com","@members.superbrewards.com","@members.consumerincentiverewards.com","@members.onlinebrandrewards.com","@members.topconsumergifts.com","@members.topbrandsamples.com","^dailyhoroscope@astrology.com","^reply@reply.marketingexperiments.com","^reply@reply.marketingsherpa.com"],f=new RegExp(e.join("$|")+"$","i");if(!d.match(f))return!1;var g=new a.Tictac.base.Stats({name:"inlinr",ywa:{appId:"100026966656",actionEnums:{invoke:13,inlinevideo:14,tweet:15,twitterfollow:16,facebooklike:17,inlinevideo_noflash:21,imagessuppressed:22,inlinevideo_nonssl:23,videoiframe:26}},ultActions:{}});g.stat("invoke"),a.Tictac.inlinr.listeners(c.hasBlockedImages,d,g)},a.Tictac.base.defineModules({"tictac-inlinr-listeners":{path:a.Tictac.base.getAssetURL("js/listeners.js","tictac-inlinr")}})},"1.0.0",{requires:["tictac-base"]});YUI.add("tictac-rsvp",function(a){function c(b,c){return a.Tictac.base.getAssetURL(b,"tictac-rsvp",c)}function d(a,c,d,e,f){var g,h;g=new b.Tictac.rsvp.Invite({fid:a.fid,mid:a.mid,exchangeId:a.header.messageId,pid:c.pid||c.partId}),h=new b.Tictac.rsvp.View(g,{hasConvView:!!window.NeoConfig.hasConvView,parent:d,insertPos:e}),h.render({state:"UNKNOWN"}),g.fetch(),f&&f.once("MessagePane:unload",function(){try{h.destroy()}catch(a){}})}var b;(function(){function h(b){return a.Tictac.base&&a.Tictac.base.isRTL?b.replace(/\.css$/,"_bidi.css"):b}var d=c("js/"),e=window.NeoConfig?window.NeoConfig.lang:"en-US",f=c("css/"),g=a.Tictac.base.getTictacVersion("rsvp").filter||"min";a.Tictac.base.defineModuleGroup("rsvp",{filter:g,modules:{"tictac-rsvp-rollups":{path:d+"tictac-rsvp-rollups_"+e+"-min.js",requires:["handlebars-base"]},"tictac-rsvp-strings":{path:d+"strings/lang_"+e+"-min.js"},"rsvp-invite":{path:d+"invite-min.js",requires:["rsvp-api","tictac-att-downloader","event-custom","rsvp-utils"]},"rsvp-utils":{path:d+"utils-min.js",requires:["tictac-rsvp-strings","tictac-base-utils"]},"rsvp-api":{path:d+"api-min.js",requires:["io","json","rsvp-utils"]},"rsvp-view":{path:d+"view-min.js",requires:["tictac-rsvp-rollups","tictac-rsvp-strings","rsvp-css","array-extras","tictac-base-utils","rsvp-utils","event-hover","escape"]}}},g==="min"),a.Tictac.base.defineModuleGroup("rsvp_css",{filter:"min",modules:{"rsvp-css":{type:"css",path:h(f+"rsvp.css")}}},g==="min")})(),a.namespace("Tictac").rsvp={loader:function(a,c,e,f){var g="."+(f&&f.headerClassName)||"message-header",h=f.rsvp?f.rsvp.insertPos:"append",i=c.attachments,j,k,l,m;if(!i||i.length===0)return;for(l=0,m=i.length;l<m;l++)if((i[l].type==="ics"||i[l].subtype==="ics"||i[l].filetype==="ics"||i[l].type==="vcs"||i[l].subtype==="vcs"||i[l].filetype==="vcs"||i[l].type==="calendar"||i[l].subtype==="calendar"||i[l].filetype==="calendar")&&i[l].filename!=="reply.ics"&&c.header.subject.indexOf("Accepted:")!==0&&c.header.subject.indexOf("Declined:")!==0&&c.header.subject.indexOf("Tentative:")!==0){j=i[l];break}if(!j)return;k=f.rsvp?e.one(f.rsvp.container):e.one(g),b=YUI(),b.namespace("Tictac.rsvp").Invite?d(c,j,k,h,a.currentTarget):b.use("rsvp-invite","rsvp-api","rsvp-view","node","json","tictac-base-stats",function(b){b.Tictac.rsvp.Stats=new b.Tictac.base.Stats({name:"rsvp",ywa:{sourceUrl:window.location.protocol==="https:"?"https://s.yimg.com/mi/vs3/ywa.js":"http://d.yimg.com/mi/vs3/ywa.js",server:"VSCALE3",appId:"1000323153979",actionEnums:{render:2,accept:6,decline:7,maybe:8,change:9,cancel:10,accept_comment:11,decline_comment:12,maybe_comment:13,view:16,save:17,error:21},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,count:29,time:30}},ultActions:{}}),d(c,j,k,h,a.currentTarget)})}}},"1.0.0",{requires:["tictac-base","tictac-att"]});YUI.add("tictac-enhancr",function(a){function d(b,c){return a.Tictac.base.getAssetURL(b,"tictac-enhancr",c)}var b=600,c;a.namespace("Tictac").enhancr={loader:function(d,e,f){if(a.UA.ie&&a.UA.ie<9)return;a.use("escape","tictac-base-stats","tictac-base-utils","tictac-att-enhancr-media",function(a){var g=f.one(".thread-body")||f.one(".msg-body"),h=d.currentTarget,i=a.Tictac.att.enhancr.Media,j=[],k;if(!g)return;k=g.all('[class*="link-enhancr-attachment"]'),c||(c=new a.Tictac.base.Stats({name:"enahncr",ywa:{sourceUrl:window.location.protocol==="https:"?"https://s.yimg.com/mi/vs3/ywa.js":"http://d.yimg.com/mi/vs3/ywa.js",server:"VSCALE3",appId:"10003765379",actionEnums:{render:11,link:12,preview:13,content:14,slideshow:15,video_play:16,email_with_card:17,card_clicked:18},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,ltxt:27,time:30}},ultActions:{}}));if(e.hasBlockedImages||k.isEmpty())return;c.stat("email_with_card"),k.each(function(d){var e=d.one("span[class*=link-enhancr-video-width]"),f=d.one("span[class*=link-enhancr-video-height]"),g=d.one("span[class*=link-enhancr-video-src]"),h=d.one('img[class*="link-enhancr-thumbnail-image"]'),k=d.all('[class*="link-enhancr-card-url"]'),l,m,n,o,p;k.isEmpty()||j.push(k.on("click",function(){c.stat("card_clicked")}));if(!(e&&f&&g&&h))return;l=h.get("parentNode"),o=parseInt(e.get("title")),p=parseInt(f.get("title")),n=g.get("title");if(!(o&&p&&n&&i.isSupportedUrl(n)))return;o>b&&(p=Math.round(b*p/o),o=b);if(NeoConfig.isFullSSL){if(!i.urlHasSSLSupport(n))return;n=n.replace(/^http:\/\//i,"https://")}/^https?:\/\/www.youtube\.com/.test(n)&&(n+="&autoplay=1"),d.setStyle("position","relative"),l.setStyle("cursor","pointer"),h.setStyle("cursor","pointer"),m=a.Node.create('<div class="enhancr-card-play-wrapper"><div class="enhancr-card-play"></div></div>'),j.push(l.on("click",function(b){var d,e;b.halt(),a.common.ui.DialogHelper.custom({hd:"",bd:'<iframe src="'+a.Escape.html(n)+'" '+'width="'+o+'" '+'height="'+p+'" '+'frameborder="0" scrolling="no" '+"webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>"},{cancel:{handler:function(){e&&e.remove().destroy(!0),d.detach()}}},function(b){var c=b.get("contentBox");c.setStyle("width",o+"px"),c.setStyle("height",p+"px"),c.one(".modal-hd").remove(),c.one(".modal-bd").setStyle("padding","0 0"),e=c.one("iframe"),d=a.once("click",function(){e&&e.remove().destroy(!0),b.destroy()})}),c.stat("video_play")}))}),h.once("MessagePane:unload",function(){a.Array.each(j,function(a){a.detach()})})})},youtubeRegExp:"^\\s*(?:http:\\/\\/|https:\\/\\/)?(?:www\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=)(\\w+)/?\\s*$",huluRegExp:"^\\s*(?:http:\\/\\/)?(?:www\\.)?hulu\\.com\\/watch/\\w+\\/?.*\\s*$",flickrSetRegExp:"^\\s*(?:http:\\/\\/|https:\\/\\/)?(?:www\\.)?(?:flickr\\.com|flic\\.kr)\\/(?:photos|p)\\/.+/sets/(\\w+)/?.*\\s*$",flickrPhotoRegExp:"^\\s*(?:http:\\/\\/|https:\\/\\/)?(?:www\\.)?(?:flickr\\.com|flic\\.kr)\\/(?:photos|p)\\/[^/]+/(\\d+)/?.*\\s*$",loadModuleDefs:function(b){function c(b){return a.Tictac.base&&a.Tictac.base.isRTL?b.replace(/\.css$/,"_bidi.css"):b}var e=d("js/"),f=window.NeoConfig?window.NeoConfig.lang:"en-US",g=d("css/");b=b||"min",a.Tictac.base.defineModuleGroup("enhancr",{filter:b,modules:{"tictac-enhancr-rollups":{path:e+"tictac-enhancr-rollups_"+f+"-min.js"},"tictac-enhancr-strings":{path:e+"strings/lang_"+f+"-min.js"},"enhancr-youtube":{path:e+"youtube-min.js",requires:["jsonp"]},"enhancr-hulu":{path:e+"hulu-min.js",requires:["jsonp"]},"enhancr-flickr":{path:e+"flickr-min.js",requires:["tictac-flickr-justifier","jsonp","array-extras","tictac-enhancr-rollups","tictac-att-slideshow"]}}},b==="min"),a.Tictac.base.defineModuleGroup("enhancr_css",{filter:"min",modules:{"enhancr-css":{type:"css",path:c(g+"enhancr.css")}}},b==="min")},savePref:function(b,c){var d=a.Tictac.base.mailpreferences;d.set(b,c,"enhancr"),d.save()},enhanceLinks:function(a){var b=this;YUI().use("enhancr-youtube","enhancr-hulu","enhancr-flickr","tictac-base-mailpreferences","tictac-enhancr-strings","enhancr-css","tictac-base-stats","base-bidi",function(c){function j(a,d,j){var k,l,m;d.thumbHeight>d.thumbWidth?k="width:"+h:k="height: "+h;var n=c.Node.create(e.enhanced_view({title:d.title,title_isRTL:g.detectDirection(d.title)==="rtl",author:d.author,author_isRTL:g.detectDirection(d.author)==="rtl",description:d.description,description_isRTL:g.detectDirection(d.description)==="rtl",thumbSize:k,img:d.thumbnail,contentWidth:d.width,service:d.service,isPlayable:d.isPlayable})),o=c.Node.create(e.link({linkHtml:a.get("outerHTML"),str_preview:f.str_preview,isRTL:c.Tictac.base.isRTL})),p=n.one(".enhancr-content"),q=n.one(".enhancr-preview"),r=o.one(".enhancr-links");return p.appendChild(d.content),o.one(".enhancr-show-preview").on("click",function(){j?(q.show(),b.savePref("Show","pane"),i.stat("preview")):(p.show(),b.savePref("Show","content"),i.stat("content")),r.hide()}),n.all(".enhancr-hide-preview a").on("click",function(a){a.stopPropagation(),q.hide(),p.hide(),r.show(),b.savePref("Show","link"),i.stat("link")}),q.on("click",function(){q.hide(),p.show(),b.savePref("Show","content"),i.stat("content")}),l=c.Tictac.base.mailpreferences.get("enhancrShow"),l==="pane"&&j?(r.hide(),p.hide()):l==="content"?(r.hide(),q.hide()):(q.hide(),p.hide()),m=a.next(),m!==null&&m.get("nodeName").toLowerCase()==="br"&&m.remove(),o.append(n),a.replace(o),l}var d=c.Tictac.enhancr,e=d.rollups,f=d.strings,g=c.Tictac.base.bidi,h=80,i=new c.Tictac.base.Stats({name:"enahncr",ywa:{sourceUrl:window.location.protocol==="https:"?"https://s.yimg.com/mi/vs3/ywa.js":"http://d.yimg.com/mi/vs3/ywa.js",server:"VSCALE3",appId:"10003765379",actionEnums:{render:11,link:12,preview:13,content:14,slideshow:15,video_play:16,email_with_card:17,card_clicked:18},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,ltxt:27,time:30}},ultActions:{}});c.Tictac.enhancr.Stats=i,a.each(function(a){var c=a.get("href"),e;(e=c.match(b.youtubeRegExp))!==null?d.youtube.embedHtml(e[1],a,j):(e=c.match(b.huluRegExp))!==null&&window.location.protocol==="http:"?d.hulu.embedHtml(c,a,j):(e=c.match(b.flickrSetRegExp))!==null?d.flickr.embedSetHtml(e[1],a,j):(e=c.match(b.flickrPhotoRegExp))!==null&&d.flickr.embedPhotoHtml(e[1],a,j)})})}}},"1.0.0",{requires:["tictac-base","tictac-att"]});