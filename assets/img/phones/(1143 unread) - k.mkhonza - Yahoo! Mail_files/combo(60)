window.NeoConfig=window.NeoConfig||{};window.NeoGV=window.NeoGV||{};window.Neo=(function(){var h=window,o=document,AJ="getElementById",p="body",y="head",i="getElementsByTagName",z="parentNode",u="createElement",AV="setAttribute",AR="getAttribute",I="className",Y="firstChild",C="nodeName",a="Inbox",J={},j=[],AA=false,E=0,AQ=navigator.userAgent.match(/MSIE\s([^;]*)/),K=false,F,N="active",v="hidden",AN="selected",t="visible",AE="inboxcontainer",AL=36,A="messageid",H=0,W={"Inbox":"inbox","%40C%40Chats":"conv","%40B%40Bulk":"spam","Trash":"trash","Draft":"drafts","Sent":"sent"},AF={};NeoGV.statQueue=[];NeoGV.inject=function(AX){var AY,w,d,b=function(AZ){if(AZ.el){AZ.el.innerHTML=AZ.html;return;}AY=AZ.id||"centerpane";if(o[AJ](AY)){o[AJ](AY).innerHTML=AZ.html;}};if(AX.css){AD(AX.css,AX.cssID);}b(AX);AY=AX.id;if(AY){w=o[AJ](AY);if(!w){return;}d=w[I];if(AX.html&&d&&d.indexOf(v)!==-1&&!(""+AX.html).match(/^\s*$/)){S(w,"hidden");}if(AX.customClass&&!AW(w,AX.customClass)){w[I]+=" "+AX.customClass;}}};F={addHandler:function(b,w,d){if(b){if(h.addEventListener){b.addEventListener(w,d,false);}else{if(h.attachEvent){b["evt"+w+d]=d;b[w+d]=function(){b["evt"+w+d](h.event);};b.attachEvent("on"+w,b[w+d]);}}}},removeHandler:function(b,w,d){if(b){if(h.removeEventListener){b.removeEventListener(w,d,false);}else{if(h.detachEvent){b.detachEvent("on"+w,b[w+d]);b[w+d]=null;b["evt"+w+d]=null;}}}},preventDefault:function(b){if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}},getTarget:function(d){var b=d.target||d.srcElement;try{if(b&&3===b.nodeType){b=b.parentNode;}}catch(w){}return b;}};var s=(function(){var AY=["MSXML2.XMLHTTP","MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP","Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0"],w,b;var d;try{d=new XMLHttpRequest();}catch(AZ){for(w=0,b=AY.length;w<b;w++){try{d=new ActiveXObject(AY[w]);}catch(AX){}}}var Aa=function(Ab,Ac,Ae,Ad){var Af=Ae.chunked,Aj,Ai;var Ag=function(){if(Af){try{var Ao=d.responseText,Al=Ao.lastIndexOf(Ae.delimiter||"/*=*/");if(Ai!==Al){Af(Ao.substring(Ai||0,Al));Ai=Al;}}catch(Ak){}}if(d&&d.readyState===4){if(Aj){clearInterval(Aj);}Aj=0;var Am;try{if(d.status!==undefined&&d.status!==0){Am=d.status;}else{Am=13030;}}catch(An){Am=13030;}if((Am>=200&&Am<300)||Am===1223){if(Ae&&Ae.success){Ae.success(d);}}}};d.open(Ab,Ac,true);if(Ab.toUpperCase()==="POST"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}else{Ad=null;}d.setRequestHeader("X-Requested-With","XMLHttpRequest");try{d.onreadystatechange=Ag;}catch(Ah){d.onload=Ag;}if(Af){Aj=setInterval(Ag,50);}d.send(Ad);};return Aa;}());function f(AZ,AY,d){var b=AZ;d=d||"beforeEnd";if(AZ instanceof Array){b=AZ.join("");}try{if(typeof AZ==="string"){if(AQ){AY.insertAdjacentHTML(d,b);return;}var AX=AY.ownerDocument.createRange();AX.setStartBefore(AY);b=AX.createContextualFragment(AZ);}if(AQ){AY.insertAdjacentElement(d,b);return;}switch(d){case"beforeBegin":AY.parentNode.insertBefore(b,AY);break;case"afterBegin":AY.insertBefore(b,AY[Y]);break;case"afterEnd":if(AY.nextSibling){AY.parentNode.insertBefore(b,AY.nextSibling);}else{AY.parentNode.appendChild(b);}break;default:AY.appendChild(b);break;}return b;}catch(w){}}function AD(b,w){var d=o[u]("link");d.type="text/css";d.rel="stylesheet";if(w){d.id=w;}d.href=b;o[i](y)[0].appendChild(d);}function l(Aa,AZ,w,d,b,AX){var AY=/{{([^{}]*)}}/g;return Aa.replace(AY,function(Ac,Ab){var Ae,Ad;if(w&&(Ae=w[Ab])){return(Ae(AZ,d))||"";}if(AZ&&Ab in AZ){return AZ[Ab];}if(b&&Ab in b){Ad=b[Ab];return Ad.match(AY)?l(Ad,AZ,w,d,b,AX):Ad;}if(AX&&Ab in AX){return l(AX[Ab].base||AX[Ab],AZ,w,d,b,AX);}return"";});}function AO(w,d){var b;if(!d){return w;}for(b in d){if(d.hasOwnProperty(b)){if(!(b in w)){w[b]=d[b];}}}}function AT(w){var d=o[i](y)[0],b=o[u]("script");b.type="text/javascript";b.async=true;if(!AQ){b.appendChild(o.createTextNode(w));}else{b.text=w;}try{d.appendChild(b);d.removeChild(b);}catch(AX){}}function AW(b,d){return(b&&b[I].indexOf(d)!==-1);}function AP(b,d){if(!AW(b,d)){b[I]=b[I]+" "+d;}}function AS(b,w){if(AW(b,w)){var d=new RegExp("\\b"+w+"\\b");b[I]=b[I].replace(d,"");}}function S(d,w,b){d[I]=d.className.replace(w,b||"");}function x(Aa,Ad,Ac){var AX=[],AY,AZ,Ab,b,w,d;if(o.evaluate){Ab=o.evaluate(".//*[contains(concat(' ', @class, ' '), ' "+Aa+" ')]",o[AJ](Ac)||o,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(AY=0,AZ=Ab.snapshotLength;AY<AZ;AY++){AX.push(Ab.snapshotItem(AY));}return AX;}if(typeof Ac==="string"){Ac=o[AJ](Ac);}b=(Ac||o)[i]((Ad||"*"));d=new RegExp("(^|\\s)"+Aa+"(\\s|$)");for(AY=0,AZ=b.length;AY<AZ;AY++){w=b[AY];if(d.test(w[I])){AX.push(w);}}return AX;}function G(d){var b=d.nextSibling;while(b.nodeType!==1){b=b.nextSibling;}return b;}function AG(d){var b=d.previousSibling;while(b.nodeType!==1){b=b.previousSibling;}return b;}function k(b){if(b&&b.parentNode){b.parentNode.removeChild(b);}}function X(b){AM(AE);AU(b);if(NeoConfig.hasAds===1){S(o[p],"withoutad","withsky");}}function AI(AX){var w=o[AJ]("tabinbox"),Ab=w[z],Aa=o[AJ]("msg-list"),AZ=x("list-view-items","div","msg-list"),AY=AX[AR]("data-fid"),d=o[AJ]("msg-preview"),b=NeoConfig;if(AY===null&&AX[C].toUpperCase()==="LI"){AY=AX.id;}if(AY===null||AY===""){return true;}X(Ab);AA=AA||d.innerHTML;if(a===AY){return true;}w.innerHTML=(AY&&W[AY])?b.strings["str_tabs_"+W[AY]]:AX[i]("i")[0].innerHTML;if(AZ&&AZ[0]){AZ[0].innerHTML="";AZ[0].className+=" loading";}d.innerHTML="";if(AY.toString().length>0){Neo.fid=AY;if(NeoConfig.extraURLArgs.indexOf("isFresh")===-1){b.extraURLArgs=b.extraURLArgs+"&isFresh=1";}Neo.async("GET","showFolder?fid="+encodeURIComponent(AY)+"&mode=data&noFlush&ncrumb="+b.ncrumb+b.extraURLArgs,{success:function(Af){if(window.yui){return;}Neo.exec(Af.responseText);var Ad=Neo.msgListResp;var Ae=Ad.html;if(Aa){var Ac=Aa[z];Ac.removeChild(Aa);f(Ae,Ac,"afterBegin");}Z(Ad.json);if(AA){O(AA,false,false,true);}a=AY;},failure:function(){}});return true;}return false;}function e(AZ){if(AZ&&((AZ.which&&AZ.which===3)||(AZ.button&&AZ.button===2))){return;}var d=F.getTarget(AZ)||AZ,Ai=NeoConfig,Ab=d[C].toUpperCase(),Ag=Ag||o[p][I],w="none",Ae=d,b=null;
var Af={I:{n:d[z][z],a:"folder"},A:(function(){var Ap=(d[AR]("role")==="tab")?{n:d,a:"tab"}:{n:d[z],a:"folder"};if(d[AR]("data-action")==="compose"||d[z].id==="btn-new"){Ap.a="compose";}if(d[AR]("msgheader")){Ap.a="message";Ap.n=d;}if(d[I]==="more"&&AW(d[z],"icn-inbox")){Ap.a="tab";Ap.n=o[AJ]("tabinbox");}if(d[AR]("data-action")==="toggle-msg-header"){var An=d[z][z][z];if(An.children&&An.children[1]){var Ao=An.children[1].children[0],Ak=Ao.children[3].children[0].children.length,Am=Ao.children[5]?Ao.children[5].children[0].children.length:"",Aq=Ak+Am,Al=An.children[0].children[4].children[2],Aj=NeoConfig.strings;if(AW(An,"collapsed-header")){d.innerHTML=d[AR]("toggle-off");S(An.children[1],"hidden","expanded");AS(An,"collapsed-header");Ai.showHdrDetails=1;}else{d.innerHTML=d[AR]("toggle-on");AP(An,"collapsed-header");Al.innerHTML=Aq==="1"?"1 "+Aj.str_small_header_recipient:Aq+" "+Aj.str_small_header_recipients;Ai.showHdrDetails=0;}}}return Ap;}()),SPAN:(function(){var Ak=(d[I]==="rht")?{n:d[z],a:"folder"}:{n:d[z][z][z],a:"folder"};if(d[AR]("data-action")==="close-tab"){Ak.a="close";Ak.n=AG(d);}if(d[z][z][AR]("data-action")==="collapsable"){var Aj=d[z][z];if(AW(Aj,"expanded")){S(Aj,"expanded","collapsed");}else{S(Aj,"collapsed","expanded");}}return Ak;}()),EM:(function(){var Aj={};return Aj;}()),LI:{n:d,a:"folder"},B:{n:d[z],a:"tab"}};Af.IMG=Af.EM;b=Af[Ab];if(b){Ae=b.n;w=b.a;}try{switch(w){case"folder":F.preventDefault(AZ);if(Ai.hasConv){F.halt();return true;}AI(Ae);NeoGV.statQueue.push({well:"folderview",name:"folderBeforeRender"});break;case"tab":F.preventDefault(AZ);switch(Ae.id){case"okDialupModal":Ae=o[AJ]("tabinbox");break;case"tabinbox":X(Ae[z]);break;default:if(Ae.id.indexOf("tabmessage")!==-1){AM(A+Ae.tabIndex);AU(Ae[z]);}}NeoGV.statQueue.push({well:"tab",name:"tabBeforeRender"});break;case"compose":F.preventDefault(AZ);setTimeout(function(){if(window.slowConnDlg&&!Neo.filesDone){slowConnDlg.switchDisplay("dialupMask",1);slowConnDlg.switchDisplay("dialupLoading",1);Neo.openCompose=true;}},100);NeoGV.statQueue.push({well:"compose",name:"composeBeforeRender"});break;case"close":F.preventDefault(AZ);for(var Ac in J){if(Ae.tabIndex===J[Ac].idx){J[Ac].visible=false;J[Ac].idx=null;var AY=Ae[z],Ad=AW(AY,N);AY[z].removeChild(AY);var Ah=o[AJ](A+Ae.tabIndex);Ah[z].removeChild(Ah);if(Ad){X(o[AJ]("tabinbox")[z]);}break;}}NeoGV.statQueue.push({well:"tab",name:"closeTabBeforeRender"});break;case"message":F.preventDefault(AZ);if(Ai.hasConv){F.halt();return true;}var AX=Ae[AR]("msgheader")||Ae[AR]("data-msghdr");AT("Neo.RUEFCHdr = "+AX+";");AK(Neo.RUEFCHdr.mid,true);Neo.RUEFCHdr=null;NeoGV.statQueue.push({well:"message",name:"messageBeforeRender"});break;}}catch(Aa){}return true;}F.addHandler(o,"click",e);F.addHandler(o,"click",function(b){if((b.target||b.srcElement).getAttribute("id")==="yucs-sprop_button"){F.preventDefault(b);}});function AU(AY){var w,AX,d=o[AJ]("tablist").children,b=d.length;for(w=0;w<b;w++){AX=d[w];if(AX!==AY){S(d[w],N);}}if(AY&&!AW(AY,N)){AY[I]+=(" "+N);}}function AM(AY){var d,AX=o[AJ]("shellcontent").children,b=AX.length,w=(typeof AY==="object")?AY:o[AJ](AY),AZ;for(d=0;d<b;d++){AZ=AX[d];if(AZ&&(AZ!==w)&&!AW(AZ,v)){if(AZ.style.visibility){AZ.style.visibility=v;}AZ[I]+=(" "+v);}}if(w){if(w.style.visibility){w.style.visibility=t;}S(w,v);}}function O(Ab,AX,AY,b){if(Neo.filesDone){return;}var Ac=o[AJ]("msg-preview"),Aj=NeoConfig,Ah=Aj.previewPanePref?true:false,AZ=Aj.strings,Af;function Ae(){var An=o[AJ]("msg_details");if(!An){return;}var Al=x("sm_rawDate","span",An)[0];if(!Al){return;}var Ak=Al[z],Am=Al[z][z][z].children[1].children[0];Ak.innerHTML=P(new Date(Al.innerHTML*1000),AZ.str_tog_dateformat_header_l10n);Am.innerHTML=P(new Date(Al.innerHTML*1000),AZ.str_tog_dateformat_rsstime_l10n);S(Ak,"hidden","");}if(b||(Ah&&!AX)){Neo.orginalClass=Neo.orginalClass||Ac[I];Ac[I]="message content";Ac.innerHTML=Ab;Ae();Ac.scrollTop=0;}else{var d=o[AJ]("tablist");AM();if(typeof AY==="undefined"){var Aa=o[AJ]("shellcontent");f('<div id="'+A+H+'"><div role="document" class=" message content" tabindex="0" style="display:block;visibility:visible;"></div></div>',Aa);var w=o[AJ](A+H)[i]("div")[0],Ad,Ag,Ai;w.innerHTML=Ab;Ae();Ag=w[i]("h3");Ad=(Ag&&Ag.length>0&&(Ai=Ag[0][i]("a")[0]))?(Ai.innerText||Ai.textContent||Ai.getAttribute("title")):"__title__";f(('<li role="presentation" class="removable active messagetabs" visibility="'+t+'"><a data-action="navigate" href="#" role="tab" id="tabmessage'+H+'" title="__title__" tabindex="'+H+++'" aria-selected="true"><b>__title__</b></a><span data-action="close-tab" title="Close tab [Ctrl + ]">Close tab</span></li>').replace(/__title__/g,Ad),d);Af=H-1;}else{Af=AY;AM(A+Af);}AU(o[AJ]("tabmessage"+Af).parentNode);}}function n(Aa,AX){if(NeoConfig.hasConv){return;}var AZ=F.getTarget(Aa),AY=function(Ae){var Ac=x(AN,"div","msg-list"),Ad,Ab;if(Ac&&Ac.length){for(Ad=0,Ab=Ae||Ac.length;Ad<Ab;Ad++){S(Ac[Ad],AN);Ac[Ad][i]("input")[0].checked=false;}}},d=function(Ac){if(!AA){AA=o[AJ]("msg-preview").innerHTML;}var Ad=Ac[i]("input")[0],Ab=Ad.value;E=0;AY();Ac[I]+=" selected";AK(Ab,AX,Ac);},w=false,b;if(AZ){while(AZ.id!=="shellcontent"){b=AZ.tagName;b=b?b.toUpperCase():"";switch(b){case"LI":case"DIV":if(AZ[AR]("data-action")==="select-message"){w=true;d(AZ);}break;case"INPUT":if(AZ.type==="checkbox"){if(AZ.name==="mid"){F.preventDefault(Aa);d(AZ[z][z][z]);}w=true;}break;default:AZ=AZ[z];break;}if(w){break;}}}}function R(d){var b=NeoConfig,w=b.previewPanePref?true:false;if(w){n(d,true);}}function AK(d,w,AZ){var b=NeoConfig,AY=b.previewPanePref?true:false,AX;if(AF[d]){return;}if(!J[d]||!J[d].html){AF[d]=true;AX=Neo.fid||"Inbox";if(NeoConfig.extraURLArgs.indexOf("isFresh")===-1){b.extraURLArgs=b.extraURLArgs+"&isFresh=1";}Neo.async("GET","showMessage?mid="+encodeURIComponent(d)+"&fid="+encodeURIComponent(AX)+b.extraURLArgs+"&shd="+b.showHdrDetails+"&mode=data&noFlush&ncrumb="+b.ncrumb,{success:function(Ad){if(window.yui){window.yui.fire("openMessage",{fid:AX,msg:{mid:d}});}else{Neo.exec(Ad.responseText);
if(!K){AD(b.showMsgCSSURL);K=true;}var Ac=b.msgCache[d];J[d]={html:Ac,idx:H};j[H]=b.msgHdr[d];if(!AY||w){J[d].visible=true;}O(Ac,w);if(!AZ){var Ae=o[AJ]("msg-list")[i]("input"),Aa=Ae.length;for(var Ab=0;Ab<Aa;Ab++){if(Ae[Ab].value===d){AZ=Ae[Ab][z][z][z];break;}}}if(AZ){S(AZ,"unread");}}delete AF[d];},failure:function(){}});}else{if(J[d].visible){O(J[d].html,w,J[d].idx);}else{if(!AY||w){J[d].visible=true;}J[d].idx=H;O(J[d].html,w);}}}function AB(){F.addHandler(o[AJ]("shellcontent"),"click",n);F.addHandler(o[AJ]("shellcontent"),"dblclick",R);var b=x("heartbeat","span","shellnavigation");if(b.length){F.addHandler(b[0],"mouseover",L);F.addHandler(b[0],"mouseout",U);}}function L(d){var b=F.getTarget(d);AS(b,"heartbeat");AP(b,"heartbeat-fast");AP(b[z],"autocompose-hover");}function U(d){var b=F.getTarget(d);AS(b,"heartbeat-fast");AS(b[z],"autocompose-hover");}function D(Aa){var Af=NeoConfig,Ad=Af.mailboxListTmpl,Ab,d,w="",Ae,AY=o[AJ]("storm-listnav")[i]("li")[0],b,Ac=Af.strings,AX=Af.showExtAccountsParam===3||Ac.str_cfg_tog_ext_accnt_expand,AZ=(Af.showExtAccountsParam>0&&Af.showExtAccountsParam<3)||(AX&&Af.expandEA);Aa=Aa||Af.mailboxes;if(!Aa){return;}Af.mailboxes=Aa;for(Ab in Aa){d=Aa[Ab];if(d.server_addr||Ab==="Inbox"){if(AZ){d.leftpane_pane_mboxes_expanded_else="";}w+=l(Ad.mailboxes,d,null,null,Ac,Ad);}}b={mailboxes:w};if(AX){if(Af.expandEA){b.leftpane_pane_mboxes_expanded_else1="";}else{b.leftpane_pane_mboxes_expanded="";}}Ae=AX?l(Ad.base,b,null,null,Ac,Ad):w;f(Ae,AY,"afterEnd");}function m(d){function b(AY,AX){var w=AY.folderInfo.name;var Ac=AX.folderInfo.name;var AZ=0,Ab,Aa=0;w=w.split("/");Ac=Ac.split("/");Ab=(w.length<Ac.length)?w.length:Ac.length;for(;AZ<Ab&&(Aa===0);AZ++){Aa=w[AZ].toLowerCase().localeCompare(Ac[AZ].toLowerCase());if(Aa===0){Aa=w[AZ].localeCompare(Ac[AZ]);}}return Aa||(w.length-Ac.length);}d.sort(b);}function AH(Ac){var w=Ac.folderInfo.fid,AX=o[AJ](w),AY=NeoConfig.strings,Ab;if(AX){var Aa=AX[i]("a"),b=(w==="Draft"),Ae=(w==="%40C%40Chats"),Ad=b?Ac.total:Ac.unread,d="{{str_nav_inbox_unread_attr}}";if(b){d=(Ad===1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";}else{if(Ae){d="{{str_nav_conversations}}";}}Ab={};d=l(d,{inbox_unread_cnt:Ad},null,null,AY);if(Aa&&Aa[0]){Ab[W[w]+"_cnt"]=Ac.total;if(b||Ae){Aa[0].title=d;}else{Aa[0].title=l("{{str_nav_"+W[w]+"_attr}}",Ab,null,null,AY);}}if(w==="Sent"){return;}if(Ad>0&&!b){AX[I]+=" has-unread bold";}if(NeoConfig.grayoutEnabled&&Ac.total===0&&(w==="%40B%40Bulk"||w==="Trash")){AX[I].replace("hasmultimsg","hasnomsg");}var AZ=AX[i]("span");if(AZ&&AZ[1]){AZ=AZ[1];if(Ad>0){if(Ad>9999){AZ.innerHTML="(9999+)";}else{AZ.innerHTML="("+Ad+")";}AS(AZ,"invisible");}}AZ.title=d;}}function r(Ap){var d=NeoConfig,Ao=d.folderListTmpl,AY=d.strings,b,Aa,An,Am,Ad,Aj,Ae,Ah,Ak,AX="",Ac=0,Ab=0,Af,Ag,w;Ap=Ap||d;if(!Ap.folders){return;}Aj=Ap.folders.folder;Ae=Aj.length;m(Aj);for(Ag=0;Ag<Ae;Ag++){Aa=Aj[Ag];b=Aa.folderInfo.fid;Am=false;if(b.indexOf("Sync%20Trap")===0){continue;}An=Aa.folderInfo.name;while(An[0]==="/"){An=An.slice(1);}Am=(((Ag+1)<Ae)&&(Aj[Ag+1].folderInfo.name.indexOf(An+"/")===0));An=An.split("/");Ac=An.length-1;if(Ac){if(Ah&&Ah.folderInfo.name===An[0]){An=An[Ac];}else{Ac=0;An=Aa.folderInfo.name;}}if(!Aa.isSystem||Am){Af={url:"#",name:An,fid:b,total_cnt:Aa.total,isParent:Am?"papa-folder":"",email_str:(Aa.total===1)?AY.str_email_cnt_one:AY.str_email_cnt_multi,depth_attr:Ac?'fdepth="'+Ac+'"':"",folder_tooltip:NeoConfig.nav?"":"s-tp"};if(NeoConfig.bidi&&Aa.folderInfo.dir){Af.name=(Aa.folderInfo.dir==="rtl"?"\u202B":"\u202A")+Af.name+"\u202C";}if(Aa.unread){if(Aa.unread>9999){Af.unread_cnt_num=Af.inbox_unread_cnt="9999+";}else{Af.unread_cnt_num=Af.inbox_unread_cnt=Aa.unread;}Af.unread_cnt=Aa.unread;Af.hidden_class="";}else{Af.has_unread="";Af.has_unread_title="";Af.hidden_class=" invisible";Af.unread_cnt=0;}Ad=l(Ao.folders,Af,null,null,AY,Ao);}if(Ac){w=true;if(Ac>Ab){Ak+='<div class="listnav-folder listnav-subfolder hidden">'+'<div class="listnav-label"><a class="listnav-back" href="#"></a>'+'</div><ul id="custom-folders">';Ab++;}else{if(Ac<Ab){while(Ab>Ac){Ak+="</ul></div>";Ab--;}}}Ak+=Ad;}else{while(Ab){Ak+="</ul></div>";Ab--;}if(Ak){AX+=Ak;}if(Aa.isSystem){if(Am){AX+=Ad;}AH(Aa);if(b==="%40C%40Chats"){d.ssa_enabled=true;}}else{AX+=Ad;}Ak="";Ah=Aa;}}while(Ab){Ak+="</ul></div>";Ab--;}if(Ak){AX+=Ak;}if(d.enable_ssa&&!d.isFresh){if(d.hasIM&&d.tog_hasIM&&d.ssa_enabled){o[AJ]("%40C%40Chats")[I]="chats ";}}var Ai=o[AJ]("Folders"),Al=Ai.children[0],AZ=o[AJ]("smart-folders-nav");NeoGV.inject({html:AX,el:Ai[i]("ul")[0]});if(AZ){AZ[I]=AZ[I].replace("collapsed","expanded");AZ[AV]("title",AY.str_nav_left_smart_folders_expanded_attr);}Al[AV]("title",AY.str_nav_left_folders_collapsed_attr);if(d.expandPF&&d.nav){AP(Ai,"nav-open");}if(w){AP(Ai,"has-subfolders");}else{AS(Ai,"has-subfolders");}}function T(d){var b=o[AJ]("uhimage");if(b&&o[AJ]("btn-account")&&b.style.display==="none"){d=d||o[AJ]("btn-account")[i]("img")[0].src;}if(b&&d){b.src=d;b.style.display="";}}var V=(function(){var b;return function(w){var d=NeoConfig.strings;if(!b){b={"Inbox":d.str_nav_inbox,"Draft":d.str_nav_drafts,"Trash":d.str_nav_trash,"Sent":d.str_nav_sent,"%40B%40Bulk":d.str_nav_spam,"%40C%40Chats":d.str_nav_conversations};}return b[w];};}());function q(){var AX=NeoConfig.folders,d,Aa,AY,AZ;for(var w=0;w<AX.numberOfFolders;w++){AY=AX.folder[w];d=AY.folderInfo;AZ=d.fid;if(AZ===(Neo.fid||"Inbox")){Aa=AY.isSystem?V(AZ):d.name;break;}}if(Aa){var b=x("list-view","div","msg-list");if(b.length){b[0][AV]("aria-label",Aa);}}}function AC(b){q();if(!b){return;}var Ai=NeoConfig,Ah=Ai.msgListTmpl,AX=[],Aj,AY,Ae,AZ=0,Ad,w=Ai.strings;try{Ad=parseInt(o[AJ]("msg-list").style.height,10);}catch(Aa){Ad="auto";}if(Ai.pagedResults){Ad=Ai.messagesPerPage;}else{Ad=Ad==="auto"?1000:parseInt((Ad/21)+Ai.ulPadding,10);}if(!Ai.infiniteScroll&&Ai.defaultSortOrder==="up"){b.reverse();}for(AY in b){if(++AZ>Ad){break;}Aj=b[AY];Ae=Aj.mid;var Ag=(Ai.hasConv?Aj.anchorDate:Aj.rawDate)*1000,Ac=true;Aj.receivedDate=P(new Date(Ag),g(Ag,Ac));
Aj.checkbox_label=l(w.str_msg_list_checkbox_label,{messagenumber:(parseInt(AY,10)+1)});var Ab="&nbsp;",Af=Aj.flag_info;Aj.is_deleted="";Aj.is_selected="";Aj.is_replied="";Aj.is_forwarded="";Aj.is_unread="";Aj.is_flagged="";Aj.attachment_previews="";Aj.hashKey=Ae.split("_").pop();Aj.inboxservices="";if(Af.match("replied")){Aj.is_replied=w["str_msg_list_info-replied"];}if(Af.match("forwarded")){Aj.is_forwarded=w["str_msg_list_info-forwarded"];}if(Aj.flags.match("unread")){Aj.is_unread="unread";}if(Aj.flags.match("flagged")){Aj.is_flagged="flagged";}if(Aj.hasOwnProperty("hide_attachments_else")){Aj.hasAttachment="";}Aj.status_message=Ab;AX[AY]=l(Ah.message,Aj,null,null,w,Ah);Aj.mid=Ae;}var d=x("list-view-items","div",o[AJ](AE))[0];NeoGV.inject({html:AX.join(""),el:d});S(d,"loading","");}function Z(Ad){q();NeoConfig.cellHeight=[29,25,33];NeoConfig.vertPaneCellHeight=[51,70];var b=NeoConfig,Au=b.msgListTmpl,Ae=[],AX,An,As,AY=0,Ap,AZ=b.strings;try{Ap=parseInt(o[AJ]("msg-list").style.height,10);}catch(Aq){Ap="auto";}if(b.pagedResults){Ap=b.messagesPerPage;}else{Ap=Ap==="auto"?1000:parseInt((Ap/21)+b.ulPadding,10);}if(b.infiniteScroll){Ap*=2;b.pageSize=Ap;}if(!Ad){return;}if(!b.infiniteScroll&&b.defaultSortOrder==="up"){Ad.reverse();}for(An in Ad){if(++AY>Ap){break;}AX=Ad[An];As=AX.mid;AX.mid='name="mid" value="'+As+'"';var Ar=(b.hasConv?AX.anchorDate:AX.rawDate)*1000,Aj=true;AX.receivedDate=P(new Date(Ar),g(Ar,Aj));AX.checkbox_label=l(AZ.str_msg_list_checkbox_label,{messagenumber:(parseInt(An,10)+1)});var Am="&nbsp;",Ai=AX.flag_info,Ah=AX.inboxservices;if(Ai.match("replied")){Am=AZ["str_msg_list_info-replied"];}else{if(Ai.match("forwarded")){Am=AZ["str_msg_list_info-forwarded"];}else{if(AX.flags.match("unread")){Am=AZ["str_msg_list_info-unread"];}else{if(Ah&&Ah.match("data-certified")){Am=AZ["str_msg_list_info-certified"];}}}}AX.status_message=Am;Ae[An]=l(Au.message,AX,null,null,AZ,Au);AX.mid=As;}var Ag;if(NeoConfig.infiniteScroll){Ag=x("list-view-items-page","div",o[AJ](AE))[0];}else{Ag=x("list-view-items","div",o[AJ](AE))[0];}if(NeoConfig.mbPencil>0&&NeoConfig.enableMoneyball){var Ac=o[AJ]("slot_MB"),Af=[["mb","mb-top"],["mb","mb-list"],["mb","mb-list","mb-color","mb-short"],["mb","mb-top","mb-color"],["mb","mb-list","mb-color-thm","mb-short"],["mb","mb-list","mb-color-thm"]],Ak;if(Ac&&NeoConfig.moneyball&&NeoConfig.moneyball.click_url&&NeoConfig.moneyball.ad_headline&&NeoConfig.moneyball.ad_summary){var w=NeoConfig.moneyballTmpl;if(NeoConfig.mbPencilTop){Ac.innerHTML=l(w.mbcontent,NeoConfig.moneyball,null,null,NeoConfig.strings,w);}else{if(NeoConfig.mbPencilList){if(NeoConfig.mbPencil!==17){w.mbfeedback="";}else{w.sponsored="";}Ac.innerHTML=l(w.mbcontentList,NeoConfig.moneyball,null,null,NeoConfig.strings,w);}}if(NeoConfig.theme.id==="purple"&&NeoConfig.mbExpColor){Ak=o[AJ]("mbAds");if(Ak){Ak.style.backgroundColor=NeoConfig.mbExpColor;}}if(NeoConfig.mbPencil<=6||NeoConfig.mbPencil===17){var d=NeoConfig.mbPencil-1;if(NeoConfig.mbPencil===17){d=5;}for(var Al=0;Al<Af[d].length;Al++){AP(o[p],Af[d][Al]);}}}if(NeoConfig.mbPencilRec){var Ao=o[AJ]("slot_mbrec");if(Ao&&NeoConfig.moneyballRec&&NeoConfig.moneyballRec.click_url&&NeoConfig.moneyballRec.ad_headline&&NeoConfig.moneyballRec.ad_summary){var At=NeoConfig.moneyballRecTmpl;var Aa=0;var Ab=0;if([7,8,9,10,11,12,16].indexOf(NeoConfig.mbPencil)!==-1){At.navAd="";}else{At.navAdEnabled="";}switch(NeoConfig.mbPencil){case 7:At.hasSummary="";break;case 8:At.hasSummary="";At.hasImg="";break;case 9:At.hasHeadline="";break;case 10:At.hasHeadline="";At.hasImg="";break;case 11:At.hasSummary="";break;case 12:At.hasSummary="";At.hasImg="";break;case 14:At.hasSummary="";At.hasImg="";break;case 15:At.hasSummary="";At.hasImg="";Aa=1;break;case 16:At.hasSummary="";At.hasImg="";Ab=1;break;}if(Aa){}else{At.adSeparator="";}if(Ab){}else{At.altNavAd="";}Ao.innerHTML=l(At.mbcontentRec,NeoConfig.moneyballRec,null,null,NeoConfig.strings,At);}}}else{AP(o[p]," no-mb");}NeoGV.inject({html:Ae.join(""),el:Ag});S(Ag,"loading","");if(NeoConfig.ptrunc){setTimeout(function(){c();},100);}}function g(Ad,Aa,b){var Ac=NeoConfig,d,AY=(new Date()).setHours(0,0,0,0),w=AY-(518400*1000),AZ=(new Date()).setMonth(0,1),AX=Ac.strings,Ab=AX.dateObj;if(Ad>AY){d=b?Ab.mltrt:Ab.mlt;}else{if(Ad<AY&&Ad>w&&!(Aa)){d=b?Ab.mltr:Ab.mldt;}else{if(Ad>AZ){d=Ab.ml;}else{d=b?Ab.mlyr:Ab.mlyc||"{MM}/{dd}/{yy}";}}}return d;}function P(Ao,Am){var AX="d_",Af="m_",Ag="a_",Aa=NeoConfig.strings,w=Aa.dateObj,d=function(Au,At){return((Au.getFullYear()===At.getFullYear())&&(Au.getMonth()===At.getMonth())&&(Au.getDate()===At.getDate()));},As=function(At){return d((new Date()),At);},Ap=function(Au){var At=new Date(),Av=new Date(At.getFullYear(),At.getMonth(),At.getDate()-1);return d(Av,Au);};if(!Ao||!("getTime" in Ao)||isNaN(Ao.getTime())){return"";}var An=Am,Aj=Ao.getDay(),Al,Aq,Ac,Ab,AZ,Ae,Ai,Ad,AY,Ar,Ak,Ah,b=new RegExp(".{2}$");if(An.indexOf("{EEE}")>-1){if(As(Ao)){Al=w.t;}else{if(Ap(Ao)){Al=w.y;}else{Al=w[AX+Aj];}}An=An.replace("{EEE}",Al);}An=An.replace("{EE}",w[AX+Aj]);An=An.replace("{E}",w[AX+Ag+Aj]);Aq=Ao.getMonth();An=An.replace("{M}",Aq+1).replace("{MM}",b.exec("0"+(Aq+1)));An=An.replace("{MMMM}",w[Af+Aq]);An=An.replace("{MMM}",w[Af+Ag+Aq]);Ac=Ao.getDate();An=An.replace("{d}",Ac).replace("{dd}",b.exec("0"+Ac));An=An.replace("{yy}",Ao.getFullYear().toString().substring(2,4)).replace("{yyyy}",Ao.getFullYear());Ab=Ao.getHours();AZ=Ab;Ae=(AZ<12)?w.am:w.pm;if(AZ===0){AZ=12;}else{if(AZ>12){AZ-=12;}}An=An.replace("{h}",AZ).replace("{hh}",b.exec("0"+AZ));An=An.replace("{H}",Ab).replace("{HH}",b.exec("0"+Ab));Ai=Ao.getMinutes();An=An.replace("{m}",Ai).replace("{mm}",b.exec("0"+Ai)).replace("{A}",Ae);An=An.replace("{tt}",Ae).replace("{t}",Ae.substring(0,1));Ad=Ao.getSeconds();An=An.replace("{S}",Ad).replace("{SS}",b.exec("0"+Ad));AY=Ao.getTimezoneOffset();Ar=AY>0?"-":"+";AY=Math.abs(AY);Ak=Math.floor(AY/60);Ah=AY%60;Ak=b.exec("0"+Ak);Ah=b.exec("0"+Ah);An=An.replace("{Z}",Ar+Ak+Ah).replace("{ZZ}",Ar+Ak+":"+Ah);return An;}function M(){if(window.slowConnDlg){slowConnDlg.switchDisplay("dialupMask",0);
slowConnDlg.switchDisplay("dialupLoading",0);}Neo.Event.removeHandler(o,"click",e);Neo.Event.removeHandler(o[AJ]("shellcontent"),"click",n);Neo.Event.removeHandler(o[AJ]("shellcontent"),"dblclick",R);}function Q(){var b=o[AJ]("slot_LREC");if(b){b.style.display="none";}}function B(AX,Ad){var Ae,Ab='<span class = "name">{{name}}</span>',Af,AZ,Ac="{{name}}",Ag=", ",Aa="...",w,AY,b;if(!NeoConfig.ptrunc||!AX){return;}AX.setAttribute("id","currNameList");Af=x("name","span","currNameList");b=Af.length;if(b>2){Ad=Ad||AX.parentNode.offsetWidth-AL;if(AX.scrollWidth>Ad){AZ=[];for(AY=0;AY<Af.length;AY++){AZ.push(Af[AY].innerHTML);}w=1;do{Ae=Ab.replace(Ac,AZ[0])+Aa;for(var d=w;d>0;d--){if(d!==w){Ae+=Ag;}Ae+=Ab.replace(Ac,AZ[b-d]);}AX.innerHTML=Ae;}while(AX.scrollWidth<Ad&&w++<b);if(w>=2){if(AX.scrollWidth>AX.offsetWidth){Af=x("name","span","currNameList");k(Af[1].nextSibling);k(Af[1]);}}}}AX.removeAttribute("id");}function c(){var w,b,d;if(NeoConfig.ptrunc){d=x("name-list","span","msg-list");if(d.length>0){b=d[0].parentNode.offsetWidth-AL;for(w=0;w<d.length;w++){Neo.formatParticipantList(d[w],b);}}}}return{Event:F,fetchCSS:AD,supplant:l,mix:AO,exec:AT,replaceClass:S,getElementsByClass:x,globalClick:e,rightPaneClick:n,rightPaneDblClick:R,init:AB,drawFolders:r,drawMailboxes:D,insert:f,setUHImage:T,injectMessages:Z,injectSearchMessages:AC,async:s,getDateFormat:g,dateFormatter:P,sortFolders:m,msgHdrStack:j,openMessage:AK,removeEvents:M,hideLREC:Q,_getSysFolderName:V,_hasClass:AW,_addClass:AP,_removeClass:AS,_getNextSibling:G,_getPrevSibling:AG,_switchToInboxTab:X,formatParticipantList:B,formatParticipantLists:c};}());