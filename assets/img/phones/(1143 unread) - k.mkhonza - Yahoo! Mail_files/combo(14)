YUI.add("common-ui-dd",function(B){var F=150,H=B.one("body"),D=B.Node.create("<div></div>"),I=function(){var L=H.get("docHeight"),K=H.get("docWidth");D.setStyles({height:L+"px",width:K+"px"});},C=false,A,J=B.common.Utils;var G="transparent";if(B.UA.ie>0&&B.UA.ie<9){G="red";}D.setStyles({opacity:"0",position:"absolute",zIndex:"99999",overflow:"hidden",backgroundColor:G,display:"none",height:"5px",width:"5px",borderWidth:"0 0 0 2px !important"});D.set("id",B.stamp(D));B.on("window:resize",I);H.prepend(D);var E=function(P){this.handles=[];var S=P.scope,Q=false,O=P.node,R=function(T){this.dragging=true;A=null;this.startXY=[T.pageX,T.pageY];this.lastXY=T.target.getXY();T.dd=this;this.f1=O.on("mousemove",B.bind(L,this));this.f2=D.on("mousemove",B.bind(L,this));this.f3=H.on("mousemove",B.bind(L,this));if(P.start){P.start.apply(S,[T]);if(T.notDragging){this.dragging=false;}}},K=function(T){if(T.button===1&&!A&&T.target&&T.target.get("type")!=="text"){C=T.target;A=B.later(F,this,R,T);}},M=function(T){if(this.dragging){this.f1.detach();this.f2.detach();this.f3.detach();T.dd=this;D.setStyle("display","none");Q=false;this.dragging=false;if(P.end){P.end.apply(S,[T]);}T.halt(true);return false;}if(A){A.cancel();A=null;}},L=function(T){if(this.dragging&&P.move){if(!Q&&this.dragging){Q=true;I();D.setStyle("display","block");if(P.cursor){D.setStyle("cursor",P.cursor);}else{D.setStyle("cursor","default");}}T.dd=this;T.target.lastXY=[T.pageX,T.pageY];T.target.startXY=this.startXY;P.move.apply(S,[T]);return false;}};J.setSelect(D,false);J.setSelect(B.one("#msg-list"),false);var N=B.one("#msg-preview .comm-modes");if(N){J.setSelect(N,false);}J.setSelect(B.one("#shellnavigation"),false);if(P.dragSelector){this.handles.push(O.delegate("mousedown",B.bind(K,this),P.dragSelector));this.handles.push(O.delegate("mouseup",B.bind(M,this),P.dragSelector));}else{this.handles.push(O.on("mousedown",B.bind(K,this)));this.handles.push(O.on("mouseup",B.bind(M,this)));}this.handles.push(D.on("mouseup",B.bind(M,this)));this.handles.push(H.on("mouseup",B.bind(M,this)));};E.prototype.destroy=function(){var L=this.handles;if(L){var M=L.length,K;for(K=0;K<M;K++){if(L[K]){L[K].detach();L[K]=null;}}}};B.namespace("mail").DD=E;},"1.0.0",{requires:["node","common-utils"]});YUI.add("mail-ui-workspace-horizontal-slider",function(B){function A(){var G,J="rail-resize",C=B.one("#paneshell"),E=B.one("#shellnavigation"),F="pos.hslider",O=B.common.persist.getCookie(),D=B.one("#shellcontent"),M=NeoConfig.hSliderMinWidth,I=200,H=strings.str_tog_loadRTLCss,P=H?"right":"left",L=function(){return parseInt(D.get("offsetWidth"),10)-200;},N=function(){return parseInt(C.get("offsetWidth"),10);},S=function(T){E.setStyle("width",T);D.setStyle(P,T);};if(C&&D&&E){var K=L();if(parseInt(E.getStyle("width"),10)>K){S(I);O.set(F,I);}G=B.Node.one("#"+J);if(!G){G=B.Node.create('<div id="'+J+'"></div>');D.prepend(G);}var Q=function(U){var T=L();if(H){U.pageX=N()-U.pageX;}if(U.pageX<=M||U.pageX>=T){U.halt();return;}S(U.pageX);};var R=function(U){var T=L();if(H){U.pageX=N()-U.pageX;}if(U.pageX<=M){U.pageX=M+1;}if(U.pageX>=T){U.pageX=T-1;}S(U.pageX);O.set(F,U.pageX);};new B.mail.DD({end:R,move:Q,node:G,cursor:"col-resize",disable:B.one("#msg-list")});}}A.prototype={};B.namespace("mail.ui");B.mail.ui.WorkspaceHSlider=A;},"1.0.0",{requires:["node-base","common-persist-cookie-data","common-ui-dd"]});/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("stylesheet",function(e,t){function v(t,r){var o,a,f,l={},h,p,m,g,y,b;if(!e.instanceOf(this,v))return new v(t,r);if(t){if(e.Node&&t instanceof e.Node)a=t._node;else if(t.nodeName)a=t;else if(s(t)){if(t&&u[t])return u[t];a=n.getElementById(t.replace(/^#/,d))}if(a&&u[e.stamp(a)])return u[e.stamp(a)]}if(!a||!/^(?:style|link)$/i.test(a.nodeName))a=n.createElement("style"),a.type="text/css";s(t)&&(t.indexOf("{")!=-1?a.styleSheet?a.styleSheet.cssText=t:a.appendChild(n.createTextNode(t)):r||(r=t));if(!a.parentNode||a.parentNode.nodeName.toLowerCase()!=="head")o=(a.ownerDocument||n).getElementsByTagName("head")[0],o.appendChild(a);f=a.sheet||a.styleSheet,h=f&&"cssRules"in f?"cssRules":"rules",m="deleteRule"in f?function(e){f.deleteRule(e)}:function(e){f.removeRule(e)},p="insertRule"in f?function(e,t,n){f.insertRule(e+" {"+t+"}",n)}:function(e,t,n){f.addRule(e,t,n)};for(g=f[h].length-1;g>=0;--g)y=f[h][g],b=y.selectorText,l[b]?(l[b].style.cssText+=";"+y.style.cssText,m(g)):l[b]=y;v.register(e.stamp(a),this),r&&v.register(r,this),e.mix(this,{getId:function(){return e.stamp(a)},enable:function(){return f.disabled=!1,this},disable:function(){return f.disabled=!0,this},isEnabled:function(){return!f.disabled},set:function(e,t){var n=l[e],r=e.split(/\s*,\s*/),i,s;if(r.length>1){for(i=r.length-1;i>=0;--i)this.set(r[i],t);return this}return v.isValidSelector(e)?(n?n.style.cssText=v.toCssText(t,n.style.cssText):(s=f[h].length,t=v.toCssText(t),t&&(p(e,t,s),l[e]=f[h][s])),this):this},unset:function(t,n){var r=l[t],s=t.split(/\s*,\s*/),o=!n,u,a;if(s.length>1){for(a=s.length-1;a>=0;--a)this.unset(s[a],n);return this}if(r){if(!o){n=e.Array(n),i.cssText=r.style.cssText;for(a=n.length-1;a>=0;--a)c(i,n[a]);i.cssText?r.style.cssText=i.cssText:o=!0}if(o){u=f[h];for(a=u.length-1;a>=0;--a)if(u[a]===r){delete l[t],m(a);break}}}return this},getCssText:function(e){var t,n,r;if(s(e))return t=l[e.split(/\s*,\s*/)[0]],t?t.style.cssText:null;n=[];for(r in l)l.hasOwnProperty(r)&&(t=l[r],n.push(t.selectorText+" {"+t.style.cssText+"}"));return n.join("\n")}})}var n=e.config.doc,r=n.createElement("p"),i=r.style,s=e.Lang.isString,o={},u={},a="cssFloat"in i?"cssFloat":"styleFloat",f,l,c,h="opacity",p="float",d="";l=h in i?function(e){e.opacity=d}:function(e){e.filter=d},i.border="1px solid red",i.border=d,c=i.borderLeft?function(e,t){var n;t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a);if(s(e[t]))switch(t){case h:case"filter":l(e);break;case"font":e.font=e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=e.lineHeight=e.fontFamily=d;break;default:for(n in e)n.indexOf(t)===0&&(e[n]=d)}}:function(e,t){t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a),s(e[t])&&(t===h?l(e):e[t]=d)},f=function(t,s){var o=t.styleFloat||t.cssFloat||t[p],u=e.Lang.trim,f;try{i.cssText=s||d}catch(l){r=n.createElement("p"),i=r.style,i.cssText=s||d}o&&!t[a]&&(t=e.merge(t),delete t.styleFloat,delete t.cssFloat,delete t[p],t[a]=o);for(f in t)if(t.hasOwnProperty(f))try{i[f]=u(t[f])}catch(c){}return i.cssText},e.mix(v,{toCssText:h in i?f:function(t,n){return h in t&&(t=e.merge(t,{filter:"alpha(opacity="+t.opacity*100+")"}),delete t.opacity),f(t,n)},register:function(e,t){return!!(e&&t instanceof v&&!u[e]&&(u[e]=t))},isValidSelector:function(e){var t=!1;return e&&s(e)&&(o.hasOwnProperty(e)||(o[e]=!/\S/.test(e.replace(/\s+|\s*[+~>]\s*/g," ").replace(/([^ ])\[.*?\]/g,"$1").replace(/([^ ])::?[a-z][a-z\-]+[a-z](?:\(.*?\))?/ig,"$1").replace(/(?:^| )[a-z0-6]+/ig," ").replace(/\\./g,d).replace(/[.#]\w[\w\-]*/g,d))),t=o[e]),t}},!0),e.StyleSheet=v},"3.13.0",{requires:["yui-base"]});
YUI.add("mail-ui-messagesview-resize",function(H){H.namespace("mail.MessagesViewResize");var E=H.common.persist.getCookie(),G="pos.vslider",F=function(){};function A(J){var I,M,L=this,K=J.cursor||"row-resize";L.id=J.id||"rail-resize-hori";L.drag_node=M=H.one("#"+L.id);L.realParent=I=J.messagesview.get("parentNode")||J.messagesview.get("tabNode");L.inbox=I.one("div.inbox");L.tripane=I.one("div.tripane");L.on=(typeof J.on!==undefined)?J.on:1;L.msgsView=J.messagesview;L.OFFSET_STYLE=L.OFFSET_STYLE||"offsetHeight";L.INBOX_STYLE=L.INBOX_STYLE||"height";L.TRIPANE_STYLE=L.TRIPANE_STYLE||"top";L.DRAG_STYLE=L.DRAG_STYLE||"top";L.COOKIE_NAME=L.COOKIE_NAME||G;L.PREFIX=L.PREFIX||"";L.MIN_PANE=L.MIN_PANE||80;L.MIN_LIST=L.MIN_LIST||100;L.DEFAULT=L.DEFAULT||148;if(!M){L.drag_node=M=H.Node.create('<div style="position:absolute;z-index:1" id="'+L.id+'"></div>');M.setStyles(J.styles||{top:(E.get(G)||L.DEFAULT)});I.append(M);}(new H.mail.DD({scope:this,start:L.start,end:L.endUp,move:L.moveMouse,node:L.drag_node,cursor:K,disable:H.one("#msg-list")}));L.checkDisplay();}A.prototype={checkDisplay:function(){var N=this,L=E.get(N.COOKIE_NAME)||(N.DEFAULT+""),K,M,J,I;if(L){if(N.PREFIX&&L.charAt(0)===N.PREFIX){L=parseInt(L.substr(1),10);}L=parseInt(L,10);if(N.on){K=H.one("#shellcontent");M=K?K.get(N.OFFSET_STYLE):10000000;if((L+N.MIN_PANE)>M){J=M-N.MIN_PANE;I=J>N.MIN_LIST;if(I){N.inbox.setStyle(N.INBOX_STYLE,J);N.tripane.setStyle(N.TRIPANE_STYLE,J+6);N.drag_node.setStyle(N.DRAG_STYLE,J);E.set(N.COOKIE_NAME,(N.PREFIX+J));N.msgsView.positionToolbarItems(true);}else{N.msgsView.togglePreviewPane();N.autoClosed=true;}}}else{if(N.autoClosed&&NeoConfig.vertPane){K=H.one("#shellcontent");M=K?K.get(N.OFFSET_STYLE):10000000;if((L+N.MIN_PANE)<=M){N.autoClosed=false;N.msgsView.togglePreviewPane();}}}}},setDisplay:function(I){this.drag_node.setStyle("display",(I?"block":"none"));this.on=I?1:0;},start:F,endUp:function(){var I=parseInt(this.drag_node.getStyle("top"),10);E.set(G,I);H.fire("msgsview:splitterdone");},moveMouse:function(N){var M=this,J=N.pageY,P=H.one("body").get("offsetHeight"),K=H.one("#inboxcontainer").get("offsetTop"),O=H.one("#shellcontent").get("offsetTop"),L=H.one("#main").get("offsetTop")+H.one("#shellinner").get("offsetTop")+K+O,I=J-L,R=M.MIN_LIST,Q=M.MIN_PANE;if(J>(P-Q)){I=P-L-Q;}if(I<=R){I=R;}M.drag_node.setStyle("top",I-3);M.inbox.setStyle("height",I-3);M.tripane.setStyle("top",I-3);}};H.namespace("mail.ui").MessagesViewResize=A;function C(K){var I=["nsdate","nssubj","subj","from","to","date","size"];for(var J=0;J<I.length;J++){if(K.lastIndexOf(I[J])>-1){return I[J];}}}function D(K,L){var J=C(K.get("className")),I;if(J){I=Math.round(K.getData("col-right"));E.set("column_resize."+J+".width_pct",(100-(L+I)));E.set("column_resize."+J+".left_pct",L);}}var B={init:function(I){this.element=I;this.resizeableColumns=this.element.all(".flex > div");this.createResizeWidgets();},createResizeWidgets:function(){var J=H.one("div.flex");if(!J){return;}var I=J.get("offsetWidth");this.resizeableColumns.each(function(M,X){var T=this;if(!M.getData("col-right")){var Y,U,Q=M.get("offsetLeft"),V=M.get("offsetWidth");Q=Q>0?Q:0;V=V>0?V:0;Y=Math.round(Q/I*100);U=Math.round((I-(V+Q))/I*100);M.setData("col-left",Y);M.setData("col-right",U);}if(!X){return;}var L=H.Node.create('<div class="rail-resize" style="border: 3px solid transparent" id="resize-'+M.getAttribute("data-action")+'"></div>');M.append(L);var S=0,W,P,Z,N;var K=function(){var a=M.get("region");N=M.previous();while(N&&!N.getData("col-right")){N=N.previous();}P=N?N.get("region").left+75:75;W=a.left+a.width-75;Z=M.get("parentNode").get("offsetWidth");};var R=function(d){if(!S){S=d.target.startXY[0];}var h,g,b,e,f,c,a=d.target.lastXY[0];if(a<P||a>W){return false;}h=S-a;S=a;g=Math.round(h/Z*100*1000)/1000;b=H.StyleSheet("ColResize");e=Math.round(M.getData("col-left"))-g;c=C(M.get("className"));if(c){M.setData("col-left",e);H.all("div.flex ."+c).setStyles({left:e+"%"});b.set("div div.flex div."+c,{left:e+"%"});}f=Math.round(N.getData("col-right"))+g;c=C(N.get("className"));if(c){N.setData("col-right",f);H.all("div.flex ."+c).setStyle("right",f+"%");b.set("div div.flex div."+c,{right:f+"%"});}};var O=function(){var a=0;S=0;L.setStyle("left",-2);T.resizeableColumns.each(function(b){D(b,a);a+=(100-Math.round(b.getData("col-right")));});N=null;};(new H.mail.DD({scope:this,start:K,move:R,end:O,node:L,cursor:"col-resize"}));},this);}};H.all(".list-header").each(function(I){B.init(I);});H.namespace("mail.ui").MessagesViewColResize=B;H.namespace("test.MsgView.Resize");H.mix(H.test.MsgView.Resize,{retrieveClass:C,persistNode:D});},"1.0.0",{requires:["common-persist-cookie-data","stylesheet","node","common-ui-dd","common-persist-user-data"]});YUI.add("_shared_module_offscreen_bin_drag_drop",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_drag_drop={base:'<div class="msgDragProxy"> <i></i> <span></span> <b class="counter">{{num_emails_dragging}}</b></div>'};},"1.0.0");YUI.add("mail-ui-messagesview-dd",function(D){D.namespace("mail.MessagesViewDD");var A=NeoConfig,E=["Draft","%40C%40Chats"],B=10,C="MessagesView";D.mail.MessagesViewDD={PREVSUBNAV:"",setDD:function(Q){var T=D.one("#storm-listnav"),G=D.one("div#main"),N=false,R=100,H=D.one("#shellnavigation"),S=D.one("#custom-folders"),J=D.one("#Folders"),P=false,L={scrollTimer:null,dd:null,pageX:0,pageY:0,clientX:0,clientY:0,timerCB:null,start:function(V,Y,X,W,U,Z){this.timerCB=V;this.dd=Y;this.pageX=X;this.pageY=W;this.clientX=U;this.clientY=Z;this.scrollTimer=D.Lang.later(R,this,this.ssHandler,null,true);},update:function(U){this.pageY=U;},ssHandler:function(){this.timerCB(this.dd,this.pageX,this.pageY,this.clientX,this.clientY);},isActive:function(){return(this.scrollTimer!==null);},hasMoved:function(U,V){return(U!=this.clientX||V!=this.clientY);},clear:function(){if(this.scrollTimer){this.scrollTimer.cancel();delete this.scrollTimer;this.scrollTimer=null;}}};D.publish("dropMessages",{emitFacade:true,defaultFn:function(Y){var X=Y.msgs,V=Y.fromFid,W=Y.toFid,U=Y.theList;if(D.mail.ui.MessageEvents){D.mail.ui.MessageEvents.handleUI({action:"move",fid:W},V,U,X);if(W==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_trash"});}else{if(V==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_folder"});}}}}});D.publish("dropConvs",{emitFacade:true,defaultFn:function(Y){var X=Y.msgs,V=Y.fromFid,W=Y.toFid,U=Y.theList;if(D.mail.ui.ConvEvents){Q.handleUI({action:"move",fid:W},V,U,X);if(W==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_trash"});}else{if(V==="Trash"){D.fire("darlaEvent",{action:"dd_msg_to_folder"});}}}}});var F=function(W){var V=D.one("body");D.mail.MessagesViewDD.PREVSUBNAV=V.getAttribute("data-open");var U=function(Z){function X(c){var b=true,Y=Z.common.Utils.substitute(Z.ui.Templates._shared_module_offscreen_bin_drag_drop.base,{num_emails_dragging:c.arr.length},null,null,strings);if(A.hasConv){for(var a in c.map){var d=Q.msgList.getMsgFid(c.map[a]);if(d!=="Draft"&&d!=="Sent"){b=false;break;}}}else{b=false;}if(W.dd.dragging&&c.arr.length&&Z.Array.indexOf(E,Q.fid)===-1&&!b){W.dd.proxy=Z.Node.create(Y);Z.one("body").prepend(W.dd.proxy);W.dd.proxy.setXY([-100,-100]);W.dd.shellbottom=H.get("winHeight");W.dd.shelltop=H.getY();Z.fire(C+":dragstart");}else{W.notDragging=true;}}if(Q.hasMsgList){Q.msgList.vlist.getSelected(X);}else{X([Q.msgPane.get("message")]);}P=V.getAttribute("data-open")==="Folders"?true:false;};L.clear();if(W.target.hasClass("list-view-items")){W.notDragging=true;return;}if(!N){D.use(A.hasConv?"mail-ui-convevents":"mail-ui-messageevents",U);N=true;}else{U(D);}};var O=function(W,Y,X){var Z,V=D.mail.MessagesViewDD.currentDrop,U,a;if(Y.getAttribute("data-fid")){Z=Y.getAttribute("data-fid");if(X){U=Y.one("a")?Y.one("a"):Y;}else{U=Y.one("i")?Y.one("i"):Y;}if(W.proxy.one("span").inRegion(U)&&Q.fid!==Z&&Z!=="Draft"&&Z!=="Sent"&&Z!=="%40C%40Chats"){if(V){V.removeClass("popping");}Y&&Y.addClass("popping");D.mail.MessagesViewDD.currentDrop=Y;a=true;}else{if(Y.hasClass("popping")){Y.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;}}}return a;};var M=function(U){if(L.isActive()&&!L.hasMoved(U.clientX,U.clientY)){return;}L.clear();I(U.dd,U.pageX,U.pageY,U.clientX,U.clientY);};var I=function(e,a,Z,X,V){var g,Y,f,d,U,b,h,W=e.shelltop,c=e.shellbottom;d=Y=f=30;if(e.proxy){if(e.proxy._node){e.proxy.setStyle("top",Z-10);e.proxy.setStyle("left",a-1);}if(!P){if(e.proxy.inRegion(J)){D.fire("navigation:switch",{"type":"Folders"});G.addClass("dragging-message");P=true;if(A.nav){J.addClass("nav-open");}}}if(e.proxy.inRegion(H)){if(e.proxy.inRegion(S)||(S.one(".listnav-subfolder")&&e.proxy.inRegion(S.one(".listnav-subfolder")))){S.all("li").each(function(i){O(e,i,false);});}else{if(e.proxy.inRegion(T)){T.all("li.sysfolder").each(function(i){var j=O(e,i,true);if(j){D.fire("navigation:switch",{"type":"none"});P=false;}});}else{if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;}}}if(Z<W+d){U=b=true;}else{if(Z>c-Y){U=true;b=false;}}if(U){if(b){g=H.get("scrollTop");H.set("scrollTop",g-f);h=Z;}else{g=H.get("scrollTop");H.set("scrollTop",g+f);h=Z;}if(!L.isActive()){L.start(I,e,a,Z,X,V);}L.update(h);}else{L.clear();}}else{if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");D.mail.MessagesViewDD.currentDrop=null;L.clear();}}}};var K=function(Y){var U,X,V,Z,W=D.mail.MessagesViewDD.PREVSUBNAV;L.clear();if(Y.dd.proxy){Y.dd.proxy.remove(true);if(D.mail.MessagesViewDD.currentDrop){D.mail.MessagesViewDD.currentDrop.removeClass("popping");U=D.mail.MessagesViewDD.currentDrop.getAttribute("data-fid");Z=A.hasConv;V=Z?"dropConvs":"dropMessages";X=function(a){if(Q.hasMsgList){a.fire(V,{fromFid:Q.fid,toFid:U,theList:Q.msgList});}else{a.fire(V,{fromFid:Q.fid,toFid:U,msgs:[Q.msgPane.get("message")]});}};if(!N){D.use(Z?"mail-ui-convevents":"mail-ui-messageevents",X);N=true;}else{X(D);}}else{if(Y.dd.originNode){if(Math.abs(Y.pageX-Y.dd.startXY[0])<=B&&Math.abs(Y.pageY-Y.dd.startXY[1])<=B){D.one(Y.dd.originNode.simulate("click"));}}}}D.mail.MessagesViewDD.currentDrop=null;D.fire(C+":dragend");G.removeClass("dragging-message");D.fire("navigation:switch",{"type":W});D.mail.MessagesViewDD.PREVSUBNAV="";};(new D.mail.DD({start:F,move:M,end:K,node:D.one("div.list-view-items")}));}};},"1.0.0",{requires:["mail-model-datastore","common-utils","node-base","common-ui-dd","_shared_module_offscreen_bin_drag_drop"]});