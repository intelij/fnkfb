YUI.add("_shared_module_offscreen_bin_modal_colors_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_colors_rollup={base:'<div id="theme-preview-dialog" class="modal modal-settings xxl"> <h2 class="modal-hd"> {{str_opt_colors_dlg_hd}} <span class="icon close" data-action="cancel" title="{{str_btn_close}}"></span> </h2> <p class="description"> {{str_opt_colors_dlg_bd}} </p> <div class="modal-bd"> <div role="listbox" aria-describedby="list-instr" class="themes content"> <div class="inner"> {{get_options_themes}} </div> </div> </div> <div class="modal-ft"> <span id="doneModalOverlay" class="btn left right default" data-action="ok"><a href="#">{{str_done}}</a></span> </div></div> ',selected:"theme-selected",hidden:"hidden",aria_selected:'aria-selected="true"',lightState:'<div class="l-separator t-normal" title="Black Tint"> <span>A</span> </div> <div class="r-separator t-light" title="White Tint"> <span>A</span> </div> <!-- <div class="icon icon-settings t-lightbulb"></div> --> ',themes:'<div role="presentation" id="{{id}}" class="theme {{selected}}{{hidden}}"> <a role="option" {{aria_selected}} href="{{href}}" title="{{name}}"><b {{thumbnail_class}}style="{{thumbnail_style}}"></b></a> {{lightState}} </div> ',get_options_themes:"{{themes}} "};},"1.0.0");YUI.add("mail-ui-themes",function(B){var E=B.common.Utils.substitute,D=B.common.net.SessionMgr,F=B.ui.Templates._shared_module_offscreen_bin_modal_colors_rollup,A=NeoConfig.themeList,I=NeoConfig.theme,G=I.id,C={"seascape-evening":1,"brush-strokes":1,"munielles":1,"banana-leaf":1},H;H=function(){var P=null,M=[],L,J,R,Q;function O(S){if(S){if(A[S]){return true;}}return false;}B.on("changeTheme",function(S){if(S.theme){J(S.theme);}});B.on("saveTheme",function(S){if(S.theme&&O(S.theme)){R(S.theme);}});function K(){var T=P.get("contentBox"),Y,W=I.url,S=T.one("div.inner"),X,V,U,Z;Z=B.later(50,{},function(){U=B.one("body").on("click",function(){X=true;V();B.fire("mt:click",{"action":"themechooser_exit_outside"});P.destroy();});});P.on("destroy",function(){if(O(Y)&&X){R(Y);}if(Z){Z.cancel();}if(U){U.detach();}B.one("html").removeClass("themes");});B.fire("mt:view",{"action":"themechooser"});T.on("click",function(b){var c=B.common.Utils.getDataAction(b),a=c.action;if(a==="ok"||a==="cancel"){B.fire("mt:click",{"action":("themechooser_exit_"+(a==="ok"?"done":"close"))});b.preventDefault();X=true;V();P.destroy();}b.stopPropagation();});S.plug(B.comms.ui.NodeFocusBase,{descendants:".theme a",keys:{next:"39",previous:"37"}});T.one(".themes").delegate("click",function(c){var b=c.currentTarget,a,d;if(b.hasClass("t-lightbulb")){S.toggleClass("lit");d=b.ancestor(".theme");Y=d.get("id");}else{if(b.hasClass("t-light")){d=b.ancestor(".theme");Y=d.get("id")+"-no-frost";}else{if(b.hasClass("t-normal")){d=b.ancestor(".theme");Y=d.get("id");}else{d=b;Y=d.get("id");}}}Q=S.hasClass("lit")&&C[Y];if(Q){Y+="-no-frost";}c.halt();B.fire("mt:click",{"action":"themechooser_select","append":{"actnDtl":Y}});a=S.one(".theme-selected");if(a){a.one("a").removeAttribute("aria-selected");a.removeClass("theme-selected");}d.addClass("theme-selected");d.one("a").set("aria-selected",true);J(Y);c.stopPropagation();},"div.theme, .t-lightbulb, .t-light, .t-normal");V=function(){if(Y){I.id=Y;I.url=W;}};T.one(".themes").delegate("dblclick",function(){X=true;V();P.destroy();},"div.theme");T.on("keydown",function(a){switch(a.keyCode){case 38:case 40:a.preventDefault();a.target.simulate("keydown",{keyCode:a.keyCode-1});break;case 13:if(a.target.get("nodeName").toLowerCase()!=="a"){P.destroy();}break;case 32:if(a.target.get("nodeName").toLowerCase()==="a"){a.preventDefault();a.target.simulate("click");}break;case 27:X=true;V();P.destroy();break;}});}J=function(g,e,h){var T=B.mail.ui.themes,V=B.one("body"),Y=V.one(".attribution-bar"),b=Y.one(".attribution"),X=Y.all(".att-user"),S=Y.one(".att-solid"),i=Y.one(".att-link"),c=".css",f,j,d=V.one("#bg"),l,U,m,a,Z,W=NeoConfig.image_path;l=A[g];f=I.base+I.root+g+I.build+c;if(l.img){f+="&"+I.root+g+"-bg"+I.build+c;if(l.img["bg-l"]){if(l.img["bg-l"].indexOf("http")===0){W="";}U=W+l.img["bg-l"];}if(l.img["bg-h"]){m=W+l.img["bg-h"];}}function k(){B.Get.css(f,{onSuccess:function(n){I.id=g;if(l.misc.logo_color&&l.misc.logo_color==="white"){V.addClass("lt");}else{V.removeClass("lt");}V[l.img?"addClass":"removeClass"]("pc-photo");if(m){if(!NeoGV){NeoGV={};}Z=new Image();Z.onload=function(){d.setStyle("backgroundImage","url("+W+l.img["bg-h"]+")");d.addClass("loaded");if(e){e();}};setTimeout(function(){Z.src=m;},0);}else{if(e){e();}}if(n.data.checkedTid===n.tId){return;}n.data.checkedTid=n.tId;if(L){M.push(L);}L=n;setTimeout(function(){var o=M.shift();while(o){if(o&&o.purge){o.purge();}o=M.shift();}},600);B.fire("themes:changeSuccess",{"name":g,"noRotate":h});},data:{checkedTid:null}});}if(G!==g){B.common.Utils.rocketstats.stat("themes","changeTheme:"+g);j=new B.EventTarget();j.publish("ucs:themeChange",{broadcast:2,emitFacade:true});j.fire("ucs:themeChange");d.removeClass("loaded");if(U){a=new Image();a.onload=k;setTimeout(function(){a.src=U;},0);}else{k();}if(l){if(l.misc.attribution){if(i&&l.misc.attribution.url){X.item(0).setHTML(l.misc.attribution.text);i.setAttribute("href",l.misc.attribution.url);b.replaceClass("no-flickr","flickr");}else{X.item(1).setHTML(l.misc.attribution.text);b.replaceClass("flickr","no-flickr");}}else{S.setHTML(strings["str_opt_colors_"+g+"_attr"]||l.label);}if(l.js){B.use("themes-"+g,function(n){T=T||n.mail.ui.themes;T["themes-"+g].init();});}}if(T&&T["themes-"+G]&&T["themes-"+G].destroy){T["themes-"+G].destroy();}G=g;}B.fire("themes:change",{css:I.base+I.root+g+I.build+".css",name:g,info:{build:(!I.build||I.build==="")?"dev":I.build,base:I.base,root:I.root,meta:l}});};function N(){var a,T,Y="",V,e,W,S=0,b,Z,U,d=window.devicePixelRatio&&window.devicePixelRatio>1,f,X,c;B.one("html").addClass("themes");if(!P||P.getAttrs().destroyed){A={};W=[];for(b in NeoConfig.themeList){if(NeoConfig.themeList.hasOwnProperty(b)){W.push(NeoConfig.themeList[b]);}}S=W.length;for(b=0;b<S;b++){X=W[b];a=X.id;A[a]=X;if(X.img){Z="";if(d){f=X.img["bg-t-r"]||X.img["bg-t"];}else{f=X.img["bg-t"];}if(f.indexOf("http")===0){c="";}else{c=NeoConfig.image_path;}U="background-image:url('"+c+f+"')";}else{Z='class="color"';U="";}T={selected:a===I.id?F.selected:"",hidden:a.indexOf("no-frost")>-1?F.hidden:"",aria_selected:a===I.id?F.aria_selected:"",id:a,name:strings["str_opt_colors_"+a+"_attr"]||X.label,thumbnail_class:Z,thumbnail_style:U,href:"#",lightState:""};Y+=E(F.themes,T,null,null,strings);}V=E(F.base,{get_options_themes:Y,theme_cancel_btn:strings.str_cfg_tog_theme_cancel?F.theme_cancel_btn:""},null,F,strings);P=new B.comms.ui.Dialog({template:V,centered:true,clearMask:true,noScroll:true});P.render();K();P.show();if(Q){P.get("contentBox").one(".themes").addClass("lit");}e=B.one("#theme-preview-dialog .theme a");if(e){e.focus();}B.one("html").removeClass("dlg-show");setTimeout(function(){if(B.one("#theme-preview-dialog")){P.center();}},1000);}B.common.Utils.rocketstats.stat("themes","showDialog");}R=function(U){var T,V,S;if(!U){return;}S=B.common.Utils.parseQueryString();T=NeoConfig.launch_protocol+window.document.location.host+"/"+NeoConfig.scriptBase+"/setTheme?theme="+U;if(S&&S.storm){T+="&storm=1";}V={success:function(){},failure:function(){},suppressCodes:["*"]};
D.request(T,null,V,"GET",null,true);};B.mix(this,{showThemesDialog:N,setThemeUDBPreference:R,changeTheme:J});};B.namespace("mail.ui").Themes=new H();},"1.0.0",{requires:["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_colors_rollup","json-parse","modal_css","options-pages_css"]});YUI.add("mail-ui-onboarding",function(B){var F=B.common.Utils.substitute,E=B.common.net.SessionMgr,H=B.ui.Templates._shared_module_offscreen_bin_modal_onboard_rollup,C=B.common.persist.UserData,G=B.common.Utils,D=NeoConfig.theme.id,A=NeoConfig.theme.isRandom,I;B.namespace("mail.ui.Onboarding");I=function(){var M=null;B.on("finishConvOnboarding",function(){O();});function P(){var R=M.get("contentBox"),U=D,Q=R.one("div.inner"),T=A?true:false;M.on("destroy",function(){if(T){B.fire("saveTheme",{"theme":U});G.rocketstats.stat("onboarding","savetheme");G.rocketstats.stat("onboarding","savetheme_"+U);if(T&&U===D){G.rocketstats.stat("onboarding","defaultselected");}}B.one("body").removeClass("onboard");setTimeout(function(){B.fire("showThemesOnboarding");},300);});R.on("click",function(W){var X=B.common.Utils.getDataAction(W),V=X.action;if(V==="ok"||V==="cancel"){W.preventDefault();if(V==="ok"){G.rocketstats.stat("onboarding","gotoinbox");if(U!==D){T=true;}}else{G.rocketstats.stat("onboarding","closebutton");M.set("closeAction","cancel");B.fire("changeTheme",{"theme":D});}M.destroy();}});Q.plug(B.comms.ui.NodeFocusBase,{descendants:".theme a",keys:{next:"39",previous:"37"}});function S(X){var W=X.currentTarget,V=Q.one(".theme-selected");U=W.get("id");X.halt();if(V){V.one("a").removeAttribute("aria-selected");V.removeClass("theme-selected");}W.addClass("theme-selected");W.one("a").set("aria-selected",true);B.fire("changeTheme",{"theme":U});G.rocketstats.stat("onboarding","themechange");}R.one(".themes").delegate("click",S,"div.theme");R.one(".themes").delegate("dblclick",function(){M.destroy();},"div.theme");R.on("keydown",function(X){var W=X.target,V=W.simulate;switch(X.keyCode){case 38:case 40:X.preventDefault();V("keydown",{keyCode:X.keyCode-1});break;case 13:if(W.get("nodeName").toLowerCase()!=="a"){M.destroy();}break;case 32:if(W.get("nodeName").toLowerCase()==="a"){X.preventDefault();V("click");}break;case 27:B.fire("changeTheme",{"theme":D});M.destroy();break;}});}function N(){var T,R=NeoConfig.themeList?NeoConfig.themeList:{},S=[],Q={"first-light":1,"seascape-evening":1,"droplet-green":1,"guadiana":1,"dark-abstract":1,"cool-abstract":1,"purple":1,"deep-blue":1};if(typeof R[NeoConfig.theme.id]!=="undefined"){S.push(R[NeoConfig.theme.id]);}for(T in Q){if(T!==NeoConfig.theme.id&&typeof R[T]!=="undefined"){S.push(R[T]);}}for(T in R){if(T!==NeoConfig.theme.id&&Q[T]!==1){S.push(R[T]);}}return S;}function K(){if(!M||M.getAttrs().destroyed){var V,R,T="",S,Z,X=(parseInt(NeoConfig.isBizmail,10)==="1")?G.escapeHtml(C.get("userSendPref.defaultFromAddress")):G.escapeHtml(C.get("userSendPref.defaultFromName")),Q=N(),Y=window.devicePixelRatio&&window.devicePixelRatio>1,a,U;for(U in Q){V=Q[U];if(V.img){if(Y){a=V.img["bg-t-r"]?V.img["bg-t-r"]:V.img["bg-t"];}else{a=V.img["bg-t"];}}R={selected:V===D?H.selected:"",aria_selected:V===D?H.aria_selected:"",id:V.id,name:strings["str_opt_colors_"+V.id+"_attr"]||V.id,thumbnail_class:(V.img?"":'class="color" '),thumbnail_img:V.img?"<img src='"+NeoConfig.image_path+a+"' width='150px' height='100px'>":"",href:"#"};T+=F(H.themes,R,null,null,strings);}S=F(H.base,{get_onboard_themes:T,theme_cancel_btn:strings.str_cfg_tog_theme_cancel?H.theme_cancel_btn:"",user_name:X,att:NeoConfig.partnerType=="sbc"?H.att:H.att_else},null,H,strings);M=new B.comms.ui.Dialog({template:S,centered:true,clearMask:true,noScroll:true});M.render();P();M.show();J();G.rocketstats.stat("onboarding","view");Z=B.one("#onboard-dialog .theme a");Z&&Z.simulate("click");var W=B.one(".yui3-overlay-clearmask");if(W){B.one("body").addClass("onboard");}B.one("html").removeClass("dlg-show");setTimeout(function(){if(B.one("#onboard-dialog")){M.center();}},1000);}}function J(){var R,S,Q;Q=yui.common.Utils.parseQueryString();R=NeoConfig.launch_protocol+document.location.host+"/"+NeoConfig.scriptBase+"/setOnboardPC";if(Q&&Q.storm){R+="?storm=1";}S={success:function(){},failure:function(){},suppressCodes:["*"]};E.request(R,null,S,"GET",null,true);}function O(){var R,S,Q;Q=yui.common.Utils.parseQueryString();R=NeoConfig.launch_protocol+document.location.host+"/"+NeoConfig.scriptBase+"/setConvTutorial";if(Q&&Q.storm){R+="?storm=1";}S={success:function(){},failure:function(){},suppressCodes:["*"]};E.request(R,null,S,"GET",null,true);}function L(){var S=[],T=[],R=[],Q=[];B.on("onboard:tip",function(b){var W=b.node;if(!W){return;}var d=b.template,X=b.fn,V=b.dir,a=b.offset,g=W.getXY(),U=[0,0],Y={},f=b.width||320,Z,c;Z=B.Node.create("<div class='onboardtip'></div>");B.one("body").appendChild(Z);if(!a){a=[0,0];}if(NeoConfig.isRTL){g[0]=parseInt(B.one(document.body).getComputedStyle("width"),10)-g[0]-parseInt(W.getComputedStyle("width"),10);}if(V==="right"){U[0]=g[0]+a[0]-f;}else{U[0]=g[0]+a[0];}U[1]=g[1]+a[1];Z.hide();Z.set("innerHTML",d);Y[NeoConfig.isRTL?"right":"left"]=U[0];Y.top=U[1];Z.setStyles(Y);Z.show();c=Z.on("click",X);if(b.isPersistentTooltip===true){R.push(Z);Q.push(c);}else{T.push(c);S.push(Z);}});B.on("onboard:tipclose",function(){B.Array.each(S,function(U){U.remove();});S=[];B.Array.each(T,function(U){U&&U.detach();});});B.on("onboard:tipclosePersistent",function(U){var V=U.fade||false;B.Array.each(R,function(W){W.hide(V,null,function(){this.remove();});});R=[];B.Array.each(Q,function(W){W&&W.detach();});});}B.mix(this,{showDialog:K,setOnboardingTime:J,setConvTutorialTs:O,setupOnBoardToolTip:L});};B.mail.ui.Onboarding=new I();B.mail.ui.Onboarding.setupOnBoardToolTip();},"1.0.0",{requires:["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_onboard_rollup","json-parse","modal_css","options-pages_css","node-event-simulate","mail-ui-themes"]});YUI.add("minty_module_offscreen_bin_searchsuggestion_callout_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_offscreen_bin_searchsuggestion_callout_rollup={base:"<div id=\"searchSuggestionOnboarding\" class='searchtooltip multitasktooltip yui3-tooltips'> <div class='tooltip-arrow-up'> <div class='inner-arrow'></div> </div> <div class='modal tooltips-text' tabindex='0'> <h2 class='modal-hd'> <span class='tutorial-btn close' title='{{str_btn_close}}'></span> </h2> <div class=\"modal-bd\"> <div class=\"bd\"> <div class=\"ac-title\">{{str_search_suggestion_onboarding_title}}</div> <div class=\"ac-text\" >{{str_search_suggestion_onboarding_text}}</div> </div> </div> </div></div>"};},"1.0.0");YUI.add("searchautocomplete",function(B){var C=NeoConfig,G=C.searchField||B.one("#mnp-search_box"),S=C.searchField||G.one("input")||B.one("#mnp-search_box"),L=B.contacts,K=L.utils,D=B.common.Utils,H=B.mail.persist.MetaData,J=D.substitute,F=(NeoConfig.searchSuggestions===1),E=F?3:5;B.once("contacts:api:loaded",function(){O();});if(F){B.once("xobni:xobnifiedDetermined",function(){O();});B.on("search:config",function(T){if(B.ACSearchWidgetInst){if(T.mode&&(T.mode==="cal"||T.mode==="contacts")){B.ACSearchWidgetInst.disable();}else{B.ACSearchWidgetInst.enable();}}});if(F){P();}}S.on("blur",function(T){T.halt();if(B.ACSearchWidgetInst&&!B.ACSearchWidgetInst.isMousedOver()){B.ACSearchWidgetInst&&B.ACSearchWidgetInst.hide();}});function P(){var V=H.get("hasShownSearchSuggestionOnboarding"),U=document.activeElement&&(document.activeElement.className.indexOf("yucs-search-input")!==-1),T=J(B.ui.Templates.minty_module_offscreen_bin_searchsuggestion_callout_rollup.base,undefined,undefined,undefined,strings);if((!V&&!NeoConfig.onboardPC&&!NeoConfig.showTabsCallout&&!NeoConfig.showOlympicCallout&&!NeoConfig.showNavCallout&&!U&&!NeoConfig.showingEnhancrTooltip)||NeoConfig.ssOnboarding===1){H.set("hasShownSearchSuggestionOnboarding",true);H.save();NeoConfig.showPSOnboarding=true;B.fire("onboard:tip",{node:B.one(".yucs-search-input"),template:T,fn:function(W){B.fire("onboard:tipclose");W.halt();},dir:"left",width:280,offset:[0,50]});B.one("document").once("click",function(){B.fire("onboard:tipclose");});}}function I(){B.fire("search:focused");O();if(NeoConfig.recentSearch){if(B.ACSearchWidgetInst&&!B.ACSearchWidgetInst.get("disabled")){B.ACSearchWidgetInst.triggerQuery();}}}S.on("focus",I);S.on("keydown",function(T){var X=this,U=T.keyCode,c=X.get("value");T.stopPropagation();switch(U){case 13:if(T.ctrlKey||T.metaKey){return;}var a,d=null,b=null,Y=null,W=false,V=false,Z;d=B.ACSearchWidgetInst.get("selectedItem");a=B.ACSearchWidgetInst.get("contentBox");b=a.one(".ac-search-mail");Y=a.one(".ac-search-web");if(d){if(b&&b.contains(d)){B.mail.ui.RecentSearches.handleSelection(V,c);W=true;}else{if(Y&&Y.contains(d)){Z=new B.EventTarget();Z.publish("ucs:webSearch",{broadcast:2,emitFacade:true});Z.fire("ucs:webSearch",{query:c});B.fire("mt:click",{action:"wb_srch"});W=true;}else{V=true;}}}if(!W){if(B.ACSearchWidgetInst&&B.ACSearchWidgetInst.isVisible()&&d){B.ACSearchWidgetInst.handleEnter(T,B.ACSearchWidgetInst);}else{if(F){B.mail.ui.RecentSearchesFederatedACAadapter.handleSearchBarQuery(c);if(B.ACSearchWidgetInst.abort){B.ACSearchWidgetInst.abort();}}else{B.mail.ui.RecentSearches.handleSelection(V,c);}}B.ACSearchWidgetInst.hide();T.halt();}if(NeoConfig.showPSOnboarding===false){B.fire("onboard:tipclose");NeoConfig.showPSOnboarding=null;}break;default:if(T.ctrlKey||T.metaKey){return;}}});function O(){if(K.areContactsLoaded()&&(!F||!B.Lang.isUndefined(B.xobniContacts.isXobnified()))){Q();}}function Q(){if(C.isCorpmail){B.use("ac-corp-widget",A);}else{A();}}function A(){var e,d,a=false;if(!B.ACSearchWidgetInst){a=true;e=J(B.ui.Templates._shared_module_offscreen_bin_compose.base,{},null,null,strings,B.ui.Templates);if(F){d=B.comms.ui.ACFederated.ACFederatedShim;}else{d=C.isCorpmail?L.ui.ACCorpWidget:L.ui.ACWidget;}B.one(document.body).append(e);var V=B.one("#ac-to-results"),T="ac-search-results",c=V.cloneNode();c.setAttribute("id",T);V.get("parentNode").append(c);B.ACSearchWidgetInst=new d({acNode:G,acTarget:S,contentBox:"#"+T,selectFirst:false,itemNodeToValue:N}).setAlign().render();if(F){var Z=B.xobniContacts.isXobnified()?B.mail.ui.XobniContactsSearch:B.comms.FilterContactsFederatedACAdapter;var U,W,Y,b,X=NeoConfig.enableWebAutocomplete&&NeoConfig.expBucketId==="CMUSGRWAC01"&&NeoConfig.intl==="us"&&NeoConfig.lang==="en-US";U=[Z.getDataFetcher({limit:E}),B.mail.ui.RecentSearchesFederatedACAadapter.getDataFetcher({limit:E}),B.mail.ui.ACMessageSearch.getDataFetcher({limit:E})];W=[Z.getRenderer(),B.mail.ui.RecentSearchesFederatedACAadapter.getRenderer(),B.mail.ui.ACMessageSearch.getRenderer()];Y=[Z.getSelectionHandler(),B.mail.ui.RecentSearchesFederatedACAadapter.getSelectionHandler(),B.mail.ui.ACMessageSearch.getSelectionHandler()];b=function(){U.push(B.mail.ui.ACAdvancedSearchAdapter.getDataFetcher());W.push(B.mail.ui.ACAdvancedSearchAdapter.getRenderer());Y.push(B.mail.ui.ACAdvancedSearchAdapter.getSelectionHandler());B.ACSearchWidgetInst.registerDataFetchers(U);B.ACSearchWidgetInst.registerRenderers(W);B.ACSearchWidgetInst.registerSelectionHandlers(Y);};if(X){B.use("web-search-autocomplete",function(f){U.push(f.mail.ui.WebSearchAutocomplete.getDataFetcher({limit:5}));W.push(f.mail.ui.WebSearchAutocomplete.getRenderer());Y.push(f.mail.ui.WebSearchAutocomplete.getSelectionHandler());b();});}else{b();}}}else{if(B.ACSearchWidgetInst.get("alignNode")!==G){B.ACSearchWidgetInst.get("ac").destructor();B.ACSearchWidgetInst.refresh({acNode:G,acTarget:S,width:G.getStyle("width"),selectFirst:false}).setAlign().render();}}if(!F){B.ACSearchWidgetInst.get("ac").detach("ac:query");B.ACSearchWidgetInst.get("ac").on("ac:query",function(l){if(B.ACSearchWidgetInst.get("disabled")){return;}var f=this,j=l.value,k,i=this.get("badResult"),h;if(i){h=[];h.queryStr=j;if(l.value.toLowerCase().indexOf(i.toLowerCase())>=0){this.fire("ac:load",{results:h,query:l.value});R(B.ACSearchWidgetInst,j);return;}}if(K.areContactsLoaded()){var g=new B.comms.FilterContacts();g.updateFilterItems(j);k=g.fastMatch(true);k.queryStr=j;if(k.length>E){k.length=E;}f.reload.call(f,k);B.ACSearchWidgetInst.get("contentBox").all("li").each(function(n,m){n.prepend('<span class="ac-label small">'+(m===0?strings.str_autocomplete_people:"&nbsp;")+"</span>");});}R(B.ACSearchWidgetInst,j);});}if(a&&document.activeElement===S.getDOMNode()){I();}}function M(){B.ACSearchWidgetInst.setSize();var T=B.ACSearchWidgetInst.get("contentBox");T.all("span.ac-remove-item").remove();if(B.ACSearchWidgetInst.get("data").length>0){B.fire("mt:view",{action:"hdr_ac_sugg"});}else{B.fire("mt:view",{action:"hdr_ac"});
}if(!C.has2ButtonSearch){T.setStyle("display","block");}}function R(V,U){var T=["ycorp","sky"];if(NeoConfig.recentSearch){B.mail.ui.RecentSearches.addACSearchItems(V,E);}M(U);if(C.enableAdvancedSearch&&(!C.partnerType||B.Array.indexOf(T,C.partnerType)!==-1)){B.mail.ui.AdvancedSearch.addAdvancedSearchItem(V);B.ACSearchWidgetInst.show().get("contentBox").setStyle("display","block");}}function N(U){var V=null,T=U&&U.one("[data-email]");if(T){V=T.getAttribute("data-email");}if(!V){T=U.one("[data-name]");V=T&&T.get("text");}if(!V){T=U.one(".ac-value");V=T&&T.get("text");}return V;}},"1.0.0",{requires:["ac-widget","filter-contacts","mail-recent-searches","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","common-utils","comms-utils","common-persist-user-data","mail-ui-searchbar","mail-ui-advanced-search","mail-persist-meta-data","mail-ui-onboarding","minty_module_offscreen_bin_searchsuggestion_callout_rollup"]});YUI.add("mail-ui-boss",function(D){var R=NeoConfig,U="boss",H="boss-hide",O="boss-passive",b=500,F=500,N="boss",T=R.bossThemes,B=R.bossMt,V=R.bossSky,Q=R.bossSS,M=D.UA.ie&&D.UA.ie<9,X=D.one("body"),Z=X.one(".attribution-bar"),J=Z.one(".attribution"),E=X.one(".boss-mask"),I,K,L=D.common.Utils.rocketstats.bucketStat,S=D.mail.Tabs,A,G,C,P,W=[],a;a=function(){function l(){return X.hasClass(U);}function h(o){X.addClass(U);document.activeElement.blur();Z.removeClass(H);W.push(X.on("keydown",g));if(o&&C&&o==="multitask"){C.show();}else{if(A){A.show();if(C&&C.arePreviewsEnabled()){C.show();}if(Q&&!M){D.use("mail-ui-boss-screensaver",function(p){if(!G){G=p.mail.ui.Boss.Screensaver;}if(l()){G.enable();}});}}}if(V){D.fire("darlaEvent",{action:"boss"});}P=(new Date()).getTime();}function k(p){var q,o;while(W.length>0){W.pop().detach();}if(C&&C.isActive()){C.hide();}if(A&&A.isActive()){A.hide();}if(p&&V){o=S.getActiveTab();if(o){o.set("active",0);S.switchToTab(o);}}X.removeClass(U);q=((new Date()).getTime()-P)/1000;L("boss","time:active",q);D.fire("boss:hide");}function e(o){Y();if(G){G.disable(k);}else{k(o);}}function f(o){if(o){o.cancel();}}function Y(){f(I);f(K);}function d(p,o){Y();if(l()){e(true);if(o){D.fire("mt:click",{action:"boss_hide_key"});L("boss","hide:key");}else{D.fire("mt:click",{action:"boss_hide_click"});L("boss","hide:click");}}else{h(p);if(o){D.fire("mt:click",{action:"boss_show_key"});L("boss","show:key");}else{D.fire("mt:click",{action:"boss_show_click"});L("boss","show:click");}}}function c(p){var o=p.currentTarget;Y();Z.removeClass(H);if(l()){if(o.hasClass(O)){return;}}I=D.later(b,this,function(){if(!l()){h();D.fire("mt:click",{action:"boss_show_hover"});L("boss","show:hover");}else{if(A&&!A.isActive()){h("themes");}}});}function j(){if((G&&G.isManuallyPlaying())||(C&&C.isActive())){return;}Y();K=D.later(F,this,function(){if(l()){e(true);D.fire("mt:click",{action:"boss_hide_hover"});L("boss","hide:hover");}});Z.addClass(H);}function i(o){Y();if(l()){e(true);o.halt();D.fire("mt:click",{action:"boss_hide_click"});L("boss","hide:mask");}}function n(p){var o=p.target;if(o.ancestor(".att-link")){D.fire("mt:click",{action:"boss_attr"});L("boss","attr");}else{if(A&&l()){A.toggleSwitcher();p.halt();}}}function g(p){var o=false;if(l()){switch(p.keyCode){case 27:d(null,true);o=true;break;}if(!o){if(C&&C.handleKeydown(p)){o=true;}}o=true;}if(o&&p.halt){p.halt();}return o;}function m(){E.on("click",i);Z.on("hover",c,j);D.all(".boss-active").on("hover",c,j);D.all("."+O).on("hover",c,j);J.on("click",n);if(B){D.use("mail-ui-boss-multitask",function(o){C=o.mail.ui.Boss.Multitask;});}if(T){D.use("mail-ui-boss-themes",function(o){A=o.mail.ui.Boss.Themes;});}D.on(N+":toggle",function(o){var q,p;if(o){q=o.mode;p=o.fromKey;}d(q,p);});D.on("nav:boss",function(o){d(null,o.keyCode?true:false);});}m();D.mix(this,{toggle:d,isActive:l,hide:e,cancelTimer:f,overActiveArea:c,outsideActiveArea:j,handleKeydown:g});};D.namespace("mail.ui").Boss=new a();},"1.0.0",{requires:["rocket-stats"]});YUI.add("mail-ui-backbutton",function(F){var B,D=F.common.Utils,A=F.mail.Tabs,E,C={};B=function(){function I(){var L,N,M=F.mail.FoldersView;window.onhashchange=function(Q){if(typeof Q.newURL==="string"){if((Q.newURL.indexOf("#")>0&&Q.oldURL.indexOf("#")>0)||(Q.newURL.slice(-1)==="#")){return false;}}L=A.tabs;N=F.mail.ui.searchTab;if(L[0].NAME.indexOf("INBOX")!==-1&&M.get("fid").fid==="Inbox"){A.switchToTab(A.tabs[0]);window.history.state&&window.history.go(-1);}else{if(L[L.length-2].cfg.label==="SEARCH"&&NeoConfig.backButtonSearch){if(N){var O=A.getActiveTab();O.set("close",1);H("launch","backButtonSearch");}}else{var P={fid:"Inbox",forceRefresh:"",name:"Inbox",mailboxId:"Inbox",smartFolder:""};M.set("fid",P);F.fire("navigation:switch","none");}}if(typeof window.history.pushState==="function"&&typeof window.history.state!=="undefined"){if(window.history.state!==null){window.history.state.id=0;}}H("launch","backButton");return false;};}function J(){var L=F.mail.Tabs,N,M=F.mail.FoldersView;window.onclick=function(O){if(O.target.getAttribute("href")==="#"){O.preventDefault();}};window.onhashchange=function(O){if(typeof O.newURL==="string"){if((O.newURL.indexOf("#")>0&&O.oldURL.indexOf("#")>0)||(O.newURL.slice(-1)==="#")){return false;}}};window.onpopstate=function(){if(window.location.href.slice(-1)==="#"){return false;}N=C[window.location.hash.slice(1)];if(!N&&window.location.hash.length){return;}if(!N){L.switchToTab(L.tabs[0]);H("launch","backButton");return false;}if(typeof N==="object"){var O={fid:N.fid.fid,bb:true};M.set("fid",O);}else{L.switchToTab(L.tabs[N||0],0,0,0,0,1);}H("launch","backButton");F.fire("util:ymstats",{"name":"browsernav","tags":{"type":"switch"}});return false;};}function G(N){var M=false;F.fire("util:ymstats",{"name":"browsernav","tags":{"type":"init"}});if(!NeoConfig.backButtonFull){if(NeoConfig.backButton&&(typeof window.history.pushState==="function")){if(!window.history.state||!window.history.state.id){window.history.pushState({id:"1"},document.title,window.location.pathname+window.location.search);}if(!window.location.hash.length){window.history.replaceState({id:"1"},document.title,"#mail");}}return;}E=Math.ceil(Math.random()*Math.pow(10,10));var L;window.history.pushState({id:E},document.title,"#"+E);L=N?N.id:A.getActiveTab().cfg.label;switch(L){case"Contacts":C[E]=1;M=true;break;case"Calendar":C[E]=2;M=true;break;case"Notepad":C[E]=3;M=true;break;default:if(N.fid&&N.fid.length>1){C[E]={};C[E].tab=0;C[E].fid=N;}else{C[E]=A.getActiveTabIndex();}M=true;break;}return M;}function K(){var L=window.location.hash.slice(1);if(C[L]){delete C[L];}}function H(){var L=arguments;F.use("rocket-stats",function(){D.rocketstats.stat.apply(0,L);});}if(NeoConfig.backButtonFull){J();}else{if(NeoConfig.backButton){I();}}F.on("initPage",G);F.on("removePage",K);F.mix(this,{initPage:G,removePage:K});};F.namespace("mail.ui").BackButton=new B();},"1.0.0",{requires:["rocket-stats"]});/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-focusmanager",function(e,t){var n="activeDescendant",r="id",i="disabled",s="tabIndex",o="focused",u="focusClass",a="circular",f="UI",l="key",c=n+"Change",h="host",p={37:!0,38:!0,39:!0,40:!0},d={a:!0,button:!0,input:!0,object:!0},v=e.Lang,m=e.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(e){return this.get(h).all(e)}},activeDescendant:{setter:function(t){var n=v.isNumber,i=e.Attribute.INVALID_VALUE,s=this._descendantsMap,o=this._descendants,u,a,f;return n(t)?(u=t,a=u):t instanceof e.Node&&s?(u=s[t.get(r)],n(u)?a=u:a=i):a=i,o&&(f=o.item(u),f&&f.get("disabled")&&(a=i)),a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},e.extend(g,e.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var t=this.get("descendants"),o={},u=-1,a,f=this.get(n),l,c,h=0;v.isUndefined(f)&&(f=-1);if(t){a=t.size();for(h=0;h<a;h++)l=t.item(h),u===-1&&!l.get(i)&&(u=h),f<0&&parseInt(l.getAttribute(s,2),10)===0&&(f=h),l&&l.set(s,-1),c=l.get(r),c||(c=e.guid(),l.set(r,c)),o[c]=h;f<0&&(f=0),l=t.item(f);if(!l||l.get(i))l=t.item(u),f=u;this._lastNodeIndex=a-1,this._descendants=t,this._descendantsMap=o,this.set(n,f),l&&l.set(s,0)}},_isDescendant:function(e){return e.get(r)in this._descendantsMap},_removeFocusClass:function(){var e=this._focusedNode,t=this.get(u),n;t&&(n=v.isString(t)?t:t.className),e&&n&&e.removeClass(n)},_detachKeyHandler:function(){var e=this._prevKeyHandler,t=this._nextKeyHandler;e&&e.detach(),t&&t.detach()},_preventScroll:function(e){p[e.keyCode]&&this._isDescendant(e.target)&&e.preventDefault()},_fireClick:function(e){var t=e.target,n=t.get("nodeName").toLowerCase();e.keyCode===13&&(!d[n]||n==="a"&&!t.getAttribute("href"))&&t.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var t=this.get("keys.next"),n=this.get("keys.previous"),r=this.get(h),i=this._eventHandlers;n&&(this._prevKeyHandler=e.on(l,e.bind(this._focusPrevious,this),r,n)),t&&(this._nextKeyHandler=e.on(l,e.bind(this._focusNext,this),r,t)),m.opera&&i.push(r.on("keypress",this._preventScroll,this)),m.opera||i.push(r.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var t=this._descendants,n,r,i;t&&t.size()&&(n=this._eventHandlers||[],r=this.get(h).get("ownerDocument"),n.length===0&&(n.push(r.on("focus",this._onDocFocus,this)),n.push(r.on("mousedown",this._onDocMouseDown,this)),n.push(this.after("keysChange",this._attachKeyHandler)),n.push(this.after("descendantsChange",this._initDescendants)),n.push(this.after(c,this._afterActiveDescendantChange)),i=this.after("focusedChange",e.bind(function(e){e.newVal&&(this._attachKeyHandler(),i.detach())},this)),n.push(i)),this._eventHandlers=n)},_onDocMouseDown:function(e){var t=this.get(h),n=e.target,r=t.contains(n),i,s=function(e){var n=!1;return e.compareTo(t)||(n=this._isDescendant(e)?e:s.call(this,e.get("parentNode"))),n};r&&(i=s.call(this,n),i?n=i:!i&&this.get(o)&&(this._set(o,!1),this._onDocFocus(e))),r&&this._isDescendant(n)?this.focus(n):m.webkit&&this.get(o)&&(!r||r&&!this._isDescendant(n))&&(this._set(o,!1),this._onDocFocus(e))},_onDocFocus:function(e){var t=this._focusTarget||e.target,n=this.get(o),r=this.get(u),i=this._focusedNode,s;this._focusTarget&&(this._focusTarget=null),this.get(h).contains(t)?(s=this._isDescendant(t),!n&&s?n=!0:n&&!s&&(n=!1)):n=!1,r&&(i&&(!i.compareTo(t)||!n)&&this._removeFocusClass(),s&&n&&(r.fn?(t=r.fn(t),t.addClass(r.className)):t.addClass(r),this._focusedNode=t)),this._set(o,n)},_focusNext:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r<=this._lastNodeIndex&&(r+=1,r===this._lastNodeIndex+1&&this.get(a)&&(r=0),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusNext(e,r):this.focus(r))),this._preventScroll(e)},_focusPrevious:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r>=0&&(r-=1,r===-1&&this.get(a)&&(r=this._lastNodeIndex),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusPrevious(e,r):this.focus(r))),this._preventScroll(e)},_afterActiveDescendantChange:function(e){var t=this._descendants.item(e.prevVal);t&&t.set(s,-1),t=this._descendants.item(e.newVal),t&&t.set(s,0)},initializer:function(e){this.start()},destructor:function(){this.stop(),this.get(h).focusManager=null},focus:function(e){v.isUndefined(e)&&(e=this.get(n)),this.set(n,e,{src:f});var t=this._descendants.item(this.get(n));t&&(t.focus(),m.opera&&t.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=t))},blur:function(){var e;this.get(o)&&(e=this._descendants.item(this.get(n)),e&&(e.blur(),this._removeFocusClass()),this._set(o,!1,{src:f}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),g.NAME="nodeFocusManager",g.NS="focusManager",e.namespace("Plugin"),e.Plugin.NodeFocusManager=g},"3.13.0",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-menunav",function(e,t){var n=e.UA,r=e.later,i=e.ClassNameManager.getClassName,s="menu",o="menuitem",u="hidden",a="parentNode",f="children",l="offsetHeight",c="offsetWidth",h="px",p="id",d=".",v="handledMouseOut",m="handledMouseOver",g="active",y="label",b="a",w="mousedown",E="keydown",S="click",x="",T="first-of-type",N="role",C="presentation",k="descendants",L="UI",A="activeDescendant",O="useARIA",M="aria-hidden",_="content",D="host",P=A+"Change",H="autoSubmenuDisplay",B="mouseOutHideDelay",j=i(s),F=i(s,u),I=i(s,"horizontal"),q=i(s,y),R=i(s,y,g),U=i(s,y,s+"visible"),z=i(o),W=i(o,g),X=d+j,V=d+i(s,"toggle"),$=d+i(s,_),J=d+q,K=">"+$+">ul>li>a",Q=">"+$+">ul>li>"+J+">a:first-child",G=function(e){var t=e.previous(),n;return t||(n=e.get(a).get(f),t=n.item(n.size()-1)),t},Y=function(e){var t=e.next();return t||(t=e.get(a).get(f).item(0)),t},Z=function(e){var t=!1;return e&&(t=e.get("nodeName").toLowerCase()===b),t},et=function(e){return e.hasClass(z)},tt=function(e){return e.hasClass(q)},nt=function(e){return e.hasClass(I)},rt=function(e){return e.hasClass(U)},it=function(e){return Z(e)?e:e.one(b)},st=function(e,t,n){var r;return e&&(e.hasClass(t)&&(r=e),!r&&n&&(r=e.ancestor(d+t))),r},ot=function(e){return e.ancestor(X)},ut=function(e,t){return st(e,j,t)},at=function(e,t){var n;return e&&(n=st(e,z,t)),n},ft=function(e,t){var n;return e&&(t?n=st(e,q,t):n=st(e,q)||e.one(d+q)),n},lt=function(e,t){var n;return e&&(n=at(e,t)||ft(e,t)),n},ct=function(e){return lt(e.one("li"))},ht=function(e){return et(e)?W:R},pt=function(e,t){return e&&!e[m]&&(e.compareTo(t)||e.contains(t))},dt=function(e,t){return e&&!e[v]&&!e.compareTo(t)&&!e.contains(t)},vt=function(){vt.superclass.constructor.apply(this,arguments)};vt.NAME="nodeMenuNav",vt.NS="menuNav",vt.SHIM_TEMPLATE_TITLE="Menu Stacking Shim",vt.SHIM_TEMPLATE='<iframe frameborder="0" tabindex="-1" class="'+i("shim")+'" title="'+vt.SHIM_TEMPLATE_TITLE+'" src="javascript:false;"></iframe>',vt.ATTRS={useARIA:{value:!0,writeOnce:!0,lazyAdd:!1,setter:function(t){var n=this.get(D),r,u,a,f;t&&(n.set(N,s),n.all("ul,li,"+$).set(N,C),n.all(d+i(o,_)).set(N,o),n.all(d+q).each(function(t){r=t,u=t.one(V),u&&(u.set(N,C),r=u.previous()),r.set(N,o),r.set("aria-haspopup",!0),a=t.next(),a&&(a.set(N,s),r=a.previous(),u=r.one(V),u&&(r=u),f=e.stamp(r),r.get(p)||r.set(p,f),a.set("aria-labelledby",f),a.set(M,!0))}))}},autoSubmenuDisplay:{value:!0,writeOnce:!0},submenuShowDelay:{value:250,writeOnce:!0},submenuHideDelay:{value:250,writeOnce:!0},mouseOutHideDelay:{value:750,writeOnce:!0}},e.extend(vt,e.Plugin.Base,{_rootMenu:null,_activeItem:null,_activeMenu:null,_hasFocus:!1,_blockMouseEvent:!1,_currentMouseX:0,_movingToSubmenu:!1,_showSubmenuTimer:null,_hideSubmenuTimer:null,_hideAllSubmenusTimer:null,_firstItem:null,initializer:function(t){var n=this,r=this.get(D),i=[],s;r&&(n._rootMenu=r,r.all("ul:first-child").addClass(T),r.all(X).addClass(F),i.push(r.on("mouseover",n._onMouseOver,n)),i.push(r.on("mouseout",n._onMouseOut,n)),i.push(r.on("mousemove",n._onMouseMove,n)),i.push(r.on(w,n._toggleSubmenuDisplay,n)),i.push(e.on("key",n._toggleSubmenuDisplay,r,"down:13",n)),i.push(r.on(S,n._toggleSubmenuDisplay,n)),i.push(r.on("keypress",n._onKeyPress,n)),i.push(r.on(E,n._onKeyDown,n)),s=r.get("ownerDocument"),i.push(s.on(w,n._onDocMouseDown,n)),i.push(s.on("focus",n._onDocFocus,n)),this._eventHandlers=i,n._initFocusManager())},destructor:function(){var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null),this.get(D).unplug("focusManager")},_isRoot:function(e){return this._rootMenu.compareTo(e)},_getTopmostSubmenu:function(e){var t=this,n=ot(e),r;return n?t._isRoot(n)?r=e:r=t._getTopmostSubmenu(n):r=e,r},_clearActiveItem:function(){var e=this,t=e._activeItem;t&&t.removeClass(ht(t)),e._activeItem=null},_setActiveItem:function(e){var t=this;e&&(t._clearActiveItem(),e.addClass(ht(e)),t._activeItem=e)},_focusItem:function(e){var t=this,n,r;e&&t._hasFocus&&(n=ot(e),r=it(e),n&&!n.compareTo(t._activeMenu)&&(t._activeMenu=n,t._initFocusManager()),t._focusManager.focus(r))},_showMenu:function(t){var r=ot(t),i=t.get(a),s=i.getXY();this.get(O)&&t.set(M,!1),nt(r)?s[1]=s[1]+i.get(l):s[0]=s[0]+i.get(c),t.setXY(s),n.ie<8&&(n.ie===6&&!t.hasIFrameShim&&(t.appendChild(e.Node.create(vt.SHIM_TEMPLATE)),t.hasIFrameShim=!0),t.setStyles({height:x,width:x}),t.setStyles({height:t.get(l)+h,width:t.get(c)+h})),t.previous().addClass(U),t.removeClass(F)},_hideMenu:function(e,t){var n=this,r=e.previous(),i;r.removeClass(U),t&&(n._focusItem(r),n._setActiveItem(r)),i=e.one(d+W),i&&i.removeClass(W),e.setStyles({left:x,top:x}),e.addClass(F),n.get(O)&&e.set(M,!0)},_hideAllSubmenus:function(t){var n=this;t.all(X).each(e.bind(function(e){n._hideMenu(e)},n))},_cancelShowSubmenuTimer:function(){var e=this,t=e._showSubmenuTimer;t&&(t.cancel(),e._showSubmenuTimer=null)},_cancelHideSubmenuTimer:function(){var e=this,t=e._hideSubmenuTimer;t&&(t.cancel(),e._hideSubmenuTimer=null)},_initFocusManager:function(){var t=this,n=t._rootMenu,r=t._activeMenu||n,i=t._isRoot(r)?x:"#"+r.get("id"),s=t._focusManager,o,u,a;nt(r)?(u=i+K+","+i+Q,o={next:"down:39",previous:"down:37"}):(u=i+K,o={next:"down:40",previous:"down:38"}),s?(s.set(A,-1),s.set(k,u),s.set("keys",o)):(n.plug(e.Plugin.NodeFocusManager,{descendants:u,keys:o,circular:!0}),s=n.focusManager,a="#"+n.get("id")+X+" a,"+V,n.all(a).set("tabIndex",-1),s.on(P,this._onActiveDescendantChange,s,this),s.after(P,this._afterActiveDescendantChange,s,this),t._focusManager=s)},_onActiveDescendantChange:function(e,t){e.src===L&&t._activeMenu&&!t._movingToSubmenu&&t._hideAllSubmenus(t._activeMenu)},_afterActiveDescendantChange:function(e,t){var n;e.src===L&&(n=lt(this.get(k).item(e.newVal),!0),t._setActiveItem(n))},_onDocFocus:function(e){var t=this,n=t._activeItem,r=e.target,i;t._rootMenu.contains(r)?t._hasFocus?(i=ot(r),t._activeMenu.compareTo(i)||(t._activeMenu=i,t._initFocusManager(),t._focusManager.set(A,r),t._setActiveItem(lt(r,!0)))):(t._hasFocus=!0
,n=lt(r,!0),n&&t._setActiveItem(n)):(t._clearActiveItem(),t._cancelShowSubmenuTimer(),t._hideAllSubmenus(t._rootMenu),t._activeMenu=t._rootMenu,t._initFocusManager(),t._focusManager.set(A,0),t._hasFocus=!1)},_onMenuMouseOver:function(e,t){var n=this,r=n._hideAllSubmenusTimer;r&&(r.cancel(),n._hideAllSubmenusTimer=null),n._cancelHideSubmenuTimer(),e&&!e.compareTo(n._activeMenu)&&(n._activeMenu=e,n._hasFocus&&n._initFocusManager()),n._movingToSubmenu&&nt(e)&&(n._movingToSubmenu=!1)},_hideAndFocusLabel:function(){var e=this,t=e._activeMenu,n;e._hideAllSubmenus(e._rootMenu),t&&(n=e._getTopmostSubmenu(t),e._focusItem(n.previous()))},_onMenuMouseOut:function(e,t){var n=this,i=n._activeMenu,s=t.relatedTarget,o=n._activeItem,u,a;i&&!i.contains(s)&&(u=ot(i),u&&!u.contains(s)?n.get(B)>0&&(n._cancelShowSubmenuTimer(),n._hideAllSubmenusTimer=r(n.get(B),n,n._hideAndFocusLabel)):o&&(a=ot(o),n._isRoot(a)||n._focusItem(a.previous())))},_onMenuLabelMouseOver:function(e,t){var n=this,i=n._activeMenu,s=n._isRoot(i),o=n.get(H)&&s||!s,u=n.get("submenuShowDelay"),a,f=function(t){n._cancelHideSubmenuTimer(),n._cancelShowSubmenuTimer(),rt(e)||(a=e.next(),a&&(n._hideAllSubmenus(i),n._showSubmenuTimer=r(t,n,n._showMenu,a)))};n._focusItem(e),n._setActiveItem(e),o&&(n._movingToSubmenu?n._hoverTimer=r(u,n,function(){f(0)}):f(u))},_onMenuLabelMouseOut:function(e,t){var n=this,i=n._isRoot(n._activeMenu),s=n.get(H)&&i||!i,o=t.relatedTarget,u=e.next(),a=n._hoverTimer;a&&a.cancel(),n._clearActiveItem(),s&&(n._movingToSubmenu&&!n._showSubmenuTimer&&u?n._hideSubmenuTimer=r(n.get("submenuHideDelay"),n,n._hideMenu,u):!n._movingToSubmenu&&u&&(!o||o&&!u.contains(o)&&!o.compareTo(u))&&(n._cancelShowSubmenuTimer(),n._hideMenu(u)))},_onMenuItemMouseOver:function(e,t){var n=this,r=n._activeMenu,i=n._isRoot(r),s=n.get(H)&&i||!i;n._focusItem(e),n._setActiveItem(e),s&&!n._movingToSubmenu&&n._hideAllSubmenus(r)},_onMenuItemMouseOut:function(e,t){this._clearActiveItem()},_onVerticalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=t._rootMenu,i=e.target,s=!1,o=e.keyCode,u,f,l,c;switch(o){case 37:f=ot(n),f&&nt(f)?(t._hideMenu(n),l=G(n.get(a)),c=lt(l),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))):t._isRoot(n)||t._hideMenu(n,!0),s=!0;break;case 39:tt(i)?(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u)))):nt(r)&&(u=t._getTopmostSubmenu(n),l=Y(u.get(a)),c=lt(l),t._hideAllSubmenus(r),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))),s=!0}s&&e.preventDefault()},_onHorizontalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=e.target,i=lt(r,!0),s=!1,o=e.keyCode,u;o===40&&(t._hideAllSubmenus(n),tt(i)&&(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))),s=!0)),s&&e.preventDefault()},_onMouseMove:function(e){var t=this;r(10,t,function(){t._currentMouseX=e.pageX})},_onMouseOver:function(e){var t=this,n,r,i,s,o;t._blockMouseEvent?t._blockMouseEvent=!1:(n=e.target,r=ut(n,!0),i=ft(n,!0),o=at(n,!0),pt(r,n)&&(t._onMenuMouseOver(r,e),r[m]=!0,r[v]=!1,s=ot(r),s&&(s[v]=!0,s[m]=!1)),pt(i,n)&&(t._onMenuLabelMouseOver(i,e),i[m]=!0,i[v]=!1),pt(o,n)&&(t._onMenuItemMouseOver(o,e),o[m]=!0,o[v]=!1))},_onMouseOut:function(e){var t=this,n=t._activeMenu,r=!1,i,s,o,u,a,f;t._movingToSubmenu=n&&!nt(n)&&e.pageX-5>t._currentMouseX,i=e.target,s=e.relatedTarget,o=ut(i,!0),u=ft(i,!0),f=at(i,!0),dt(u,s)&&(t._onMenuLabelMouseOut(u,e),u[v]=!0,u[m]=!1),dt(f,s)&&(t._onMenuItemMouseOut(f,e),f[v]=!0,f[m]=!1),u&&(a=u.next(),a&&s&&(s.compareTo(a)||a.contains(s))&&(r=!0));if(dt(o,s)||r)t._onMenuMouseOut(o,e),o[v]=!0,o[m]=!1},_toggleSubmenuDisplay:function(e){var t=this,r=e.target,i=ft(r,!0),s=e.type,o,u,a,f,l,c;if(i){o=Z(r)?r:r.ancestor(Z);if(o){a=o.getAttribute("href",2),f=a.indexOf("#"),l=a.length;if(f===0&&l>1){c=a.substr(1,l),u=i.next();if(u&&u.get(p)===c){if(s===w||s===E)(n.opera||n.gecko||n.ie)&&s===E&&!t._preventClickHandle&&(t._preventClickHandle=t._rootMenu.on("click",function(e){e.preventDefault(),t._preventClickHandle.detach(),t._preventClickHandle=null})),s==w&&(e.preventDefault(),e.stopImmediatePropagation(),t._hasFocus=!0),t._isRoot(ot(r))?rt(i)?(t._hideMenu(u),t._focusItem(i),t._setActiveItem(i)):(t._hideAllSubmenus(t._rootMenu),t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):t._activeItem==i?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):i._clickHandle||(i._clickHandle=i.on("click",function(){t._hideAllSubmenus(t._rootMenu),t._hasFocus=!1,t._clearActiveItem(),i._clickHandle.detach(),i._clickHandle=null}));s===S&&e.preventDefault()}}}}},_onKeyPress:function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:e.preventDefault()}},_onKeyDown:function(e){var t=this,i=t._activeItem,s=e.target,o=ot(s),u;o&&(t._activeMenu=o,nt(o)?t._onHorizontalMenuKeyDown(e):t._onVerticalMenuKeyDown(e),e.keyCode===27&&(t._isRoot(o)?i&&(tt(i)&&rt(i)?(u=i.next(),u&&t._hideMenu(u)):(t._focusManager.blur(),t._clearActiveItem(),t._hasFocus=!1)):(n.opera?r(0,t,function(){t._hideMenu(o,!0)}):t._hideMenu(o,!0),e.stopPropagation(),t._blockMouseEvent=n.gecko?!0:!1)))},_onDocMouseDown:function(e){var t=this,r=t._rootMenu,i=e.target;!r.compareTo(i)&&!r.contains(i)&&(t._hideAllSubmenus(r),n.webkit&&(t._hasFocus=!1,t._clearActiveItem()))}}),e.namespace("Plugin"),e.Plugin.NodeMenuNav=vt},"3.13.0",{requires:["node","classnamemanager","plugin","node-focusmanager"],skinnable:!0});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.13.0",{requires:["yui-base"],optional:["dump"]});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"3.13.0",{requires:["yui-base"]});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-base",function(e,t){var n=e.Lang,r=e.Lang.isDate,i=function(){i.superclass.constructor.apply(this,arguments)};e.mix(i,{NAME:"cache",ATTRS:{max:{value:0,setter:"_setMax"},size:{readOnly:!0,getter:"_getSize"},uniqueKeys:{value:!1},expires:{value:0,validator:function(t){return e.Lang.isDate(t)||e.Lang.isNumber(t)&&t>=0}},entries:{readOnly:!0,getter:"_getEntries"}}}),e.extend(i,e.Base,{_entries:null,initializer:function(e){this.publish("add",{defaultFn:this._defAddFn}),this.publish("flush",{defaultFn:this._defFlushFn}),this._entries=[]},destructor:function(){this._entries=[]},_setMax:function(e){var t=this._entries;if(e>0){if(t)while(t.length>e)t.shift()}else e=0,this._entries=[];return e},_getSize:function(){return this._entries.length},_getEntries:function(){return this._entries},_defAddFn:function(e){var t=this._entries,r=e.entry,i=this.get("max"),s;this.get("uniqueKeys")&&(s=this._position(e.entry.request),n.isValue(s)&&t.splice(s,1));while(i&&t.length>=i)t.shift();t[t.length]=r},_defFlushFn:function(e){var t=this._entries,r=e.details[0],i;r&&n.isValue(r.request)?(i=this._position(r.request),n.isValue(i)&&t.splice(i,1)):this._entries=[]},_isMatch:function(e,t){return!t.expires||new Date<t.expires?e===t.request:!1},_position:function(e){var t=this._entries,n=t.length,r=n-1;if(this.get("max")===null||this.get("max")>0)for(;r>=0;r--)if(this._isMatch(e,t[r]))return r;return null},add:function(e,t){var i=this.get("expires");this.get("initialized")&&(this.get("max")===null||this.get("max")>0)&&(n.isValue(e)||n.isNull(e)||n.isUndefined(e))&&this.fire("add",{entry:{request:e,response:t,cached:new Date,expires:r(i)?i:i?new Date((new Date).getTime()+this.get("expires")):null}})},flush:function(e){this.fire("flush",{request:n.isValue(e)?e:null})},retrieve:function(e){var t=this._entries,r=t.length,i=null,s;if(r>0&&(this.get("max")===null||this.get("max")>0)){this.fire("request",{request:e}),s=this._position(e);if(n.isValue(s))return i=t[s],this.fire("retrieve",{entry:i}),s<r-1&&(t.splice(s,1),t[t.length]=i),i}return null}}),e.Cache=i},"3.13.0",{requires:["base"]});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-offline",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r=null,i=e.JSON;try{r=e.config.win.localStorage}catch(s){}e.mix(n,{NAME:"cacheOffline",ATTRS:{sandbox:{value:"default",writeOnce:"initOnly"},expires:{value:864e5},max:{value:null,readOnly:!0},uniqueKeys:{value:!0,readOnly:!0,setter:function(){return!0}}},flushAll:function(){var e=r,t;if(e)if(e.clear)e.clear();else for(t in e)e.hasOwnProperty(t)&&(e.removeItem(t),delete e[t])}}),e.extend(n,e.Cache,r?{_setMax:function(e){return null},_getSize:function(){var e=0,t=0,n=r.length;for(;t<n;++t)r.key(t).indexOf(this.get("sandbox"))===0&&e++;return e},_getEntries:function(){var e=[],t=0,n=r.length,s=this.get("sandbox");for(;t<n;++t)r.key(t).indexOf(s)===0&&(e[t]=i.parse(r.key(t).substring(s.length)));return e},_defAddFn:function(e){var t=e.entry,n=t.request,s=t.cached,o=t.expires;t.cached=s.getTime(),t.expires=o?o.getTime():o;try{r.setItem(this.get("sandbox")+i.stringify({request:n}),i.stringify(t))}catch(u){this.fire("error",{error:u})}},_defFlushFn:function(e){var t,n=r.length-1;for(;n>-1;--n)t=r.key(n),t.indexOf(this.get("sandbox"))===0&&r.removeItem(t)},retrieve:function(e){this.fire("request",{request:e});var t,n,s;try{s=this.get("sandbox")+i.stringify({request:e});try{t=i.parse(r.getItem(s))}catch(o){}}catch(u){}if(t){t.cached=new Date(t.cached),n=t.expires,n=n?new Date(n):null,t.expires=n;if(this._isMatch(e,t))return this.fire("retrieve",{entry:t}),t}return null}}:{_setMax:function(e){return null}}),e.CacheOffline=n},"3.13.0",{requires:["cache-base","json"]});
/*
YUI 3.13.0 (build 3.13.0-ym3)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-plugin",function(e,t){function n(t){var n=t&&t.cache?t.cache:e.Cache,r=e.Base.create("dataSourceCache",n,[e.Plugin.Base]),i=new r(t);return r.NS="tmpClass",i}e.mix(n,{NS:"cache",NAME:"cachePlugin"}),e.namespace("Plugin").Cache=n},"3.13.0",{requires:["plugin","cache-base"]});
YUI.add("mail-common-precache-thread",function(E){E.namespace("mail.ui");var A=E.mail,B=A.ui.ConvList,D=A.model.ConvStore.Conversations,C="unreadConv";E.common.Utils.rocketstats.stat("ConvCache","PreCacheAlgorithm:"+C);NeoConfig.preCacheAlgorithm=C;B.getNeighbors=function(R,N,T,H,M){if(!(R&&R.length&&N>=-1&&N<=R.length-1&&NeoConfig.hasConvView)){return;}var P=M,F=[],L=[],S=[],O=1,I=0,G=0,K=M||2,J=1;function Q(U){var V;if((V=R[U])&&!D.isCached(H,V.cid)){if(V&&V.totalUnread>0){F.push(V);}else{L.push(V);}return 1;}return 0;}while(O){if(G<K&&!Q(N-J)){G++;}if(I<K&&!Q(N+J)){I++;}O=((F.length+L.length)<P)&&!(G===K&&I===K);J++;if(J>100){break;}}S=F.concat(L);S=S.splice(0,S.length>=P?P:S.length);for(J=0;J<S.length;J++){T.push(S[J]);}};},"1.0.0",{requires:["mail-ui-convlist-base"]});YUI.add("contacts-ui-contactsevents",function(B){B.namespace("contacts.ui");var A=function(){var E=this,D=[{name:"contacts:api:contactChanged",showContactsTab:false,contactsView:null},{name:"ct:add_contact",showContactsTab:true,contactsView:"create_update_contact"},{name:"ct:view_contact",showContactsTab:true,contactsView:"view_contact"},{name:"ct:manage_updates",showContactsTab:true,contactsView:"manage_updates"},{name:"ct:import_contacts",showContactsTab:true,contactsView:"contact_import_landing"},{name:"ct:view_connections",showContactsTab:true,contactsView:"view_connections"},{name:"themes:change",showContactsTab:false,contactsView:null},{name:"tabs:toggle",showContactsTab:false,contactsView:null}],C=[{name:"contacts:contactChanged"},{name:"newMessage"},{name:"iframe:loaded"},{name:"contacts:sendSms"},{name:"contacts:sendIM"},{name:"contacts:shortcut"},{name:"contacts:launchrtcomplete"}];B.mix(E,{eventsFromSab:C,eventsToSab:D});};B.contacts.ui.contactsEvents=new A();},"1.0.0");YUI.add("contacts-ui-contactsview",function(A){var B=function(E){var H=this,G,L=null,F,C="",I=E||{},K=A.common.Utils.parseQueryString()||{};H.contactsTabNode=null;function D(N){G=A.one(N);G.append(F);H.contactsTabNode=A.one("#abIframeTab");}function J(N){I=N||{};M();}function M(){var N,Q,P,O=NeoConfig.theme?NeoConfig.theme.id:"";if(I){N=I.vpc?"&VPC="+I.vpc:"";Q=I.params?"&id="+I.params:"";}if(NeoConfig.mintyAB){if(O){P=(!NeoConfig.theme.build||NeoConfig.theme.build==="")?"dev":NeoConfig.theme.build;P=P.replace("_","");C+="/yab-fe/mu/MainView?.src=neo&themeName="+O+N+"&bn="+P+"&s="+(NeoConfig.isSSL?1:0);}else{C+="/yab-fe/mu/MainView?.src=neo"+N;}C+=Q;}else{C="/yab-fe/?.src=neo"+N+Q;}C+="&pc=1&bucketId="+NeoConfig.expBucketId+(NeoConfig.nav?"&nav="+NeoConfig.nav:"")+"&tabs="+(NeoConfig.tabs?1:0)+"&wideRail="+(NeoConfig.wideLeftRail?1:0);if(K.id){C+="&id="+K.id;}if(K[".intl"]){C+="&.intl="+K[".intl"];}if(K[".lang"]){C+="&.lang="+K[".lang"];}if(K.ecd||NeoConfig.enableEnhancedContactDetails==="1"||NeoConfig.expBucketId==="XOBNIECDT1"||NeoConfig.isCorpmail){C+="&ecd="+(K.ecd?K.ecd:"1");}C+="&stab="+(new Date()).getTime();F=A.Node.create('<div class="content" style="width:100%;height:100%;position:relative;overflow:hidden">'+'<iframe  target="_blank" allowtransparency="true" frameborder="0" vspace="0" hspace="0" style="background-color: transparent; width: 100%; height: 100%; " id="abIframeTab" src="'+C+'"/>'+"</div>");}M();B.superclass.constructor.call(H);A.mix(H,{NAME:"ContactsView",render:D,contactsTab:L,updateConfig:J},true);H.set("hideToolbar",1);};A.extend(B,A.mail.ui.BaseWidget);A.namespace("contacts.ui");A.contacts.ui.ContactsView=null;A.contacts.ui.getContactsViewInstance=function(C){if(A.contacts.ui.ContactsView){return A.contacts.ui.ContactsView;}else{A.contacts.ui.ContactsView=new B(C);return A.contacts.ui.ContactsView;}};},"1.0.0",{requires:["mail-ui-basewidget","node-event-simulate"]});YUI.add("contacts-ui-contactseventstranslator",function(B){B.namespace("contacts.ui");var A=function(){var I=this;B.augment(I,B.EventTarget);function G(K,L){var J=K.contactsView,M,N=null;if(J){if(L&&L.args&&L.args.ids){M=L.args.ids.join(",");}N={vpc:J,params:M};}return N;}function E(J,K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(J.showContactsTab){if(B.contacts.ui.ContactsView.contactsTab.get("active")!==1){B.contacts.ui.ContactsView.contactsTab.set("active",1);}}}else{if(J.showContactsTab){B.fire("openContacts",G(J,K));}}}function F(J){B.Global.on(J.name,function(K){B.fire(J.name,K);});}function C(J){B.on(J.name,function(K){if(B.contacts.ui.ContactsView&&B.contacts.ui.ContactsView.contactsTab){if(K){B.mix(K,{type:J.name});}else{K={type:J.name};}if(NeoConfig.mintyAB){B.one("#abIframeTab").fire(J.name,K);}else{B.Global.fire(J.name,K);}}E(J,K);});}function H(){var J,K;J=B.contacts.ui.contactsEvents.eventsToSab;for(K in J){if(J.hasOwnProperty(K)){C(J[K]);}}J=B.contacts.ui.contactsEvents.eventsFromSab;for(K in J){if(J.hasOwnProperty(K)){F(J[K]);}}}function D(K){var J=B.contacts.ui.ContactsView,L=J?J.contactsTabNode:null;if(L){L.simulate("keydown",K.event);}}B.on("contacts:shortcut",D);H();};B.contacts.ui.contactsEventTranslator=new A();},"1.0.0",{requires:["contacts-ui-contactsevents","contacts-ui-contactsview"]});YUI.add("mail-errormap",function(C){C.namespace("mail.Errormap");var R=C.common.Utils,M=C.Lang,I=C.common.net.Error,Q=R.substitute,J="_{{method}}",B="_{{status}}",P=J+B,S="{{subcode}}",L={"ComposeError":[14,"ComposeError"],"ComposeErrorMessage":[14,"ComposeError"],"ComposeErrorServiceError":[14,"ComposeError"],"ComposeErrorUnknown":[14,"ComposeError"],"ComposeErrorAttachment":[14,"ComposeAttachFailed"],"ComposeErrorBadMIME":[14,"BadMime"],"ComposeErrorBadRecipient":[0,"BadRecipient"],"ComposeErrorBadFrom":[0,"BadFrom"],"MessageContentReject":[0,"ContentRejected"],"WrongInput":[0,"HumanVerificationFailed"],"ExceededMaxTo":[0,"MaxToAddressesExceeded"],"ExceededMaxCc":[0,"MaxCCAddressesExceeded"],"ExceededMaxBcc":[0,"MaxBCCAddressesExceeded"],"ExceededMaxRecipients":[0,"MaxTotalAddressesExceeded"],"ExceededMaxHourlyMessages":[0,"HourlyLimitExceeded"],"ExceededMaxDailyMessages":[0,"DailyLimitExceeded"],"InvalidFromAddress":[0,"BadFrom"],"InvalidRecipientAddress":[0,"BadRecipient"],"NicknameExpansionFailed":[0,"NicknameExpansionFailed"],"EmptyFolderFailed":[14,"EmptyFolderFailed"],"FolderEmptyFailed":[14,"EmptyFolderFailed"],"FolderCreateFailed":[14,"FolderCreateFailed"],"FolderFetchFailed":[14,"FolderFetchFailed"],"FolderIdDoesntExist":[14,"FolderIdDoesntExist"],"FolderIdIsSystemFolder":[0,"FolderIdIsSystemFolder"],"FolderListFetchFailed":[2,"FolderListFetchFailed"],"FolderNameExists":[0,"FolderAlreadyExists"],"FolderNameNotAllowed":[0,"folder_name_is_reserved"],"FolderNameIllegalCharacter":[0,"FolderNameIllegalCharacter"],"FolderNameIllegalCharset":[14,"FolderNameIllegalCharacter"],"FolderNameTooLong":[0,"folder_name_too_long"],"FolderRemoveFailed":[14,"FolderRemoveFailed"],"FolderRenameFailed":[14,"FolderRenameFailed"],"GetMessageFailed":[6,"GetMessageFailed"],"BadCharset":[6,"download_message_viewing_error"],"HumanVerificationRequired":[0,"HumanVerificationRequired"],"AccountVerificationRequired":[0,"AccountVerificationRequired"],"InputTooEarly":[14,"HumanVerificationFailed"],"InvalidYID":[14,"HumanVerificationFailed"],"MaxAttempts":[12,"HumanVerificationFailed"],"TimedOut":[14,"HumanVerificationFailed"],"WrongUser":[14,"HumanVerificationFailed"],"ListMessagesFailed":[2,"ListMessagesFailed"],"MailboxOpenFailed.Busy":[5,"MailboxBusy"],"MailboxOpenFailed":[2,"MailboxOpenFailed"],"MessageDeleteFailed":[2,"MessageDeleteFailed"],"MessageFetchFailed":[4,"MessageFetchFailed"],"MessageIdsNotFound":[4,"MessageIdsNotFound"],"MessageNotFound":[4,"MessageNotFound"],"MessageSelectionNotFound":[4,"MessageSelectionNotFound"],"MessageSaveFailed":[2,"MessageSaveFailed"],"MissingApplicationID":[14,"MissingApplicationID"],"MissingCredentials":[14,"MissingCredentials",null,[]],"NoRecipientsSpecified":[0,"MissingRecipients"],"NoSenderSpecified":[0,"NoSenderSpecified"],"ResetSpamFilterFailed":[2,"ResetSpamFilterFailed"],"SaveMessageFailed":[2,"SaveMessageFailed"],"MetaDataFetchFailed":[2,"ServerError"],"MetaDataSaveFailed":[2,"ServerError"],"UserOpenFailed":[1,"ServerError"],"ServerError":[14,"ServerError"],"SetUserDataFailed":[1,"SetUserDataFailed"],"SpamReportingFailed":[14,"SpamReportingFailed"],"SpamTrainingFailed":[14,"SpamTrainingFailed"],"TooManyCallsBatched":[14,"TooManyCallsBatched"],"TooManyFolders":[0,"TooManyFolders"],"TooManyMessagesRequested":[14,"TooManyMessagesRequested"],"UserOverQuota":[19,strings.str_cfg_tog_hasUnlimitedStorage?"UserTempSuspended":"UserOverQuota"],"UserAbuseDetected":[19.1,"UserTempSuspended"],"UserPreferenceFetchFailed":[2,"UserPreferenceFetchFailed"],"UserSuspended":[19,"UserSuspended"],"MessageTooLarge":[0,"MessageToLarge"],"ParentalControlsNoAttachments":[0,"ypcUploadDisallowed"],"ExceededAttachmentLimit":[0,"uploadNumFiles"],"MessageTooLargeSomeRecipients":[0,"MessageTooLargeForSomeRecipients"],"UserDataFetchFailed":[1,"UserDataFetchFailed"],"FarmNameNotFound":[1,"FarmNameNotFound"],"GetMessageInvalidId":[4,"GetMessageInvalidId"],"GetDisplayMessageFailed":[6,"GetDisplayMessageFailed"],"GetPartContentFailed":[6,"GetDisplayMessageFailed"],"ComposeFailed":[14,"ComposeFailed"],"MetaDataMissingPath":[2,"MetaDataMissingPath"],"SetMetaData":[2,"BadRequest"],"MoveMessagesInvalidId":[4,"MoveMessagesInvalidId"],"MetaDataTooLarge":[2,"ServerError"],"InputInvalid":[8,"ServerError"],"InvalidRequest":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"EmptyPostBody":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"FailedDependency":[14,"ServerError"],"SearchProgramFailed":[20,"error_searching_messages"],"ListMessagesFailed.SearchMessages":[2,"error_searching_messages"],"FeatureUnavailable":[11,"INTERNAL MESSAGE:\nThe underlying version of Cascade on this box doesn't support the API that was requested\nMethod : \n","ServerErrorFeatureUnavailable"+J],"999":[19],"BatchItemError":[],"OperationNotAllowedCurrently":[24,"OperationNotAllowedCurrently"],"ServiceTemporarilyUnavailable":[21],"SendMessageFailed":[13,"SendMessageFailed"],"SendMessageAttachmentFailed":[13,"SendAttachmentFailed"],"SendMessageFailedSomeRecipients":[13,"SendMessageFailedForSomeRecipients"],"CannotSendThisMessage":[19,"CannotSendThisMessage"],"MalformedConvId":[46,"MoveMessagesInvalidId"],"ConvIdCouldNotBeFound":[46,"MoveMessagesInvalidId"],"InvalidConvId":[46,"MoveMessagesInvalidId"]},D={"999":[19],"2":[18,"Offline","OfflineTitle",["E_HTTP"+B,"E_HTTP"+P]],"conn":[18,"Connect",null,["E_HTTPConnect","E_HTTPConnect"+P]],"Malformed-unk":[14,null,null,["E_RespParseUnk","E_RespParse"+P]],"Malformed-mail":[14,null,null,["E_RespParseMail","E_RespParse"+P]],"HTMLResponse-unk":[14,null,null,["E_RespHTMLUnk","E_RespHTML"+S+P]],"HTMLResponse-mail":[14,null,null,["E_RespHTMLMail","E_RespHTML"+S+P]],"NoResponse-unk":[14,null,null,["E_RespEmptyUnk","E_RespEmpty"+P]],"NoResponse-mail":[14,null,null,["E_RespEmptyMail","E_RespEmpty"+P]],"MalformedFault":[14,null,null,["E_RespFault","E_RespFault"+J]],"timeout":[18,"Timeout",null,["E_Timeout"+J]],"invalidwssid":[14,null,null,["E_InvalidWssid"]],"loginfail":[14]};
function K(Y,W,T,b,U){var X,Z=Y.detail,d,c,V="E_ServerBatch_"+U.join("_"),a=F(Y,W,T,true,U);R.assert(Z);if(W===200){for(X=0;X<Z.length;X++){d=Z[X];c=d.detail.idx;a=a.concat(F(d,W,U[c],b));a.push([V,c,d.code].join("_"));}}return a;}function F(e,b,U,i,Y){function a(l){var j,k,m,n=e.message||"";if(l){j=[];m={code:X,method:U,status:b,subcode:e.subcode,message:n.replace(/\s/g,"").replace(/\./g,"")};for(k=0;k<l.length;k++){j[k]=Q(l[k],m,null,null,strings);}}return j;}var X=e.code,W=e&&e.code&&(e.code.indexOf("-unk")>0),h,V,T,Z,f,c,g,d=U+(Y?"_"+Y.join("_"):"");X=/^[^-]+/.exec(X);X=X&&X[0];T=I.isHttp(X);Z=!T&&N(e,null,L);f=!Z&&N(e,null,D);c=Z||f;g=a(c&&c[3])||[];if(b===500){h="E_Server500_"+d;g.push(h,h+"_"+X);}if(!c){if(T){h="E_HTTP";g.push(h,h+"_"+b,[h,d,b].join("_"));}else{h="E_ServerUnknown_"+d;g.push(h,h+"_"+X);}}V=c&&c[0];V=V!==undefined?V:(T?18:14);if(!i){if(V===5){if(e.detail&&e.detail.customerCareInfo){if("vxs"===e.detail.customerCareInfo.errorString){V=7;}}}h="UE_ALERT_TAE"+V;if(V===14&&W){g.push("INTERCEPT_UNK_"+X);g.push("INTERCEPT_UNK_"+U);}else{g.push(h,h+"_"+(T?b:X),h+":api_"+U,h+":code_"+(T?b:X),h+":api_"+U+":code_"+(T?b:X));if(V===14){g.push(h+"_"+U);}if(V===5&&NeoConfig.isCorpmail){g.push(h+"_corpmail");}}}else{if(V!==0){h="TAE"+V;g.push(h,h+"_"+(T?b:X)+"_"+U,h+":api_"+U,h+":code_"+(T?b:X),h+":api_"+U+":code_"+(T?b:X));}}if(V!==0){g.push("E_"+d,"E_"+d+"_"+(T?b:X));}return g;}function O(U){var T=U&&(U.match(/Client\.([\w\W]+)$/)||U.match(/Server\.([\w\W]+)$/));return(T&&T[1])||U;}function G(U){var V,T=new RegExp(I.base+"([\\w\\W]+)$");return((V=U.match(T))&&V[1])||U;}function E(V,U,T){return U&&(M.isNumber(T)?V[U]&&V[U][T]:V[U]);}function N(Y,a,Z){var X,W=Y.code,U,V,b,T=I.isHttp(W);V=(Z&&[Z])||(T?[D]:[L,D]);U=T?G(W):O(W);for(X=0;X<V.length;X++){if((b=E(V[X],U,a))!==undefined){return b;}}}function H(T){return T.code==="BatchItemError"&&T.detail;}function A(X){var V,W="",T,Y,U;if(U=H(X.fault)){V=[];for(T=0;T<U.length;T++){W=A({fault:U[T]},1);W&&V.push(W);}W=V.join("; ");}else{Y=N(X.fault,1);W=Y&&strings["str_error_"+Y];}return W;}C.mix(C.mail.Errormap,{getTAE:function(W){var V,T,U=W.fault;U=((V=H(U))&&V[0])||U;return((T=N(U,0))!==undefined)?T:(I.isHttp(U.code)?18:14);},getMessage:A,getTitle:function(V){var U,W,T=V.fault;T=((U=H(T))&&U[0])||T;W=N(T,2);return W&&strings["str_error_"+W];},getStats:function(W,U){var T=W.fault,V=H(T)?K:F;return V(T,W.status,W.callback.method,U,W.callback.batchopcbk);}});},"1.0.0",{requires:["json-stringify","common-net-error"]});YUI.add("_shared_module_offscreen_bin_modal_launch_error_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup={base:'<p>{{error_message}}</p><ul> <li><a href="{{link_goto_latest}}" class="more">{{str_refresh_page}}</a></li> <li><a href="{{link_goto_tae_help}}" class="more" target="_blank">{{str_rough_visit_help_page}}</a></li> </ul> <br/><span>{{str_rough_errlaunch_troubleshoot}}</span>'};},"1.0.0");YUI.add("mail-error",function(E){var M=E.common.net.Error,Q=E.common.Utils,B=E.mail.Errormap,D=Q.ymmastats,O=Q.rocketstats.stat,K=E.JSON.stringify,N=null,G="45",C=46;E.namespace("mail.Error");function J(U,S){function V(){var a=U.request,b=null;if(/SendMessage/.test(R)){b=E.clone(a);b.postdata="<filtered";}else{if(/SaveMessage/.test(R)){b=E.clone(a);b.postdata=b.postdata.replace(/"html":.*","attachment"/g,'"attachment"')||"<filtered>";}}return b||a;}var X=S.fault,T=X.code,Y=S.callback||{},R=Y.method,Z={yid:NeoConfig.loginId||"",tae:B.getTAE(S),method:R,request:V(),response:S.responseText||S.responseTextBatch||"",headers:S.allHeadersText||S.allHeadersTextBatch||"",fault:T,message:B.getMessage(S)||X.message||"",http:[S.status,S.statusText].join(" "),duration:U.end?(U.end-U.start):"X",ua:navigator.userAgent,conv:NeoConfig.hasConvView?1:0,pp:NeoConfig.previewPanePref?1:0};try{Z.response=E.JSON.parse(Z.response);}catch(W){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-error:1",W,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-error:1");Z.response=Z.response;}return Z;}function H(U){var T,S,R;if(strings.str_tog_TAESupported){if(U.tae===G&&strings["str_cfg_url_yahoo_mail_help_tae"+G]){S=strings["str_cfg_url_yahoo_mail_help_tae"+G];}else{if(U.tae===C&&strings["str_cfg_url_yahoo_mail_help_tae"+C]){S=strings["str_cfg_url_yahoo_mail_help_tae"+C];}else{S=strings.str_cfg_url_TAEHelpPages+"mltamtae"+U.tae+".html";}}}else{S=strings.str_cfg_url_contact_customer_care;}T={error_message:U.message||strings.str_rough_errlaunch_message,link_goto_latest:"launch?reason=ignore&rs=1",launch_error_code:U.tae,link_goto_tae_help:S};R=Q.substitute(E.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup.base,T,null,null,strings);M.show(null,R,strings.str_error_MailErrorTitle,{modal_classes:"lg"});}function F(b,Z,W,R,a){var S,X,Y,V,c,U={"convpane":"CONVREAD","messagepane":"MESSAGEREAD","search":"SEARCH","convlist":"CONVLIST","messagelist":"MESSAGELIST"},T=Z?":background":"";if(b){X=b.length||0;for(S=0;S<X;S++){O("mailnet"+T,b[S]);if((typeof navigator.onLine!=="undefined")&&!navigator.onLine){O("mailnet:offline"+T,b[S]);}}V=E.mail.Tabs.getActiveTab().widgetType;Y=U[V]?U[V]:V;c=(NeoConfig.mailEnv==="prod")?NeoConfig.hostName.split(".")[3]:"";if(a){D.stat("client_error","api=>"+W.method+",tae=>"+W.tae+",code=>"+(R.code||W.fault)+",farm=>"+NeoConfig.farm.substr(1)+",colo=>"+c);E.fire("stat:webservice_fail",{"feature_group":Y,"tae":W.tae,"api":W.method,"message":(R.code||W.fault),"visible":"no"});}else{D.stat("ue_client_error","api=>"+W.method+",tae=>"+W.tae+",code=>"+(R.code||W.fault)+",farm=>"+NeoConfig.farm.substr(1)+",colo=>"+c);E.fire("stat:webservice_fail",{"feature_group":Y,"tae":W.tae,"api":W.method,"message":(R.code||W.fault),"visible":"yes"});}}return b;}function L(S,R,T,Y){var Z=!T&&B.getStats(R,Y),W=R.callback&&R.callback.backgroundLogs&&R.callback.backgroundLogs[0]==="*",U="DEBUG_TAE:"+(S.tae||"null")+":"+(S.method||"null")+":"+(S.fault||"null")+":"+NeoConfig.farm+" ",X=new Date().getTime();F(Z,W,S,R,Y);if(S.tae===0){return;}try{S.stats=Z;S.tid=X;Q.netError(U+K(S));if(NeoConfig.sessionTracer){if(S.tae===2||S.tae===4||S.tae===13){E.mail.model.DataStore.Sessions.log(X);}}delete S.response;delete S.headers;E.fire("MailLog",{m:U,errinfo:S},1,"tae"+S.tae);}catch(V){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-error:2",V,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-error:2");}}function I(R){N=R;}function A(q,r,AB){function j(e){return(U.toString().search(e)!==-1)||((k+"")===e);}function a(e,AD,i){q.callDefault(e,AD,i);}Q.assert(AB.fault);try{var y=AB.fault,k=AB.status,U=y.code,Z=U==="BatchItemError",p,m,c=AB.callback||{},z=c.method,s,o,X=/xhrsend/.test(U),u,h,f=[401],Y,T,W,l,n=AB.callback,V=n.retry?"1":"0",R=y&&y.message&&y.message.match("Content-Length:0"),t,b,d,w,AC,S,v,g={"Server.Malformed-mail":true,"Client.EmptyPostBody":true};if(NeoConfig.hasConvV3&&k===400&&!AB.body){AB.body=E.JSON.parse(AB.responseText);U=AB.body.error.code;Y=AB.body.error.message;}if(g[U]||R){if(U==="Server.Malformed-mail"){O("mailnet","MalformedMail:retried:"+V);}if(U==="Client.EmptyPostBody"){O("mailnet","EmptyPostBody:retried:"+V);}if(R){O("mailnet","ContentLengthZero:retried:"+V);}if(!n.retry){E.mix(n,{retry:true});T=AB.request;l=E.common.net.SessionMgr;W=l.request(T.url,l.formatQueryParams(T.urlparams,T.enc),n,T.mthd,T.enc);if(T.mthd==="POST"){W.request.post=T.postdata;}W.send();return;}}if(Z){for(var x=0;x<y.detail.length;x++){o=y.detail[x];o.allHeadersTextBatch=AB.allHeadersText||"";o.responseTextBatch=AB.responseText||"";if(o.code.indexOf("Client.FailedDependency")===-1){A(q,r,o);}}return;}s=J(r,AB);t=K(s.response)||"";u=M.suppress(c.suppressCodes,f.concat(c.exceptCodes||[]),j);h=M.suppress(c.suppressLogs,c.exceptLogs,j);Q.assert(c.service==="mail");if(t&&(s.tae===2||s.tae===13)){if(s.method==="SaveMessage"||s.method==="SendMessage"){b="UE_ALERT_TAE"+((s.method==="SaveMessage")?"2:SaveMessageFailed:":"13:SendMessageFailed:");if(t.match(/Error getting attachment:/g)){O("mailnet",b+"ERROR_GETTING_ATTACHMENT");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_GETTING_ATTACHMENT");}else{if(t.match(/Failed to fetch message ID:/g)){O("mailnet",b+"FAILED_TO_FETCH_MESSAGE_ID");D.stat("ue_alert_tae_breakdown","api=>"+b+"_FAILED_TO_FETCH_MESSAGE_ID");}else{if(t.match(/Failed to get msg/g)){O("mailnet",b+"FAILED_TO_GET_MSG");D.stat("ue_alert_tae_breakdown","api=>"+b+"_FAILED_TO_GET_MSG");}else{if(t.match(/Error deleting previous copy of message/g)){O("mailnet",b+"ERROR_DELETING_PREVIOUS_COPY_OF_MESSAGE");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_DELETING_PREVIOUS_COPY_OF_MESSAGE");}else{if(t.match(/Error saving message when calling appendMsg/g)){O("mailnet",b+"ERROR_SAVING_MESSAGE_WHEN_CALLING_APPENDMSG");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_SAVING_MESSAGE_WHEN_CALLING_APPENDMSG");
}else{if(t.match(/Error opening mailbox/g)){O("mailnet",b+"ERROR_OPENING_MAILBOX");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_OPENING_MAILBOX");}else{if(t.match(/fetchBody error/g)){O("mailnet",b+"FETCHBODY_ERROR");D.stat("ue_alert_tae_breakdown","api=>"+b+"_FETCHBODY_ERROR");}else{if(t.match(/Error fetching message list/g)){O("mailnet",b+"ERROR_FETCHING_MESSAGE_LIST");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_FETCHING_MESSAGE_LIST");}else{if(t.match(/folder id(.*)doesn't exist/g)){O("mailnet",b+"FOLDER_ID_DOESNOT_EXIST");D.stat("ue_alert_tae_breakdown","api=>"+b+"_FOLDER_ID_DOESNOT_EXIST");}else{if(t.match(/Error sending message/g)){O("mailnet",b+"ERROR_SENDING_MESSAGE");D.stat("ue_alert_tae_breakdown","api=>"+b+"_ERROR_SENDING_MESSAGE");}else{O("mailnet",b+"UNKNOWN");D.stat("ue_alert_tae_breakdown","api=>"+b+"_UNKOWN");}}}}}}}}}}}}if(s.tae===46){d=r.request.url;w=s.fault.substr(s.fault.lastIndexOf(".")+1);if(/prime=/.test(d)){if(/prime=0/.test(d)){u=1;s.prime="0";O("mailnet","TAE46:PRIME0");O("mailnet","TAE46:PRIME0_"+w);}else{if(/prime=1/.test(d)){s.prime="1";O("mailnet","TAE46:PRIME1");O("mailnet","TAE46:PRIME1_"+w);}else{O("mailnet","TAE46:BADPRIME");O("mailnet","TAE46:BADPRIME_"+w);}}}else{O("mailnet","TAE46:NOPRIME");O("mailnet","TAE46:NOPRIME_"+w);}if(U==="Client.InvalidConvId"){u=1;}}if(k===404){O("redirect:outage:404","client");O("redirect:outage:404"+NeoConfig.loginId,"client");u=1;}if(k===307){if(AB.responseText&&(JSON.parse(AB.responseText).error.code===110)){a(401,{msg:p,url:"https://mail.yahoo.com",stat:U+"_"+z});}}if(k===500||Z||k===400){if(/SessionIdReissue/.test(U)||U===107||/Reissuing session ID/.test(Y)){a(402);}else{if(/Credentials/.test(U)||U===106||U===105||/Credentials/.test(Y)){a(401,{stat:U+"_"+z});}else{if(/ClientRedirect/.test(U)||/ClientRedirect/.test(Y)){p=Q.substitute(strings.str_error_reload_account_migrated,null,null,strings);if(/HostCorrection/.test(U)||/HostCorrection/.test(Y)){a(401,{msg:p,url:"https://mail.yahoo.com",stat:U+"_"+z});}else{a(310,{msg:p,stat:U+"_"+z});}}else{if(/999/.test(U)||/999/.test(Y)){a(999,y.detail&&y.detail.token);}else{if((/ServiceTemporarilyUnavailable/.test(U)||/ServiceTemporarilyUnavailable/.test(Y))&&y.detail&&y.detail.displayUrl){O("redirect:outage:500","client");window.location=y.detail.displayUrl;return;}if(!u&&!c.suppressNotification){if(!c||!c.taeUiCbk||!c.taeUiCbk(s)){H(s);}}}}}}}else{if(U.indexOf("-unk")>-1){m={};m.message=strings.str_error_Unk;m.title=strings.str_error_Unk_title;a(null,m,X);}else{if(!u){m={};m.message=s.message;m.title=B.getTitle(AB);a(null,m,X);}}}if(c.errorPosition){s.errorPosition=c.errorPosition;}if(s.tae===46){s.convOrigin=c.convOrigin;if(c.openedFrom){s.openedFrom=c.openedFrom;}if(N&&r.request.postdata){S=r.request.postdata.match(/"cid":"(.*?)",/)[1]||"0";v=E.mail.model.ConvStore.Conversations.getPermCidPart(S);AC=N();AC=(AC&&AC[v])||null;s.tae46Hist={};s.tae46Hist[v]=AC;}}if(!q.retry){L(s,AB,X||h,u);}}catch(AA){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-error:3",AA,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-error:3");Q.assert(0,"mail:controller:error - "+AA.message);}if(!q.isdone()){q.done();}}function P(U){var S,T="",R="";Q.netError("FetchExternalAccount Error"+K(U));for(S=0;S<U.length;S++){R=U[S].status;O("mailnet","FetchExternalAccount_"+R);T=strings["str_error_extFetch_"+U[S].status];if(!T){O("mailnet","FetchExternalAccountUnexpected_"+R);T=strings.str_error_extFetch_unknownError;}T=Q.substitute(T,U[S]);T+="<br/><br/>";}M.showConfirm(function(){E.fire("openOptions",E.mix(this,{params:{section:"accounts"}}));},0,T);}E.mix(E.mail.Error,{handle:A,extFetchError:P,_showTae:H,registerTAE46Hist:I});E.fire("mailerrormodule:loaded");},"1.0.0",{requires:["common-net-error","mail-errormap","rocket-stats","ymma-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]});