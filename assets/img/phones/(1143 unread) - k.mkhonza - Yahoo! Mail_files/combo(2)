var wrappedFn = function () {
(function(){var C=function(E){try{var F,M,J,O,H=0,L=E.Get.script,N=window.location.search.substring(1).split("&"),I={"all":1,"404":2,"fastfailure":3,"failure":4,"timeout":5,"fasttimeout":6};C=0;for(;H<N.length;H++){F=N[H].split("=");if(F[0]==="modfailure"&&F.length===2){J=M=I[F[1].toLowerCase()];}}if(M){E.Get.script=function(P,Q){return G.call(this,L,P,Q);};}}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:1");}function G(R,P,S){var Q;if(typeof P==="string"){P=[P];}for(Q=0;Q<P.length;Q++){if(P[Q].search(/combo(.php)?\?/)>0){O=1;}}if(O){if(M===1){if(++J>6){J=2;}}switch(J){case 2:for(Q=0;Q<P.length;Q++){P[Q]=P[Q].replace(/combo(.php)?\?/,"nocombo?");}break;case 3:S.timeOut=20;case 4:setTimeout(function(){S.onFailure.call(S.context,{win:window,data:S});},S.timeout/2);return;case 5:setTimeout(function(){S.onTimeout.call(S.context,{win:window,data:S});},S.timeOut);return;case 6:S.timeout=10;break;}}return R.call(this,P,S);}};var B=YUI.use;YUI.use=YUI.prototype.use=function(){var F,I=this,G=0,J=I.Env,H=J._used,E=J._attached,L=Array.prototype.slice.call(arguments,0),M=L.pop();C&&C(I);if(typeof M!=="function"){L.push(M);M=0;}while((F=L[G++])){if(!H[F]||!E[F]){try{return B.apply(this,arguments);}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:2",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:2");A("yui:error","use");A("yui:error:use:"+F,L.join(","));D("Exception in use "+F+" with args "+L.join(",")+": "+K.toString(),"YUI_USE_EXCEPTION",K);}}}if(M){try{M.call(I,I,{success:true});}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:3",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:3");A("yui:error","cb");A("yui:error:cb",L.join(","));D("Exception in use "+L.join(",")+" callback: "+K.toString(),"YUI_CB_EXCEPTION",K);}}};function A(G,E){if(XMLHttpRequest){var H=new XMLHttpRequest(),F=(NeoConfig.expBucketId==="0"?(NeoConfig.isUltThrottled*1?"NoBucket":"NoUlt"):NeoConfig.expBucketId);H.open("POST","stat?storm=1");H.send('{"page":"'+G+'","key":"'+E+'","browser":"'+NeoConfig.browser+'","bucket":"'+F+'","storm":"1"}');}}function D(G,E,F){window.console&&console.log&&console.log(G);if(window.globals&&typeof globals.report==="function"){globals.report(G,E,1,1,1,F);}}})();

YUI.add("comms-log4js",function(F){var C=F.namespace("comms"),D={},E={ajax:B};C.log4js={getLogger:function(I,J,H,K){I=I||"[default]";J=J||1000;var G=D[I];if(!G){G=D[I]=A(I,J);}H&&G.useAppender(H,K);return G;},register:function(H,G){E[H]=G;}};function A(J,K){var I=[],L=0,H=0,G={};return{useAppender:function(O,N){var M=G[O];if(!M){if((M=E[O])){N=M(this,N,J);}M=G[O]=N;M.refresh&&M.refresh();}return M;},log:function(O){var M,N=I[H++]={msg:O,id:++L};if(!this.noDate){N.ts=new Date();}if(H>=K){H=0;}for(M in G){G[M].notify(N);}},getEntries:function(){I=I.concat(I.splice(0,H));H=I.length;if(H>=K){H=0;}return I;}};}function B(K,J){function N(O){try{var R=O.msg,Q=new XMLHttpRequest();Q.open("POST",I);if(J.jsonReq){Q.setRequestHeader("Content-type","application/json");}Q.send(R);}catch(P){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-comms-shared-src-log4js-log4js:1",P,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-comms-shared-src-log4js-log4js:1");}}J=J||{};var I=J.url||"/neo/logger",G=J.include,H=J.exclude,L=J.maxCount||5,M=J.jsonReq||false;G=G&&G.split(",")||[];H=H&&H.split(",")||[];return{notify:function(T){var S,O,V,P=G.length,U=T.msg,R=0;O=Q(G);V=Q(H);if(L&&(O||(!P&&!V))){N(T);}function Q(W){for(;R<W.length;R++){S=W[R];if(S==="*"||(U.indexOf(S)!==-1)){return 1;}}}}};}},"1.0");

YUI.add("launch-utils",function(F){var E=F.log,B=F.comms.log4js.getLogger,A=B("ylogLogger",1000),C=F.namespace("common.Utils");F.log=YUI.prototype.log=function(G){A.log(G);E.apply(this,arguments);};C.traceMsg=function D(H,G){C.startConsole(G);A.log(H);};C.startConsole=function(G){G&&F.use("comms-log4js-appenders-console",function(){A.useAppender("console").show();});};C.netError=function(G){if(parseInt(NeoConfig.log_error_yapache,10)===1){B("netLogger",1,"ajax").log(G);}};},"1.0",{requires:["comms-log4js"]});

YUI.add("mail-modules",function(A){A.use(function(C){C.mix(C.namespace("comps"),{"ac-advanced-search-entry":{"path":"mail/ui/searchautocomplete/advanced-search-ac-adapter_54_8396.js","requires":["mail-ui-advanced-search"]},"ac-corp-widget":{"path":"contacts/autocomplete/acCorpWidget_54_8396.js","requires":["ac-widget","filter-contacts"]},"ac-entity-search":{"path":"mail/ui/searchautocomplete/entity-search_54_8396.js"},"ac-message-search":{"path":"mail/ui/searchautocomplete/message-search_54_8396.js","requires":["mail-ui-search-model","mail-ui-messageaction","common-utils","ymma-stats"]},"ac-widget":{"path":"contacts/autocomplete/acWidget_54_8396.js","requires":["overlay","node-event-simulate","comms-ui-autocomplete-plugin","comms-ui-autocomplete","contacts-api-utils","contacts-api","filter-contacts","common-utils","comms-intl-bidihighlight","contacts-smartcontacts-api"]},"calendar-ui-addEvent-controller":{"path":"calendar/ui/addEvent/addEventController_54_8396.js","requires":["event-base","yui-log","attribute","calendar-ui-addEvent-utils","calendar-ui-addEvent-view","calendar-ui-addEvent-model","rocket-stats","mail-controller-compose-text"]},"calendar-ui-addEvent-listener":{"path":"calendar/ui/addEvent/addEventListener_54_8396.js","requires":["yui-log","event-base","calendar-ui-addEvent-controller"]},"calendar-ui-addEvent-model":{"path":"calendar/ui/addEvent/addEventModel_54_8396.js","requires":["yui-log","attribute","calendar-ui-addEvent-utils"]},"calendar-ui-addEvent-utils":{"path":"calendar/ui/addEvent/addEventUtils_54_8396.js","requires":["common-net-sessionmgr","common-utils"]},"calendar-ui-addEvent-view":{"path":"calendar/ui/addEvent/addEventView_54_8396.js","requires":["common-utils","_shared_module_calendar_dialog_add_event_mail_rollup","modal-calendar_css","modal_css","forms_css","comms-ui-dialog-base"]},"calendar-ui-calendarview":{"path":"calendar/ui/calendarview_54_8396.js","requires":["mail-ui-basewidget","node-event-simulate","querystring-stringify-simple","comms-crossframe"]},"common-net-crossframe":{"path":"common/net/crossframe_54_8396.js","requires":["common-utils"]},"common-net-diag":{"path":"common/net/diag_54_8396.js","requires":["common-net-session","rocket-stats","common-utils"]},"common-net-error":{"path":"common/net/error_54_8396.js","requires":["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","rocket-stats","common-persist-user-data","launch-utils"]},"common-net-error-base":{"path":"common/net/error-base_54_8396.js","requires":["common-utils","common-user-session"]},"common-net-errorevent":{"path":"common/net/errorevent_54_8396.js"},"common-net-session":{"path":"common/net/session_54_8396.js","requires":["event-custom","common-utils"]},"common-net-sessionmgr":{"path":"common/net/sessionmgr_54_8396.js","requires":["event-custom-base","common-net-session","common-net-error-base","rocket-stats","json-parse"]},"common-persist-cookie-data":{"path":"common/persist/cookieData_54_8396.js","requires":["cookie","attribute","common-persist-neo-data"]},"common-persist-neo-data":{"path":"common/persist/neoData_54_8396.js","requires":["attribute"]},"common-persist-user-data":{"path":"common/persist/userData_54_8396.js","requires":["attribute","mail-net-transport","json","common-utils"]},"common-ui-contentwidget":{"path":"common/ui/contentwidget/contentwidget_54_8396.js","requires":["event-key"]},"common-ui-conv-listview":{"path":"common/ui/listview/conv-listview_54_8396.js","requires":["base-base","node","event-focus"]},"common-ui-conv-listview-ext":{"path":"common/ui/listview/conv-listview-ext_54_8396.js","requires":["common-ui-conv-listview","transition","common-ui-notification"]},"common-ui-dd":{"path":"common/ui/dd/dd_54_8396.js","requires":["node","common-utils"]},"common-ui-diagpanel":{"path":"common/ui/contentwidget/diagpanel_54_8396.js","requires":["common-utils"]},"common-ui-dialog-helper":{"path":"common/ui/dialoghelper/dialoghelper_54_8396.js","requires":["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]},"common-ui-listview":{"path":"common/ui/listview/listview_54_8396.js","requires":["base-base","node","event-focus"]},"common-ui-listview-ext":{"path":"common/ui/listview/listview-ext_54_8396.js","requires":["common-ui-listview"]},"common-ui-lozengeDD":{"path":"common/ui/lozenge/lozenge-DD_54_8396.js","requires":["common-ui-dd","common-utils"]},"common-ui-menu-helper":{"path":"common/ui/menuhelper/menuhelper_54_8396.js","requires":["common-utils","menus_css","comms-ui-menu-base","_shared_module_offscreen_bin_menus_loading"]},"common-ui-navtabs":{"path":"common/ui/tabview/navtabs_54_8396.js","requires":["common-ui-tabs-base","common-utils","common-net-session","rocket-stats","minty_module_tabs_navtabs_removable"]},"common-ui-notification":{"path":"common/ui/notifications/notification_54_8396.js","requires":["common-utils"]},"common-ui-tabs-base":{"path":"common/ui/tabview/tabview_54_8396.js","requires":["mail-ui-basewidget","minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils","mail-ui-common-string-utils","rocket-stats","ymma-stats"]},"common-ui-tabs-overflow":{"path":"common/ui/tabview/taboverflow_54_8396.js","requires":["common-ui-menu-helper","_shared_module_offscreen_bin_inbox"]},"common-ui-tabs-tray":{"path":"common/ui/tabview/tray_54_8396.js","requires":["common-ui-tabs-base"]},"common-ui-toolbar-base":{"path":"common/ui/toolbar/toolbar_54_8396.js","requires":["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base","ymma-stats","common-ui-tabs-base"]},"common-user-session":{"path":"common/user/session_54_8396.js","requires":["common-persist-cookie-data","common-utils"]},"common-utils":{"path":"common/utils/utils_54_8396.js","requires":["querystring-parse-simple","querystring-stringify-simple","launch-utils"]},"common-utils-apihook":{"path":"common/utils/apihook_54_8396.js","requires":["common-utils","rocket-stats"]},"common-utils-error":{"path":"common/utils/error_54_8396.js","requires":["common-ui-tabs-base","comms-utils-stack-tracer","ymma-stats"]},"common-utils-stats":{"path":"common/utils/stats_54_8396.js","requires":["rocket-stats"]},"comms-aop-tracer":{"path":"comms/shared/src/aop/aspects/tracer_54_8396.js","requires":["comms-log4js","comms-log4js-appenders-traceconsole"]},"comms-aop-weaver":{"path":"comms/shared/src/aop/weaver_54_8396.js"},"comms-bidi-textentry":{"path":"comms/shared/src/bidi-textentry/js/bidi-textentry_54_8396.js","requires":["plugin","event-valuechange","comms-intl-bidi","comms-node-setdir"]},"comms-crossframe":{"path":"comms/shared/src/crossframe/crossframe_54_8396.js","requires":["json","crossframe"]},"comms-editor-autobidi":{"path":"comms/shared/src/editor-autobidi/js/editor-autobidi_54_8396.js","requires":["editor-base","comms-intl-bidi"]},"comms-intl-bidi":{"path":"comms/shared/src/intl-bidi/js/intl-bidi_54_8396.js"},"comms-intl-bidihighlight":{"path":"comms/shared/src/intl-bidihighlight/js/intl-bidihighlight_54_8396.js"},"comms-log4js":{"path":"comms/shared/src/log4js/log4js_54_8396.js"},"comms-log4js-appenders-console":{"path":"comms/shared/src/log4js/console_54_8396.js","requires":["comms-log4js"]},"comms-log4js-appenders-traceconsole":{"path":"comms/shared/src/log4js/traceconsole_54_8396.js","requires":["comms-log4js"]},"comms-lozenge":{"path":"comms/shared/src/lozenge/js/lozenge_54_8396.js","requires":["node","widget","substitute","comms-utils"]},"comms-lozenge-address":{"path":"comms/shared/src/lozenge-address/js/lozenge-address_54_8396.js","requires":["base-build","comms-lozenge"]},"comms-lozenge-edit":{"path":"comms/shared/src/lozenge-edit/js/lozenge-edit_54_8396.js","requires":["base-build","comms-lozenge"]},"comms-node-setdir":{"path":"comms/shared/src/node-setdir/js/node-setdir_54_8396.js","requires":["classnamemanager","node-base","node-style"]},"comms-ui-autocomplete":{"path":"comms/shared/src/autocomplete/js/autocomplete-widget_54_8396.js","requires":["overlay","comms-ui-autocomplete-plugin","node-event-simulate"]},"comms-ui-autocomplete-plugin":{"path":"comms/shared/src/autocomplete/js/autocomplete-plugin_54_8396.js","requires":["node","plugin","event-valuechange","event-key"]},"comms-ui-clipboard-plugin":{"path":"comms/shared/src/clipboard/js/clipboard-plugin_54_8396.js","requires":["node","plugin","substitute"]},"comms-ui-dialog-base":{"path":"comms/shared/src/ui/dialog/js/dialog_54_8396.js","requires":["overlay"]},"comms-ui-editable-overlay-plugin":{"path":"comms/shared/src/editable/js/editable-overlay-plugin_54_8396.js","requires":["comms-ui-editable-plugin","comms-utils"]},"comms-ui-editable-plugin":{"path":"comms/shared/src/editable/js/editable-plugin_54_8396.js","requires":["node","plugin"]},"comms-ui-envelope":{"path":"comms/shared/src/envelope/envelope_54_8396.js"},"comms-ui-feedback-widget":{"path":"comms/shared/src/feedback/js/feedback-widget_54_8396.js","requires":["node","widget","widget-position","widget-position-constrain","widget-stack"]},"comms-ui-lozenge":{"path":"comms/shared/src/lozengeOld/js/hLozenge_54_8396.js","requires":["comms-ui-lozenge_css","common-utils","comms-utils","node"]},"comms-ui-menu-base":{"path":"comms/shared/src/ui/menu/js/menu_54_8396.js"},"comms-ui-model":{"path":"comms/shared/src/ui/model/js/model_54_8396.js","requires":["json"]},"comms-ui-nodefocus":{"path":"comms/shared/src/ui/nodefocus/js/nodefocus_54_8396.js","requires":["plugin","node","event-key"]},"comms-ui-nodefocus-base":{"path":"comms/shared/src/ui/nodefocus/js/base_54_8396.js","requires":["plugin","node","event-key"]},"comms-ui-store-javascript":{"path":"comms/shared/src/ui/model/js/stores/javascript-store_54_8396.js","requires":["comms-ui-model","json"]},"comms-ui-tooltips-widget":{"path":"comms/shared/src/tooltips/js/tooltips-widget_54_8396.js","requires":["node","common-utils","widget","widget-position","widget-position-constrain","widget-stack","event-mouseenter"]},"comms-utils":{"path":"comms/shared/src/utils/js/utils_54_8396.js"},"comms-utils-stack-tracer":{"path":"comms/shared/src/utils/js/stack-tracer_54_8396.js"},"contacts-api":{"path":"comms/shared/src/contacts-api/api_54_8396.js","requires":["contacts-api-adapter","contacts-api-config","contacts-api-cache","contacts-api-utils"]},"contacts-api-adapter":{"path":"comms/shared/src/contacts-api/api-adapter_54_8396.js","requires":["contacts-api-io","contacts-api-cache","contacts-api-urigenerator","contacts-api-config","json","common-utils","rocket-stats"]},"contacts-api-cache":{"path":"comms/shared/src/contacts-api/api-cache_54_8396.js","requires":["contacts-api-config","common-utils-stats"]},"contacts-api-config":{"path":"comms/shared/src/contacts-api/api-config_54_8396.js","requires":["attribute"]},"contacts-api-io":{"path":"comms/shared/src/contacts-api/io_54_8396.js","requires":["contacts-api-urigenerator","json"]},"contacts-api-urigenerator":{"path":"comms/shared/src/contacts-api/urigenerator_54_8396.js","requires":["contacts-api-utils"]},"contacts-api-utils":{"path":"comms/shared/src/contacts-api/api-utils_54_8396.js","requires":["contacts-api-cache","common-utils-stats"]},"contacts-smartcontacts-api":{"path":"contacts/autocomplete/smartcontacts-api_54_8396.js","requires":["io-base"]},"contacts-ui-addcontact-add":{"path":"comms/shared/src/addContact/js/addcontactdialogadd_54_8396.js","requires":["node-event-simulate","common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact"]},"contacts-ui-addcontact-confirm":{"path":"comms/shared/src/addContact/js/addcontactconfirm_54_8396.js","requires":["common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd","_shared_module_contact_card_confirm","_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile","_shared_module_contact_fragments_photo","mod-contact-card_css"]},"contacts-ui-addcontact-controller":{"path":"comms/shared/src/addContact/js/add-contact-controller_54_8396.js","requires":["array-extras","comms-ui-dialog-base","contacts-api","contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","profile-api","profile-api-config"]},"contacts-ui-addcontactdialog":{"path":"comms/shared/src/addContact/js/addcontactdialog_54_8396.js","requires":["array-extras","comms-ui-dialog-base","contacts-api","contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","modal_css","forms_css","comms-utils"]},"contacts-ui-choosecontactdialog":{"path":"contacts/ui/choosecontactdialog/choosecontactdialog_54_8396.js","requires":["async-queue","node-event-simulate","comms-ui-dialog-base","common-utils","contacts-api-utils","contacts-api-config","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact","modal_css","mod-contacts_css","mod-contact-chooser_css","comms-intl-bidi"]},"contacts-ui-contact-popup":{"path":"contacts/ui/contactpopup/contact-popup_54_8396.js","requires":["overlay","xobni-contacts-search","common-utils","contacts-api-utils","mail-ui-messagepane-utils","mod-contact-card_css","_shared_module_contact_card_email_rollup","comms-utils","swfdetect","common-ui-menu-helper","_shared_module_offscreen_bin_contacts_menu_contact_compact_compose","_shared_module_offscreen_bin_contacts_menu_contact_compact_compose_fresh","_shared_module_offscreen_bin_contacts_menu_contact_compact_fresh"]},"contacts-ui-contactsevents":{"path":"contacts/ui/contactseventstranslator/contactsEvents_54_8396.js"},"contacts-ui-contactseventstranslator":{"path":"contacts/ui/contactseventstranslator/contactsEventsTranslator_54_8396.js","requires":["contacts-ui-contactsevents","contacts-ui-contactsview"]},"contacts-ui-contactsview":{"path":"contacts/ui/contactsview/contactsview_54_8396.js","requires":["mail-ui-basewidget","node-event-simulate"]},"crossframe":{"path":"comms/shared/src/crossframe/crossframe-base_54_8396.js"},"datasource-sync":{"path":"comms/shared/src/autocomplete/demo/federated-autocomplete-providers_54_8396.js","requires":["array-extras"]},"federated-autocomplete":{"path":"comms/shared/src/autocomplete/js/federated-autocomplete_54_8396.js","requires":["autocomplete","mail-persist-meta-data","common-utils","mail-ui-onboarding","minty_module_offscreen_bin_peoplesearch_callout_rollup"]},"federated-autocomplete-acwidget-shim":{"path":"comms/shared/src/autocomplete/js/federated-autocomplete-widgetshim_54_8396.js","requires":["federated-autocomplete"]},"filter-contacts":{"path":"contacts/autocomplete/filtercontacts_54_8396.js","requires":["contacts-api-utils","contacts-api"]},"filter-contacts-federated-ac-adapter":{"path":"mail/ui/searchautocomplete/filtercontacts-federated-ac-adapter_54_8396.js","requires":["filter-contacts","ac-entity-search","ymma-stats"]},"info-collector":{"path":"mail/debug/info-collector_54_8396.js","requires":["io"]},"isXobnifiedCheck":{"path":"comms/shared/src/xobniContacts/isXobnifiedCheck_54_8396.js","requires":["io-base","querystring","common-utils"]},"launch-utils":{"path":"common/launch/utils_54_8396.js","requires":["comms-log4js"]},"mail-common-autocompose-list":{"path":"mail/common/autocomposelist_54_8396.js"},"mail-common-cachewarmer":{"path":"mail/common/cachewarmer_54_8396.js","requires":["async-queue","loader","common-net-session","mail-controller-messages"]},"mail-common-corpmail":{"path":"mail/common/corpmail_54_8396.js"},"mail-common-downloader-v1":{"path":"mail/common/downloader_v1_54_8396.js","requires":["common-utils","mail-controller-messages","_shared_module_offscreen_bin_modal_attach_download_rollup","common-ui-dialog-helper","comms-ui-dialog-base","rocket-stats"]},"mail-common-downloader-v2":{"path":"mail/common/downloader_v2_54_8396.js","requires":["common-utils","mail-controller-messages","common-ui-dialog-helper","comms-ui-dialog-base","rocket-stats","datatype"]},"mail-common-hidef-profiles":{"path":"mail/common/hidef_profiles_54_8396.js","requires":["common-net-session"]},"mail-common-inline-edit":{"path":"mail/common/edit-control_54_8396.js"},"mail-common-lowbandwidth":{"path":"mail/common/lowbandwidth_54_8396.js","requires":["node","rocket-stats"]},"mail-common-pixiedust":{"path":"mail/common/pixiedust_54_8396.js"},"mail-common-precache-ranking":{"path":"mail/common/precache-ranking_54_8396.js","requires":["mail-ui-messagelist-base"]},"mail-common-precache-thread":{"path":"mail/common/precache-thread_54_8396.js","requires":["mail-ui-convlist-base"]},"mail-common-precache-unread":{"path":"mail/common/precache-unread_54_8396.js","requires":["mail-ui-messagelist-base"]},"mail-common-tracker":{"path":"mail/common/tracker_54_8396.js","requires":["ult-tracker"]},"mail-common-utils-callbacks":{"path":"common/utils/callbacks_54_8396.js"},"mail-common-utils-deferred":{"path":"common/utils/deferred_54_8396.js","requires":["mail-common-utils-callbacks","array-extras"]},"mail-common-yml":{"path":"mail/common/yml_54_8396.js"},"mail-controller-base":{"path":"mail/controller/base_54_8396.js","requires":["mail-net-transport","common-net-error-base","common-utils","common-utils-apihook","rocket-stats"]},"mail-controller-compose":{"path":"mail/controller/composectrl_54_8396.js","requires":["mail-controller-base","mail-model-compose","mail-model-send","common-persist-user-data","mail-persist-meta-data","mail-ui-common-fonts","_shared_module_compose_reply"]},"mail-controller-compose-text":{"path":"mail/controller/composetext_54_8396.js","requires":["common-persist-user-data","mail-controller-compose"]},"mail-controller-conversations":{"path":"mail/controller/conversation_54_8396.js","requires":["launch-utils","rocket-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data","mail-model-convstore","mail-model-datastore"]},"mail-controller-conversations-ops":{"path":"mail/controller/conversationsops_54_8396.js","requires":["rocket-stats","mail-controller-base","mail-model-convstore","json-stringify","array-extras"]},"mail-controller-folders":{"path":"mail/controller/folders_54_8396.js","requires":["rocket-stats","mail-model-datastore","mail-controller-base","common-persist-user-data"]},"mail-controller-messages":{"path":"mail/controller/messages_54_8396.js","requires":["launch-utils","rocket-stats","ymma-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data"]},"mail-controller-messages-ops":{"path":"mail/controller/messagesops_54_8396.js","requires":["rocket-stats","mail-controller-base","mail-model-datastore","json-stringify"]},"mail-controller-mrd":{"path":"mail/controller/mrd_54_8396.js","requires":["common-utils","mail-ui-shortcuts"]},"mail-controller-parkqueue":{"path":"mail/controller/parkqueue_54_8396.js"},"mail-controller-processbody":{"path":"mail/controller/processbody_54_8396.js","requires":["common-utils","common-utils-stats"]},"mail-controller-sendconfirm":{"path":"mail/controller/sendconfirm_54_8396.js","requires":["mail-controller-base","mail-model-send","mail-model-datastore","contacts-api-utils","contacts-api","mail-controller-messages-ops","rocket-stats","common-utils-stats"]},"mail-controller-spellcheck":{"path":"mail/controller/spellcheck_54_8396.js","requires":["mail-controller-base","mail-model-compose","common-net-sessionmgr","common-persist-user-data","json-parse"]},"mail-controller-tictacs":{"path":"mail/controller/tictacs_54_8396.js"},"mail-debug":{"path":"mail/debug/debug_54_8396.js","requires":["comms-log4js","comms-log4js-appenders-console","info-collector","common-net-diag","_shared_module_offscreen_bin_menus_debug"]},"mail-error":{"path":"mail/controller/error_54_8396.js","requires":["common-net-error","mail-errormap","rocket-stats","ymma-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]},"mail-errormap":{"path":"mail/controller/errormap_54_8396.js","requires":["json-stringify","common-net-error"]},"mail-model-compose":{"path":"mail/model/composemodel_54_8396.js","requires":["base","common-persist-user-data"]},"mail-model-convstore":{"path":"mail/model/convstore_54_8396.js","requires":["common-utils"]},"mail-model-datastore":{"path":"mail/model/datastore_54_8396.js","requires":["common-utils","json-stringify"]},"mail-model-send":{"path":"mail/model/sendmodel_54_8396.js","requires":["base"]},"mail-models-draft-model":{"path":"mail/model/DraftModel_54_8396.js"},"mail-net-ETP":{"path":"mail/net/etp_54_8396.js"},"mail-net-diag":{"path":"mail/net/diag_54_8396.js","requires":["common-net-diag","json-stringify","json-parse"]},"mail-net-queue":{"path":"mail/net/queue_54_8396.js","requires":["mail-net-transport"]},"mail-net-transport":{"path":"mail/net/transport_54_8396.js","requires":["common-net-sessionmgr","json-stringify","common-persist-neo-data"]},"mail-persist-meta-data":{"path":"mail/persist/metaData_54_8396.js","requires":["attribute","mail-net-transport"]},"mail-persist-user-preferences":{"path":"mail/persist/userPreferences_54_8396.js","requires":["attribute","mail-net-transport","json"]},"mail-recent-searches":{"path":"mail/ui/searchautocomplete/recent-searches_54_8396.js","requires":["common-utils","mail-persist-meta-data"]},"mail-recent-searches-federated-ac-adapter":{"path":"mail/ui/searchautocomplete/recent-searches-federated-ac-adapter_54_8396.js","requires":["mail-recent-searches","ac-entity-search","ymma-stats"]},"mail-service-uploader-form":{"path":"mail/common/uploader_form_54_8396.js"},"mail-service-uploader-utils":{"path":"mail/common/uploader-utils_54_8396.js","requires":["common-utils-stats","common-net-sessionmgr"]},"mail-service-uploader-v1":{"path":"mail/common/uploader_54_8396.js","requires":["mail-controller-compose","mail-model-compose","rocket-stats","common-utils","swfdetect","mail-service-uploader-utils"]},"mail-service-uploader-yui":{"path":"mail/common/uploader_yui_54_8396.js","requires":["mail-service-uploader-v1","uploader-deprecated","event-base"]},"mail-services-compose-service":{"path":"mail/services/v3/ComposeService_54_8396.js"},"mail-services-message-service":{"path":"mail/services/message-service_54_8396.js","requires":["mail-controller-messages","mail-common-utils-deferred"]},"mail-services-v3":{"path":"mail/services/v3_54_8396.js","requires":["rocket-stats","io"]},"mail-track":{"path":"common/utils/track_54_8396.js","requires":["common-utils"]},"mail-tt-attcomposer":{"path":"mail/ui/mailcompose/message/attcomposer_54_8396.js","requires":["tictac-attach-main","common-utils-stats","rocket-stats"]},"mail-ui-accounts":{"path":"mail/ui/accounts/accounts_54_8396.js","requires":["common-utils","common-persist-user-data"]},"mail-ui-actions-marker":{"path":"mail/ui/actions/marker_54_8396.js","requires":["comms-aop-tracer"]},"mail-ui-ad-feedback-dialog":{"path":"mail/ui/darla/adFeedbackDialog_54_8396.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_ad_feedback_rollup","modal_css"]},"mail-ui-ad-sponsored-feedback-dialog":{"path":"mail/ui/moneyball/mbFeedback_54_8396.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","modal_css","_shared_module_offscreen_bin_modal_mbFeedback"]},"mail-ui-ad-upsell-dialog":{"path":"mail/ui/darla/adUpsellDialog_54_8396.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_upsell_rollup","modal_css"]},"mail-ui-adfree-mail-dialog":{"path":"mail/ui/darla/adFreeMailDialog_54_8396.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_adfree_rollup","modal_css"]},"mail-ui-advanced-search":{"path":"mail/ui/advancedsearch/advanced-search_54_8396.js","requires":["common-utils","mail-ui-advanced-search-widget"]},"mail-ui-advanced-search-ac-widget":{"path":"mail/ui/advancedsearch/advanced-search-autocomplete-widget_54_8396.js","requires":["ac-widget","ac-corp-widget"]},"mail-ui-advanced-search-widget":{"path":"mail/ui/advancedsearch/advanced-search-widget_54_8396.js","requires":["ac-widget","common-utils","minty_module_search_advanced_search","datatype-date","mail-ui-advanced-search-ac-widget","node-event-simulate"]},"mail-ui-advancedSearchController":{"path":"mail/ui/msearch/advancedSearch/advancedSearchController_54_8396.js","requires":["common-utils","mail-ui-advancedSearchView","plugin","ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","comms-utils"]},"mail-ui-advancedSearchView":{"path":"mail/ui/msearch/advancedSearch/advancedSearchView_54_8396.js","requires":["common-utils","_shared_module_search_empty_rollup","_shared_module_search_empty_tae_rollup","_shared_module_search_empty_contact_rollup","attribute-base","event-base"]},"mail-ui-attachment-filetype":{"path":"mail/ui/attachments/filetype_54_8396.js"},"mail-ui-authorview-conv":{"path":"mail/ui/composeview/authorview-conv_54_8396.js","requires":["mail-controller-base","mail-controller-compose","mail-ui-composeview-conv","_shared_module_compose_title","_shared_module_offscreen_bin_notification_notifications","_shared_module_toolbar_compose_fresh"]},"mail-ui-autocompose":{"path":"mail/ui/mailcompose/message/autocomposeview_54_8396.js","requires":["mail-ui-fullcompose","common-utils","mail-common-autocompose-list","common-ui-menu-helper","_shared_module_offscreen_bin_menus_compose_genre","mail-ui-onboarding","comms-ui-tooltips-widget","mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_autocompose_callout","minty_module_offscreen_bin_autocompose_btntip","rocket-stats","ymma-stats"]},"mail-ui-backbutton":{"path":"mail/ui/workspace/backbutton_54_8396.js","requires":["rocket-stats"]},"mail-ui-basewidget":{"path":"mail/ui/basewidget/basewidget_54_8396.js","requires":["common-ui-contentwidget","mail-ui-navkeys"]},"mail-ui-boss":{"path":"mail/ui/boss/boss_54_8396.js","requires":["rocket-stats"]},"mail-ui-boss-multitask":{"path":"mail/ui/boss/multitask_54_8396.js","requires":["rocket-stats","mail-ui-boss","minty_module_boss_preview_overlay","common-persist-cookie-data","escape"]},"mail-ui-boss-screensaver":{"path":"mail/ui/boss/screensaver_54_8396.js","requires":["rocket-stats","mail-ui-boss","boss-extras_css"]},"mail-ui-boss-screensaver-console":{"path":"mail/ui/boss/screensaver-console_54_8396.js","requires":["mail-ui-boss-themes","mail-ui-boss-screensaver"]},"mail-ui-boss-screensaver-halloween":{"path":"mail/ui/boss/screensaver-halloween_54_8396.js","requires":["mail-ui-boss-screensaver-photos"]},"mail-ui-boss-screensaver-photos":{"path":"mail/ui/boss/screensaver-photos_54_8396.js","requires":["overlay","mail-ui-boss-themes","mail-ui-boss-screensaver"]},"mail-ui-boss-themes":{"path":"mail/ui/boss/themes_54_8396.js","requires":["rocket-stats","comms-ui-envelope","overlay","common-persist-cookie-data"]},"mail-ui-bulk-progress":{"path":"mail/ui/msearch/utils/bulkProgress_54_8396.js","requires":["common-ui-dialog-helper","_shared_module_offscreen_bin_progress_bar","mail-ui-basewidget"]},"mail-ui-button-ctxt":{"path":"mail/ui/buttonctxt/buttonctxt_54_8396.js","requires":["common-ui-toolbar-base"]},"mail-ui-captcha-controller":{"path":"mail/ui/captcha/controller_54_8396.js","requires":["common-utils","captcha_css","comms-ui-dialog-base","common-ui-dialog-helper","mail-ui-captcha-view"]},"mail-ui-captcha-view":{"path":"mail/ui/captcha/view_54_8396.js","requires":["captcha_css","_shared_module_send_confirm_captcha","_shared_module_send_confirm_captcha_blocked"]},"mail-ui-common-fonts":{"path":"mail/ui/common/fonts_54_8396.js","requires":["mail-persist-meta-data"]},"mail-ui-common-string-utils":{"path":"mail/ui/common/stringUtils_54_8396.js","requires":["common-utils"]},"mail-ui-composeview-attach":{"path":"mail/ui/composeview/compose-attach_54_8396.js","requires":["rocket-stats","swfdetect","mail-service-uploader-utils"]},"mail-ui-composeview-compose-loader":{"path":"mail/ui/composeview/compose-loader_54_8396.js","requires":["common-utils","common-utils-stats","mail-services-message-service","mail-ui-authorview-conv"]},"mail-ui-composeview-conv":{"path":"mail/ui/composeview/convcomposeview_54_8396.js","requires":["mail-controller-base","mail-controller-compose","mail-ui-fullcompose","_shared_module_compose_title","_shared_module_offscreen_bin_notification_notifications","common-ui-notification"]},"mail-ui-composeview-spellcheck":{"path":"mail/ui/composeview/compose-spellcheck_54_8396.js","requires":["node","plugin","mail-controller-compose","mail-controller-spellcheck","menus_css","comms-ui-menu-base","common-ui-menu-helper","_shared_module_offscreen_bin_compose_menu_spell_langs"]},"mail-ui-contentmatch-controller":{"path":"mail/ui/contentmatch/Controller_54_8396.js","requires":["mail-ui-searchads-cap","array-extras","mail-ui-contentmatch-model","mail-ui-contentmatch-text-ads-view"]},"mail-ui-contentmatch-d2s":{"path":"mail/ui/contentmatch/d2s/d2s_54_8396.js","requires":["rocket-stats","mail-ui-messagekeywords"]},"mail-ui-contentmatch-model":{"path":"mail/ui/contentmatch/Model_54_8396.js","requires":["io","datatype-xml","mail-services-v3","rocket-stats"]},"mail-ui-contentmatch-text-ads-view":{"path":"mail/ui/contentmatch/textAdsView_54_8396.js","requires":["rocket-stats","common-utils","minty_module_shell_ad_searchads"]},"mail-ui-conv-maillist-model":{"path":"mail/ui/maillist/conv/conv-maillistmodel_54_8396.js","requires":["common-ui-conv-listview"]},"mail-ui-conv-maillist-view":{"path":"mail/ui/maillist/conv/conv-maillistview_54_8396.js","requires":["common-ui-conv-listview"]},"mail-ui-convevents":{"path":"mail/ui/mailview/conv/convevents_54_8396.js","requires":["mail-controller-conversations","contacts-api-utils","xobni-contacts-search","mail-controller-conversations-ops","mail-model-convstore","mail-ui-mailevents"]},"mail-ui-convlist-base":{"path":"mail/ui/maillist/conv/convlist_54_8396.js","requires":["mail-ui-maillist","mail-ui-conv-maillist-model","mail-ui-conv-maillist-view","mail-controller-conversations","mail-ui-listview-controls","transition"]},"mail-ui-convpane-base":{"path":"mail/ui/mailpane/conv/convpane_54_8396.js","requires":["_shared_module_thread_thread_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-controller-conversations","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils","mail-model-convstore"]},"mail-ui-convpane-bind":{"path":"mail/ui/mailpane/conv/bind_54_8396.js"},"mail-ui-convpane-error":{"path":"mail/ui/mailpane/conv/error_54_8396.js","requires":["common-utils","_shared_module_thread_thread_display_rollup","mail-ui-pane-utils"]},"mail-ui-convpane-next-prev":{"path":"mail/ui/mailpane/conv/convnextprevious_54_8396.js","requires":["mail-ui-common-string-utils","mail-ui-convpane-base","mail-ui-mailpane-next-prev","mail-model-convstore","mail-controller-conversations","common-utils","common-utils-stats"]},"mail-ui-convpane-read":{"path":"mail/ui/mailpane/conv/convpaneread_54_8396.js","requires":["mail-ui-composeview-conv","common-persist-user-data","mail-persist-meta-data","mail-ui-convpane-base","mail-ui-messagepane-warnings","_shared_module_thread_thread_display_rollup","mail-ui-mailpane-read","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","mail-ui-convpane-bind","mod-conversation-history_css","mail-ui-common-fonts","common-ui-tabs-base","transition"]},"mail-ui-convs-confirm-dialog":{"path":"mail/ui/maillist/tutorial/convsConfirmDialog_54_8396.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","minty_module_conversations_modal_convs_confirm_rollup","modal_css"]},"mail-ui-convs-opt-in-dialog":{"path":"mail/ui/maillist/tutorial/convsOptInDialog_54_8396.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","minty_module_conversations_modal_convs_opt_in_rollup","modal_css","node-event-simulate"]},"mail-ui-convview-base":{"path":"mail/ui/mailview/conv/convview_54_8396.js","requires":["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-convlist-base","mail-ui-convpane-base","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils"]},"mail-ui-darla":{"path":"mail/ui/darla/neodarla_54_8396.js","requires":["node-base","darla-base","rocket-stats","common-utils","common-persist-cookie-data","minty_module_afc_afc","minty_module_amazon_amzn_sky","minty_module_amazon_amzn_rec"]},"mail-ui-dmsearch-controller":{"path":"mail/ui/dmsearch/dmsearchController_54_8396.js","requires":["event-base","mail-ui-dmsearch-view","mail-ui-sponsoredsearch-model","mail-ui-dmsearch-model"]},"mail-ui-dmsearch-model":{"path":"mail/ui/dmsearch/dmsearchModel_54_8396.js","requires":["common-net-sessionmgr"]},"mail-ui-dmsearch-view":{"path":"mail/ui/dmsearch/dmsearchView_54_8396.js","requires":["node-base","node-event-delegate","attribute-base","event-base","minty_module_list_view_ad_search","minty_module_list_view_ad_skysearch","minty_module_list_view_ad_mas_search","minty_module_shell_ad_searchads"]},"mail-ui-emptyFolderController":{"path":"mail/ui/msearch/emptyFolder/emptyFolderController_54_8396.js","requires":["mail-ui-emptyFolderView"]},"mail-ui-emptyFolderView":{"path":"mail/ui/msearch/emptyFolder/emptyFolderView_54_8396.js","requires":["common-utils","_shared_module_folder_empty_rollup","attribute-base","event-base"]},"mail-ui-factory-base":{"path":"mail/ui/factory/factory_54_8396.js"},"mail-ui-fb-token-refresh":{"path":"mail/ui/fbtoken/refresh_54_8396.js","requires":["cookie","node","event","jsonp"]},"mail-ui-folderevents":{"path":"mail/ui/foldersview/folderevents_54_8396.js","requires":["common-utils","mail-controller-folders","common-ui-dialog-helper","comms-bidi-textentry"]},"mail-ui-foldersview-base":{"path":"mail/ui/foldersview/foldersview_54_8396.js","requires":["common-utils","rocket-stats","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts","common-ui-tabs-base"]},"mail-ui-foldersview-bind":{"path":"mail/ui/foldersview/bind_54_8396.js"},"mail-ui-fullcompose":{"path":"mail/ui/mailcompose/message/composeview_54_8396.js","requires":["mail-ui-mailcompose","mail-ui-rteview","mail-ui-messagepane-utils","forms_css","attachments-fresh_css","mail-ui-composeview-attach","editor-base","editor-para","editor-br","node","stylesheet","mail-controller-compose-text","mail-model-compose","contacts-api-utils","contacts-api","filter-contacts","plugin","comms-bidi-textentry","comms-editor-autobidi","comms-intl-bidi","editor-bidi","_shared_module_compose_fresh_conv","_shared_module_toolbar_compose_fresh","_shared_module_compose_loading","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_rte_well_content_format_fresh","_shared_module_rte_well_content_emoticons_fresh","_shared_module_rte_well_content_fontnamesize_fresh","_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_tabs_compose_fresh","common-ui-toolbar-base","common-ui-menu-helper","_shared_module_offscreen_bin_compose_menu_list","_shared_module_offscreen_bin_compose_menu_text_align","_shared_module_offscreen_bin_compose_menu_indent","mail-ui-rte-formatter"]},"mail-ui-fullcompose-well":{"path":"mail/ui/mailcompose/message/composeview-well_54_8396.js","requires":["_shared_module_toolbar_compose","_shared_module_compose_loading","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_rte_well_content_format","_shared_module_rte_well_content_emoticons","_shared_module_rte_well_content_attachments","_shared_module_rte_well_tabs_compose","common-ui-toolbar-base","_shared_module_offscreen_bin_compose_menu_list","_shared_module_offscreen_bin_compose_menu_text_align"]},"mail-ui-header":{"path":"mail/ui/header/header_54_8396.js","requires":["node","mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]},"mail-ui-header-base":{"path":"mail/ui/header/header_base_54_8396.js"},"mail-ui-header-roughseas":{"path":"mail/ui/header/header-roughseas_54_8396.js","requires":["common-utils"]},"mail-ui-header-utils":{"path":"mail/ui/header/headerUtils_54_8396.js","requires":["common-utils","common-persist-user-data"]},"mail-ui-inboxmenu-base":{"path":"mail/ui/inboxmenu/inboxmenu_54_8396.js","requires":["common-utils","menus_css","mail-ui-foldersview-base"]},"mail-ui-list-mgr":{"path":"mail/ui/msearch/model/listmgr_54_8396.js"},"mail-ui-listview-controls":{"path":"mail/ui/maillist/base/listview-controls_54_8396.js"},"mail-ui-log":{"path":"mail/debug/maillog_54_8396.js","requires":["ymma-stats","comms-log4js","common-utils"]},"mail-ui-log-events":{"path":"mail/debug/maillog-events_54_8396.js","requires":["mail-ui-log"]},"mail-ui-mailSearchController":{"path":"mail/ui/msearch/mailSearchController_54_8396.js","requires":["json","mail-ui-basewidget","common-utils","mail-ui-searchutils","mail-ui-search-model","mail-ui-list-mgr","mail-recent-searches"]},"mail-ui-mailcompose":{"path":"mail/ui/mailcompose/message/mailcompose_54_8396.js","requires":["autocomplete_css","common-persist-user-data","mail-persist-meta-data","mail-controller-messages","mail-model-datastore","_shared_module_compose_message_header","mail-controller-compose","_shared_module_compose_message_header_fresh","mail-ui-mailcompose-base-header-conv","rocket-stats","comms-utils","mail-ui-basewidget","editor-inline","mail-services-message-service"]},"mail-ui-mailcompose-base-header":{"path":"mail/ui/mailcompose/base/mailcompose-header_54_8396.js","requires":["comms-ui-lozenge","ac-widget","_shared_module_offscreen_bin_compose","mail-controller-compose","mail-controller-compose-text","contacts-api","_shared_module_compose_message_header","_shared_module_compose_message_header_fresh","mail-ui-basewidget"]},"mail-ui-mailcompose-base-header-conv":{"path":"mail/ui/mailcompose/message/mailcompose-header-conv_54_8396.js","requires":["comms-ui-lozenge","ac-widget","_shared_module_offscreen_bin_compose","mail-controller-compose","_shared_module_offscreen_bin_notification_notifications","mail-controller-compose-text","contacts-api","_shared_module_compose_message_header","_shared_module_compose_message_header_fresh","mail-ui-basewidget"]},"mail-ui-mailevents":{"path":"mail/ui/mailview/base/mailevents_54_8396.js","requires":["mail-controller-messages","mail-controller-messages-ops","common-utils","common-ui-tabs-base","mail-model-datastore","comms-utils","_shared_module_offscreen_bin_notification_notifications","common-ui-notification"]},"mail-ui-maillist":{"path":"mail/ui/maillist/base/maillist_54_8396.js","requires":["common-ui-contentwidget","mail-controller-folders","common-persist-user-data","mail-ui-common-string-utils","mail-ui-accounts","mail-model-datastore","rocket-stats","io","yui-throttle"]},"mail-ui-maillist-listview":{"path":"mail/ui/maillist/base/maillist-listview_54_8396.js","requires":["plugin","mail-ui-messagelist-base"]},"mail-ui-maillist-model":{"path":"mail/ui/maillist/base/maillistmodel_54_8396.js","requires":["common-ui-listview"]},"mail-ui-maillist-view":{"path":"mail/ui/maillist/base/maillistview_54_8396.js","requires":["common-ui-listview"]},"mail-ui-mailmarkup-base":{"path":"mail/ui/mailview/base/markup_54_8396.js","requires":["node"]},"mail-ui-mailpane-base":{"path":"mail/ui/mailpane/base/mailpane_54_8396.js","requires":["minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-mailpane-next-prev":{"path":"mail/ui/mailpane/base/mailnextprevious_54_8396.js","requires":["mail-ui-common-string-utils","common-utils","common-utils-stats"]},"mail-ui-mailpane-read":{"path":"mail/ui/mailpane/base/mailread_54_8396.js","requires":["mail-ui-common-string-utils","common-utils","common-utils-stats","mail-controller-base"]},"mail-ui-mailuibind-base":{"path":"mail/ui/mailview/base/uibind_54_8396.js","requires":["node"]},"mail-ui-mailview-base":{"path":"mail/ui/mailview/base/mailview_54_8396.js","requires":["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","mail-ui-pane-utils"]},"mail-ui-mb-controller":{"path":"mail/ui/moneyball/mbController_54_8396.js","requires":["mail-ui-mb-model","mail-ui-mb-view","rocket-stats","event-base","event-resize","mail-persist-meta-data","common-utils"]},"mail-ui-mb-model":{"path":"mail/ui/moneyball/mbModel_54_8396.js","requires":["common-net-sessionmgr","common-utils"]},"mail-ui-mb-rec-controller":{"path":"mail/ui/moneyball/mbRecController_54_8396.js","requires":["mail-ui-mb-model","mail-ui-mb-view","rocket-stats","event-base","event-resize","common-utils"]},"mail-ui-mb-rightrail-controller":{"path":"mail/ui/moneyball/mbRightRailController_54_8396.js","requires":["mail-ui-mb-model","mail-ui-mb-view","rocket-stats","common-utils"]},"mail-ui-mb-view":{"path":"mail/ui/moneyball/mbView_54_8396.js","requires":["array-extras","node-base","common-utils","node-event-delegate","attribute-base","event-base","rocket-stats","minty_module_list_view_ad_mb","minty_module_list_view_ad_mbrec","minty_module_list_view_ad_shell_mb","minty_module_list_view_ad_shell_mbrec","minty_module_moneyball_right_rail"]},"mail-ui-message-encodings":{"path":"mail/ui/messagesview/message-encodings_54_8396.js","requires":["common-utils"]},"mail-ui-message-timedalertdialog":{"path":"mail/ui/messagesview/message-timedalertdialogs_54_8396.js","requires":["mail-modules","mail-templates","common-utils","common-ui-dialog-helper"]},"mail-ui-messageaction":{"path":"mail/ui/msearch/model/messageactions_54_8396.js","requires":["mail-controller-messages","mail-controller-messages-ops","common-utils","mail-model-datastore","ymma-stats","common-ui-tabs-base","rocket-stats"]},"mail-ui-messageevents":{"path":"mail/ui/mailview/message/messageevents_54_8396.js","requires":["mail-controller-messages","mail-controller-messages-ops","mail-model-datastore","mail-ui-mailevents"]},"mail-ui-messagekeywords":{"path":"mail/ui/messagekeywords/messagekeywords_54_8396.js","requires":["mail-ui-searchads-cap","array-extras"]},"mail-ui-messagelist-base":{"path":"mail/ui/maillist/message/messagelist_54_8396.js","requires":["mail-ui-maillist","mail-ui-maillist-model","mail-ui-maillist-view","mail-controller-messages","mail-ui-listview-controls","mail-ui-maillist-listview"]},"mail-ui-messagelistdomains":{"path":"mail/ui/messagelistdomains/messagelistdomains_54_8396.js","requires":["mail-ui-messagepane-utils"]},"mail-ui-messagepane-base":{"path":"mail/ui/mailpane/message/messagepane_54_8396.js","requires":["minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-messagepane-bind":{"path":"mail/ui/mailpane/message/bind_54_8396.js"},"mail-ui-messagepane-error":{"path":"mail/ui/mailpane/message/error_54_8396.js","requires":["common-utils","_shared_module_message_display_fresh_rollup"]},"mail-ui-messagepane-next-prev":{"path":"mail/ui/mailpane/message/nextprevious_54_8396.js","requires":["mail-ui-common-string-utils","mail-ui-messagepane-base","mail-ui-mailpane-next-prev","mail-model-datastore","mail-controller-messages","common-utils","common-utils-stats"]},"mail-ui-messagepane-read":{"path":"mail/ui/mailpane/message/messagepaneread_54_8396.js","requires":["common-persist-user-data","mail-persist-meta-data","mail-ui-messagepane-warnings","mail-ui-mailpane-read","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","mod-conversation-history_css","mail-ui-attachment-filetype","mail-ui-common-fonts","common-ui-tabs-base","ymma-stats"]},"mail-ui-messagepane-utils":{"path":"mail/ui/messagepane/utils_54_8396.js","requires":["common-utils-stats","mail-ui-messagepane-utils-shared"]},"mail-ui-messagepane-utils-shared":{"path":"mail/ui/messagepane/shared_54_8396.js"},"mail-ui-messagepane-warnings":{"path":"mail/ui/messagepane/warnings_54_8396.js","requires":["common-utils"]},"mail-ui-messagepreview":{"path":"mail/ui/mailpane/message/preview_54_8396.js","requires":["common-utils","mail-model-datastore","mail-controller-messages","_shared_module_offscreen_bin_modal_preview_rollup"]},"mail-ui-messagesview-base":{"path":"mail/ui/mailview/message/messagesview_54_8396.js","requires":["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagelist-base","mail-ui-messagepane-base","dom-screen","mail-ui-common-string-utils"]},"mail-ui-messagesview-dd":{"path":"mail/ui/messagesview/messagesview-dd_54_8396.js","requires":["mail-model-datastore","common-utils","node-base","common-ui-dd","_shared_module_offscreen_bin_drag_drop"]},"mail-ui-messagesview-quickfilter":{"path":"mail/ui/messagesview/quickfilter_54_8396.js","requires":["common-utils","common-persist-user-data","mail-model-datastore","forms_css","_shared_module_offscreen_bin_modal_quick_filters","common-ui-dialog-helper","mail-controller-messages-ops","mail-ui-common-string-utils"]},"mail-ui-messagesview-resize":{"path":"mail/ui/messagesview/messagesview-resize_54_8396.js","requires":["common-persist-cookie-data","stylesheet","node","common-ui-dd","common-persist-user-data"]},"mail-ui-messagesview-search":{"path":"mail/ui/msearch/messagesviewSearch_54_8396.js","requires":["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagepane-base","dom-screen","mail-ui-common-string-utils"]},"mail-ui-messagesview-vertical":{"path":"mail/ui/messagesview/vertical_54_8396.js","requires":["mail-ui-messagesview-resize"]},"mail-ui-messenger":{"path":"mail/ui/messenger/messenger_54_8396.js","requires":["common-utils","swfdetect"]},"mail-ui-navkeys":{"path":"mail/ui/navkeys/navkeys_54_8396.js","requires":["mail-controller-folders"]},"mail-ui-onboarding":{"path":"mail/ui/onboarding/onboarding_54_8396.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_onboard_rollup","json-parse","modal_css","options-pages_css","node-event-simulate","mail-ui-themes"]},"mail-ui-onboarding-nav":{"path":"mail/ui/onboarding/nav_54_8396.js","requires":["common-utils","ymma-stats","mail-ui-onboarding","minty_module_offscreen_bin_nav_callout","mail-ui-workspace-ext","rocket-stats","nav-onboarding_css"]},"mail-ui-pane-utils":{"path":"mail/ui/mailpane/base/paneutils_54_8396.js","requires":["mail-controller-messages","common-utils","mail-persist-meta-data"]},"mail-ui-print":{"path":"mail/ui/print/print_54_8396.js","requires":["mail-controller-messages","_shared_module_offscreen_bin_print_print_rollup"]},"mail-ui-proxyevents":{"path":"mail/ui/mailview/conv/proxyevents_54_8396.js","requires":["mail-ui-mailevents","mail-ui-messageevents","mail-ui-convevents"]},"mail-ui-rte-formatter":{"path":"mail/ui/mailcompose/rte/rte-formatter_54_8396.js"},"mail-ui-rte-linkeditor":{"path":"mail/ui/mailcompose/rte/rte-linkeditor_54_8396.js","requires":["plugin","common-ui-dialog-helper","_shared_module_compose_link_editor"]},"mail-ui-rte-smartscroll":{"path":"mail/ui/mailcompose/rte/rte-smartscroll_54_8396.js","requires":["editor-base"]},"mail-ui-rteview":{"path":"mail/ui/mailcompose/rte/rteview_54_8396.js","requires":["attribute-base","editor-base","editor-inline","editor-para","event-base","node-base","node-event-delegate","common-utils","mail-ui-basewidget","mail-ui-rte-linkeditor","mail-ui-rte-smartscroll"]},"mail-ui-search-model":{"path":"mail/ui/msearch/model/msws_54_8396.js","requires":["mail-ui-searchutils","json","rocket-stats","mail-ui-common-string-utils","datatype-date"]},"mail-ui-searchGroupsController":{"path":"mail/ui/msearch/searchGroups/searchGroupsController_54_8396.js","requires":["common-utils","mail-ui-searchGroupsView","ymma-stats"]},"mail-ui-searchGroupsView":{"path":"mail/ui/msearch/searchGroups/searchGroupsView_54_8396.js","requires":["common-utils","_shared_module_shell_navigation_search_rollup","mail-ui-common-string-utils","ymma-stats"]},"mail-ui-searchListController":{"path":"mail/ui/msearch/searchList/searchListController_54_8396.js","requires":["common-utils","mail-ui-searchListView","mail-ui-listview-controls","xobni-contacts-search"]},"mail-ui-searchListView":{"path":"mail/ui/msearch/searchList/searchListView_54_8396.js","requires":["stylesheet","datatype-date","mail-controller-folders","mail-controller-messages","mail-ui-common-string-utils","mail-ui-attachment-filetype","mail-ui-searchutils","_shared_module_search_didyoumean_rollup","ac-entity-search"]},"mail-ui-searchads":{"path":"mail/ui/searchads/searchads_54_8396.js","requires":["mail-ui-searchads-cap","rocket-stats"]},"mail-ui-searchads-cap":{"path":"mail/ui/searchads/cap_54_8396.js","requires":["rocket-stats","json-parse","mail-services-v3"]},"mail-ui-searchbar":{"path":"mail/ui/msearch/searchbar_54_8396.js","requires":["common-utils","node-pluginhost","ac-entity-search"]},"mail-ui-searchdesc":{"path":"mail/ui/msearch/searchdesc_54_8396.js"},"mail-ui-searchutils":{"path":"mail/ui/msearch/utils/searchUtils_54_8396.js"},"mail-ui-sendconfirmview-base-conv":{"path":"mail/ui/sendconfirm/sendconfirm-base-conv_54_8396.js","requires":["common-utils","mail-controller-sendconfirm","minty_module_toolbar_inbox_sent_msg_rollup","_shared_module_send_confirm_rollup","_shared_module_offscreen_bin_notification_notifications","_shared_module_send_confirm_captcha_blocked","comms-lozenge-address","comms-ui-lozenge","mail-ui-searchbar","common-ui-notification","rocket-stats"]},"mail-ui-shortcuts":{"path":"mail/ui/shortcuts/shortcuts_54_8396.js","requires":["common-utils","mail-ui-messagepane-utils"]},"mail-ui-shortcuts-dialog":{"path":"mail/ui/shortcuts/shortcutsdialog_54_8396.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_shortcuts_rollup","modal_css"]},"mail-ui-sponsored-themes-countdown-model":{"path":"mail/ui/sponsored-themes/countdown/model_54_8396.js"},"mail-ui-sponsored-themes-countdown-view":{"path":"mail/ui/sponsored-themes/countdown/view_54_8396.js","requires":["minty_module_sponsored_themes_olympics_countdown","common-utils"]},"mail-ui-sponsored-themes-games-widget-model":{"path":"mail/ui/sponsored-themes/games-widget/model_54_8396.js","requires":["array-extras","datatype-date-format"]},"mail-ui-sponsored-themes-games-widget-view":{"path":"mail/ui/sponsored-themes/games-widget/view_54_8396.js","requires":["minty_module_sponsored_themes_olympics_games_widget","minty_module_sponsored_themes_olympics_single_medal_count","common-utils","scrollview-base","scrollview-paginator","minty_module_sponsored_themes_olympics_olympics_event_card","rocket-stats"]},"mail-ui-sponsored-themes-view":{"path":"mail/ui/sponsored-themes/view_54_8396.js","requires":["minty_module_shell_ad_sponads","minty_module_shell_ad_onboardingTooltip","minty_module_shell_ad_onboardingTooltipMountains","minty_module_shell_ad_onboardingTooltipSkier","minty_module_sponsored_themes_olympics_base","mail-ui-sponsored-themes-countdown-model","mail-ui-sponsored-themes-countdown-view","common-utils","mail-persist-meta-data","mail-ui-themes","rocket-stats","mail-ui-sponsored-themes-games-widget-model","mail-ui-sponsored-themes-games-widget-view"]},"mail-ui-sponsoredsearch-model":{"path":"mail/ui/sponsoredsearch/sponsoredSearchModel_54_8396.js","requires":["common-net-sessionmgr"]},"mail-ui-themes":{"path":"mail/ui/themes/themes_54_8396.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_colors_rollup","json-parse","modal_css","options-pages_css"]},"mail-ui-toolbarController":{"path":"mail/ui/msearch/toolbar/toolbarController_54_8396.js","requires":["common-utils","contacts-api","contacts-api-utils"]},"mail-ui-workspace-base":{"path":"mail/ui/workspace/workspace_54_8396.js","requires":["event-resize","mail-controller-tictacs","mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","common-ui-toolbar-base","mail-ui-searchbar","common-utils-stats","mail-ui-common-string-utils","mail-common-tracker","ymma-stats"]},"mail-ui-workspace-ext":{"path":"mail/ui/workspace/workspace-ext_54_8396.js","requires":["mail-ui-workspace-base"]},"mail-ui-workspace-fresh":{"path":"mail/ui/workspace/workspace-fresh_54_8396.js","requires":["mail-ui-workspace-base","comms-ui-tooltips-widget","widget-anim","_shared_module_offscreen_bin_tooltip_fresh"]},"mail-ui-workspace-horizontal-slider":{"path":"mail/ui/workspace/workspacehslider_54_8396.js","requires":["node-base","common-persist-cookie-data","common-ui-dd"]},"notepad-ui-notepadview":{"path":"notepad/ui/notepadview_54_8396.js","requires":["mail-ui-basewidget","node-event-simulate","querystring-stringify-simple"]},"profile-api":{"path":"comms/shared/src/profile-api/js/api_54_8396.js","requires":["profile-api-config"]},"profile-api-config":{"path":"comms/shared/src/profile-api/js/api-config_54_8396.js","requires":["attribute"]},"rocket-stats":{"path":"comms/shared/src/rocketstats/js/src/rocketstats_54_8396.js"},"scrum-board":{"path":"comms/shared/tools/scrumBoard/scrumBoard_54_8396.js","requires":["bugzilla-table","node","json","substitute","dd-ddm-drop","dd-proxy","dd-drop","dd-delegate"]},"searchautocomplete":{"path":"mail/ui/searchautocomplete/searchautocomplete_54_8396.js","requires":["ac-widget","filter-contacts","mail-recent-searches","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","common-utils","comms-utils","common-persist-user-data","mail-ui-searchbar","mail-ui-advanced-search","mail-persist-meta-data","mail-ui-onboarding","minty_module_offscreen_bin_searchsuggestion_callout_rollup"]},"searchautocomplete-extra-modules":{"path":"mail/ui/searchautocomplete/searchautocomplete-extra-modules_54_8396.js","requires":["federated-autocomplete-acwidget-shim","filter-contacts-federated-ac-adapter","xobni-contacts-search","mail-recent-searches-federated-ac-adapter","ac-message-search","ac-advanced-search-entry","ac-entity-search","isXobnifiedCheck"]},"template-renderer":{"path":"comms/shared/src/utils/js/template-renderer_54_8396.js"},"tracer":{"path":"mail/debug/tracer_54_8396.js","requires":["comms-aop-weaver","comms-aop-tracer","mail-ui-actions-marker"]},"ult-track":{"path":"common/utils/ultTrack_54_8396.js","requires":["ult_wrapper"]},"ult-tracker":{"path":"common/utils/ultTracker_54_8396.js","requires":["json","mail-track"]},"ult_wrapper":{"path":"common/utils/ult_54_8396.js"},"utils-tutorial":{"path":"mail/ui/common/tutorial_54_8396.js","requires":["comms-ui-tooltips-widget","widget-anim","_shared_module_offscreen_bin_tooltip_fresh"]},"web-search-autocomplete":{"path":"mail/ui/searchautocomplete/web-search-autocomplete_54_8396.js","requires":["array-extras"]},"xobni-contacts-search":{"path":"mail/ui/searchautocomplete/xobni-contact-search_54_8396.js","requires":["common-utils","xobni-contacts-search-api","ac-entity-search","contacts-api-utils","_shared_module_xobni_contact_search_results_rollup","ymma-stats","isXobnifiedCheck"]},"xobni-contacts-search-api":{"path":"comms/shared/src/xobniContacts/xobni-contacts-search-api_54_8396.js","requires":["io-base","json","ymma-stats"]},"ymma-stats":{"path":"comms/shared/src/ymmastats/js/src/ymmastats_54_8396.js"}});
var D={"postlaunch":["common-utils-error","mail-common-cachewarmer","mail-error","mail-errormap","mail-ui-inboxmenu-base","mail-ui-folderevents","mail-ui-messenger","mail-ui-print","mail-ui-themes","mail-ui-onboarding","mail-ui-shortcuts-dialog","mail-ui-ad-upsell-dialog","mail-ui-adfree-mail-dialog","mail-ui-ad-feedback-dialog","mail-ui-ad-sponsored-feedback-dialog","mail-ui-convs-opt-in-dialog","mail-ui-convs-confirm-dialog","common-ui-menu-helper","common-ui-tabs-overflow","mail-ui-workspace-ext","mail-ui-foldersview-bind","mail-ui-messagesview-quickfilter","mail-ui-messagesview-search","mail-ui-messagekeywords","mail-ui-messagelistdomains","mail-ui-advanced-search","mail-ui-advanced-search-widget","mail-ui-advanced-search-ac-widget","mail-ui-sponsored-themes-view","mail-ui-sponsored-themes-countdown-model","mail-ui-sponsored-themes-countdown-view","mail-ui-sponsored-themes-games-widget-view","mail-ui-sponsored-themes-games-widget-model","calendar-ui-calendarview","notepad-ui-notepadview","searchautocomplete","searchautocomplete-extra-modules","ac-message-search","federated-autocomplete","federated-autocomplete-acwidget-shim","web-search-autocomplete","mail-recent-searches-federated-ac-adapter","filter-contacts","filter-contacts-federated-ac-adapter","mail-recent-searches","ac-advanced-search-entry","_shared_module_offscreen_bin_menus_spam","mail-ui-proxyevents","mail-ui-mb-controller","mail-ui-mb-rec-controller","mail-ui-mb-rightrail-controller","mail-ui-mb-view","mail-ui-mb-model","mail-ui-boss-multitask","mail-ui-common-fonts","mail-ui-composeview-compose-loader","mail-services-message-service","mail-ui-onboarding-nav","mail-ui-contentmatch-d2s","ac-widget","ac-corp-widget","comms-utils","xobni-contacts-search","mail-ui-search-model","mail-ui-searchutils","mail-ui-messageaction","mail-ui-mailevents","mail-ui-messageevents","mail-ui-convevents","mail-ui-authorview-conv","mail-controller-compose","mail-ui-composeview-conv","mail-ui-fullcompose","mail-ui-mailcompose","mail-ui-mailcompose-base-header-conv","comms-ui-lozenge","mail-controller-compose-text","mail-ui-rteview","mail-ui-rte-linkeditor","mail-ui-composeview-attach","mail-service-uploader-utils","mail-ui-rte-formatter"],"calendar":["calendar-ui-addEvent-utils","calendar-ui-addEvent-listener","calendar-ui-addEvent-controller","calendar-ui-addEvent-model","calendar-ui-addEvent-view","mail-controller-compose-text","mail-controller-compose","mail-ui-common-fonts"],"compose":["mail-common-downloader-v1","mail-common-downloader-v2","mail-controller-compose","mail-controller-compose-text","mail-controller-spellcheck","mail-ui-authorview-conv","mail-ui-composeview-attach","mail-ui-mailcompose","mail-ui-autocompose","mail-ui-fullcompose-well","mail-ui-fullcompose","mail-ui-composeview-conv","mail-ui-mailcompose-base-header","mail-ui-mailcompose-base-header-conv","mail-ui-composeview-spellcheck","mail-ui-messageevents","mail-ui-convevents","mail-ui-mailevents","mail-ui-messagepane-error","mail-ui-messagepane-read","mail-ui-messagepane-warnings","mail-ui-messagepane-next-prev","mail-ui-convpane-next-prev","mail-ui-messagepane-bind","mail-ui-message-encodings","mail-ui-messagepreview","mail-ui-sendconfirmview-base-conv","mail-service-uploader-v1","mail-service-uploader-yui","mail-service-uploader-form","mail-service-uploader-utils","mail-ui-convpane-read","mail-ui-captcha-controller","mail-ui-captcha-view","mail-ui-rteview","mail-ui-rte-formatter","mail-ui-rte-linkeditor","mail-tt-attcomposer","mail-ui-common-fonts","comms-ui-lozenge","comms-utils","ac-widget","filter-contacts","mail-services-message-service","common-ui-menu-helper","mail-ui-onboarding","mail-ui-themes","xobni-contacts-search","mail-ui-mailpane-read","mail-ui-mailpane-next-prev","mail-controller-sendconfirm","comms-lozenge-address","comms-lozenge"],"contacts":["contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","contacts-ui-addcontactdialog","contacts-ui-choosecontactdialog","contacts-ui-contact-popup","contacts-ui-addcontact-controller","comms-utils","xobni-contacts-search","common-ui-menu-helper"],"search":["mail-ui-searchutils","mail-ui-bulk-progress","mail-ui-search-model","mail-ui-mailSearchController","mail-ui-searchListController","mail-ui-searchListView","mail-ui-advancedSearchController","mail-ui-advancedSearchView","mail-ui-searchGroupsController","mail-ui-dmsearch-controller","mail-ui-dmsearch-model","mail-ui-contentmatch-model","mail-ui-contentmatch-controller","mail-ui-contentmatch-text-ads-view","mail-ui-sponsoredsearch-model","mail-ui-dmsearch-view","mail-ui-searchGroupsView","mail-ui-emptyFolderController","mail-ui-emptyFolderView","mail-recent-searches","xobni-contacts-search","ac-widget","filter-contacts","comms-utils"],"subcompose":["ac-widget","ac-corp-widget","comms-lozenge","comms-ui-lozenge","comms-utils","comms-lozenge-address","comms-lozenge-edit","comms-ui-editable-overlay-plugin","mail-model-send","mail-controller-compose","mail-controller-sendconfirm","xobni-contacts-search","filter-contacts","mail-ui-common-fonts"]};var P={"postlaunch_strings":{"path":"intl/js/postlaunch/lang_"+NeoConfig.lang+"_54_8396"+".js"},"calendar_strings":{"path":"intl/js/calendar/lang_"+NeoConfig.lang+"_54_8396"+".js","requires":["postlaunch_strings"]},"compose_strings":{"path":"intl/js/compose/lang_"+NeoConfig.lang+"_54_8396"+".js","requires":["postlaunch_strings"]},"contacts_strings":{"path":"intl/js/contacts/lang_"+NeoConfig.lang+"_54_8396"+".js","requires":["postlaunch_strings"]},"search_strings":{"path":"intl/js/search/lang_"+NeoConfig.lang+"_54_8396"+".js","requires":["postlaunch_strings"]},"subcompose_strings":{"path":"intl/js/subcompose/lang_"+NeoConfig.lang+"_54_8396"+".js","requires":["postlaunch_strings"]}};C.mix(C.comps,P);for(var G in D){var H=D[G];for(var O=0;O<H.length;O++){var J=H[O];var T=C.comps[J];if(T){if(!T.requires){T.requires=[];}T.requires.push(G+"_strings");}}}M();function M(){var Z,Y,V,a;if(NeoConfig.convMods){for(var X in NeoConfig.convMods){V=X.split("$");
Z=NeoConfig.convMods[X];Y=C.comps[V[1]];if(Y&&Z){if(V[0]=="PATH"){Y["path"]=Z;}else{if(V[0]=="REQ"){a=Z.split("$");if(a[0]===""){Y["requires"].push(a[1]);}else{for(var W=0;W<Y["requires"].length;W++){if(Y["requires"][W]==a[0]){Y["requires"][W]=a[1];break;}}}}else{if(V[0]==="FULL_REQ"){Y["requires"]=Z.split("$");}}}}}}}var F,L="",N=0,K=0,E=1,B=0,I=NeoConfig.reducedUrlLength||255,U=NeoConfig.urlLength||2000,R={mail:{name:"mail",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root,base:YUI_config.groups.mailMods.base,combine:true,modules:C.comps,origin:NeoConfig.originPath}};S();function S(){(B++>2)&&(B<7)&&E++;F=(NeoConfig.yloaderTimeout||7500)*E;if(NeoConfig.low_bandwidth){F=F*2+2;}}function Q(){var Z,c,X,f,b,g,V,e=NeoConfig.retryOriginPerc,Y=0,W=[],d=window,a=d.globals||{};d.globals=a;Z=a.failures={};e||(e===0)||(e=101);V=Math.random()*100<e;c=function(i,l,p,j){var x,AA,v=i.Env,t=YUI.Env.mods,o=v._loader,q=o.moduleInfo,y=o.groups,h=i.common.Utils.rocketstats,z,n=v._missed?v._missed.length:0;if(n>0){i.use("common-utils-error",function(AB){for(z=0;z<n;z++){AB.common.Utils.error.report("Missing Module: "+v._missed[z],"YUI_MODULE_MISSING",1,1,1);AB.common.Utils.log({m:"Module Missing",module:v._missed[z]},true,"MissingModule");}});}m.errorFn=1;j=i.clone(j);r(j);if(x&&x.type=="js"&&!x.noRegister){Z[x.name]=Z[x.name]||0;Z[x.name]++;h.stat("loader","modfailure_"+x.name+"_"+e+"_"+V);if(!L){L=x.name;K++;}N++;if(U==I){(F<61000)&&(F*=2);}else{x=0;}U=I;AA={timeout:F,maxURLLength:U};i._config(AA);if(x){V?w(x,u):u(2);return;}}u(Y++<5?1:2);function m(){s("edge");S();try{l&&l.apply(this,arguments);}catch(AB){}k(0,1);}function s(AB){L&&h.stat("loader",AB+"success_"+L+"_"+K);N&&h.stat("loader",AB+"retries"+"_"+e+"_"+V,N);L="";N=0;}function k(AC,AB){if(g&&(AB==2)){b=g+10000-new Date().getTime();if(b>0){X=X||setTimeout(k,b);}if(X){return;}}else{X&&(AB==1)&&clearTimeout(X);X=0;}setTimeout(function(){g=new Date().getTime();if(f=W.shift()){f.Y.use.apply(f.Y,f.a);}},0);}function u(AB){(l&&l.errorFn)?j.push(l):j.push(m);W.push({Y:i,a:j});k(0,AB);}function r(){var AC,AB,AD=0;while(AC=j[AD++]){if(!t[AC]){x=q[AC];if(!x){h.stat("loader","nomodinfo",null,{browser:true,bucket:true,storm:true});(function(AE){i.use("common-utils-error",function(AF){AF.common.Utils.error.report("No Module Info: "+AE,"YUI_MODULE_INFO_MISSING",1,1,1);});})(AC);YUI.add(AC);}else{if(x.type=="js"){if(!x.noRegister){return;}AB=x;YUI.add(AC);}AB=AB||x;}}}x=AB;}function w(AF,AC){var AH,AI,AB,AE,AJ=AF.fullpath,AD=AF.name,AG=F/4;if(!AJ){if(AI=y[AF.group]){if(!(AH=AI.origin)){h.stat("loader","no_origin_"+AF.group);if((AH=AI.root)&&(AH.indexOf("nq/")==0)){AH="storm/"+AH.substring(3);}if(AH.indexOf("f=/n/")==0){AH="storm/"+AH.substring(5);}if(AH.length<3){h.stat("loader","invalid_origin_"+AD);AC(2);return;}}}else{AH="yui3/build/";}AJ=location.protocol+"//"+location.host+"/"+AH+AF.path;}if(i.UA.webkit){AJ+="?.rand="+new Date().getTime();}AB={autopurge:true,timeout:AG,onSuccess:function(){if(!AE&&t[AD]){AE=1;s("origin");AC(1);}else{this.onFailure();}},onFailure:function(){if(!AE){AE=1;AC(2);}}};AB.onTimeout=AB.onFailure;i.Get.script(AJ,AB);}};return c;}delete C.Env._loader.rollups;C._config({requireRegistration:true,loadErrorFn:Q(),timeout:F,maxURLLength:U,groups:R});});},"1.0.0");

YUI.add("mail-templates",function(B){var A={mailTmpl:{name:"mailTmpl",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root+"templates/js/",base:YUI_config.groups.mailMods.base+"templates/js/",combine:true,modules:{"_shared_module_calendar_dialog_add_event_mail_rollup":{"path":"_shared/module/calendar/dialog/add-event-mail_rollup_54_8396.js"},"_shared_module_calendar_menu_times":{"path":"_shared/module/calendar/menu/times_54_8396.js"},"_shared_module_compose_dummy_rollup":{"path":"_shared/module/compose-dummy_rollup_54_8396.js"},"_shared_module_compose_fresh":{"path":"_shared/module/compose-fresh_54_8396.js","requires":["_shared_module_compose_message_header_fresh","_shared_module_rte_well_fresh","_shared_module_compose_message_body"]},"_shared_module_compose_fresh_conv":{"path":"_shared/module/compose-fresh-conv_54_8396.js","requires":["_shared_module_compose_message_header_fresh","_shared_module_compose_message_body","_shared_module_rte_well_content_attachments_well_fresh","_shared_module_rte_well_fresh_conv"]},"_shared_module_compose_link_editor":{"path":"_shared/module/compose/link-editor_54_8396.js"},"_shared_module_compose_loading":{"path":"_shared/module/compose/loading_54_8396.js"},"_shared_module_compose_message_body":{"path":"_shared/module/compose/message-body_54_8396.js","requires":["_shared_module_message_loading_error"]},"_shared_module_compose_message_header":{"path":"_shared/module/compose/message-header_54_8396.js"},"_shared_module_compose_message_header_fresh":{"path":"_shared/module/compose/message-header-fresh_54_8396.js","requires":["_shared_module_compose_quick_reply_card_actions"]},"_shared_module_compose_quick_reply_card_actions":{"path":"_shared/module/compose/quick-reply-card-actions_54_8396.js"},"_shared_module_compose_reply":{"path":"_shared/module/compose/reply_54_8396.js"},"_shared_module_compose_title":{"path":"_shared/module/compose/title_54_8396.js"},"_shared_module_contact_card_confirm":{"path":"_shared/module/contact/card-confirm_54_8396.js","requires":["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_activity","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},"_shared_module_contact_card_email_rollup":{"path":"_shared/module/contact/card-email_rollup_54_8396.js"},"_shared_module_contact_card_lg":{"path":"_shared/module/contact/card-lg_54_8396.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_follow","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},"_shared_module_contact_card_md":{"path":"_shared/module/contact/card-md_54_8396.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},"_shared_module_contact_card_sm":{"path":"_shared/module/contact/card-sm_54_8396.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},"_shared_module_contact_fragments_activity":{"path":"_shared/module/contact/fragments/activity_54_8396.js"},"_shared_module_contact_fragments_dl_email":{"path":"_shared/module/contact/fragments/dl/email_54_8396.js"},"_shared_module_contact_fragments_dl_mobile":{"path":"_shared/module/contact/fragments/dl/mobile_54_8396.js"},"_shared_module_contact_fragments_dl_yim":{"path":"_shared/module/contact/fragments/dl/yim_54_8396.js"},"_shared_module_contact_fragments_follow":{"path":"_shared/module/contact/fragments/follow_54_8396.js"},"_shared_module_contact_fragments_info":{"path":"_shared/module/contact/fragments/info_54_8396.js","requires":["_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile"]},"_shared_module_contact_fragments_name":{"path":"_shared/module/contact/fragments/name_54_8396.js"},"_shared_module_contact_fragments_photo":{"path":"_shared/module/contact/fragments/photo_54_8396.js"},"_shared_module_feedback":{"path":"_shared/module/feedback_54_8396.js"},"_shared_module_folder_empty_rollup":{"path":"_shared/module/folder-empty_rollup_54_8396.js"},"_shared_module_message_display_fresh_rollup":{"path":"_shared/module/message-display-fresh_rollup_54_8396.js"},"_shared_module_message_list_refresh_rollup":{"path":"_shared/module/message-list-refresh_rollup_54_8396.js"},"_shared_module_message_list_thread_expansion_error":{"path":"_shared/module/message-list/thread_expansion_error_54_8396.js"},"_shared_module_message_list_threaded_rollup":{"path":"_shared/module/message-list-threaded_rollup_54_8396.js"},"_shared_module_message_loading_error":{"path":"_shared/module/message/loading-error_54_8396.js"},"_shared_module_message_norton_logo":{"path":"_shared/module/message/norton-logo_54_8396.js"},"_shared_module_message_pane_fresh":{"path":"_shared/module/message-pane-fresh_54_8396.js","requires":["_shared_module_message_prompt","_shared_module_message_display_fresh_rollup"]},"_shared_module_message_prompt":{"path":"_shared/module/message/prompt_54_8396.js"},"_shared_module_offscreen_bin_compose":{"path":"_shared/module/offscreen-bin/compose_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_color_picker":{"path":"_shared/module/offscreen-bin/compose/menu-color-picker_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_indent":{"path":"_shared/module/offscreen-bin/compose/menu-indent_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_list":{"path":"_shared/module/offscreen-bin/compose/menu-list_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_spell_langs":{"path":"_shared/module/offscreen-bin/compose/menu-spell-langs_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_spellcheck":{"path":"_shared/module/offscreen-bin/compose/menu-spellcheck_54_8396.js"},"_shared_module_offscreen_bin_compose_menu_text_align":{"path":"_shared/module/offscreen-bin/compose/menu-text-align_54_8396.js"},"_shared_module_offscreen_bin_compose_modal_cancel_compose":{"path":"_shared/module/offscreen-bin/compose/modal-cancel-compose_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_compose_modal_check_spelling_rollup":{"path":"_shared/module/offscreen-bin/compose/modal-check-spelling_rollup_54_8396.js"},"_shared_module_offscreen_bin_contacts_menu_contact_compact_compose":{"path":"_shared/module/offscreen-bin/contacts/menu-contact-compact-compose_54_8396.js","requires":["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name"]},"_shared_module_offscreen_bin_contacts_menu_contact_compact_compose_fresh":{"path":"_shared/module/offscreen-bin/contacts/menu-contact-compact-compose-fresh_54_8396.js"},"_shared_module_offscreen_bin_contacts_menu_contact_compact_fresh":{"path":"_shared/module/offscreen-bin/contacts/menu-contact-compact-fresh_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-bd_54_8396.js","requires":["minty_module_contacts_edit_error","minty_module_contacts_edit_name","minty_module_contacts_edit_basics_emails","minty_module_contacts_edit_basics_ims","minty_module_contacts_edit_basics_phones"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-ft_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-hd_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-bd_54_8396.js","requires":["_shared_module_contact_card_confirm"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-ft_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_done"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-hd_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/modal-kiosk-addcontact_54_8396.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-count_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-filter_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-look-for_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane_54_8396.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-bd_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-hd_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-loading_54_8396.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-bd_54_8396.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-ft_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-hd_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/modal-kiosk-choosecontact_54_8396.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft"]},"_shared_module_offscreen_bin_drag_drop":{"path":"_shared/module/offscreen-bin/drag-drop_54_8396.js"},"_shared_module_offscreen_bin_inbox":{"path":"_shared/module/offscreen-bin/inbox_54_8396.js","requires":["_shared_module_offscreen_bin_menus_actions","_shared_module_offscreen_bin_menus_view","_shared_module_offscreen_bin_menus_actions_fresh","_shared_module_offscreen_bin_menus_thread_list","_shared_module_offscreen_bin_menus_msg_actions","_shared_module_offscreen_bin_menus_compose","_shared_module_offscreen_bin_modal_attach_download","_shared_module_offscreen_bin_menus_tab_overflow","_shared_module_offscreen_bin_modal_set_encodings","_shared_module_offscreen_bin_menus_conv_actions","_shared_module_offscreen_bin_menus_bubble_actions","_shared_module_offscreen_bin_menus_conv_reply","_shared_module_offscreen_bin_menus_message_list_preview","_shared_module_offscreen_bin_menus_message_list_switcher","_shared_module_offscreen_bin_menus_message_list_sortby","_shared_module_offscreen_bin_menus_message_list_cbox_select","_shared_module_offscreen_bin_menus_message_list_count"]},"_shared_module_offscreen_bin_menus_actions":{"path":"_shared/module/offscreen-bin/menus/actions_54_8396.js"},"_shared_module_offscreen_bin_menus_actions_fresh":{"path":"_shared/module/offscreen-bin/menus/actions-fresh_54_8396.js"},"_shared_module_offscreen_bin_menus_bubble_actions":{"path":"_shared/module/offscreen-bin/menus/bubble-actions_54_8396.js"},"_shared_module_offscreen_bin_menus_compose":{"path":"_shared/module/offscreen-bin/menus/compose_54_8396.js"},"_shared_module_offscreen_bin_menus_compose_attach":{"path":"_shared/module/offscreen-bin/menus/compose-attach_54_8396.js"},"_shared_module_offscreen_bin_menus_compose_genre":{"path":"_shared/module/offscreen-bin/menus/compose-genre_54_8396.js"},"_shared_module_offscreen_bin_menus_conv_actions":{"path":"_shared/module/offscreen-bin/menus/conv-actions_54_8396.js"},"_shared_module_offscreen_bin_menus_conv_reply":{"path":"_shared/module/offscreen-bin/menus/conv-reply_54_8396.js"},"_shared_module_offscreen_bin_menus_debug":{"path":"_shared/module/offscreen-bin/menus/debug_54_8396.js"},"_shared_module_offscreen_bin_menus_external_links":{"path":"_shared/module/offscreen-bin/menus/external-links_54_8396.js"},"_shared_module_offscreen_bin_menus_loading":{"path":"_shared/module/offscreen-bin/menus/loading_54_8396.js"},"_shared_module_offscreen_bin_menus_message_list_cbox_select":{"path":"_shared/module/offscreen-bin/menus/message-list-cbox-select_54_8396.js"},"_shared_module_offscreen_bin_menus_message_list_count":{"path":"_shared/module/offscreen-bin/menus/message-list-count_54_8396.js"},"_shared_module_offscreen_bin_menus_message_list_preview":{"path":"_shared/module/offscreen-bin/menus/message-list-preview_54_8396.js"},"_shared_module_offscreen_bin_menus_message_list_sortby":{"path":"_shared/module/offscreen-bin/menus/message-list-sortby_54_8396.js"},"_shared_module_offscreen_bin_menus_message_list_switcher":{"path":"_shared/module/offscreen-bin/menus/message-list-switcher_54_8396.js"},"_shared_module_offscreen_bin_menus_msg_actions":{"path":"_shared/module/offscreen-bin/menus/msg-actions_54_8396.js"},"_shared_module_offscreen_bin_menus_mts_external_links":{"path":"_shared/module/offscreen-bin/menus/mts-external-links_54_8396.js"},"_shared_module_offscreen_bin_menus_options_fresh":{"path":"_shared/module/offscreen-bin/menus/options-fresh_54_8396.js"},"_shared_module_offscreen_bin_menus_reply_modes":{"path":"_shared/module/offscreen-bin/menus/reply-modes_54_8396.js"},"_shared_module_offscreen_bin_menus_sbc_external_links":{"path":"_shared/module/offscreen-bin/menus/sbc-external-links_54_8396.js"},"_shared_module_offscreen_bin_menus_spam":{"path":"_shared/module/offscreen-bin/menus/spam_54_8396.js"},"_shared_module_offscreen_bin_menus_tab_overflow":{"path":"_shared/module/offscreen-bin/menus/tab-overflow_54_8396.js"},"_shared_module_offscreen_bin_menus_thread_list":{"path":"_shared/module/offscreen-bin/menus/thread-list_54_8396.js"},"_shared_module_offscreen_bin_menus_view":{"path":"_shared/module/offscreen-bin/menus/view_54_8396.js"},"_shared_module_offscreen_bin_modal":{"path":"_shared/module/offscreen-bin/modal_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_modal_ad_feedback_rollup":{"path":"_shared/module/offscreen-bin/modal-ad-feedback_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_adfree_rollup":{"path":"_shared/module/offscreen-bin/modal-adfree_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_attach_download":{"path":"_shared/module/offscreen-bin/modal-attach-download_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_message_norton_logo","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_attach_download_rollup":{"path":"_shared/module/offscreen-bin/modal-attach-download_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_autocompose":{"path":"_shared/module/offscreen-bin/modal-autocompose_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_cancel":{"path":"_shared/module/offscreen-bin/modal-btn-cancel_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_continue":{"path":"_shared/module/offscreen-bin/modal-btn-continue_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_done":{"path":"_shared/module/offscreen-bin/modal-btn-done_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_generic":{"path":"_shared/module/offscreen-bin/modal-btn-generic_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_ok":{"path":"_shared/module/offscreen-bin/modal-btn-ok_54_8396.js"},"_shared_module_offscreen_bin_modal_btn_save":{"path":"_shared/module/offscreen-bin/modal-btn-save_54_8396.js"},"_shared_module_offscreen_bin_modal_btns_done_cancel":{"path":"_shared/module/offscreen-bin/modal-btns-done-cancel_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_btns_ok_cancel":{"path":"_shared/module/offscreen-bin/modal-btns-ok-cancel_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_close_icon":{"path":"_shared/module/offscreen-bin/modal-close-icon_54_8396.js"},"_shared_module_offscreen_bin_modal_colors_rollup":{"path":"_shared/module/offscreen-bin/modal-colors_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup":{"path":"_shared/module/offscreen-bin/modal-kiosk-mail-preview_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_launch_error_rollup":{"path":"_shared/module/offscreen-bin/modal-launch-error_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_mbFeedback":{"path":"_shared/module/offscreen-bin/modal-mbFeedback_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_onboard_rollup":{"path":"_shared/module/offscreen-bin/modal-onboard_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_preview_rollup":{"path":"_shared/module/offscreen-bin/modal-preview_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_quick_filters":{"path":"_shared/module/offscreen-bin/modal-quick-filters_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_save","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_set_encodings":{"path":"_shared/module/offscreen-bin/modal-set-encodings_54_8396.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btns_done_cancel"]},"_shared_module_offscreen_bin_modal_shortcuts_rollup":{"path":"_shared/module/offscreen-bin/modal-shortcuts_rollup_54_8396.js"},"_shared_module_offscreen_bin_modal_upsell_rollup":{"path":"_shared/module/offscreen-bin/modal-upsell_rollup_54_8396.js"},"_shared_module_offscreen_bin_notification_notifications":{"path":"_shared/module/offscreen-bin/notification/notifications_54_8396.js"},"_shared_module_offscreen_bin_print_print_rollup":{"path":"_shared/module/offscreen-bin/print/print_rollup_54_8396.js"},"_shared_module_offscreen_bin_progress_bar":{"path":"_shared/module/offscreen-bin/progress-bar_54_8396.js"},"_shared_module_offscreen_bin_renamer":{"path":"_shared/module/offscreen-bin/renamer_54_8396.js"},"_shared_module_offscreen_bin_shell_navigation_newfolder_body_rollup":{"path":"_shared/module/offscreen-bin/shell-navigation/newfolder/body_rollup_54_8396.js"},"_shared_module_offscreen_bin_shell_navigation_newfolder_header_rollup":{"path":"_shared/module/offscreen-bin/shell-navigation/newfolder/header_rollup_54_8396.js"},"_shared_module_offscreen_bin_tooltip_fresh":{"path":"_shared/module/offscreen-bin/tooltip-fresh_54_8396.js"},"_shared_module_rte_well_content_attach_item":{"path":"_shared/module/rte-well/content/attach-item_54_8396.js"},"_shared_module_rte_well_content_attachments":{"path":"_shared/module/rte-well/content/attachments_54_8396.js","requires":["_shared_module_rte_well_content_attach_item","_shared_module_rte_well_content_file_count"]},"_shared_module_rte_well_content_attachments_fresh":{"path":"_shared/module/rte-well/content/attachments-fresh_54_8396.js"},"_shared_module_rte_well_content_attachments_well_fresh":{"path":"_shared/module/rte-well/content/attachments-well-fresh_54_8396.js","requires":["_shared_module_rte_well_content_attach_item","_shared_module_rte_well_content_file_count"]},"_shared_module_rte_well_content_emoticons":{"path":"_shared/module/rte-well/content/emoticons_54_8396.js"},"_shared_module_rte_well_content_emoticons_fresh":{"path":"_shared/module/rte-well/content/emoticons-fresh_54_8396.js"},"_shared_module_rte_well_content_file_count":{"path":"_shared/module/rte-well/content/file-count_54_8396.js","requires":["_shared_module_message_norton_logo"]},"_shared_module_rte_well_content_fontnamesize_fresh":{"path":"_shared/module/rte-well/content/fontnamesize-fresh_54_8396.js"},"_shared_module_rte_well_content_format":{"path":"_shared/module/rte-well/content/format_54_8396.js"},"_shared_module_rte_well_content_format_fresh":{"path":"_shared/module/rte-well/content/format-fresh_54_8396.js"},"_shared_module_rte_well_fresh":{"path":"_shared/module/rte-well-fresh_54_8396.js","requires":["_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_content_format_fresh"]},"_shared_module_rte_well_fresh_conv":{"path":"_shared/module/rte-well-fresh-conv_54_8396.js","requires":["_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_content_format_fresh"]},"_shared_module_rte_well_tabs_compose":{"path":"_shared/module/rte-well/tabs/compose_54_8396.js"},"_shared_module_rte_well_tabs_compose_fresh":{"path":"_shared/module/rte-well/tabs/compose-fresh_54_8396.js"},"_shared_module_search_didyoumean_rollup":{"path":"_shared/module/search-didyoumean_rollup_54_8396.js"},"_shared_module_search_empty_contact_rollup":{"path":"_shared/module/search-empty-contact_rollup_54_8396.js"},"_shared_module_search_empty_rollup":{"path":"_shared/module/search-empty_rollup_54_8396.js"},"_shared_module_search_empty_tae_rollup":{"path":"_shared/module/search-empty-tae_rollup_54_8396.js"},"_shared_module_search_searchtooltip_rollup":{"path":"_shared/module/search/searchtooltip_rollup_54_8396.js"},"_shared_module_search_with_snippet_rollup":{"path":"_shared/module/search-with-snippet_rollup_54_8396.js"},"_shared_module_send_confirm_captcha":{"path":"_shared/module/send-confirm/captcha_54_8396.js","requires":["_shared_module_offscreen_bin_modal_btn_continue","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_send_confirm_captcha_blocked":{"path":"_shared/module/send-confirm/captcha-blocked_54_8396.js"},"_shared_module_send_confirm_rollup":{"path":"_shared/module/send-confirm_rollup_54_8396.js"},"_shared_module_shell_navigation_search_rollup":{"path":"_shared/module/shell-navigation/search_rollup_54_8396.js"},"_shared_module_thread_thread_display_rollup":{"path":"_shared/module/thread/thread-display_rollup_54_8396.js"},"_shared_module_thread_thread_pane":{"path":"_shared/module/thread/thread-pane_54_8396.js","requires":["_shared_module_message_prompt","_shared_module_thread_thread_display_rollup"]},"_shared_module_toolbar_compose":{"path":"_shared/module/toolbar/compose_54_8396.js"},"_shared_module_toolbar_compose_fresh":{"path":"_shared/module/toolbar/compose-fresh_54_8396.js"},"_shared_module_xobni_contact_search_results_rollup":{"path":"_shared/module/xobni-contact-search-results_rollup_54_8396.js"},"minty_module_afc_afc":{"path":"minty/module/afc/afc_54_8396.js"},"minty_module_amazon_amzn_rec":{"path":"minty/module/amazon/amzn_rec_54_8396.js"},"minty_module_amazon_amzn_sky":{"path":"minty/module/amazon/amzn_sky_54_8396.js"},"minty_module_boss_preview_overlay":{"path":"minty/module/boss/preview-overlay_54_8396.js"},"minty_module_comm_modes":{"path":"minty/module/comm-modes_54_8396.js"},"minty_module_contacts_edit_basics_emails":{"path":"minty/module/contacts/edit/basics/emails_54_8396.js","requires":["minty_module_contacts_edit_select_lists_emails"]},"minty_module_contacts_edit_basics_ims":{"path":"minty/module/contacts/edit/basics/ims_54_8396.js","requires":["minty_module_contacts_edit_select_lists_ims"]},"minty_module_contacts_edit_basics_phones":{"path":"minty/module/contacts/edit/basics/phones_54_8396.js","requires":["minty_module_contacts_edit_select_lists_phones"]},"minty_module_contacts_edit_error":{"path":"minty/module/contacts/edit/error_54_8396.js"},"minty_module_contacts_edit_name":{"path":"minty/module/contacts/edit/name_54_8396.js"},"minty_module_contacts_edit_select_lists_emails":{"path":"minty/module/contacts/edit/select-lists/emails_54_8396.js"},"minty_module_contacts_edit_select_lists_ims":{"path":"minty/module/contacts/edit/select-lists/ims_54_8396.js"},"minty_module_contacts_edit_select_lists_phones":{"path":"minty/module/contacts/edit/select-lists/phones_54_8396.js"},"minty_module_conversations_modal_convs_confirm_rollup":{"path":"minty/module/conversations/modal-convs-confirm_rollup_54_8396.js"},"minty_module_conversations_modal_convs_opt_in_rollup":{"path":"minty/module/conversations/modal-convs-opt-in_rollup_54_8396.js"},"minty_module_conversations_tutorial":{"path":"minty/module/conversations/tutorial_54_8396.js"},"minty_module_list_view_ad_mas_search":{"path":"minty/module/list-view-ad/mas-search_54_8396.js"},"minty_module_list_view_ad_mb":{"path":"minty/module/list-view-ad/mb_54_8396.js"},"minty_module_list_view_ad_mbrec":{"path":"minty/module/list-view-ad/mbrec_54_8396.js"},"minty_module_list_view_ad_search":{"path":"minty/module/list-view-ad/search_54_8396.js"},"minty_module_list_view_ad_shell_mb":{"path":"minty/module/list-view-ad/shell-mb_54_8396.js"},"minty_module_list_view_ad_shell_mbrec":{"path":"minty/module/list-view-ad/shell-mbrec_54_8396.js"},"minty_module_list_view_ad_skysearch":{"path":"minty/module/list-view-ad/skysearch_54_8396.js"},"minty_module_moneyball_right_rail":{"path":"minty/module/moneyball/right-rail_54_8396.js"},"minty_module_offscreen_bin_autocompose_btntip":{"path":"minty/module/offscreen-bin/autocompose-btntip_54_8396.js"},"minty_module_offscreen_bin_autocompose_callout":{"path":"minty/module/offscreen-bin/autocompose-callout_54_8396.js"},"minty_module_offscreen_bin_convs_callout_rollup":{"path":"minty/module/offscreen-bin/convs-callout_rollup_54_8396.js"},"minty_module_offscreen_bin_multitask_callout_rollup":{"path":"minty/module/offscreen-bin/multitask-callout_rollup_54_8396.js"},"minty_module_offscreen_bin_nav_callout":{"path":"minty/module/offscreen-bin/nav-callout_54_8396.js"},"minty_module_offscreen_bin_peoplesearch_callout_rollup":{"path":"minty/module/offscreen-bin/peoplesearch-callout_rollup_54_8396.js"},"minty_module_offscreen_bin_searchsuggestion_callout_rollup":{"path":"minty/module/offscreen-bin/searchsuggestion-callout_rollup_54_8396.js"},"minty_module_offscreen_bin_tabs_callout":{"path":"minty/module/offscreen-bin/tabs-callout_54_8396.js"},"minty_module_offscreen_bin_themes_callout_rollup":{"path":"minty/module/offscreen-bin/themes-callout_rollup_54_8396.js"},"minty_module_search_advanced_search":{"path":"minty/module/search/advanced-search_54_8396.js"},"minty_module_shell_ad_onboardingTooltip":{"path":"minty/module/shell-ad/onboardingTooltip_54_8396.js"},"minty_module_shell_ad_onboardingTooltipMountains":{"path":"minty/module/shell-ad/onboardingTooltipMountains_54_8396.js"},"minty_module_shell_ad_onboardingTooltipSkier":{"path":"minty/module/shell-ad/onboardingTooltipSkier_54_8396.js"},"minty_module_shell_ad_searchads":{"path":"minty/module/shell-ad/searchads_54_8396.js"},"minty_module_shell_ad_sponads":{"path":"minty/module/shell-ad/sponads_54_8396.js"},"minty_module_sponsored_themes_olympics_base":{"path":"minty/module/sponsored-themes/olympics/base_54_8396.js"},"minty_module_sponsored_themes_olympics_countdown":{"path":"minty/module/sponsored-themes/olympics/countdown_54_8396.js"},"minty_module_sponsored_themes_olympics_games_widget":{"path":"minty/module/sponsored-themes/olympics/games-widget_54_8396.js"},"minty_module_sponsored_themes_olympics_olympics_event_card":{"path":"minty/module/sponsored-themes/olympics/olympics-event-card_54_8396.js"},"minty_module_sponsored_themes_olympics_single_medal_count":{"path":"minty/module/sponsored-themes/olympics/single-medal-count_54_8396.js"},"minty_module_tabs_navtabs_removable":{"path":"minty/module/tabs/navtabs-removable_54_8396.js"},"minty_module_tabs_tab_removable":{"path":"minty/module/tabs/tab-removable_54_8396.js"},"minty_module_toolbar_fragments_reply_group":{"path":"minty/module/toolbar/fragments/reply_group_54_8396.js"},"minty_module_toolbar_fragments_reply_group_conv":{"path":"minty/module/toolbar/fragments/reply_group_conv_54_8396.js"},"minty_module_toolbar_inbox":{"path":"minty/module/toolbar/inbox_54_8396.js"},"minty_module_toolbar_inbox_conversation_fresh_rollup":{"path":"minty/module/toolbar/inbox/conversation-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_conversation_thread_rollup":{"path":"minty/module/toolbar/inbox/conversation-thread_rollup_54_8396.js"},"minty_module_toolbar_inbox_default_fresh_rollup":{"path":"minty/module/toolbar/inbox/default-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_default_rollup":{"path":"minty/module/toolbar/inbox/default_rollup_54_8396.js"},"minty_module_toolbar_inbox_default_thread_rollup":{"path":"minty/module/toolbar/inbox/default-thread_rollup_54_8396.js"},"minty_module_toolbar_inbox_drafts_fresh_rollup":{"path":"minty/module/toolbar/inbox/drafts-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_drafts_thread_rollup":{"path":"minty/module/toolbar/inbox/drafts-thread_rollup_54_8396.js"},"minty_module_toolbar_inbox_message_fresh":{"path":"minty/module/toolbar/inbox/message-fresh_54_8396.js","requires":["minty_module_toolbar_fragments_reply_group"]},"minty_module_toolbar_inbox_message_thread":{"path":"minty/module/toolbar/inbox/message-thread_54_8396.js","requires":["minty_module_toolbar_fragments_reply_group_conv"]},"minty_module_toolbar_inbox_search_fresh_rollup":{"path":"minty/module/toolbar/inbox/search-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_search_rollup":{"path":"minty/module/toolbar/inbox/search_rollup_54_8396.js"},"minty_module_toolbar_inbox_search_thread_rollup":{"path":"minty/module/toolbar/inbox/search-thread_rollup_54_8396.js"},"minty_module_toolbar_inbox_sent_fresh_rollup":{"path":"minty/module/toolbar/inbox/sent-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_sent_msg_rollup":{"path":"minty/module/toolbar/inbox/sent-msg_rollup_54_8396.js"},"minty_module_toolbar_inbox_sent_thread_rollup":{"path":"minty/module/toolbar/inbox/sent-thread_rollup_54_8396.js"},"minty_module_toolbar_inbox_spam_fresh_rollup":{"path":"minty/module/toolbar/inbox/spam-fresh_rollup_54_8396.js"},"minty_module_toolbar_inbox_spam_thread_rollup":{"path":"minty/module/toolbar/inbox/spam-thread_rollup_54_8396.js"}}}};
if(B.Env._loader){B.Env._loader._config({groups:A});}else{B._config({groups:A});}},"1.0.0");

YUI.add("common-net-diag",function(A){A.namespace("common.net");A.common.net.Diag=function(){var S=A.common,T=S.Utils,L=S.net.Status,Q={},W={},X,B=NeoConfig.chkStaleReq||30000,U=T.traceMsg,I=T.rocketstats,K='<span style="font-weight:bold">',R="</span>";function H(){return new Date().getTime();}function F(Z){function Y(){var b,a;if((b=Q[Z])&&!b.end){a=H()-b.start;if(a>B){b.stale=true;U(["Session stale : ",Z,":",b.key,"stale for",a," ms"].join(" "));N("stalecheck");}}}A.later(B,null,Y);}function V(Z,Y){if(!W[Z]){W[Z]=[];}W[Z].push(Y);}function D(){var a,Z=arguments[0],c=W["net:"+Z],b="",Y="",d,e=[];for(a=1;a<arguments.length;a++){e.push(arguments[a]);}for(a=0;c&&a<c.length;a++){if((d=c[a].apply(null,e))){b+=(d.log&&(d.log+";"))||"";Y+=(d.dbgui&&(d.dbgui+";"))||"";}}return{log:b,dbgui:Y};}function M(a,f,Y){var e=a.id,c=D("start",a,f,Y),Z=f.method||((f.service||"")+a.request.url.match(/\/[^\/]*\?+/)),b=c.log,d=c.dbgui||"";Q[e]={id:e,key:Z,desc:[d],start:a.start||H(),args:f&&f.args};N("start");F(e);U(["net [start] id:",e,Z,"desc:",d,b].join(" "));}function C(Y,e){var a=Q[Y.id],c=D("complete",Y,e),d=c.dbgui,b="",Z=c.log||"";if(a){a.end=Y.end||H();e.method&&E("net","RespTime_"+e.method,b=(a.end-a.start));d.length&&a.desc.push(d);}N("complete");U(["net [complete] id:",a.id,a.key,"time :",b,Z].join(" "));}function G(Z,b,Y){var a=Q[Z.id];if(a){a.end=Z.end||H();a.aborted=true;a.timedout=Y;N("abort");U(["net [aborted] id: "+Z.id,"timeout: ",Y,a?(a.end-a.start):-1,D("abort",Z,b,Y).log].join(" "));}}function P(a,Z){var Y=Z.status,f=a.id,d=D("end",a,Z),c=Q[f],e=d.dbgui,b=d.log;if(c){e.length&&c.desc.push(e);N("done");if(Y!==L.abort&&L!==L.xhr){U(["net [done] id:"+f,"total: "+(c.end?c.end-c.start:-1),"msecs http: "+Z.status,b].join(" "));}}}function E(){I&&I.stat.apply(I,arguments);}function N(){if(X){var b='<span style="color:red">Open sessions : </span>',e,c,Y,a=[],f=[],Z=[],d;for(c in Q){d=Q[c];d.done=d.end||d.abort;if(d.done){f.push(c);}else{Z.push(c);}}while(f.length&&((f.length+Z.length)>10)){delete Q[f[0]];f.shift();}for(c in Q){d=Q[c];Y=(d.stale&&('<span style="color:red">'+(!d.end?"STALE":(d.aborted?(d.timedout?"TIMEDOUT":"ABORTED"):"DONE"))+"</span>"))||(!d.end&&"OPEN");e=["<br/>","[",d.id,"]",'<span style="color:blue">'+d.key+"</span>",Y||"",d.desc.join("<br/>"),d.end?["<br/>client :",K,(d.end-d.start),R,"ms"].join(" "):""].join(" ");a.push(e);}a.reverse();X.setBody(b+Z.length+a.join(""));}}function O(){if(X){return;}A.use("common-ui-diagpanel",function(){X=new A.common.ui.DiagPanel({},function(){X=null;});N("panelopen");});}A.on("net:start",M);A.on("net:complete",C);A.on("net:abort",G);A.on("net:end",P);var J={addLogger:V,showSessions:O,addStat:E};return J;}();},"1.0.0",{requires:["common-net-session","rocket-stats","common-utils"]});

YUI.add("common-net-session",function(C){C.namespace("common.net");var l=C.Lang,Q=C.common.Utils,b=C.common.net,c=b.Status={},V=0,A=C.config.win||window,S=typeof XMLHttpRequest!=="undefined",U=(C.config&&C.config.net)?C.config.net.XMLHttpRequest:window.XMLHttpRequest,j,J="GET",D,W=[],a="net:exc",d="net:start",F="net:complete",Z="net:abort",k="net:end",G="net:idle",R=35000,f=0,e=0;function T(m){try{C.fire.apply(C,m);}catch(Y){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:1",Y,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:1");Q.assert(0);C.use("common-utils-error",function(){Q.error.report("netsession error",Y,1,1,1);});}}function i(){return new Date().getTime();}function L(){try{return S?new U():new ActiveXObject("Microsoft.XMLHTTP");}catch(Y){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:2",Y,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:2");}return;}function E(Y){if(Y._timeoutid){A.clearTimeout(Y._timeoutid);Y._timeoutid=j;}}function P(Y){try{var m=Y._conn;if(m&&S){m.onreadystatechange=j;}}catch(n){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:3",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:3");}Y._conn=j;}function K(Y,o,n){var p,m=Y.match(/\?([\w\W])*/);m=m&&m[0]?(m[0].length>1?"&":""):"?";p=g(o,n);return[Y,p.length?m:"",p].join("");}function g(o,p){var u,t,q,s,Y,r,m=[],n=N(o,p);for(u in o){r=n[u];Y=r?encodeURIComponent(u):u;t=o[u];if(l.isArray(t)){for(q=0,s=t.length;q<s;q++){m.push([Y,r?encodeURIComponent(t[q]):t[q]].join("="));}}else{m.push([Y,r?encodeURIComponent(o[u]):o[u]].join("="));}}return m.join("&");}function N(o,n){var m={},Y;if(l.isObject(n)){return n;}if(n!==false){for(Y in o){m[Y]=1;}}return m;}function B(o){if(l.isString(o)){var n=this.responseHeaders,m=o.toLowerCase(),Y;for(Y in n){if(Y.toLowerCase()===m){return n[Y];}}}return j;}function h(w){function q(AA,y){var AB=y;try{AB=n[AA];}catch(z){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:4",z,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:4");}return AB;}var p,x={},r=0,u,Y,n=w._conn,o=n.status===1223,m,t,s;try{p={status:o?204:n.status,statusText:o?"No Content":q("statusText",""),callback:w._callback,request:w.request,responseHeaders:"",allHeadersText:"",getResponseHeader:B,responseText:q("responseText"),responseXML:q("responseXML"),id:w.id};m=n.getAllResponseHeaders();s=m.split("\n");u=s.length;while(u--){t=s[r++];Y=t.indexOf(":");if(Y!==-1){x[t.substring(0,Y)]=t.substring(Y+2);}}if(w.end&&w.start){p.curlTime=w.end-w.start;}p.responseHeaders=x;p.allHeadersText=m;}catch(v){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:5",v,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:5");}return p;}function X(u,Y,q){var p,n=u._conn,o,m="unknown",t=q&&(q.name===a)&&q.code,s=-1;try{if(Y){o=Y.timeout?c.timeout:c.abort;m="abort";}else{if(n){s=n.readyState;}if(s<=3){o=t;m="readyState."+s;}else{p=h(u);}}}catch(r){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:6",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:6");}if(!p){p={status:o||c.xhr,statusText:m,responseText:(q&&q.message)||j,callback:u._callback,request:u.request,getResponseHeader:B,id:u.id};}return p;}function O(Y){Q.assert(Y._conn.readyState);if(Y._conn.readyState===4){E(Y);Y.end=i();T([F,Y,Y._callback]);H(Y);}}function M(m,o,q){function n(){T([k,m,o]);P(m);o=j;e--;if(!e){T([G,1]);}}var Y=m._callback||{},p=q?Y.success:Y.failure;p?p.call(Y.scope,m,o,n):n();}function H(Y,p){var n=0,m,r,o=Y._conn;try{n=(o&&o.status)||0;}catch(q){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:7",q,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:7");Q.assert(0);}r=!p&&(n>=200&&n<300||n===1223);m=r?h(Y):X(Y,p);M(Y,m,r);}b.Session=function(m,s,Y,p,o,r){var q=this,n;Y=Y?Y.toUpperCase():J;n=Y===J;q.request={url:m,urlparams:(n?p||{}:{}),post:(!n?p:j),mthd:Y,enc:N(p,o),headers:{}};q._callback=s;if(!r&&r!==0){q.id=V;}else{q.id=r;}++V;};var I=b.Session;I.formatQueryParams=g;I.suspendRequests=function(Y){D=Y;};I.resumeRequests=function(){D=j;while(W.length){W[0].send();W.splice(0,1);}};I.isIdle=function(){return e===0;};I.prototype={_callback:{},_conn:j,tries:0,_timeoutid:j,start:0,end:0,addUrlParam:function(Y,o,n){var m=this.request,p=m.urlparams;p[Y]=o;if(n!==false){m.enc[Y]=1;}},buildUUID:function(m){var n,Y;n=m.toString(16);Y=4-n.length;while(Y--){n="0"+n;}return n;},send:function(){var o=this,n=o.request,x=o._callback||{},t=n.mthd,r=x.method||"",Y=n.url,y,v,u,q,w=(NeoConfig.mailEnv==="prod")?NeoConfig.hostName.split(".")[3]:"",s=(NeoConfig.mailEnv==="prod")?NeoConfig.hostName.split(".")[1]:"",m;if(D){W.push(o);return;}o.abort();try{o.tries++;n.rand=n.urlparams.r||(new Date()).getTime();n.urlparams.ymreqid=NeoConfig.uuid?NeoConfig.uuid.replace("SEQN",o.buildUUID(++f)):"";if(NeoConfig.expBucketId!=="0"){n.urlparams.ymbucketid=NeoConfig.expBucketId;}Y=K(Y,n.urlparams,n.enc);if(Y.length>=2048){throw {name:a,code:c.maxsize};}o._conn=L();y=o._conn;v=n.post;n.postdata=v=l.isFunction(v)?v():v;y.open(t,Y,true);o.applyHeaders();y.onreadystatechange=function(){if(o._conn){O(o);}};q=x.timeout||R;if(q){o._timeoutid=A.setTimeout(function(){o.abort(true);},q);}o.end=0;o.start=i();T([d,o,x,Y]);y.send(v||"");if(!e){T([G,0]);}if(r){C.fire("util:ymstats",{"name":r,"tags":{"sender":NeoConfig.hostname,"mfarm":NeoConfig.farm.slice(1),"mlcluster":s,"mcolo":w}});}if(NeoConfig.sessionTracer&&t==="POST"){u=v.replace(/"simplebody":{.*},/,'"simplebody":{<filtered>},');
if(r==="SendMessage"){u="<filtered>";}C.mail.model.DataStore.Sessions.addRequest({method:r,url:Y,postbody:u});}e++;}catch(p){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:8",p,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:8");m=X(o,j,p);A.setTimeout(function(){M(o,m);},0);}},setHeader:function(Y,m){this.request.headers[Y]=m;},getHeaders:function(){var Y=[],n,m=this.request.headers;for(n in m){Y.push([n,m[n]].join("="));}return Y.join(";");},applyHeaders:function(){var o,n=this,Y=n._conn,m=n.request.headers;if(Y){Q.assert(!Q.isEmpty(m));for(o in m){Y.setRequestHeader(o,m[o]);}if(C.config&&C.config.net){Y.setRequestHeader("Cookie",C.config.net.cookie);}}},abort:function(Y){var n,m=this._conn;if(m){n=this;if(m.readyState!==4&&m.readyState!==0){E(n);P(n);m.abort();T([Z,n,n._callback,Y]);H(n,{timeout:Y});}}}};C.mix(c,{timeout:-1,xhr:-2,maxsize:-3,abort:-4});},"1.0.0",{requires:["event-custom","common-utils"]});

YUI.add("common-net-sessionmgr",function(B){var A=B.common.net;A.SessionMgr=function(){var U=A.Session,G=B.Lang,E=B.JSON,S=A.Error,K=NeoConfig.wssid,P,M=[],C="net:success",H="net:failure",Z="net:suspended",D="net:resumed";function R(f,d,b,a,c){var e;if(f){e={code:f,message:d,detail:b,host:c,subcode:a};}return e;}function N(b){var a=b.responseText||"",c;a=a.replace(/<!--?(.*)?-->[\r\n]*$/,"");try{b.body=E.parse(a);}catch(d){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-sessionmgr:1",d,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-sessionmgr:1");if(NeoConfig.logBadJSON){B.fire("MailLog",{m:"JSON parse error : "+a});}c=S.parse;b.fault=R(c,(d.message||"")+" Response parse failed.",{respTxt:a});}}function W(a,b){var c=J.validate[a];if(c){c(b);}else{b.body=b.responseXML||b.responseText;}}function T(d,f){var c,b=0,e,a=f.callback;if(d.multipart){f=a.parseMultiPartResponse(f);}c=S.getErrType(d,f);if(c){if(c===S.conn){b=2;}e=c===S.abort||c===S.timeout||c===S.login||c.indexOf(S.send)===0;f.fault={code:c};}else{W(a.responseType,f);}if(a.formatter){a.formatter(d,f);}a.retries=e?0:(G.isNumber(a.retries)?a.retries:b);}function Y(d){var c=d.allHeadersText||"",b=d.responseText,a;if(c.indexOf("Content-Type: text/html")>-1||((/^<html/i.test(b)||/^<!doctype html/i.test(b))&&(/<\/html>[\s]*$/i.test(b)||/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(b)))){if(/<\/html>[\s]*$/i.test(b)){a="External";}else{if(/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(b)){a="Internal";}else{a="Unknown";}}return a;}}function L(a){a.fault=R(S.unknown);}function Q(b){function a(){var c=this;c.success=c.failure=F;c.scope=J;}a.prototype=b;a.prototype.constructor=a;return new a();}function O(a){return a.constructor.prototype;}function F(f,i,d){var b=i,m=i.callback,n,j=i.status,g,h,k,a;function c(){if((a=n&&n.failure)){a.call(h,b,g,f);}d();X();}try{T(f,b);if(b.fault&&(f.tries<=m.retries)){B.later(500,null,function(){f.send();});return true;}if(j!==200&&!b.fault){L(b);}n=b.callback=O(m);if(n){g=n.args;h=n.scope;}if(!b.fault){B.fire(C,b);k=n&&n.success;if(k){k.call(h,b,g,f);d();X();}}else{if(j===A.Status.abort){c();}else{B.fire(H,f,b);S._handle(f,b,c);}}}catch(l){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-sessionmgr:2",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-sessionmgr:2");}}function I(a){M.push(a);}function X(){if(!P&&M.length){var a=M.shift();if(a&&a.send){a.send();}else{X();}}}function V(d,c){var g=c.data||"",a,h={},b,f=null,e;c=c||{};a=c.on||{};g=c.data||"";b=c.method||"GET";h.service=c.service;h.serviceCredType=c.serviceCredType;h.scope=c.context;h.timeout=c.timeout;h.args=c.args;if(a.success){h.success=function(i,j){a.success(0,i,j);};}if(a.failure){h.failure=function(i,j){a.failure(0,i,j);};}h.responseType=c.responseType||"json";h.suppressCodes=c.suppressCodes||["*"];e=(G.isUndefined(c.sync))?true:!c.sync;return J.request(d,g,h,b,f,e);}var J={request:function(a,c,k,i,d,h,e){var b,f,g,j;k=k||{};if(!k.args){k.args={};}g=Q(k);b=new A.Session(a,g,i,c,d);b.multipart=e;b.setHeader("Content-Type","application/"+(g.responseType||"json"));if(K&&!k.suppressWssid){b.addUrlParam("wssid",K,false);}if(k.urlParams){for(j in k.urlParams){if(k.urlParams.hasOwnProperty(j)){b.addUrlParam(j,k.urlParams[j]);}}}b.callbackData=k.args;if(h){if(P||M.length){I(b);}else{b.send();}}else{f=b.send;b.send=function(){var l=this;l.send=f;if(P||M.length){I(l);}else{f.apply(l);}};}return b;},requestProxy:V,formatQueryParams:function(b,a){return U.formatQueryParams(b,a);},getWssid:function(){return K;},setWssid:function(c){K=c;for(var b=0,a=M.length;b<a;b++){M[b].addUrlParam("wssid",K,false);}},makeFaultObject:R,validate:{"json":N},isHtml:Y,suspend:function(a){P=a;B.fire(Z,a);},resume:function(){P=0;X();B.fire(D);},queue:I,_qsize:function(){return M.length;},_qclear:function(){M=[];},pingTest:function(){B.common.Utils.rocketstats.stat("net","pingTest");}};return J;}();},"1.0.0",{requires:["event-custom-base","common-net-session","common-net-error-base","rocket-stats","json-parse"]});

YUI.add("common-net-error-base",function(B){B.namespace("common.net");var D=B.common,C=D.net,J=D.Utils,A="HTTPError.",I=C.Error=C.Error||{},G=[502,900,12007,12029,12030,12031,13030,0],E=I.handler=[];function F(K){for(var L=0;L<G.length;L++){if(K===G[L]){return true;}}}function H(L,K){K=K&&K.replace(/<br\/>/g,"\n").replace(/<p\/>/g,"\n");K&&window.alert(K);L&&L();}B.mix(I,{base:A,conn:A+"conn",ydod:A+"999",abort:"abort",timeout:"timeout",unknown:"unknown",login:"login",loginfail:"loginfail",parse:"parse",send:"xhrsend",wssid:"invalidwssid",isHttp:function(K){return(/^HTTPError/).test(K);},isConn:function(K){return K==="HTTPError.conn";},isUnexpected:function(K,L){return(!F(K)&&I.isHttp(L)&&(K!==2)&&(K!==999)&&(K!==302));},getErrType:function(M,O){var L=O.status,N=C.Status,K,P;if(L!==200&&L!==500){if(L===N.xhr||L===N.maxsize){K=I.send+"."+O.statusText;}else{if(L===N.abort){K=I.abort;}else{if(L===N.timeout){K=I.timeout;}else{if(M.tries===1){P=(L===0||L===302)&&!D.UserSession.same();}K=P?I.login:(F(L)?I.conn:A+L);O.status=P?401:(L===0?13030:L);}}}}return K;},_fireHandlers:function(){arguments[arguments.length-1]();},_handle:function(){var K=arguments;B.use("common-net-error",function(){I._fireHandlers.apply(I,K);});},onError:function(L,M){var K;J.assert(L);if(M){if((K=B.Array.indexOf(E,L))!==-1){E.splice(K,1);}}else{E.push(L);K=1;}return(K>=0);},show:H,showAlert:H});},"1.0.0",{requires:["common-utils","common-user-session"]});

YUI.add("common-net-error",function(E){var M=3,e=E.common,c=e.UserSession,d=e.net,T=e.Utils,X=d.SessionMgr,f=d.Status,l=d.Error,V=l.handler,m=T.substitute,J=e.persist.UserData,C=e.ui&&e.ui.DialogHelper,i=document.location.href,S=m(strings.str_cfg_url_yahoo_relogin,null,null,null,strings),O=T.rocketstats,g=true,a,U={},k,P,G=null;if(NeoConfig.isCorpmail){S=S.replace(/\?/,"?.partner=ycorp&");}function B(n,Y,q,p,o){p=p||{};E.mix(p,{hd:q||m(strings.str_error_title,null,null,null,strings),bd:(o?Y:'<div class="dlg-error">'+Y+"</div>")});if(Y){T.assert(C);if(C){C.alert(p,{ok:{handler:n}});}else{l.showAlert(n,Y,q,p);}}else{n&&n();}}function H(n,p,Y,q,o){o=o||{};E.mix(o,{hd:q||m(strings.str_error_title,null,null,null,strings),bd:'<div class="dlg-error">'+Y+"</div>"});if(Y){T.assert(C);if(C){C.confirm(o,{ok:{handler:n},cancel:{handler:p}});}else{l.showAlert(n,Y,q,o);}}else{n&&n();}}function h(p,Y,u){if(G){X.queue(p);return true;}var t,o=p.id,s,n=U[o]||0,r=Y.fault;function v(x){var w=x&&x.callback;if(x.id===o||(w&&!w.suppressWssid)){delete U[o];E.unsubscribe(t);}}try{if(n===0){t=E.on("net:success",v);}U[o]=++n;if(n===M){r.code=l.wssid;r.message=["wssid net :",X.getWssid(),"resp :",u].join(" ");W({msg:strings.str_error_wstoken,stat:"BadWssid"});return;}else{if(n>=M){O.stat("net","Reload_BadWssid_ignore",null,{intl:true});return true;}}if(u){s=c.getState();if(!s.newuser){X.setWssid(u);p.addUrlParam("wssid",u,false);p.send();}else{F();}}}catch(q){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-error:1",q,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-error:1");}return !!u;}function W(p){var o=p||{},Y=o.url||i,n=o.stat;n&&O.stat("net","Reload_"+n,null,{intl:true});B(function(){E.later(0,null,function(){if(Y){window.location=Y;}else{window.location.reload();}});},o.msg,0,{hideClose:true});}function b(o){var Y,n=o.request;if(n.mthd==="GET"){Y=X.request(n.url,X.formatQueryParams(n.urlparams,n.enc),o.callback,"POST",n.enc);Y.send();return true;}return;}function I(o){var Y,p="us",n=o&&['"',strings.str_cfg_url_arc_help+"?token=",o,"&.intl=",p,"&property=abuse_ops",'"'].join("");Y=["<p class=userMessage >",strings.str_error_ydod_error,".<br/>",n?strings.str_error_ydod_token_link.replace("{linkURL}",n):"","</p>"].join("");B(null,Y,strings.str_error_ydod_title);}function F(){W({msg:m(strings.str_error_reload_user_change,{username:J.get("userSendPref.loggedInAlias")},null,null,strings),stat:"UserChange"});}window.reloginCallback=function(){G&&G.destroy();P=G=null;if(c.getState().newuser){E.later(0,null,F);}else{c.update();if(a){W({url:a,stat:"HostCorrection"});}else{X.resume();}}E.fire("net:reloginSuccessful");};function K(o,q,Y){if(G){o&&X.queue(o);return true;}function s(){if(P){P.close();}P=window.open(n,"_blank",NeoConfig.loginParams||"height=650,width=850,resizable,scrollbars=yes");}var u=q||{},n=S+i.replace(/[^\/]+([?#]+|$)/,"relogin?"),t=m(strings.str_error_title,null,null,null,strings),r=u.stat||(o&&o.request.url.replace(/http:\/\/[^\/]*/,"")),p={hd:t,bd:'<div class="dlg-error">'+(u.msg||strings.str_error_relogin)+"</div>",suppressActive:true,maskId:"opaque-overlay",noScroll:true,hideClose:true,disableEsc:true};if(o&&o.id===k){T.assert(0,"cyclic login");if(Y&&Y.fault){Y.fault.code=l.loginfail;}O.stat("net","ReloginCyclic_"+r);T.netError("net:ReloginCyclic_"+[E.JSON.stringify(o.request),Y.responseText,o.id,k].join(" : "));return false;}a=u.url;T.assert(C);O.stat("net","Relogin_"+(r||"unk"));if(NeoConfig.isCorpmail){O.stat("net","Relogin_corpmail");}T.netError("net:Relogin"+[E.JSON.stringify(o.request),Y.responseText,o.id,k].join(" : "));if(C){C.alert(p,{ok:{handler:s,stopDestroy:true,text:strings.str_error_signin}},function(v){G=v;X.suspend("relogin");k=(o&&o.id)||-1;o&&X.queue(o);});}return true;}function R(Y,q,p){var n=q.responseHeaders,o=q.responseText||strings.str_error_Connect;if(Y===302&&n&&n.Location){window.open(n.Location);}else{if(!p){Z(Y,q,{message:o});}}}function Z(o,r,s){function p(u,w){var v,t={success:function(y){w(y.responseText);},failure:function(){w(T.escapeHtml(u));},suppressCodes:["*"],timeout:10000},x="content="+encodeURIComponent(u)+"&restrictOff=true";v=X.request("yiv",x,t,"POST");v.setHeader("Content-length",x.length);v.setHeader("Connection","close");v.send();}function n(v){var t,u=l.isConn(q),x=(s&&s.title&&m(s.title,null,null,null,strings))||m(strings["str_error_"+(u?"UnexpectedTitle":"MailErrorTitle")],r),w=Y||strings["str_error_"+(u?"Connect":"MailUnexpectedResponse")];t=[m(w,null,null,null,strings)];v&&t.push("<div>"+v+"</div>");t=t.join("");B(null,t,x,(t.length>1000)&&{modal_classes:"lg",focusedNode:".default"},true);}var Y=s&&s.message,q=r.fault.code;if(l.isUnexpected(o,q)&&X.isHtml(r)){p(r.responseText,n);}else{n();}}function L(n){var Y=n.match(/[\&\?(amp;)>]wssid=([^<\&}\"]+)/i)||n.match(/^wssid=([^<\&}\"]+)/i)||n.match(/<WSSID>([\w\W]+)<\/WSSID>/i);return(Y&&Y[1]);}function Q(p,n,o){var Y,q;for(Y=0;n&&Y<n.length;Y++){q=n[Y];if(q==="*"||o(q)){return false;}}for(Y=0;p&&Y<p.length;Y++){q=p[Y];if(q==="*"||o(q)){return true;}}}function D(Y){var n=g;if(Y&&Y.serviceCredType){n=g?Y.serviceCredType!=="loose":Y.serviceCredType==="strict";}return n;}function j(x,s,p,n,u,v){var y=n.callback||{},Y,q,AA,r,w=n.fault,o=w&&w.code,z=l.isConn(o),t=Q(y.suppressCodes,y.exceptCodes,function(AB){return s===AB;});switch(s){case 402:Y=h(p,n,u);break;case 401:q=D(y);if(q){Y=K(p,u,n);v=false;}break;case 310:Y=W(u);break;case 999:if(!t){I(u);}break;case f.maxsize:Y=b(n);break;case 404:case f.abort:break;case 302:case 13030:R(s,n,t);break;case f.xhr:AA=true;default:if(!t||n.fault.code.indexOf("-unk")>-1){Z(s,n,u);}break;}if(v&&!Y){r=z?"E_HTTPConnect":(AA?"E_XHR":"E_HTTP");O.stat("net",r);O.stat("net",[r,(y.service||"service"),(y.method||"method"),s,o].join("_"));}x.done(Y);}function A(r,o,n,q,u,p){var Y=q||n.status,t=u||(Y===402?L(n.responseText):(Y===999?null:n));j(r,Y,o,n,t,p);}l._fireHandlers=function(){var p,Y,o,q=new d.ErrorEvent(arguments,A,l),n=[q];
for(p=0,Y=arguments.length-1;p<Y;p++){n.push(arguments[p]);}for(p=0;p<V.length;p++){if(q.isdone()||(o=V[p].apply(this,n))){break;}}if(!(q.isdone()||o===q.asyncval)){q.callDefault(null,null,1);}};var N=function(){var o=S+i.replace(/[^\/]+([?#]+|$)/,"relogin?"),Y=function(){if(P){P.close();}P=window.open(o,"_blank",NeoConfig.loginParams||"height=650,width=850,resizable,scrollbars=yes");},p=m(strings.str_error_title,null,null,null,strings),n={hd:p,bd:'<div class="dlg-error">'+(strings.str_error_relogin)+"</div>",suppressActive:true,maskId:"opaque-overlay",noScroll:true,hideClose:true,disableEsc:true};if(C){C.alert(n,{ok:{handler:Y,stopDestroy:true,text:strings.str_error_signin}},function(q){G=q;X.suspend("relogin");});}};E.mix(l,{relogin:K,simpleRelogin:N,show:B,showConfirm:H,suppress:Q,_handle:function(){l._fireHandlers.apply(l,arguments);},_parseWssid:L},true);},"1.0.0",{requires:["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","rocket-stats","common-persist-user-data","launch-utils"]});

YUI.add("common-net-errorevent",function(C){C.namespace("common.net");var B=C.common.net;var A=function(D,F,E){var G=this;G.args=D;G._def=function(H){if(F){F.apply(E,H);}else{G.done();}};};A.prototype={async:function(D){var E=this;if(!E.timer){E.timer=C.later(NeoConfig.timerErrEv||10000,null,function(){if(!E.isdone()){if(D){D();}else{E.callDefault(null,null,1);}}});}return -1;},asyncval:-1,callDefault:function(H,I,G){var F,D,E,J=this;if(!J._h){E=J.args;D=[J];for(F=0;F<E.length-1;F++){D.push(E[F]);}D.push(H);D.push(I);D.push(!!G);J._def(D);}},isdone:function(){return this._h;},done:function(D){var E,F=this;F.timer&&F.timer.cancel();if(!F._h){F._h=true;F.retry=D;if(!D){E=F.args;E[E.length-1]();}}}};B.ErrorEvent=A;},"1.0.0",{requires:[]});

YUI.add("common-persist-neo-data",function(B){var A=B.namespace("common.persist");function C(D){var E={cookieDomain:{writeOnce:true},cookiePath:{writeOnce:true},cookieID:{writeOnce:true},servername:{writeOnce:true},farm:{writeOnce:true},wssid:{writeOnce:true},neoguid:{writeOnce:true},hasAds:{writeOnce:true},om:{writeOnce:true},global_url_base:{writeOnce:true},extraURLArgs:{writeOnce:true},mailnetQueue:{writeOnce:true}};this.addAttrs(E,D);}B.augment(C,B.Attribute);A.NeoData=new C(window.NeoConfig);},"1.0.0",{requires:["attribute"]});

YUI.add("common-persist-cookie-data",function(F){var E=F.namespace("common.persist");var G=E.NeoData;E.Cookies=[];var D="YM.NEO_"+G.get("cookieID");function B(H){H=H||D;if(E.Cookies[H]){return E.Cookies[H];}E.Cookies[H]=new A(H);return E.Cookies[H];}function C(H){H=H||D;F.Cookie.remove(H,{domain:G.get("cookieDomain"),path:G.get("cookiePath")});if(E.Cookies[H]){delete E.Cookies[H];}}function A(H){this.name=H;if(F.Cookie.get(this.name)===null){if(this.name!=="T"&&this.name!=="Y"){F.Cookie.set(this.name,"",this.getCookieArgs());}}else{var I=G.get("cookiePath");if(I&&I.length>2&&I[I.length-1]==="/"){I=I.slice(0,I.length-1);F.Cookie.remove(H,{domain:G.get("cookieDomain"),path:I});}}}A.prototype.getCookieArgs=function(){return{expires:new Date((new Date()).getTime()+(90*24*60*60*1000)),domain:G.get("cookieDomain"),path:G.get("cookiePath")};};A.prototype.set=function(H,I){return F.Cookie.setSub(this.name,H,I,this.getCookieArgs());};A.prototype.get=function(H){return F.Cookie.getSub(this.name,H,this.getCookieArgs());};A.prototype.remove=function(H){return F.Cookie.removeSub(this.name,H);};F.augment(A,F.Attribute);E.getCookie=B;E.removeCookie=C;},"1.0.0",{requires:["cookie","attribute","common-persist-neo-data"]});

YUI.add("common-persist-user-data",function(A){A.namespace("common.persist");function H(J){this.attributeConfig={userFeaturePref:{},userUIPref:{},userSpamPref:{},userVacationPref:{},userSendPref:{},userPopPref:{},externalAccounts:{},disposableAddresses:{},aliases:{},otherYahooMboxes:{},blockedAddresses:{},switches:{},parentalControls:{},filters:{},loaded:{value:false}};this.addAttrs(this.attributeConfig,J);if(J){this.set("loaded",true);}else{this.load();}}H.prototype.load=function(J){var K=this;A.mail.net.Transport.request("GetUserData",{bidiDetection:NeoConfig.bidi},{success:function(L){var M;L=L.body.result.data;for(M in L){K.set(M,L[M]);}K.set("loaded",true);if(J){A.fire("uData:change",L);}},failure:function(){}},true);};H.prototype.update=function(J){if(A.mail.ui.Workspace){A.mail.ui.Workspace.moUpdate(J);}};H.prototype.saveOne=function(N){var J,M,L,K,P={},O=this.get(N);M=N.split(".");L=M.length-1;K=P;for(J=0;J<L;J++){K[M[J]]={};K=K[M[J]];}K[M[J]]=O;this.saveRequest(P);};H.prototype.save=function(){var M={},K,J,L=["userFeaturePref","userUIPref","userSpamPref","userVacationPref","userSendPref","userPopPref","blockedAddresses","switches","aliases"];for(J in L){K=L[J];if(K==="aliases"){M.alias=this.get("aliases.alias");}else{if(K==="userPopPref"){if(this.get(K+".popSetupEligible")){M[K]=this.get(K);}}else{M[K]=this.get(K);}}}this.saveRequest(M);};H.prototype.saveRequest=function(J){A.mail.net.Transport.request("SetUserData",{setdata:J},{success:function(){},failure:function(){}},true);};H.prototype.knownAddresses=null;function I(S){var R={},M=S.get("userSendPref.defaultFromAddress").toLowerCase(),O=S.get("externalAccounts.extAccount")||[],K=S.get("aliases.alias")||[],N=S.get("disposableAddresses").deaName||[],L=function(U){var T=U.address;if(T&&T!==""){R[T.toLowerCase()]=1;}},Q="Change",P="knownAddress|";function J(){S.knownAddresses=null;S.detach(P+"*");}R[M]=1;A.Array.each(O,L);A.Array.each(K,L);A.Array.each(N,L);S.after(P+"userSendPref"+Q,J);S.after(P+"externalAccounts"+Q,J);S.after(P+"aliases"+Q,J);S.after(P+"disposableAddresses"+Q,J);return R;}H.prototype.isUsersEmailAddress=function(J){var K=this;if(!K.knownAddresses){K.knownAddresses=I(K);}return K.knownAddresses[J.toLowerCase()];};A.augment(H,A.Attribute);if(NeoConfig.userDataObj){var F=NeoConfig.userDataObj.userSendPref,G=NeoConfig.userDataObj.externalAccounts,D=A.common.Utils.unescapeHtml,C,E,B;if(F){F.defaultFromName=D(F.defaultFromName);}if(G){C=G.extAccount;if(C){B=C.length;for(E=0;E<B;E++){C[E].fromName=D(C[E].fromName);C[E].username=D(C[E].username);}}}}A.common.persist.UserData=new H(NeoConfig.userDataObj);},"1.0.0",{requires:["attribute","mail-net-transport","json","common-utils"]});

YUI.add("common-ui-tabs-base",function(B){var D=B.Node.one,F=B.Node.create,H=B.Lang,E=false,J=false,C={"convpane":".t-mail","messagepane":".t-mail","author":".t-draft","search":".t-search"},A=B.common.Utils.ymmastats,G=B.one("#nav");var I=function(){var L=this,f="div.tabs ul",k="#tabs",AL="#multitask .listnav-container",v="#shellinner",c="active",AE=D("body"),s,U,n,AM,x,Q=[],W={},Z=B.ui.Templates.minty_module_tabs_tab_removable.base,w=B.common.Utils,e=w.substitute,l=w.unescapeHtml,P=w.removeHtml,h=[219,221],i=0,g=16,d=-1,R=B.mail.ui.common.StringUtils,X=w.rocketstats.bucketStat;var j=function(Ag){var Ab=this,AR=B.guid(),AV=Ag||{},Ac=AV.p_label||"",AO=AV.s_label||"",AU=AV.url||"#",Aa=AV.content||"",AT=AV.widget,Ae=AV.yTabEl||F(e(Z,{tab_url:AU,tab_id:AR,tab_title:Ac+" - "+AO,p_label:Ac!==""?Ac+"<br/>":"",s_label:AO},null,null,strings)),AS=Ae.one("a"),AW=AV.yTabContentEl||F('<div style="visibility:hidden;" '+(B.UA.webkit?'class = "offscreen"':"")+">"+Aa+"</div>"),AZ={},Ah,AY=B.one('#main[role="tabpanel"]');function AP(Aj,Ai){if(!Aj.inDoc()){return;}if(B.UA.webkit){Ai?Aj.removeClass("offscreen"):Aj.addClass("offscreen");}}if(AV.yTabEl){AR=AV.yTabEl.one("a").get("id");}if(AW&&AV.inactive){AW.setStyle("visibility","hidden");AP(AW,false);AW.removeClass("hidden");}AW.setAttribute("data-tid",AR);if(AT){if(AT.hasMsgList&&AO){AW.setAttribute("data-title",R.getSystemFolderName(AO,AO));}else{AW.setAttribute("data-title",AO);}AT.render(AW);}else{AW.setAttribute("data-title",R.getTabName(AR));}this.cfg=AV;this.elTab=Ae;this.invisible=AV.invisible;this.reuse=AV.reuse;this.isRemovable=AV.isRemovable;this.widget=AT;this.elContent=AW;this.noDefault=AV.noDefault?true:false;this.allowFullpage=!AV.forcePane;this.hideToolbar=AV.noToolbar;this.userClose=false;this.data=AV.data;this.widgetType=AT&&AT.type||AV.widgetType;Ab.addTabEl();s=this;if(Ac){this.NAME=Ac+" Tab";}if(!AV.yTabContentEl){x.appendChild(AW);}AS.setAttrs({tabIndex:-1,"aria-selected":false});j.superclass.constructor.call(Ab);if(window.location.href.indexOf("mytray")>=0&&!J){J=true;B.use("common-ui-tabs-tray",function(){B.mail.ui.Tray.init(Ab);});}function AX(Am){var Aj=Am.newVal,Ai,Al;if(Aj){if(!Ab.widget&&AV.init){Am.halt(true);AV.init(Ab,function(){if(Ab.widget){Ab.widget.render(AW);Ab.set("widget",Ab.widget);Ab.set("active",1);}});return;}if(!NeoConfig.multitask){B.later(0,null,function(){var An=Am.currentTarget.widgetType;if(An==="convpane"||An==="messagepane"){AB("all");}else{AB("non-msg");}});}if(Ab.isRemovable){Ab.set("removable",true);}U=Ab;if(Ab===Q[0]&&0){if(Ab.widget&&Ab.widget.msgPane&&Ab.widget.msgPane.message){Ai={};Ai.cid=B.mail.model.ConvStore.Conversations.getPermCidPart(Ab.widget.msgPane.message.cid);Ai.fid=Ab.widget.msgPane.message.fid;Al=AG(Ai);Al&&Al._bindConvPaneListener();}}Ae.addClass(c);AS.setAttrs({"aria-selected":true,tabIndex:0});try{AY.set("aria-labelledby",AS.get("id"));}catch(Ak){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-tabview-tabview:1",Ak,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-tabview-tabview:1");}AC(Ab);B.fire("tabChange",Ab.widget);B.fire("tab:active",U.get("id"));}else{B.fire("tabBlur",{widget:Ab.widget});this.detachTabHandlers();if(B.UA.ie){AQ();AW.setStyle("display","none");}else{if(NeoConfig.vertPane&&AW.get("id")==="inboxcontainer"){AW.setStyle("display","none");}AW.setStyle("visibility","hidden");if(NeoConfig.multitask&&NeoConfig.vertPane){setTimeout(function(){if(AW.inDoc()){if(AW.getStyle("visibility")!=="hidden"){return;}AP(AW,false);}},0);}else{AP(AW,false);}}Ae.removeClass(c);AS.setAttrs({"aria-selected":false,tabIndex:-1});}}function Ad(Ai){if(Ai.newVal===1){y(Ab,{SwitchTab:(Ab===U)});Ae.hide();AW.hide();}}function AQ(Ak){var An,Am,Al,Aj=Ab.widget?Ab.widget.scrolling||[]:[],Ai=Aj.length;for(Al=0;Al<Ai;Al++){An=Aj[Al];Am=AW.test(An)?AW:AW.one(An);if(Am){Am=B.Node.getDOMNode(Am);if(Ak){if(AZ[An]>0){Am.scrollTop=AZ[An];}}else{AZ[An]=Am.scrollTop;}}}}function Af(Ai){var Aj=Ae.one("a#"+AR+" b")||Ae.one("a.uc b")||Ae.one("a#"+AR)||Ae.one("a.uc"),Am=Ae.one("a#"+AR)||Ae.one("a.uc"),Al,Ak;if(Aj&&H.trim(Aj.get("text"))!==H.trim(Ai)){if(Ai.indexOf("::")>=0){Al=Ai.split("::");Aj.setContent(Al[0]);Ai=Al[0]+" <i>("+Al[1]+")</i>";}else{Aj.setContent(Ai);}Ak=l(P(Ai));Am.setAttribute("title",Ak);Ab.elContent.setAttribute("data-title",Ak);}Ac=Ai;Ab.NAME=Ac+" Tab";}function AN(Aj){var Ai=Ae.one("a#"+AR)||Ae.one("a.uc");Ai&&Ai.setAttribute("dir",Aj);}Ab.after("closeChange",function(Al){var Am=Al.newVal,Ak=Ab.get("reuse"),Aj,Ai;if(Am){if(NeoConfig.multitask){Aj=Ab._getParentTabGroup(Ae);Ai=Ab._getParentTabSGroup(Ae);}if(Ak){Ae.addClass("hidden");AW.addClass("hidden");}else{w.remove(AW);w.remove(Ae);if(Ab._evt["switchToTab-activeHaltedOldTab"]){B.detach(Ab._evt["switchToTab-activeHaltedOldTab"]);delete Ab._evt["switchToTab-activeHaltedOldTab"];}Ab.detachDarla();Ab.detachAll();}if(NeoConfig.multitask){Ab._hideTabGroupIfEmpty(Aj,Ai);}y(Ab,{SwitchTab:(Ab===U)});NeoConfig.multitask&&!n.all(".t-el").size()&&n.one(".empty-tabs").removeClass("hidden");}else{if(Ak){Ae.removeClass("hidden");AW.removeClass("hidden");}}},Ab);Ab.on("activeChange",AX);Ab.after("activeChange",function(Ai){if(Ai.newVal){if(B.UA.ie){if(!Ah&&AW.getStyle("visibility")==="hidden"){AW.setStyle("visibility","visible");Ah=1;}AW.setStyle("display","block");AQ(1);}else{if(NeoConfig.vertPane&&AW.get("id")==="inboxcontainer"){AW.setStyle("display","block");}AW.setStyle("visibility","visible");AP(AW,true);}if(!Ab.isContained){Ab._focus();}}});Ab.on("unloadingChange",Ad);Ab.on("titleChange",function(Ai){if(Ai.oldVal!==Ai.newVal){Af(Ai.newVal);B.fire("tab:title",Ab.get("id"),Ai.newVal);}});Ab.on("directionChange",function(Ai){if(Ai.oldVal!==Ai.newVal){AN(Ai.newVal);}});Ab.on("closeHalted",function(){if(Ab!==U){AD(Ab);}});Ab.after("closeHalted",function(){B.use("common-ui-dialog-helper",function(Ai){setTimeout(function(){var Aj={hd:strings.str_modal_tabdeactivate_title,bd:strings.str_modal_tabdeactivate_body},Ak=function(){Ab.set("forceClose",1);
Ab.set("reuse",0);Ab.set("close",1);};Ai.common.ui.DialogHelper.confirm(Aj,{ok:{handler:Ak},cancel:{}});},0);});});Ab.before("widgetChange",function(Am){var Al=Am.newVal,Ak=Am.prevVal,Aj={},An=false,Ai=function(){var Ao;B.detach(Ab.widget._evt["widgetChange-Active"]);if(An){Ao=Al.get("rootNode");Ao&&Ao.removeClass("hidden");}else{Ao=Ab.widget.get("rootNode");Ao&&Ao.addClass("hidden");}Ab.widget=null;Ab.once("widgetChange",function(){Ak.set("skipEvents.active-1",true);Al.set("active",1);if(!An){Al.render(Ab.elContent);}});Ab.detachDarla();Ab.set("widget",Al);};if(Ab.widget&&Ab.widget!==Al){Am.halt(true);Ab.iterateChildren(function(Ao){if(Ao===Al){An=true;}});if(!An){Ab.set("children",Ab.get("children").concat([Al]));}if(Ab.widget._evt["widgetChange-Active"]){B.detach(Ab._evt["widgetChange-Active"]);}Ab.widget._evt["widgetChange-Active"]=Ab.widget.after("activeChange",Ai);Aj=Al.get("skipEvents");delete Aj["active-1"];Al.set("skipEvents",Aj);if(Ab.widget.get("active")){Ab.widget.set("active",0);}else{Ai();}}else{Ab.widget=Al;Ab.widget.tab=Ab;if(!Ab.get("children").length){Ab.set("children",[Al]);}}},Ab);B.mix(Ab,{widget:AT});Ab.addAttrs({id:{value:AR},title:{},direction:{setter:AN},widget:{setter:function(){Ab.attachDarla();}},children:{value:[Ab.widget]},removable:{value:false},hideToolbar:{getter:function(){return Ab.hideToolbar;},setter:function(Ai){Ab.hideToolbar=Ai;q(Ai);B.fire("mbEvent",{action:(Ai?"hide":"show")});}}});};B.extend(j,B.mail.ui.BaseWidget);B.mix(j.prototype,{NAME:"Tab",addTabEl:function(){var AP=this,AN,AO=AP.widgetType;if(!AP.invisible&&!AP.cfg.yTabEl&&AO){AP._hideElTab();AN=AP._getTabGroup(AO);AP._appendElTabToDom(AN);AP._showMultitaskTutorial(AO);NeoConfig.multitask&&n.one(".empty-tabs").addClass("hidden");if(AO==="convpane"){AP._bindConvPaneListener();}AP._showElTab();}},_bindConvPaneListener:function(){var AN=this;AN.draftCount=0;if(NeoConfig.multitaskDraft){AN.draftCardRemovedHandler=B.on("draftCardRemoved",function(){if(AN.isDraftTab){AN._moveDraftTabToEmailTab();}});AN.draftCardAddedHandler=B.on("draftCardAdded",function(){if(!AN.isDraftTab){AN._moveEmailTabToDraftTab();}});}},_moveEmailTabToDraftTab:function(){var AP=this,AO,AN;if(AP.elTab){AO=AP._getParentTabGroup(AP.elTab);AN=AP._getParentTabSGroup(AP.elTab);AP._hideElTab();n.one(C.convpane).removeChild(AP.elTab);AP.isDraftTab=true;AP._hideTabGroupIfEmpty(AO,AN);AP._appendElTabToDom(AP._getTabGroup("author"));AP._showElTab();}},_moveDraftTabToEmailTab:function(){var AP=this,AO,AN;AO=AP._getParentTabGroup(AP.elTab);AN=AP._getParentTabSGroup(AP.elTab);AP._hideElTab();n.one(C.author).removeChild(AP.elTab);AP.isDraftTab=false;AP._hideTabGroupIfEmpty(AO,AN);AP._appendElTabToDom(AP._getTabGroup("convpane"));AP._showElTab();},_getTabGroup:function(AN){return C[AN]&&n.one(C[AN]);},_getParentTabGroup:function(AN){return AN.ancestor(".t-group");},_getParentTabSGroup:function(AN){return AN.ancestor(".t-s-group");},_hideTabGroupIfEmpty:function(AO,AN){if(AN.get("children").size()===0){AO.addClass("hidden");}},detachTabHandlers:function(){var AN=this;if(NeoConfig.multitaskDraft){AN.draftCardRemovedHandler&&AN.draftCardRemovedHandler.detach();AN.draftCardAddedHandler&&AN.draftCardAddedHandler.detach();AN.draftCardRemovedHandler=null;AN.draftCardAddedHandler=null;}},_appendElTabToDom:function(AN){var AO=this;if(AN){AN.prepend(AO.elTab);AN.ancestor(".t-group").removeClass("hidden");AO.time=i++;}else{n.prepend(AO.elTab);}},_showMultitaskTutorial:function(AN){if(0&&NeoConfig.showMultitaskTutorial&&AN!=="convpane"){setTimeout(function(){B.fire("showMultitaskingOnboarding");},300);}},_showElTab:function(){var AN=this;setTimeout(function(){if(AN.elTab&&AN.elTab.setStyle){AN.elTab.setStyle("visibility","visible");}},10);},_hideElTab:function(){var AN=this;if(AN.elTab&&AN.elTab.setStyle){AN.elTab.setStyle("visibility","hidden");}},attachDarla:function(){var AN=this;if(!AN.darlaEvent&&AN.widget){AN.darlaEvent=AN.widget.on("darlaEvent",function(AO){AO.beaconOnly=!AN.widget.get("active");B.fire("darlaEvent",AO);B.fire("mt:view",AO);});}},_cleanSearchAd:function(){var AP=B.one("#sponsoredAd"),AQ=B.one("#theAd");AP&&AP.remove(true);if(AQ.hasClass("withSponsoredAd")){AQ.removeClass("withSponsoredAd");var AN=AE.hasClass("wide-right-rail")?"#sb_rel_tgtWSKY":"#sb_rel_tgtSKY";var AO=B.one(AN);if(AO){AO.show();}}},detachDarla:function(){var AN=this;AN.darlaEvent&&AN.darlaEvent.detach();AN.darlaEvent=null;},updateTabData:function(AN){this.data=AN;}});function AJ(){n=D(f);AM=D(k);x=D(v);n.plug(B.comms.ui.NodeFocusBase,{descendants:"a",keys:{next:"39",previous:"37"}});if(!NeoConfig.multitask){return;}n.delegate("click",function(AO){var AP=AO.currentTarget.one("a").get("id"),AN=N(AP);if(!AN){return;}L.tabClicked=true;if(AO.target.hasClass("close-tab")){AN.set("close",1);return;}B.fire("tab:click",AN);if(AN.get("active")!==1){B.common.Utils.rocketstats.bucketStat("tab","tabswitch");L.holdNavSwitch=1;L.hideOnLeave=1;s.detachTabHandlers();AD(AN,null,true);AN._bindConvPaneListener();}else{B.common.Utils.rocketstats.bucketStat("tab","sametab");}},".t-el");D(AL).on("mouseleave",function(){var AN;if(L.hideOnLeave){if(L.holdNavSwitch===1&&L.switchLaterNav){B.fire("navigation:switch",{"type":L.switchLaterNav});L.switchLaterNav=null;}else{}T(Y());L.hideOnLeave=0;}else{if(L.tabClicked){AN=Y();if(AN.widget&&"search"===AN.widgetType){B.fire("navigation:switch",{"type":"searchNav"});}}}L.tabClicked=false;L.holdNavSwitch=0;});B.on("pagemodeChange",function(AN){r(AN);});B.on("tabview:handleKeyDown",M);B.on("key",M,document,"down:"+h.join("+ctrl,")+"+ctrl",L);B.on("key",M,document,"down:"+h.join("+meta,")+"+meta",L);B.on("keyup",o,document,L);B.on("tab:addRef",function(AN){var AO,AP;AO=L.refTabCheck(AN.data);s.detachTabHandlers();if(AO){AO.set("close",1);}AO=L.addTab(AN,u(AN));AP=n.one(".t-el.active");AP&&AP.removeClass(c);AO.elTab.addClass(c);});B.on("tab:removeRef",function(AN){var AO;AO=L.refTabCheck(AN.data);if(AO){AO.set("close",1);}});B.on("nav:inbox",function(){AD(N("tabinbox"),0,0,0,1);
B.fire("mt:click",{"action":"inbox_leftnav"});X("nav","inbox:"+(NeoConfig.tabs?"tabs_on":"tabs_off"));A.stat("nav","view=>"+"inbox");});B.on("nav:contacts",function(){AD(N("tabcontacts"),0,0,0,1);B.fire("mt:click",{"action":"contacts_leftnav"});X("nav","contacts:"+(NeoConfig.tabs?"tabs_on":"tabs_off"));A.stat("nav","view=>"+"contacts");});B.on("nav:calendar",function(){AD(N("tabcalendar"),0,0,0,1);B.fire("mt:click",{"action":"calendar_leftnav"});X("nav","calendar:"+(NeoConfig.tabs?"tabs_on":"tabs_off"));A.stat("nav","view=>"+"calendar");});B.on("nav:notepad",function(){AD(N("tabnotepad"),0,0,0,1);B.fire("mt:click",{"action":"notepad_leftnav"});X("nav","notepad:"+(NeoConfig.tabs?"tabs_on":"tabs_off"));A.stat("nav","view=>"+"notepad");});B.on("nav:messenger",function(){B.fire("mt:click",{"action":"msngr_nav"});X("nav","messenger:"+(NeoConfig.tabs?"tabs_on":"tabs_off"));A.stat("nav","view=>"+"messenger");});}function N(AP){var AN,AO=Q.length;for(AN=0;AN<AO;AN++){if(Q[AN].get("id")===AP){return Q[AN];}}return null;}function AF(){var AP=Q.length,AQ,AO,AN=i;for(AO=1;AO<AP;AO++){if(Q[AO].isRemovable&&Q[AO].time<AN){AQ=Q[AO];AN=Q[AO].time;}}if(AQ){AQ.set("close",1);B.common.Utils.rocketstats.bucketStat("tab","autoclose"+(NeoConfig.tabs?"tabs:on":"tabs:off"));}}function z(){var AN=0;if(AM){AN=AM.all(".nav-tab-li.hidden").size();}while(Q.length-AN>=g){AF();}}function O(AO,AP){var AN=AP.get("id");Q.push(AP);if(!W[AO]){W[AO]={};}AP.set("collection",AO);W[AO][AP.get("id")]=AP;}function b(AO,AP){var AQ=W[AO];if(AQ){var AN=AP.get("id");if(AQ[AN]){delete AQ[AN];return true;}}return false;}function V(AO,AP){var AN;z();if(AO.tab){AO.tab.addTabEl();AO.tab.set("title",AO.p_label);}AP.p_label=AO.p_label;AP.s_label=AO.s_label;AP.s_labelDir=AO.s_labelDir;AN=Y();AP.prevTabId=AN?AN.get("id"):-1;if(AO.widget&&AO.widget!==AP.get("widget")){AP.set("widget",AO.widget);}var AQ=AO&&AO.widget&&AO.widget.widgetType||"content_widget";O(AQ,AP);n.fire("refresh");B.fire("tab:add",AP);AP.fire("tab:add",{cfg:AO,tab:AP});return AP;}function AI(AN){if(W[AN]){return W[AN];}return[];}function u(AN){s&&s.detachTabHandlers();return new j(AN);}function K(AO){var AN,AS,AQ,AR,AP="mail";switch(AO.widgetType){case"search":AN="searchNav";break;case"author":AN="none";break;}if(!AN){AR=AO.widget&&AO.widget.fid;if(AR){AS=B.one("#storm-listnav").one('> li[data-fid="'+AR+'"]');if(AS){AN="none";}}}if(!AN){AQ=AO.elContent.getAttribute("data-tid");switch(AQ){case"tabcontacts":case"tabnotepad":case"tabcalendar":AN=AP=AQ.replace("tab","");break;}}if(!AN){AN="Folders";}B.fire("navigation:switch",{type:AN});if(G){G.all(".nav-item").removeClass("active");G.one(".nav-item-"+AP).addClass("active");}}function AD(AP,AN,AR,AS,AQ,AO){if(AP.get("id")==="tabcalendar"){if(!AP.darlaType){AP.darlaType="calendartab";}}if(U&&(U===AP)){if(!U.get("active")){U.set("active",1);}E=false;B.fire("tab:reactivated",AP.widget);return;}if(U&&E&&U!==AP){if(!U.get("active")){E=false;}return;}if(!U||AP.get("active")){U=AP;if(!U.get("active")){U.set("active",1);}E=false;return;}if(U._evt["switchToTab-deactivateOldTab"]){B.detach(U._evt["switchToTab-deactivateOldTab"]);delete U._evt["switchToTab-deactivateOldTab"];}U._evt["switchToTab-deactivateOldTab"]=U.after("activeChange",function(AT){B.detach(U._evt["switchToTab-deactivateOldTab"]);delete U._evt["switchToTab-deactivateOldTab"];if(AT.newVal){return;}if(AP._evt["switchToTab-activateNewTab"]){B.detach(AP._evt["switchToTab-activateNewTab"]);delete AP._evt["switchToTab-activateNewTab"];}AP._evt["switchToTab-activateNewTab"]=AP.after("activeChange",function(){B.detach(AP._evt["switchToTab-activateNewTab"]);delete AP._evt["switchToTab-activateNewTab"];E=false;AN&&AN(AP);});B.fire("tabDeactivated",AP);if(!AR){T(AP);}AP.set("active",1);});if(AS){AP._bindConvPaneListener();}if(U.get("active")){E=true;AH();U.set("active",0);if(NeoConfig.backButtonFull&&!AO&&U.cfg.p_label!=="Folders"){B.fire("initPage",{id:AP.cfg.label});}}else{E=false;}if(!(S()&&AE.getAttribute("data-open")==="multitask")||AQ){K(AP);}B.fire("tab:resize");B.fire("list-stat:tabDone",AP.widget);}function AB(AP){var AO,AN,AR,AQ=false,AS=B.mail.ui.searchTab;if(AS&&U.prevTabId===AS.get("id")){AQ=true;}AR=Q.length;if(AP==="all"){if(!AS&&B.one("#back-search")){B.one("#back-search").hide();}for(AO=AR-1;AO>=0;AO--){AN=Q[AO];if(AN.get("removable")&&AN!==U&&((AQ&&AN.get("id")!==AS.get("id"))||!AQ)){AN.set("close",1);}}}else{for(AO=AR-1;AO>=0;AO--){AN=Q[AO];if(AN.get("removable")&&AN!==U){if(AN.widgetType!=="convpane"&&AN.widgetType!=="messagepane"){AN.set("close",1);}}}}}function T(AO){if(NeoConfig.tabs){return;}var AQ,AN,AP;if(NeoConfig.multitask){AQ=AO.elTab;AN=AQ.ancestor(".t-s-group");if(AN){AN.prepend(AQ);}AP=n.one(".t-el.active");AP&&AP.removeClass(c);AQ.addClass(c);s=AO;AO.time=++i;}}function AH(){if(U._evt["switchToTab-activeHaltedOldTab"]){B.detach(U._evt["switchToTab-activeHaltedOldTab"]);delete U._evt["switchToTab-activeHaltedOldTab"];}U._evt["switchToTab-activeHaltedOldTab"]=U.once("activeHalted",function(){B.detach(U._evt["switchToTab-activeHaltedOldTab"]);delete U._evt["switchToTab-activeHaltedOldTab"];E=false;});}function y(AQ,AT){var AU=0,AR,AS,AP=AQ.get("id"),AO,AN,AV=AQ.prevTabId;A.stat((AQ.widgetType?AQ.widgetType:"")+"_tab_close");while(Q.length>AU){AR=Q[AU++];AO=AR.get("id");if(AP===AO){b(AR.get("collection"),AR);L.tabs=Q=Q.slice(0,AU-1).concat(Q.slice(AU));B.fire("tab:remove",AO);if(NeoConfig.backButtonFull){B.fire("removePage");}AU--;continue;}if(AO===AV){AN=AR;}}if(!AN){AS=Q.length-1;while(AS>0){if(Q[AS]&&Q[AS].noDefault){AS--;}else{break;}}AN=Q[AS]||Q[0];}if(AT.SwitchTab){U=null;B.fire("tabDeactivated",AN);AD(AN,function(){n.fire("refresh");});}AR=Y();if(AR&&!(S()&&AE.getAttribute("data-open")==="multitask")){K(AR);}}function t(AO){var AN,AP=Q.length;while(AP--){AN=Q[AP].widget||{};if(AO(AN,Q[AP])){return Q[AP];}}}function a(AR,AT){var AO=Q,AN=AO.length,AP=AT?-1:AN,AS=AT?AN-1:0,AU=AT?-1:1,AQ;for(AQ=AS;AQ!==AP;AQ+=AU){if(AR(AO[AQ])){return AO[AQ];}}}function AK(AN){return(!AN||!AN.widget||!AN.widget.get||AN.widget.get("canDeactivate"));
}function Y(){return U;}function p(){var AO,AN;for(AN=Q.length;AN--;){AO=Q[AN];if(AO&&AO.get("active")){return AN;}}return -1;}function S(){if(NeoConfig.tabs||!NeoConfig.multitask){return false;}return true;}function o(AO){var AN=AO.keyCode;if((AN===91||AN===93)&&d>-1){T(Y());if(S()){if(AE.getAttribute("data-open")==="multitask"){B.fire("navigation:switch",{"type":"none"});}}}if(L.holdNavSwitch===1&&L.switchLaterNav){B.fire("navigation:switch",{"type":L.switchLaterNav});L.switchLaterNav=null;}L.holdNavSwitch=0;d=-1;}function M(AS){var AR=AS.keyCode,AQ=AS.metaKey,AP=AS.ctrlKey;function AO(AV,AT,AU){return AV?(AT===0?AU-1:AT-1):(AT===AU-1?0:AT+1);}function AN(AW){var AT=Y(),Ad=AT.elTab,Aa=NeoConfig.tabs,AV=Aa?AT.get("id"):Ad.get("id"),Ae,AU,Ac,Ab,AX=Aa?AM.all(".nav-tab-li"):n.all(".t-el"),AY,AZ=false;if(AX.size()===0){return;}if(Aa){Ab=AW?"next":"previous";AX.pop();}else{Ab=AW?"previous":"next";}AX.each(function(Ag,Af){if(Aa){if(!Ag.hasClass("hidden")){AY=Ag.one("[data-tid]");if(AY){if(AY.getAttribute("data-tid")===AV){Ae=Af;}}}}else{if(Ag.get("id")===AV){Ae=Af;}}});if(B.Lang.isUndefined(Ae)){Ac=0;}else{Ac=AO(AW,Ae,AX.size());}if(Aa){while(!AZ){AU=AX.item(Ac);if(AU.hasClass("hidden")){Ac=AO(AW,Ac,AX.size());}else{AZ=true;}}AU=N(AU.one(".nav-tab").getAttribute("data-tid"));}else{AU=AX.item(Ac);AU=N(AU.one("a").get("id"));}if(AU){L.holdNavSwitch=1;AD(AU,null,true);}d=Ac;}switch(AR){case 219:if((AQ||AP)&&!AS.shiftKey&&!AS.altKey){AS.preventDefault();if(S()){B.fire("navigation:switch",{"type":"multitask"});}AN(true);}break;case 221:if((AQ||AP)&&!AS.shiftKey&&!AS.altKey){AS.preventDefault();if(S()){B.fire("navigation:switch",{"type":"multitask"});}AN(false);}break;}}function m(){AJ();}function r(){var AN=Y();if(AN){AC(AN);}}function AC(AN){q(AN.hideToolbar);if(AN.widgetType==="search"||((AN.widgetType==="messagepane"||AN.widgetType==="convpane")&&!NeoConfig.mbPencilRec)){B.fire("mbEvent",{action:"hide"});}else{if(AN.widgetType==="convlist"||AN.widgetType==="messagelist"){B.fire("mbEvent",{action:"show"});B.fire("rotateD2S");}else{}}}function q(AN){if(AN){AE.addClass("notoolbar");}else{AE.removeClass("notoolbar");}}function AG(AO){var AN=a(function(AP){if(AP.data){if(AO[AO.tabKey]===AP.data[AP.data.tabKey]){return true;}}});return AN;}function AA(AN){AN.widget&&AN.widget.set("close",1);AN=null;}B.augment(L,B.Attribute);B.mix(L,{render:m,createTab:u,addTab:V,switchToTab:AD,removeTab:y,setPageMode:r,showToolbar:q,tabs:Q,getTab:t,iterateTabs:a,getActiveTab:Y,getActiveTabIndex:p,canDeactivateTab:AK,refTabCheck:AG,destroyTabWidget:AA,getTabById:N,autoCloseTabs:z,getByType:AI});};B.namespace("mail");B.mail.Tabs=new I();},"1.0.0",{requires:["mail-ui-basewidget","minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils","mail-ui-common-string-utils","rocket-stats","ymma-stats"]});

YUI.add("common-ui-toolbar-base",function(B){B.Node.DOM_EVENTS.beforedeactivate=1;var D=strings["str_msg-view_btn_hidepreview"],G=strings["str_msg-view_btn_showpreview"],F=B.common.Utils,C,A=F.ymmastats;function E(K){var S=this,Q=0,U,V,J;K=K||{};U=K.root;V=K.template;J=K.menu;function W(){U.all(".btn a").each(function(X){X.setAttribute("role","button");});U.all(".menu a").each(function(X){X.setAttribute("aria-haspopup","true");});U.all(".btn a i").each(function(X){X.setAttribute("role","presentation");});}function L(X){var Y=U?U.one("#btn-togglepreview a"):0;if(Y){Y.setContent(X?D:G);}}function O(){if(!U&&V){U=B.Node.create(B.common.Utils.substitute(V,0,0,0,strings));S.root=U;S.set("content",U);W();}if(!Q){M();}return U||"&nbsp;";}function M(){if(U){S._evts.push(B.on("toolbar:ui-automation",P));S._evts.push(U.delegate("mousedown",function(a){if(B.UA.ie&&B.UA.ie<=8){document.activeElement&&B.one(document.activeElement).once("beforedeactivate",function(b){b.preventDefault();});}else{a.preventDefault();}},".btn a"));var Y=function(d){if(!B.common.Utils.isProcessDefaultEnabled(d)){d.preventDefault();}if(!C){var f=B.common.Utils.getDataAction(d),b=f.action,a=f.node,c=d.currentTarget;T(b,a,c,d);C=setTimeout(function(){C=0;},300);}};var Z=function(d){if(d.keyCode===13||d.keyCode===32){if(d.currentTarget.hasClass("cbox")){B.use("node-event-simulate",function(){d.currentTarget.one("input").simulate("click");});return;}var f=B.common.Utils.getDataAction(d),b=f.action,a=f.node,c=d.currentTarget;T(b,a,c,d);}};S._evts.push(U.delegate("click",Y,".btn, input"));S._evts.push(U.delegate("keydown",Z,".btn, input"));S._evts.push(B.one("#Compose").on("click",Y));S._evts.push(S.on("activeChange",function(a){if(a.newVal){B.fire("toolbar:refresh");}}));var X=U?U.one("#btn-togglepreview a"):0;if(X){S._evts.push(B.on("ws:previewChange",L));}Q=1;}}function P(Z,X){var Y;if(S.get("active")&&Z==="menu"){Y=U.one("#btn-"+X);if(Y){if(!Y.menu){T(Z,Y);}else{if(Y.menu.show&&S.buttonEnabled({root:U,node:Y})){S.setNodeButtonMenu({node:Y});Y.menu.show();}}}}}function T(Z,Y,b,c){var f=Z,X=Y.get("id"),d={},e,a=0;if(Z){if(Z==="menu"&&J&&S.buttonEnabled({root:U,node:Y})){A.stat("toolbar","type=>"+B.mail.Tabs.getActiveTab().widgetType+",action=>"+X);if(!(Y.menu)){B.use("common-ui-menu-helper",function(h){var g=h.common.ui.MenuHelper;g.createLoadingMenu(Y);J.template.call(this,X,function(){N(Y);});});}(X==="btn-actions"||X==="btn-msg-actions")&&B.fire("darlaEvent",{action:"action_menu"});f+=X;switch(X){case"btn-new":d.action="compose_menu_toolbar";B.fire("mt:click",d);break;}}else{A.stat("toolbar","type=>"+B.mail.Tabs.getActiveTab().widgetType+",action=>"+Z);S.fire("itemSelected",{dataAction:Z,item:b,rawEvent:c});}if(Z==="menu"&&X!=="btn-new"){e=b&&b.ancestor(".list-view-footer");if(B.mail.Tabs.getActiveTab().get("widget").type==="messagepane"){d.append={sec:(e)?"msgReadTlbrBtm":"msgReadTlbr"};a=1;}d.action="tlbr_"+f;if(e){d.action+="_btm";}B.fire("mt:click",d);switch(d.action){case"tlbr_menubtn-spam":case"tlbr_menubtn-spam_btm":d.action=d.action.replace("tlbr_menubtn-spam","spam_menu");if(a){d.action+="_msg_read";}B.fire("mt:view",d);break;}}}}function N(X){B.use("common-ui-menu-helper",function(d){var c=X.get("id").replace("btn-","menu-"),b=d.one("#"+c),a=d.common.ui.MenuHelper,Z={menu:b,button_enabled:function(){return S.buttonEnabled({root:U,node:X});},keys:function(Y){J.keys.call(this,b,Y);},enterAccel:function(Y){J.enterAccel.call(this,Y);}};if(c==="menu-move"){Z.fixedMenuGroup={menu:"menu-move-folder",height:275};}a.create(X,Z,function(){var Y;b.on("menuSelected",function(e){S.fire("itemSelected",{dataAction:e.dataAction,item:e.item});});b.on("menu:state",function(e){if(e.state==="show"&&S.buttonEnabled({root:U,node:X})){S.setNodeButtonMenu({node:X});X.addClass("pressed");}else{X.removeClass("pressed");}});X.addClass("pressed");Y=S.on("activeChange",function(e){if(!e.newVal){X.menu&&X.menu.hide();X.unplug(d.Plugin.Menu);Y.detach();}});S.setNodeButtonMenu({node:X});});});}function R(Y){if(Y){for(var X in S._evts){B.detach(S._evts[X]);}F.remove(S.get("content"));S.detachAll();}}S.root=U;S.addAttrs({content:{value:U,getter:O},close:{setter:R},active:{}});S._evts=[];if(U){M();W();}}function H(){return true;}B.augment(E,B.Attribute);B.mix(E.prototype,{buttonEnabled:H,setNodeButtonMenu:H});B.namespace("mail.ui").Toolbar=E;var I=function(){var J=B.one("#toolbar");if(J){J.plug(B.comms.ui.NodeFocusBase,{descendants:"span.btn",keys:{next:"39",previous:"37"}});B.on("toolbar:refresh",function(){J.fire("refresh");});}};B.mail.ui.ToolbarContainer=new I();},"1.0.0",{requires:["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base","ymma-stats","common-ui-tabs-base"]});

YUI.add("common-ui-contentwidget",function(A){var C=0,B=function(){},E={"input":1,"textarea":1,"select":1},I=null,G=function(J){if(J&&J.hasAttribute){try{if(!J.hasAttribute("tabIndex")){J.setAttribute("tabIndex","0");}}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:1");}}return J;},F=function(Q,K,P){var R=Q?Q.split(","):[],M=R?R.length:0,J,N={},O,L;for(J=0;J<M;J++){O=R[J].split("+");L=O[1];O=O[0];N[O]=1;if(L){P.push(R[J]);}else{K.push(O);}if(O>=48&&O<=57){K.push(parseInt(O,10)+48);}}if(N["46"]){K.push("8");}},D=function(J){var K=this;if(!this.NAME){this.NAME="ContentWidget";}K.accelKeyHandle=[];K.accelLocalKeyHandle=[];A.augment(K,A.Attribute);K.addAttrs({"active":{setter:K._active},"reuse":{value:0},"close":{setter:K._close},"skipEvents":{value:{}},"contentToolbar":{setter:K._setContentToolbar},"parentNode":{},"rootNode":{setter:K._setRoot},"focus":{setter:K._setFocus},"dirty":{getter:K._getDirty},"children":{setter:K._setChildren,value:[]},"focusNode":{setter:G},"forceClose":{value:0},"canClose":{value:1,getter:K._canClose,setter:function(L){this._canCloseFlag=L;}},"forceDeactivate":{value:0},"canDeactivate":{value:1,getter:K._getCanDeactivate,setter:function(L){this._canDeactivateFlag=L;}},"title":{},"direction":{},"navToolbar":{},"navKeys":{},"charCodes":{},composeWidgets:{value:null,getter:K.getComposeWidgets},"localCharCodes":{},"handleKeysLocally":{}},J||{},true);K._evt={};K.before("closeChange",function(N){var L=N.newVal,M=K.get("active")||0;if(N.newVal&&!(K.get("forceClose")||K.get("canClose"))){K.fire("closeHalted");N.halt(true);return;}if(M===L&&!K.get("reuse")){N.halt(true);if(K._evt.deactivateB4Close){A.detach(K._evt.deactivateB4Close);}K._evt.deactivateB4Close=K.after("activeChange",function(){K.set("close",L);});K.set("active",!L);}});K.on(["closeChange","reuseChange","activeChange","forceCloseChange","forceDeactivateChange"],function(S){var M=S.attrName,L=S.newVal,R=S.type,P=0,Q=K.get("children").length,O,N;if(K.get(M)===L){S.halt(true);return;}if(M==="active"&&!L&&!(K.get("forceDeactivate")||K.get("canDeactivate"))){if(K._evt.deactivateB4Close){A.detach(K._evt.deactivateB4Close);}K.fire("activeHalted");S.halt(true);return;}O=function(){if(P===Q&&K.get(M+"Flag")){if(N){if(K._evtAfterAction){A.detach(K._evtAfterAction);}K._evtAfterAction=K.after(R,function(){K.set(M+"Flag",0);});K.set(M,L);}else{K.set(M+"Flag",0);}}};K.set(M+"Flag",1);K.iterateChildren(function(U){var T=U.get("skipEvents."+M+"-"+(L&&1));if(U.get(M)!==L&&!T){if(U._myActionEvt){A.detach(U._myActionEvt);}U._myActionEvt=U.after(R,function(){P++;O();});U.set(M,L);}else{P++;}},K);if(K.get(M+"Flag")&&Q&&Q!==P){N=1;S.halt(true);return;}});K.after("closeChange",function(M){var L=function(N){if(!N.detachAll){return;}N.detachAll();N.ondestroy();};if(M.newVal&&!K.get("reuse")){setTimeout(function(){try{K.iterateChildren(L);if(!K.parentCW){L(K);}}catch(N){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:2",N,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:2");A.error("An error occurred in the clean up phase of this contentWidget",N);}},500);}});K.after("activeChange",function(M){if(M.newVal){var L=K.get("contentToolbar");K.set("contentToolbar",L?L:"");L=K.get("navToolbar");if(L){K.set("navToolbar",L);}K.set("navKeys",K.get("navKeys"));}});},H=function(O){var K=this.NAME,J=false;C--;if(A.Lang.isString(O)&&O.length>1){K=O;}try{var N=this;for(var L in N){if(N.hasOwnProperty(L)){if(N[L] instanceof A.Node){}N[L]=null;}}L=null;N=null;J=true;}catch(M){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:3",M,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:3");}K=null;return J;};A.mix(D.prototype,{keyHandle:null,localKeyHandle:null,accelKeyHandle:null,accelLocalKeyHandle:null,bound:null,ondestroy:function(){H.apply(this,arguments);},iterateChildren:function(K){if(typeof this.get!=="function"){return;}var O=this,N,M=O.get("children"),J=M.length,L;for(L=0;L<J;L++){N=M[L];if(N instanceof D){K.call(O,N,L);}else{}}},addChild:function(L){var K=this,J=false;if(!L||!(L instanceof D)){return;}K.iterateChildren(function(M){if(M===L){J=true;}});if(!J){K.set("children",K.get("children").concat([L]));}},removeChild:function(K){var L=this,J=function(N){var M=[];if(N.newVal){L.iterateChildren(function(O){if(O===K){O.parentCW=null;return;}M.push(O);});L.set("children",M);}};if(K.get("close")){J({newVal:1});}else{K.once("closeChange",J);K.set("close",1);}},_active:function(K){var L=this,J=L.get("contentToolbar");if(K){if(!L.isContained){I=L;}if(!L.get("active")){setTimeout(function(){if(L.get("active")){if(window.bktest2){}L._bindToKeys();}},0);}}else{if(!L.isContained){I=null;}if(!L.isContained){L._blur();}L._detach();}if(J){J.set("active",K);}},_setFocus:function(J){var K=this;if(J){K._focus(J);}else{this._blur(J);}},_focus:function(){var N,M=this,L=M.get("focusNode"),K;if((A.UA.gecko>=2)&&(K=document.activeElement)){K.blur();}if(L){try{N=M.onFocus(L);}catch(J){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:4",J,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:4");N=false;}if(!N){try{if(L){L.focus();}}catch(J){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:5",J,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:5");}}}},_blur:function(){var L=this,K=L.get("focusNode");if(K&&K.blur){try{K.blur();
}catch(J){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:6",J,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:6");}}},_close:function(J){if(J===1){this._detach();}},_handleKeyDown:function(Q){var J=false;try{var M=Q.keyCode,P=Q.target,L=P?P.get("tagName").toLowerCase():"",O=P?P.get("type")||"":"",N=false;O=O.toLowerCase();if(O&&(O==="text"||O==="textarea")){N=true;}else{if(L&&(L==="input"||L==="textarea")){N=true;}}if(Q.ctrlKey||Q.metaKey||Q.altKey||!(L in E)||!N){if(A.UA.os==="macintosh"&&M===8){Q.charCode=46;Q.keyCode=46;}if(M>=96&&M<=105){Q.charCode=M-48;Q.keyCode=M-48;}J=this.onKeyDown(Q);}}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:7",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:7");J=false;}if(J){Q.halt();return false;}return J;},_setRoot:function(J){var K=this;if(J){if(!K.get("focusNode")){K.set("focusNode",J);}else{G(J);}if(K.get("active")){K._bindToKeys(J);}}},_bindToKeys:function(L){var M,P,O=this,S=O.get("charCodes"),K=O.get("localCharCodes"),Q=O.get("handleKeysLocally"),N=[],R=[],J;L=L||O.get("rootNode");if(O.bound){return;}if(S&&(!Q||L)){J=Q?(L||document):document;F(S,N,R);if(N.length){O.keyHandle=A.on("key",O._handleKeyDown,J,("down:"+N.join(",")),O);O.bound=1;}P=R?R.length:0;for(M=0;M<P;M++){O.accelKeyHandle.push(A.on("key",O._handleKeyDown,J,("down:"+R[M]),O));O.bound=1;}}if(K&&L){N=[];R=[];F(K,N,R);if(N.length){O.localKeyHandle=A.on("key",O._handleKeyDown,L,("down:"+N.join(",")),O);O.bound=1;}P=R?R.length:0;for(M=0;M<P;M++){O.accelLocalKeyHandle.push(A.on("key",O._handleKeyDown,L,("down:"+R[M]),O));O.bound=1;}}},_nest:function(K){var J=this;K.isContained=1;K.after(["activeChange","closeChange"],function(M){var N=M.attrName,L=M.newVal,O=0,P=J.get("children").length;J.iterateChildren(function(R){var Q=K.get("skipEvents."+N+"-"+(L&&1));if((K===R)||R.get(N)===L||Q){O++;}if(O===P&&J.get(N+"Flag")!==1){J.set(N,L);}});},J);K.on(["titleChange","focusNodeChange","dirtyChange","directionChange","navKeysChange"],function(L){if(L.oldVal!==L.newVal){J.set(L.attrName,L.newVal);}},J);},_setContentToolbar:function(J){var K=this.get("contentToolbar");if(K!==J){if(K){K.set("active",0);}if(J){J.set("active",1);}}return J;},_setChildren:function(L){var K=0,J=L?L.length:0,O,M=[],N=this;for(K;K<J;K++){O=L[K];if(O&&O instanceof D){if(O.parentCW!==N){O.parentCW=N;N._nest(O);}M.push(O);}}return M;},_detach:function(){var L=this,J=L.accelKeyHandle.length;if(L.keyHandle){L.keyHandle.detach();}if(L.localKeyHandle){L.localKeyHandle.detach();}for(var K=0;K<J;K++){L.accelKeyHandle[K].detach();}L.accelKeyHandle=[];J=L.accelLocalKeyHandle.length;for(K=0;K<J;K++){L.accelLocalKeyHandle[K].detach();}L.accelLocalKeyHandle=[];L.bound=0;J=null;},_getDirty:function(){var K=this,J=false;K.iterateChildren(function(L){if(L.get("isDirty")){J=true;return;}});return J||(K.isDirty&&K.isDirty());},_getCanDeactivate:function(){var L=this,K=L.get("children"),J=false;if(L._canDeactivateFlag===-1||L._canDeactivateFlag===2){return(L._canDeactivateFlag>0);}L.iterateChildren(function(M){if(!M.get("canDeactivate")){J=true;return;}});return(K.length)?!J:L._canDeactivateFlag;},_canClose:function(){var L=this,K=L.get("children"),J=false;if(L._canCloseFlag===-1||L._canCloseFlag===2){return(L._canCloseFlag>0);}L.iterateChildren(function(M){if(!M.get("canClose")){J=true;return;}});return(K.length)?!J:L._canCloseFlag;},render:B,onKeyDown:B,onFocus:B,getComposeWidgets:B,isDirty:function(){return false;}});A.namespace("common.ui").ContentWidget=D;},"1.0.0",{requires:["event-key"]});

YUI.add("common-ui-notification",function(A){var E=A.common.Utils,J=3000;function I(L){var M=this;L=L||{};M.dir=L.dir||"top";M.sticky=L.sticky||false;M.closeButton=L.closeButton||false;M.height=L.height||"50px";M.type=L.type||"slide";M.className=L.className||"";M.parent=L.parent||"body";M.parentType=L.parentType||"class";M.create();}function C(){var M=this,L;if(M.type==="slide"){L=M.dir+":-"+M.height;}else{if(M.type==="fade"){L="opacity:0";}}M.container=A.Node.create('<div id = "notification" class="'+M.className+'" style="'+L+'"></div>');M.parentType==="id"?A.one("#"+M.parent).appendChild(M.container):A.one(M.parent).appendChild(M.container);M.bindUI();}function B(){var L=this;L.container.delegate("click",function(N){var O=E.getDataAction(N),M=O&&O.action;N.preventDefault();if(M){if(M==="close"){L.hide();}else{L.fire("clickEvent",{action:M});}}},"a");if(L.sticky){A.once("click",function(){L.hide();});}}function K(M,L){var N=this;if(!M){return;}L=L||3000;N.container.set("innerHTML",M);A.Lang.later(0,N,function(){this.show(L);});}function H(L){var M=this;if(M.type==="slide"){M.container.setStyle(M.dir,0);}else{if(M.type==="fade"){M.container.setStyle("opacity",100);}}if(!M.sticky){A.Lang.later(L,M,function(){this.hide();});}}function D(){var N=this,L,M;if(N.type==="slide"){L=N.dir;M="-"+N.height;}else{if(N.type==="fade"){L="opacity";M=0;}}if(N.container&&N.container._node){N.container.setStyle(L,M);A.Lang.later(J,N,function(){this.destroy();});}}function G(){var L=this;L.container.remove(true);}function F(){}I.prototype={create:C,notify:K,show:H,hide:D,getMsg:F,destroy:G,bindUI:B};A.namespace("common.ui");A.augment(I,A.EventTarget);A.common.ui.Notification=I;},"1.0.0",{requires:["common-utils"]});

YUI.add("comms-ui-nodefocus-base",function(A){function B(){B.superclass.constructor.apply(this,arguments);}A.extend(B,A.Plugin.Base,{initializer:function(D){function G(L){F.detach();I.detach();A.use("comms-ui-nodefocus",function(){H.unplug(C.NodeFocusBase);H.plug(C.NodeFocus,D);H.nodeFocus.onKeyDown(L);});}var E=this,F,I,K,H=E.get("host"),C=A.comms.ui,J=C.NodeFocus;if(J){H.plug(J,D);}else{K=[D.keys.next,D.keys.previous];F=A.on("key",G,H,"down:"+K.join(","),E);I=A.on("nodeFocus:load",G,E);}}});B.NAME="NodeFocusBase";B.NS="nodeFocusBase";A.on("keydown",function(C){C.keyCode===9&&A.fire("nodeFocus:load",C);});A.namespace("comms.ui").NodeFocusBase=B;},"1.0.0",{requires:["plugin","node","event-key"]});

YUI.add("minty_module_tabs_tab_removable",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_tabs_tab_removable={base:'<li role="presentation" class="removable t-el"> <a data-action="navigate" href="{{tab_url}}" role="tab" id="{{tab_id}}" title="{{tab_title}}" class = "bold"> {{p_label}} <b>{{s_label}}</b> </a> <span class="icon icon-small-close close-tab s-tp" data-action="close-tab" title="{{str_close}}"></span></li>'};},"1.0.0");

YUI.add("mail-ui-accounts",function(F){var C=NeoConfig,B=F.common.Utils.substitute,A=F.common.persist.UserData;function D(){var M,L,U,I,K,O,Q,P,T,S=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,G=C.extAccountColors,R=G.length,N=F.Lang.trim(A.get("userSendPref.defaultFromName"))||A.get("userSendPref.defaultFromAddress"),H=(A.get("externalAccounts")||{}).extAccount,J=H?H.length:0;P={Inbox:{id:"Inbox",color:"ypurple",name:N,pretty_name:N,check_mbox:B(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:N})}};for(M=0,L=0;M<J;++M){U=H[M];T=null;if(S){Q=U.colorIndicator;if(C.colorIndicatorsStr[Q]){T=C.colorIndicatorsStr[Q];}else{Q=U.colorIndicator?U.colorIndicator:"";if(Q>0){T=C.colorIndicators[Q];}}}K=U.server?F.Lang.trim(U.server):null;O=U.username&&K?U.username+"@"+K:null;if(O){I="data-mboxid"+L;N=F.Lang.trim(U.accountName)||U.address;P[I]={id:I,color:T||G[L%R],name:U.address,pretty_name:N,check_mbox:B(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:N}),server_addr:O};if(T){P[I].user_color=T;}++L;}}if(L===0){P=null;}return P;}function E(){var G,L,P,M,O,J,Q=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,I={},N=D(),H=(A.get("aliases")||{}).alias||[],K=(A.get("disposableAddresses")||{}).deaName||[];if(strings.str_cfg_tog_msgListColorIndic||C.showExtAccountsParam>1){if(N){for(G in N){P=N[G];M=P.server_addr;J=Q?P.user_color:P.color;if(M&&J){I[M]=P.color;}}}if(Q){H=H.concat(K);L=H.length;for(G=0;G<L;++G){P=H[G];O=P.colorIndicator?P.colorIndicator-0:0;if(O>0){I[P.address]=C.colorIndicators[O];}}}}return I;}F.namespace("mail.ui");F.mail.ui.Accounts={buildExtAccountList:D,buildAccountList:E};},"1.0.0",{requires:["common-utils","common-persist-user-data"]});

YUI.add("mail-ui-foldersview-base",function(B){var J=B.Node.one,N=B.Node.all,P=NeoConfig,O=B.common.Utils,I=O.rocketstats.stat,K=O.substitute,E=strings.str_nav_left_checking_mail,L=strings.str_nav_inbox,M=P.mailboxes,D="knownAddress|externalAccountsChange",A=B.common.persist.UserData,G="mail-ui-foldersview-bind",H={},F=O.log;B.Node.DOM_EVENTS.beforedeactivate=1;var C=function(){var AE="#storm-listnav",Y="#custom-folders",t="#smart-folders",e="#nav-smart-folders",T="#storm-listnav",z="a[role=option]",c=AE+" "+z+", "+Y+" "+z,k='a[tabindex="0"]',U=this,o="selected",V="has-unread",d="hasnomsg",R="hasmultimsg",q={"in":"Inbox",chats:"%40C%40Chats",drafts:"Draft",sent:"Sent",folder:"%40B%40Bulk",spam:"%40B%40Bulk",trash:"Trash"},X={Inbox:"str_tabs_inbox",Draft:"str_tabs_drafts",Sent:"str_tabs_sent","%40B%40Bulk":"str_tabs_spam","%40C%40Chats":"str_tabs_conversations",Trash:"str_tabs_trash"},AB=(Neo&&Neo.fid)||"",AA,u=false,y=B.mail.Controller.Folders,Q=B.Lang,v=null,W,AD=null;function Z(AG){if(u){return J('li[data-vfid="'+AG+'"]');}return J("li[data-fid='"+AG+"']");}function i(){var AG={fid:{value:{fid:"",name:"",checkMail:false,mailboxId:"",extraParams:null,smartFolder:false,forceRefresh:false},setter:function(AI){var AL,AH,AJ=AI.fid,AR=AI.checkMail,AM=AI.mailboxId,AT=AI.forceRefresh,AO,AK,AP=false,AN=AI.bb,AQ,AS=false;u=AI.smartFolder;if((AJ===AB&&AJ===q["in"]&&!u)||AR){if(AD===null){S(AM);AO=AM;if(AM&&AM!==""&&AM!=="Inbox"){AO=M&&M[AM]?M[AM].name:"";}AQ=B.common.persist.UserData.get("externalAccounts")||{};if(AQ&&AQ.extAccount&&AO===""){B.fire("MailLog",{m:"User forced a checkmail"});AD=y.refresh({forced:true},{success:function(){p();B.later(0,null,function(){y.refresh({accountId:AO},{},"checkmail");});},failure:p,timeout:30000,suppressCodes:NeoConfig.farm==="f9323"?[]:["*"]},"checkmail");}else{B.fire("MailLog",{m:"User forced a checkmail"});AD=y.refresh({accountId:AO,forced:true},{success:p,failure:p,timeout:30000,suppressCodes:NeoConfig.farm==="f9323"?[]:["*"]},"checkmail");}I("folders","checkmailmanual_"+(AQ?"ext":"noext"));}}if(AJ!==AB||u||AT){AP=u&&!AT;if(AP){u=false;}AL=Z(AB)||Z("Inbox");if(AP){u=true;}AS=u&&AT;if(AS){u=false;}AH=Z(AJ);if(!NeoConfig.backButtonFull&&NeoConfig.backButton&&(typeof window.history.pushState==="function")){if(!window.history.state||window.history.state.id!==1){if(AJ!=="Inbox"){window.history.pushState({id:"1"},document.title,window.location.pathname+window.location.search);}}if(AJ==="Inbox"){if(window.history.state){window.history.go(-1);}}else{window.history.replaceState({id:"1"},document.title,"#mail");}}if(AL){AL.removeClass(o);AL.one("a").setAttrs({tabIndex:-1,"aria-selected":false});}if(AH){if((AK=AH.ancestor("ul").one(k))){if(AK){AK.set("tabIndex",-1);}}AH.addClass(o);AH.one("a").setAttrs({tabIndex:0,"aria-selected":true});if(!AI.isTrashBtn){AH.one("a").focus();}}a();AB=AJ;return AI;}},lazyAdd:true},isCheckingMail:{value:false},active:{value:false}};U.addAttrs(AG);}function w(AH,AG){return function(AI){if(!AG){AI.preventDefault();}B.use(G,function(AK){try{AK.mail.FoldersView[AH](AI);}catch(AJ){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-foldersview-foldersview:1",AJ,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-foldersview-foldersview:1");AK.common.Utils.rocketstats.stormStat("yui:error","cb");AK.common.Utils.rocketstats.stormStat("yui:error:cb","leftrail:"+AH);AK.use("common-utils-error",function(AL){AL.common.Utils.error.report("Exception when trying to call '"+AH+"':"+AJ.toString(),"YUI_CB_EXCEPTION",1,1,1,AJ);});}});};}function AC(){var AT=J("body"),Ae=J("#shellnavigation"),AL=J("#main"),AV=J("#Folders .btn-folders"),AN,AG=J(".listnav-label .folder-new"),AX=J("li#Calendar"),AM=J("li#unread"),AI=J("li#Contacts"),AS=J("li#Notepad"),AJ=J("#messenger"),Ad=B.mail.persist.MetaData,AW=J(AE),AR=J(T),AZ=AR.all(">li"),AU=J(Y),AP=N(".listnav-subfolder .listnav-back"),Ac=J(t),AQ=J(e),AY=J(".listnav-outter"),Aa=function(){B.fire("navigation:toggle");AL.one("#Folders a").set("title",strings.str_nav_left_folders_collapsed_attr);B.fire("ToolTips:hideTooltips");},AO=NeoConfig.nav&&J("#nav");Ae.delegate("keydown",w("upDownNavigation",true),c);if(AG){AG.on("click",w("newFolderClick"));AG.on("keydown",function(Af){if(Af.keyCode===13){w("newFolderClick")(Af);}if(Af.keyCode===37){Ae.one("#custom-folders-btn").focus();}if(Af.keyCode===38){Af.halt();}if(Af.keyCode===40){Ae.one("#custom-folders li a").focus();Af.halt();}});}function Ab(){if(AY.get("scrollTop")!==0){Ae.addClass("scrolled");}else{Ae.removeClass("scrolled");}}function AH(Ag,Af){switch(Ag){case"mail":B.fire("nav:inbox");break;case"contacts":B.fire("nav:contacts");break;case"calendar":B.fire("nav:calendar");break;case"notepad":B.fire("nav:notepad");break;case"messenger":B.fire("nav:messenger");break;case"boss":B.fire("nav:boss",Af);break;}}if(AO){AO.delegate("click",function(Ag){var Af=B.mail.Tabs,Ah=Ag.currentTarget.getAttribute("data-nav");AH(Ah,Ag);Ag.halt();},".nav-item");AO.delegate("keydown",function(Ak){var Aj=Ak.target,Ai=Aj.ancestor(".nav-item"),Ah,Af,Ag;switch(Ak.keyCode){case 13:AH(Ai.getAttribute("data-nav"),Ak);Ak.halt();return;case 37:Ah=Ai.previous();if(!Ah){Ag=Ai.get("parentNode").all(".nav-item");Ah=Ag.item(Ag.size()-1);}break;case 39:Ah=Ai.next()||AO.one(".nav-item");break;}if(Ah){Aj.set("tabIndex",-1);Af=Ah.one(".nav-lnk");Af.set("tabIndex",0);Af.focus();Ak.halt();}},".nav-lnk");AY.on("scroll",Ab);B.on("windowresize",Ab);}Ae.delegate("mousedown",function(Ag){var Af;if(!this.hasClass("selected")&&Ag.button===1&&!Ag.ctrlKey){if((B.UA.ie&&B.UA.ie<=8)&&document.activeElement){if((Af=J(document.activeElement))!==null){Af.once("beforedeactivate",function(Ah){Ah.preventDefault();});}}else{Ag.preventDefault();}}},"h2 span[role=button], h2 .btn input");AW.delegate("contextmenu",w("contextClick"),"li.sysfolder");AR.delegate("click",w("checkMailClick"),".check-mail");AR.delegate("keydown",w("sysFoldersKeyDown",true),"li.sysfolder");
AU.delegate("keydown",w("usrFoldersKeyDown",true),"li");AR.delegate("click",w("emptyFolderOnClick"),"li.sysfolder a span.btn");AR.delegate("click",function(Ai){if(!Ai.currentTarget.hasClass("btn-mobilizer")){Ai.preventDefault();}Ai.smartFolder=u;var Af=Ai.currentTarget.ancestor("li",true),Ao=Af.ancestor(".open"),Ag,Ap,Ak,Ah=Ai.target.getAttribute("data-action");if(Ah==="folder-new"){g({dataAction:"folder-new"},null);B.fire("navigation:switch",{"type":"Folders"});return;}Ai.currentTarget=Af;if(Af.hasClass("nav-separator")){return;}else{if(Af.hasClass("nav-toggle")){Aa();return;}else{if(Af.get("id")==="uservoice_feedback"){if(UserVoice&&UserVoice.showPopupWidget){UserVoice.showPopupWidget();}return;}else{if(Af.get("id")==="mobilizer"){I("leftNav","mobilizer");return;}}}}if(Af.hasClass("sysfolder")){B.fire("navigation:switch",{"type":"none"});if(Af.getAttribute("fdepth")){w("usrFoldersClick")(Ai);}else{w("sysFoldersClick")(Ai);}}Ag=Af;if(!NeoConfig.nav){Ap=Af.get("id")===AT.getAttribute("data-open")?true:false;}else{Ap=Af.hasClass("nav-open");}if(Af.get("id")==="searchNav"){var An=B.mail.Tabs.tabs;var Aj=B.mail.ui.searchTab;B.mail.Tabs.switchToTab(Aj);B.fire("navigation:switch",{"type":"searchNav"});AZ.removeClass("selected");Af.addClass("selected");if(!Aj){B.mail.Tabs.switchToTab(An[0]);}}if(Af.hasClass("openable")){if(AO){Af.toggleClass("nav-open");}if(!Ap){Ak=Af.get("id");B.fire("navigation:switch",{"type":Ak});if(Af.hasClass("folders")){B.fire("mt:click",{"action":"custom_expand"});Af.one("a").set("title",strings.str_nav_left_folders_expanded_attr);}if(Ak==="multitask"){B.fire("mt:click",{action:"recentTabs_expand"});B.common.Utils.rocketstats.bucketStat("leftNav","recent_enter");}}else{var Am=B.mail.Tabs.getActiveTab();var Al=Am.label;Ak=Af.get("id");if(Am===B.mail.ui.searchTab&&!B.one(".search.no-result")){B.fire("navigation:switch",{"type":"searchNav"});}else{if(Al==="Calendar"||Al==="Contacts"||Al==="Notepad"){B.fire("navigation:switch",{"type":Al.toLowerCase()});}else{if(NeoConfig.nav!==""){B.fire("navigation:switch",{"type":Ak});}else{B.fire("navigation:switch",{"type":"none"});}}}if(Af.hasClass("folders")){B.fire("mt:click",{"action":"custom_collapse"});Af.one("a").set("title",strings.str_nav_left_folders_collapsed_attr);}}Ag=null;}if(Ag){AZ.removeClass("selected");Af.addClass("selected");if(Ao){Ao.addClass("selected");}}},"> li > a");B.use("event-mouseenter",function(Af){AR.delegate("hover",function(Ai){var Ah=Ai.currentTarget.ancestor("li.openable",true);var Ag=AL.hasClass("dragging-message");if(Ah&&Ag){Af.fire("navigation:switch",{"type":Ah.get("id")});}},function(Ai){var Ah=Ai.currentTarget.ancestor("li.openable",true);var Ag=AL.hasClass("dragging-message");if(Ah&&Ag){Af.fire("navigation:switch",{"type":"none"});}},"> li.openable");});AU.delegate("click",function(Ag){var Af=Ag.currentTarget.ancestor("li.open");if(Af){Af.addClass("selected");}},"> li > a");B.on(["openCalendar","openContacts","openNotepad"],function(Af){if(Af&&!Af.mrd){B.fire("navigation:switch",{"type":Af});}});B.on("Nav:ComposeClosed",function(){B.one("#Compose").removeClass("selected");});B.on(["editMessage","newMessage"],function(){AZ.removeClass("selected");B.one("#Compose").addClass("selected");});if(AS){AS.on("click",function(Af){B.fire("mt:click",{"action":"notepad_leftnav"});if(NeoConfig.enablePcNotepad){B.fire("openNotepad","notepad");Af.preventDefault();}else{window.open("http://notepad.yahoo.com","_blank");}});}if(AX){AX.on("click",function(Af){B.fire("mt:click",{"action":"calendar_leftnav"});if(NeoConfig.enablePcCalendar){B.fire("openCalendar","calendar");Af.preventDefault();}else{window.open(NeoConfig.launch_protocol+"calendar.yahoo.com","_blank");}});}if(AM){AM.on("click",function(Af){B.fire("fireSearch","is:unread");Af.preventDefault();});}if(AI){AI.on("click",function(Af){B.fire("mt:click",{"action":"contacts_leftnav"});if(NeoConfig.enablePcContacts){B.fire("openContacts","contacts");Af.preventDefault();}else{window.open(NeoConfig.launch_protocol+"address.yahoo.com","_blank");}});}if(AJ){AJ.on("click",function(){B.fire("mt:click",{"action":"msngr_nav"});});}if(AU){AN=Ad.after("neoChanged",function(){var Af=true,Ag=J(Y+"-nav");if(Ad.get("neo.pref.folderState")){Ag.replaceClass("collapsed","expanded");}else{Ag.replaceClass("expanded","collapsed");Af=false;}Ag.one(".label").set("aria-expanded",Af);Ad.detach(AN);});var AK=B.one(".listnav-folder");AU.delegate("click",function(Ak){var Am=Ak.target;if(Am.hasClass("listnav-folder-open")){var Aj=Ak.currentTarget.next(),Af=Ak.currentTarget.ancestor(".listnav-folder"),Ah=Af.get("offsetWidth"),Al=parseInt(AK.getComputedStyle(NeoConfig.isRTL?"left":"right"),10),Ai='<span class="icon arrow-left"></span>',Ag;if(Aj&&Aj.hasClass("listnav-folder")){Ag=Ak.currentTarget.one("a").getHTML();Aj.one(".listnav-back").setHTML(Ag+Ai);Af.all(".listnav-subfolder").addClass("hidden");Aj.removeClass("hidden");AK.setStyle((NeoConfig.isRTL?"left":"right"),Al+Ah+"px");Aj.ancestor(".listnav-container").set("scrollTop","0");}}else{if(Am.hasClass("listnav-folder-toggle")){if(Am.hasClass("icon-chevron-right")){Am.replaceClass("icon-chevron-right","icon-chevron-down");}else{Am.replaceClass("icon-chevron-down","icon-chevron-right");}Ak.currentTarget.next().toggleClass("hidden");}else{Ak.fid=AB;Ak.smartFolder=u;w("usrFoldersClick")(Ak);}}Ak.preventDefault();},"li");AP.on("click",function(Ah){var Af=Ah.currentTarget.ancestor(".listnav-folder"),Ag=Af.get("offsetWidth"),Ai=parseInt(AK.getComputedStyle("right"),10);AK.setStyle("right",Ai-Ag+"px");});AU.on("contextmenu",w("usrFoldersContextClick"));if(AV&&NeoConfig.nav){AV.on("click",w("updateFolderPref",true));}}if(Ac){Ac.all("a").each(function(Af){Af.set("href","#");});Ac.delegate("click",function(Ag){Ag.preventDefault();var Af=Ag.currentTarget;if(Af.hasClass("emails-contacts")){B.fire("openRUEFCInbox");}u=true;},"li");Ac.on("contextmenu",function(){});}if(AQ){AQ.on("click",function(Ah){var Ag=Ah.currentTarget,Af;if(Ag&&(Af=Ag.get("parentNode"))!==null){if(Af.hasClass("expanded")){Af.removeClass("expanded");
Af.addClass("collapsed");}else{if(Af.hasClass("collapsed")){Af.removeClass("collapsed");Af.addClass("expanded");}}}});}B.common.persist.UserData.after(D,function(){if(strings.str_cfg_tog_renderExternalAccounts||P.showExtAccountsParam){B.mail.FoldersView.renderMailboxes();}});AR.all("li.sysfolder a").each(function(Af){Af.set("href","#");});B.on("key",function(Af){N(".check-mail").each(function(){if(this.contains(Af.currentTarget)||this.compareTo(Af.currentTarget)){Af.stopPropagation();}});},Ae,"",U);B.on("foldersview:resetFocus",function(Ag){var Af=Z(Ag);if((Af=Af.one("a"))!==null){Af.focus();}});}function b(){var AG=N("li.inbox-sub");if(AG){AG.remove();}M=B.mail.ui.Accounts.buildExtAccountList();if(M){Neo.drawMailboxes(M);}}function g(AJ,AI){var AG=P.grayoutEnabled&&B.mail.ui.ContextButton,AH;if(AG&&AI){AH=Z(AI);if(!AG.folderActionEnabled(AJ.dataAction,AH)){return;}}B.use("mail-ui-folderevents",function(AK){AK.mail.ui.FolderEvents.handle(AJ,(AI||AB));});}function a(){var AH=J(T),AI=J(Y),AG;if(!AH.one(k)&&(AG=AH.one(z))){AG.set("tabIndex",0);}if(!AI.one(k)&&(AG=AI.one(z))){AG.set("tabIndex",0);}}function x(){var AH=J(AE),AI=J(Y),AJ=J("doc").get("activeElement"),AG=-1;if(AH.contains(AJ)||AI.contains(AJ)){AG=B.all(c).indexOf(AJ);}return AG;}function j(AJ){var AI=B.all(c),AH=AI.item(AJ),AG;if(!AH){AG=AJ+1;if(AG>AI.size()){AG=AJ-1;}AH=AI.item(AG);}if(AH){AH.set("tabIndex",0);AH.focus();}}function r(){var AG=J(Y+"-btn");AC();a();if(AG){AG.set("aria-expanded",J(Y+"-nav").hasClass("expanded"));}}function f(AJ){var AI="Inbox",AH=strings[X[AI]],AG;if(NeoConfig.infiniteScroll){AG=B.mail.ui.Workspace.getFolderContent().widget.msgList;AG._listview.scrollToTop();if(B.one(".check-mail-btn")){AG.fire("infiniteScroll:checkMail");return;}}B.fire("checkmail:before");U.set("isCheckingMail",true);if(u){U.set("fid",{fid:AI,name:AH,checkMail:true,mailboxId:AJ,smartFolder:u,forceRefresh:true});}else{U.set("fid",{fid:AI,name:AH,checkMail:true,mailboxId:AJ});}}function S(AJ){var AI,AG=J(AE);var AH=J(T);if(!AJ||AJ===""||!M){AG.all("#Inbox i + span, li.inbox-sub i + span").setContent(E);AG.all("li .check-mail").addClass("loading");AH.all("li.sysfolder .check-mail").addClass("loading");}else{if(M){AI=AG.one('li.inbox-sub i[data-mboxid="'+AJ+'"]');if(AI){AI.setContent(E);}AI=AG.one('li.inbox-sub input[data-mboxid="'+AJ+'"]');if(AI){AI.addClass("loading");}}}B.fire("checkmail:clicked");B.fire("MailLog",{m:"checkMail: "+AJ+" is "+E});if(!NeoConfig.backButtonFull&&NeoConfig.backButton&&(typeof window.history.pushState==="function")){if(window.history.state){window.history.go(-1);}}}function p(){var AK,AJ,AI,AG=J(AE);var AH=J(T);AG.one("#Inbox i + span").setContent(L);AG.all("li .check-mail").removeClass("loading");AH.all("li .check-mail").removeClass("loading");B.fire("MailLog",{m:"checkMail: Done - Inbox string is reset"});if(M){for(AK in M){AJ=M[AK];AI=AG.one('li.inbox-sub i[data-mboxid="'+AK+'"]');B.fire("MailLog",{m:"checkMail: Done - "+AK+" string is reset"});if(AI){AI.setContent(AJ.pretty_name||AJ.server_addr);}}}B.fire("checkmail:succeeded");U.set("isCheckingMail",false);AD=null;}function m(AI){var AJ=AI.folderInfo.fid,AG=AJ==="Draft",AU=AJ==="%40C%40Chats",AQ=AJ==="Inbox",AR=AQ&&B.one('#Folders [data-fid="Inbox"]'),AS=AR&&AR.one(".unread-count"),AP=(AG||AU)?AI.total:AI.unread,AH="{{str_nav_inbox_unread_attr}}",AT="",AN={},AM,AK,AL=P.strings,AO;if(AG){AH=(AP===1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";}else{if(AU){AH=(AP===1)?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}";}}AM=Z(AJ);if(AM){if(AI.isSystem===false||(!AG&&AJ!=="Sent")||AR){AN.email_str=(AP===1)?"{{str_email_cnt_one}}":"{{str_email_cnt_multi}}";AN.total_cnt=AI.total;AT=AI.folderInfo.name+" - "+K("{{str_nav_folder_email_cnt}}",AN,null,null,AL);AO=AR||AM;if(AI.unread>0){AO.addClass(V);AN.unread_cnt=AI.unread;AT+=" ("+K("{{str_nav_folder_unread_cnt}}",AN,null,null,AL)+")";}else{AO.removeClass(V);}}}AK=AM&&AM.one(".unread-count");if(AK&&Q.isNumber(AP)){if(AP<0){AP=0;}if(AP){F({m:"Updating folder count UI for the folder",folder:AM.getAttribute("data-fid"),count:AP});AK.setHTML("("+h(AP)+")");AK.removeClass("invisible");if(AS){AS.setHTML("("+h(AP)+")");AS.removeClass("invisible");}}else{AK.addClass("invisible");AK.setHTML("");if(AS){AS.addClass("invisible");AS.setHTML("");}}AN.inbox_unread_cnt=AP;if(AU){AN.conv_cnt=AP;}B.fire("ToolTips:hideTooltips");if(AI.isSystem){AK.set("title",K(AH,AN,null,null,AL));}else{AM.one("i").set("title",AT);AM.one("span").set("title",AT);}if(AR){AR.one("i").set("title",AT);AR.one("span").set("title",AT);}}}function n(AK){var AG=AK.folderInfo.fid,AJ=Z(AG),AN;AJ=AJ&&AJ.one("a");if(AJ){var AI=AK.total,AH=AI===1?"str_email_cnt_one":"str_email_cnt_multi",AL="{{str_nav_folder_email_cnt}}",AM={total_cnt:AI,email_str:strings[AH]};switch(AG){case"Draft":AL=(AI===1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";AM.inbox_unread_cnt=AI;break;case"%40C%40Chats":AL=(AI===1)?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}";AM.conv_cnt=AI;break;}if(u){AL="{{str_nav_email_from_ctcts_attr}}";AM.email_ctcts_cnt=AI;}AN=(!AK.isSystem?unescape(AG)+" - ":"")+K(AL,AM,null,null,strings);if(AK.isSystem){AJ.set("title",AN);AJ=AJ&&AJ.one("i");if(AJ){AJ.set("title",AK.folderInfo.name+" "+AN);}}}}function AF(AH){var AG=x();Neo.drawFolders({folders:{folder:AH}});s();if(AG>=0){j(AG);}else{a();}if(AA){U.set("fid",{fid:AA});}AA=null;}function s(){var AH=(P.userDataObj&&P.userDataObj.otherYahooMboxes&&P.userDataObj.otherYahooMboxes.otherYahooMboxesTotal)?"userSendPref.defaultID":"userSendPref.loggedInAlias";var AG=A.get(AH);B.config.doc.title=(W>0)?K("{{str_page_title_unread}}",{unread_cnt:W,title:AG},null,null,strings):K("{{str_page_title}}",{title:AG},null,null,strings);v=null;}function h(AG){return AG>9999?"9999+":AG;}function l(AL){var AO=0,AJ,AK,AM=B.one("li#unread"),AP=0,AI=B.one("#folder-count"),AH=B.one("#Folders"),AN=0,AG=0;for(AK=0;AK<AL.length;AK++){if(AL[AK].folderInfo.fid==="Draft"){continue;}if(AL[AK].folderInfo.fid==="%40C%40Chats"){continue;
}if(AL[AK].folderInfo.fid==="%40B%40Bulk"){continue;}if(AL[AK].folderInfo.fid==="Trash"){continue;}if(AL[AK].folderInfo.fid==="Sent"){continue;}H[AL[AK].folderInfo.fid]=AL[AK].unread;}for(AK in H){AO+=H[AK];if(AK!=="Sync%20Trap"){if(AK==="Inbox"){AG=H[AK];}else{AP+=H[AK];}if(AK.indexOf("Inbox%5c")===0){AN=1;}}}if(AN){AP+=AG;}if(AP>0){AH.addClass("has-unread");AI.setHTML("("+h(AP)+")");AI.removeClass("invisible");}else{AH.removeClass("has-unread");AI.addClass("invisible");AI.setHTML("");}AI.set("title",K("{{str_nav_folder_unread_cnt}}",{unread_cnt:AP},null,null,P.strings));if(AM){AJ=AM.one(".unread-count");if(AO>0){AM.addClass("has-unread");AJ.setHTML("("+h(AO)+")");}else{AM.removeClass("has-unread");AJ.setHTML("");}AM.one("a").set("title",K("{{str_nav_folder_unread_cnt}}",{"unread_cnt":AO},null,null,P.strings));}}B.on("ds:folder:change",function(AO,AL,AP,AM){var AG,AK,AI,AJ,AH,AN;if(AM==="launch"){for(AK in AL){AG=AL[AK];AI=AG.folderInfo.fid;if(AI.indexOf("Sync%20Trap")===0){continue;}if(AI==="Inbox"){W=AG.unread;}if(P.grayoutEnabled&&!AG.total){AJ=Z(AI);AJ.replaceClass(R,d);}}s();l(AL);return;}if(!AO){AF(AL,AM==="ruefc");}else{for(AK in AP){AG=AL[AK];AI=AG.folderInfo.fid;if(AM==="ruefc"){AG.folderInfo.name=strings.str_nav_email_from_ctcts;AH=B.mail.ui.common.StringUtils.getSystemFolderName(AI,AG.folderInfo.name,true);AN=B.mail.ui.Workspace.getFolderContent();if(NeoConfig.bidi){AH=AN.widget.msgList.getFolderNameBidi(AH,AG.folderInfo.dir,AG.total);}else{AH+="  <i>("+AG.total+")</i>";}AN.set("title",AH);}if(Q.isNumber(AP[AK].unread)||AI==="Draft"){m(AG,AM==="ruefc");l(AL);if(AI==="Inbox"){W+=AG.unread-AO[AK].unread;s();}}if(AG.total!==AO[AK].total){n(AG,AM==="ruefc");}if(P.grayoutEnabled){AJ=Z(AI,AM==="ruefc");if(AJ){if(AG.total>0){AJ.replaceClass(d,R);}else{AJ.replaceClass(R,d);}}}}}});B.on("ds:folder:add",function(AG,AH){if(AH!=="move"&&AH!=="qf_folder"){AA=AG.folderInfo.fid;}});B.on("ds:folder:remove",function(AG){if(AG.folderInfo.fid===U.get("fid").fid){AA="Inbox";}});B.on("ds:folder:rename",function(AH,AG){if(AH.folderInfo.fid===U.get("fid").fid){AA=AG.folderInfo.fid;}});B.on("checkmail:pressed",function(AG){var AH=AG?"":"Inbox";B.fire("MailLog",{m:"User forced a checkmail",info:AH});f(AH);});B.on("newfolder:pressed",function(){g({dataAction:"folder-new"},null);});B.on("#custom-folders.li:keydown",function(AK){var AJ=AK.currentTarget.getAttribute("data-fid"),AI=AK.keyCode===69&&AJ&&P.emptyFolders?"folder-empty":"folder-rename",AH=B.UA.os,AG=(AH==="windows"||AH==="win");if((AG&&AK.shiftKey&&AK.keyCode===121)||(!AG&&AK.ctrlKey&&AK.shiftKey&&AK.altKey&&AK.keyCode===77)){AK.preventDefault();O.simulateContextMenu(AK.target);}else{g({dataAction:AI,target:AK.currentTarget},AJ);}});B.on("#system-folders.li:keydown",function(AK){var AL={"%40B%40Bulk":"folder-empty-spam",Trash:"folder-empty-trash"},AJ=AK.currentTarget.getAttribute("data-fid"),AI,AH=B.UA.os,AG=(AH==="windows"||AH==="win");if(AK.keyCode===69&&AJ&&!AK.ctrlKey&&!AK.shiftKey&&!AK.altKey&&!AK.metaKey){AI=AL[AJ]||(P.emptyFolders&&"folder-empty");if(AI){g({dataAction:AI,restoreFocus:1,target:AK.currentTarget},AJ);}}else{if((AG&&AK.shiftKey&&AK.keyCode===121)||(!AG&&AK.ctrlKey&&AK.shiftKey&&AK.altKey&&AK.keyCode===77)){AK.preventDefault();O.simulateContextMenu(AK.target);}}});B.after("tabChange",function(){if(null===v){v=B.later(1000,null,s,null,false);}});B.augment(U,B.Attribute);i();U.after("isCheckingMailChange",function(AG){B.fire("MailLog",{m:"checkmail is "+AG.newVal?"in progress":"complete"});});B.mix(U,{render:r,renderMailboxes:b,checkMail:f,handleFolderActions:g,updateTitle:s});};B.namespace("mail");B.mail.FoldersView=new C();},"1.0.0",{requires:["common-utils","rocket-stats","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts","common-ui-tabs-base"]});

YUI.add("mail-persist-user-preferences",function(D){D.namespace("mail.persist");var B,C=["userFeaturePrefs","userUIPrefs","userSpamPrefs","userSendPrefs","switches","livewordsPrefs","popForwardPrefs"];function A(E){this.attributeConfig={userFeaturePrefs:{},userUIPrefs:{value:{displayPersonalFolders:NeoConfig.expandPF,expandExtAccounts:NeoConfig.expandEA,msgListDensity:NeoConfig.msgListDensity}},userSpamPrefs:{},userSendPrefs:{},switches:{},livewordsPrefs:{},popForwardPrefs:{},loaded:{value:false}};this.addAttrs(this.attributeConfig,E);if(E){this.set("loaded",true);}else{this.load();}}A.prototype.load=function(){var E=this;D.mail.net.Transport.request("GetUserPreferences",{},{success:function(F){var H=F.body.result.userPrefs;for(var G in H){E.set(G,H[G]);}E.set("loaded",true);},failure:function(){}},true);};A.prototype.save=function(){var G={},F,E;for(E=0;E<C.length;E++){F=C[E];G[F]=this.get(F);}this.saveRequest(G);};A.prototype.saveRequest=function(E){D.mail.net.Transport.request("SetUserPreferences",{setprefs:E},{success:function(){},failure:function(){}},true);};A.prototype.afterSettingsChange=function(){if(this.get("loaded")){this.save();}};D.augment(A,D.Attribute);D.mail.persist.UserPreferences=new A();for(B=0;B<C.length;B++){D.mail.persist.UserPreferences.after(C[B]+"Change",D.mail.persist.UserPreferences.afterSettingsChange);}},"1.0.0",{requires:["attribute","mail-net-transport","json"]});

YUI.add("mail-persist-meta-data",function(H){var F,G,C,A;H.namespace("mail.persist");function B(){this.addAttr("_save",{value:true});this.addAttr("_timer",{});}B.prototype.wait=function(){this.set("_save",false);};B.prototype.resume=function(){this.set("_save",true);};B.prototype.parse=function(K,J){var I;J+=K.name;if(K.meta&&K.meta.length>0){this._set(J,{});J+=".";for(I=0;I<K.meta.length;I++){if(K.meta[I].meta){this.parse(K.meta[I].meta,J);}this.parse(K.meta[I],J);}}else{if(K.value){this._set(J,K.value);}}};B.prototype.make_cascade=function(K,I){var J;for(J in K){if(typeof K[J]==="object"){I.push({name:J,meta:[]});this.make_cascade(K[J],I[I.length-1].meta);}else{I.push({name:J,value:K[J]});}}};B.prototype.cascade_dump=function(){var M=[],I,K,L,J=this.getAttrs();for(I in J){if(I.match(/^_/)){continue;}K=J[I];L={name:I};if(typeof K==="object"){L.meta=[];this.make_cascade(K,L.meta);}else{L.value=K;}M.push(L);}return{meta:M};};B.prototype.load=function(){var I=this;H.mail.net.Transport.request("GetMetaData",{},{success:function(K){var J=K.body.result.meta,L,M;for(L=0;L<J.length;L++){M=J[L];if(!I.attrAdded(M.name)){I.addAttr(M.name);}I.wait();I.parse(M,"");I.resume();}H.fire("metaDataLoadComplete");},failure:function(){}},true);};B.prototype.update=function(){};B.prototype.save=function(I){this.set("_save",true);H.mail.net.Transport.request("SetMetaData",this.cascade_dump(),{success:function(J){if(I){I(J);}},failure:function(J){if(I){I(J);}}},true);};B.prototype.set=function(K,N){var M,L,J,I=H.Attribute.prototype.set;if(K.indexOf(".")>0){M=K.split(".");for(J=0;J<M.length;J++){if(L){L+="."+M[J];}else{L=M[J];}if(!this.get(L)){if(L===K){I.apply(this,[K,N]);}else{I.apply(this,[L,{}]);}}else{if(L===K){I.apply(this,[K,N]);}}}}else{I.apply(this,[K,N]);}};H.augment(B,H.Attribute);F=new B();if(typeof NeoConfig.metaDataObj!=="undefined"&&NeoConfig.metaDataObj){A=NeoConfig.metaDataObj;for(C=0;C<A.length;C++){G=A[C];F.addAttr(G.name,{});F.parse(G,"");}}else{F.load();}if(!F.attrAdded("neo")){F.addAttr("neo",{pref:{}});}if(!F.get("neo.pref")){F.set("neo",{pref:{}});}function E(){if(this.get("_save")){if(this.get("_timer")){this.get("_timer").cancel();}this.set("_timer",H.later(5000,this,"save"));}}function D(){if(this.get("_save")){this.save();}}F.after("neoChange",E,F);F.after("cgChange",D,F);H.mail.persist.MetaData=F;},"1.0.0",{requires:["attribute","mail-net-transport"]});

YUI.add("mail-track",function(B){B.namespace("mail.track");var C={boss:["a","978500493",false,"boss"],welcome_gx:["a","978500241",false,"DEFAULT","welcome_galaxy"],launch_welcome:["a","978500273",false,"DEFAULT","welcome_galaxy"],launch_inbox:["a","978500271",false,"messagelist","folder_inbox"],launch_compose:["a","978500270",false,"compose","compose_new"],launch_message:["a","978500272",false,"messagelist","msgread_tabview"],launch_inbox_empty:["a","978500271",false,"emptyfld","folder_inbox"],launch_welcome_ssl:["a","978500285",false,"DEFAULT","welcome_galaxy"],launch_inbox_ssl:["a","978500286",false,"messagelist","folder_inbox"],launch_compose_ssl:["a","978500288",false,"compose","compose_new"],launch_message_ssl:["a","978500287",false,"messagelist","msgread_tabview"],launch_inbox_empty_ssl:["a","978500286",false,"emptyfld","folder_inbox"],launch_welcome_low:["a","978500293",false,"DEFAULT","welcome_galaxy"],launch_inbox_low:["a","978500294",false,"messagelist","folder_inbox"],launch_compose_low:["a","978500296",false,"compose","compose_new"],launch_message_low:["a","978500295",false,"messagelist","msgread_tabview"],launch_inbox_low_empty:["a","978500294",false,"emptyfld","folder_inbox"],launch_welcome_optin:["a","978500360",false,"DEFAULT","welcome_galaxy"],launch_inbox_optin:["a","978500361",false,"messagelist","folder_inbox"],launch_inbox_optin_empty:["a","978500361",false,"emptyfld","folder_inbox"],action_menu:["b","978500002",true],inbox_menu_print:["b","978500004",true],lftpane_add_folder:["b","978500006",true],attch_dwd_av_display:["b","978500008",true],attch_dwd_av_click:["b","978500009",true],attch_upload_av_display:["b","978500010",true],attch_upload_av_click:["b","978500011",true],attach_upload_classic:["b","978500020",true],checkmail_all_click:["b","978500068",true],checkmail_auto:["b","978500069",true],compose_new:["a","978500077",false,"compose","compose_new"],compose_new_ssl:["a","978500422",false,"compose","compose_new"],compose_forward:["a","978500079",false,"compose","compose_fwd"],compose_reply_sender:["a","978500081",false,"compose","compose_reply"],compose_reply_all:["a","978500246",false,"compose","compose_reply_all"],compose_draft:["a","978500266",false,"compose","compose_draft"],dd_msg_to_folder:["b","978500084",true],dd_msg_to_trash:["b","978500085",true],empty_spam:["b","978500087",true],empty_trash:["b","978500088",true],empty_spam_ssl:["b","978500484",true],mark_spam_ssl:["b","978500486",true],sent_ssl:["a","978500414",false,"sent","send_confirm"],folderview_inbox_ssl:["a","978500434",false,"messagelist","folder_inbox"],folderview_inbox_empty_ssl:["a","978500434",false,"emptyfld","folder_inbox"],folderview_bulk:["a","978500091",false,"messagelist","folder_bulk"],folderview_bulk_ssl:["a","978500432",false,"messagelist","folder_bulk"],folderview_draft:["a","978500092",false,"messagelist","folder_draft"],folderview_draft_ssl:["a","978500433",false,"messagelist","folder_draft"],folderview_inbox:["a","978500093",false,"messagelist","folder_inbox"],folderview_sent:["a","978500095",false,"messagelist","folder_sent"],folderview_sent_ssl:["a","978500437",false,"messagelist","folder_sent"],folderview_trash:["a","978500096",false,"messagelist","folder_trash"],folderview_trash_ssl:["a","978500489",false,"messagelist","folder_trash"],folderview_custom:["a","978500267",false,"messagelist","folder_custom"],folderview_custom_ssl:["a","978500436",false,"messagelist","folder_custom"],folderview_inbox_frm_wel:["a","978500094",false,"messagelist","fwinbox_frm_welcome"],folderview_chat:["a","978500439",false,"messagelist","folder_chat"],folderview_chat_ssl:["a","978500438",false,"messagelist","folder_chat"],folderview_bulk_empty:["a","978500091",false,"emptyfld","folder_bulk"],folderview_bulk_empty_ssl:["a","978500432",false,"emptyfld","folder_bulk"],folderview_draft_empty:["a","978500092",false,"emptyfld","folder_draft"],folderview_draft_empty_ssl:["a","978500433",false,"emptyfld","folder_draft"],folderview_inbox_empty:["a","978500093",false,"emptyfld","folder_inbox"],folderview_sent_empty:["a","978500095",false,"emptyfld","folder_sent"],folderview_sent_empty_ssl:["a","978500437",false,"emptyfld","folder_sent"],folderview_trash_empty:["a","978500096",false,"emptyfld","folder_trash"],folderview_trash_empty_ssl:["a","978500489",false,"emptyfld","folder_trash"],folderview_custom_empty:["a","978500093",false,"emptyfld","folder_custom"],folderview_custom_empty_ssl:["a","978500434",false,"emptyfld","folder_custom"],folderview_chat_empty:["a","978500439",false,"emptyfld","folder_chat"],folderview_chat_empty_ssl:["a","978500438",false,"emptyfld","folder_chat"],help_dd_click:["b","978500098",true],help_dd_click_blog:["b","978500099",true],help_dd_click_help:["b","978500100",true],help_dd_click_newfeature:["b","978500101",true],help_dd_click_mobile:["b","978500105",true],help_dd_click_options:["b","978500197",true],msgheader_addtoAB:["b","978500155",true],msgread_reading_pane:["a","978500162",false,"messagelist","msgread_preview"],message_tabpane:["a","978500163",false,"messagelist","msgread_tabview"],msgread_reading_pane_ssl:["a","978500301",false,"messagelist","msgread_preview"],message_tabpane_ssl:["a","978500302",false,"messagelist","msgread_tabview"],msgread_reading_pane_low:["a","978500297",false,"messagelist","msgread_preview"],message_tabpane_low:["a","978500298",false,"messagelist","msgread_tabview"],previewpane_close:["a","978500334",false,"messagelist","msgread_pp_close"],previewpane_expand:["a","978500336",false,"messagelist","msgread_pp_open"],scroll_spam:["a","978500212",false,"messagelist_scroll"],scroll_contacts:["a","978500213",false,"messagelist_scroll"],scroll_draft:["a","978500214",false,"messagelist_scroll"],scroll_folder:["a","978500215",false,"messagelist_scroll"],scroll_inbox:["a","978500216",false,"messagelist_scroll"],scroll_msgpane:["a","978500217",false,"messagelist_scroll"],scroll_search:["a","978500218",false,"messagelist_scroll"],scroll_sent:["a","978500219",false,"messagelist_scroll"],scroll_trash:["a","978500220",false,"messagelist_scroll"],search_refinement:["a","978500222",false,"searchrefinement","search_refinements"],search_snipp_chkbox:["a","978500223",false,"search","search_snipp_chkbox"],search_results:["a","978500252",false,"search","search_results"],search_results_empty:["a","978500252",false,"emptysearch","search_results_empty"],empty_sponsored_results:["a","978500252",false,"emptyspresults","empty_sponsored_results"],sent:["a","978500224",false,"sent","send_confirm"],sent_api:["a","978500224",false,"messagelist","send_confirm"],mark_spam:["b","978500225",true],spell_chk:["b","978500226",true],switch_mail:["b","978500227",true],switch_mail_cancel:["b","978500228",true],contacts_tab:["a","978500278",false,"onlySKY","contacts"],update_theme:["a","978500230",false,"DEFAULT","themes"],calendar_zodiac:[null,"967178001",null,null,null]},A=function(D){if(D.match(/launch_inbox/)){D="launch_inbox_optin";
}else{if(D.match(/launch_/)){D="launch_welcome_optin";}}NeoConfig.neoOptIn=false;return D;};B.mail.track.getTrackingParam=function(F,H){var E={};if(F&&typeof C[F]!=="undefined"){if(NeoConfig.neoOptIn){F=A(F);}if(F.match(/launch_/)){E.launch=true;}if(NeoConfig.isSSL&&!F.match(/_ssl/)){var D=F+"_ssl";if(C[D]){F=F+"_ssl";}}E.type=C[F][0];E.name=C[F][3]||null;E.evt={};E.evt.sp=C[F][1];E.evt.npv=C[F][2];if(typeof C[F][4]!=="undefined"){var G=C[F][4];if(typeof H!=="undefined"&&B.Lang.trim(H)!==""&&typeof H!=="object"){E.evt.trace=G+":"+H;}else{E.evt.trace=G;}}}return E;};(function(){var D=function(F,G){var I,E,H;if(G){if(G.msgPane&&G.msgPane.message){B.use("mail-ui-messagepane-utils",function(J){I=G.msgPane.fid;E=J.mail.model.DataStore.Folders.get(I);H=J.mail.ui.common.StringUtils.getSystemFolderName(I,E.folderInfo.name);G.fire("darlaEvent",{action:F,value:{siteAttr:J.mail.ui.MessagePaneUtils.getAdSiteAttribsFromMesgObj(G.msgPane.message,I),foldername:H}});});}else{G.fire("darlaEvent",{action:F});}}else{B.fire("darlaEvent",{action:F});}B.fire("mbEvent",{action:F});};B.after("previewPane:expanded",function(E){D("previewpane_expand",E);});B.after("previewPane:collapsed",function(E){D("previewpane_close",E);});B.after("verticalPreview",function(E){D("previewpane_expand",E);});B.after("checkmail:clicked",function(){});})();},"1.0.0",{requires:["common-utils"]});

YUI.add("ult-tracker",function(B){B.namespace("mail.ult");var M=B.Lang,S=B.common.Utils,D=B.JSON,C=NeoConfig,K={clk:{},lnVw:{},pg:{},config:{}},A={},J=978500001,L=J,X,N=new Image(),T="/"+C.scriptBase+"/ult/ultLog?",P=function(b){var Y=B.mail.track.getTrackingParam,c=Y(b),d=J;if(C.low_bandwidth&&!S.isEmpty(Y(b+"_low"))){c=Y(b+"_low");}else{if(C.isSSL&&!S.isEmpty(Y(b+"_ssl"))){c=Y(b+"_ssl");}}if(c&&c.evt&&c.evt.sp){d=c.evt.sp;}else{}return(parseInt(d,10)+C.offsetSpaceId).toString();},G=function(b,Y){if((S.isEmpty(b)||!M.isObject(b))&&S.isEmpty(Y)){return;}if(Y.ck.spid){var c=P(Y.ck.spid);if(c!==J){W({sp:c});}}else{U();}a(false,false,b,Y);},V=function(c,b,Y){if((S.isEmpty(c)||!M.isObject(c))&&S.isEmpty(Y)){return;}if(b){X=b.t1;}if(Y&&Y.ln&&Y.ln.action){var d=P(Y.ln.action);if(d!==J){W({sp:d});}}a(c,b,false,Y);},Q=function(b,Y){if((S.isEmpty(b)||!M.isObject(b))&&S.isEmpty(Y)){return;}a(false,b,false,Y);},a=function(d,c,b,Y){if(d){B.mix(K.lnVw,d);}if(c){B.mix(K.pg,c);}if(b){B.mix(K.clk,b);}if(Y){K.config=Y;}if(NeoConfig.enableExpUltTracker&&(NeoConfig.expBucketId!=="0"||NeoConfig.isUltThrottled==="1")){H();}},I=function(Y){var c={},b={};switch(Y){case"CLICK":c=A.clk?A.clk:{};b=F();break;case"LINK":c=A.lnVw?A.lnVw:{};b=O();break;case"PAGE":c=A.pg?A.pg:{};b=E();break;case"CONFIG":c=A.config?A.config:{};break;}if(!S.isEmpty(b)){B.mix(c,b);}return c;},H=function(){var c="",Y={storm:1,sid:J,rand:Math.floor(Math.random()*1000000)},b={};R();b=I("CLICK");if(!S.isEmpty(b)){Y.ck=D.stringify(b);}b=I("PAGE");if(!S.isEmpty(b)){Y.pg=D.stringify(b);}b=I("LINK");if(!S.isEmpty(b)){Y.ln=D.stringify(b);}b=I("CONFIG");if(!S.isEmpty(b)){Y.config=D.stringify(b);}c=S.mergeQueryString(T,Y);N=new Image();N.src=c;},Z=function(){var b={ult:{}},Y={};R();Y=I("CLICK");if(!S.isEmpty(Y)){b.ult.ck=Y;}Y=I("LINK");if(!S.isEmpty(Y)){b.ult.ln=Y;}Y=I("PAGE");if(!S.isEmpty(Y)){b.ult.pg=Y;}Y=I("CONFIG");if(!S.isEmpty(Y)){b.ult.config=Y;}return b;},R=function(){A=K;K={clk:{},lnVw:{},pg:{},config:""};},F=function(){return{_S:L,_s:J};},O=function(){return{};},E=function(){var Y={};if(NeoConfig.enableExpUltTracker&&(NeoConfig.expBucketId!=="0"||NeoConfig.isUltThrottled==="1")){Y={intl:NeoConfig.intl,lang:NeoConfig.lang,mt:(NeoConfig.isMailPlus===1)?"plus":"free",pt:NeoConfig.partnerType,bldVer:NeoConfig.buildNumber};}if(NeoConfig.expBucketId&&NeoConfig.expBucketId!=="0"){Y.test=NeoConfig.expBucketId;}return Y;},W=function(Y){L=J;J=Y.sp;},U=function(){L=J;J=J;};B.on("ult:spaceIdChange",W);B.on("ult:trackClick",G);B.on("ult:trackView",V);B.on("ult:trackPageParam",Q);B.on("ult:sendULTData",H);B.mix(B.mail.ult,{getULTData:Z});},"1.0.0",{requires:["json","mail-track"]});

YUI.add("mail-common-tracker",function(B){var F=B.common.Utils.rocketstats.stat,K=NeoConfig,A,C="",D="",E=1000,J=500,H=function(){var L,M;if(!A){A=B.mail.Tabs;}M=A.getActiveTab().get("widget").fid||"";switch(M){case"Inbox":L="inbxTb";break;case"%40C%40Chats":L="chtTb";break;case"Draft":L="drftTb";break;case"Sent":L="sntTb";break;case"%40B%40Bulk":L="spmTb";break;case"Trash":L="trshTb";break;default:if(!M){L="whtsnwTb";}else{L="fldrTb";}break;}return L;},I=function(P){var M=P.args||{},Q,O,L=P.append||{},N;if(!(M.fid||L.t1)){if(!A){A=B.mail.Tabs;}N=A.getActiveTab().get("widget");if(N.type==="messagepane"){L.t1="msgRdTb";}else{if(N.type==="convpane"){L.t1="thrdRdTb";}else{M.fid=N.fid||"";}}}Q={ck:{action:P.action,args:M,append:L,spid:P.spid,thrd:K.hasConv}};O=B.JSON.stringify(Q);if(D&&D===O){F("ULT","dupClick_"+P.action);}else{B.fire("ult:trackClick",null,Q);D=O;setTimeout(function(){D="";},J);}},G=function(T){var R=T.action,N=T.append||{};if(R){var S,O,P;if(window.NeoGV&&NeoGV.cancelViewBeacon){NeoGV.cancelViewBeacon=false;if(R.substr(0,11)==="folderview_"){return;}}if(!S){if(!A){A=B.mail.Tabs;}P=A.getActiveTab().get("widget").fid||"";}switch(R){case"spam_menu":case"spam_menu_btm":S=H();N.t1={inbxTb:S};break;case"spam_menu_msg_read":case"spam_menu_btm_msg_read":S="msgRdTb";N.t1={inbxTb:S};break;case"options_menu":case"help_menu":case"hdr_ac":case"hdr_ac_sugg":S="hdr";break;case"launch_welcome":R="welcome_gx";S="whtsnwTb";break;case"launch_inbox":R="folderview_inbox";case"folderview_inbox":S="inbxTb";break;case"folderview_custom":S="fldrTb";break;case"folderview_chat":S="chtTb";break;case"folderview_draft":S="drftTb";break;case"folderview_sent":S="sntTb";break;case"folderview_bulk":S="spmTb";break;case"folderview_trash":S="trshTb";break;case"message_tabpane":S="msgRdTb";if(K.hasConvView){R="thread_tabpane";}else{if(P==="%40B%40Bulk"){R="message_tabpane_bulk";}else{if(P==="%40C%40Chats"){R="message_tabpane_chat";}}}break;case"msgread_reading_pane":S=H();R=(K.hasConvView?"msgread_threaded_pp_":"msgread_pp_")+S;break;case"compose_new":case"compose_reply_sender":case"compose_reply_all":case"compose_forward":R="compose";break;case"sendconfirm_full":S="sndcnfrmTb";break;case"search_results":case"search_refinement":S="srchTb";R="srch";break;case"folderview_inbox_empty":case"folderview_chat_empty":case"folderview_draft_empty":case"folderview_sent_empty":case"folderview_trash_empty":case"folderview_bulk_empty":case"folderview_custom_empty":S=H();R="folderview_empty";break;default:return;}var L=B.common.persist.UserData,U=NeoConfig.previewPanePref?true:false,M={t1:S,pp:U,mpp:L.get("userUIPref.messagesPerPage")},Q={ln:{action:R,pp:U,append:N,thrd:K.hasConv}};O=B.JSON.stringify({pgData:M,lnData:Q});if(C&&C===O){F("ULT","dupView_"+R);}else{B.fire("ult:trackView",null,M,Q);C=O;setTimeout(function(){C="";},E);}}};if(K.enableUltTest){B.on("mt:view",G);B.on("mt:click",I);}},"1.0.0",{requires:["ult-tracker"]});

YUI.add("mail-ui-workspace-base",function(C){var D=C.common.Utils,X=D.substitute,V=D.escapeHtml,a=D.unescapeHtml,P=D.loadDarlaAndExecute,Z=D.ymmastats,b=C.config.win||window,E=b.Neo||0,e,K=NeoConfig,M=!(K.pfm&&K.pfm.count),H=0,f=false,F,c=["_shared_module_toolbar_compose","_shared_module_compose_message_header","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_color_picker","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_offscreen_bin_compose_menu_spell_langs","_shared_module_compose_reply","mail-ui-authorview-conv"],S=false,G,U="mail-service-uploader-v"+(K.uploaderVersion||"1"),d=false,A="%40S%40Search",B=C.one("body"),J=C.one("#main"),W=C.one("#shellcontent"),I,L=NeoConfig.nav&&C.one("#nav"),Q=L&&K.calendarTabEnabled&&L.one(".icon-calendar"),N,T=L?C.one(".frost-container"):W;if(K.infiniteScroll){K.pagedResults=0;}if(K.bidi){c.push("comms-intl-bidihighlight");}c.push(U);function O(){var Y=arguments;C.use("rocket-stats",function(){D.rocketstats.stat.apply(0,Y);});}C.namespace("mail.ui");I=function(){var t=this,BG=C.one("div#main"),i="#storm-listnav",Aj=BG.one(i),Ag=BG.one("#Folders"),AK=C.mail,v=AK.FoldersView,A0=AK.ui.Toolbar,A6=AK.Controller,q=A6.Folders,AS=AK.Tabs,A9,A3,BA,y,Ah="#toolbar",Aa=".switcher",k=".commontasks",A8={},p={},AT={},AU=0,A2={},Y=0,AV,A4,BF,Aw,AG,Am,Af,j,BM=C.on("ds:msg:remove",function(BT,BS){if(BT==="Inbox"){for(var BR in BS){A8[BS[BR].mid]=true;}}});if(K.hasConvView){j=C.on("ds:conv:remove",function(BT,BS){if(BT==="Inbox"){for(var BR in BS){p[BS[BR].cid]=true;}}});}C.once("ds:msg:change",function(){Am=1;});function Ap(){var BR=B.get("winHeight");if(BR<=702){var BS=C.one("#theAd");if(BS){if(K.adScroll||C.UA.ie){BS.addClass("low_res");}}}if(S){P(function(BT){BT.fire("renderPrefetchedAd",{action:((S.isFolderEmpty&&S.goTo===1)?F+"_empty":F)});},false);S=false;}}function As(){if(K.showNavCallout){C.use("mail-ui-onboarding-nav",function(){});}}function AY(){var BR=new C.EventTarget();BR.publish("ucs:playLogo",{broadcast:2,emitFacade:true});BR.fire("ucs:playLogo");C.later(3000,null,As);}function BO(){if(B.hasClass("pc-photo")){var BU=B.one("#preloadBg"),BS=B.one("#bg"),BR,BT;if(BU){BR=BU.getAttribute("data-bg-h");if(BR){BT=new Image();BT.onload=function(){BS.setStyle("backgroundImage","url("+BR+")");BS.addClass("loaded");};setTimeout(function(){BT.src=BR;},0);}}}}function Ax(BX){var BS="minty_module_toolbar_inbox_message_fresh",BR=[K.hasConv?"minty_module_toolbar_inbox_message_thread":BS,"common-ui-menu-helper"],BW=(H===1),BV,BT;if(K.hasConv){BR.push("mail-ui-convpane-read");}else{BR.push("mail-ui-messagepane-read");}if(K.log_error_yapache){BR.push("mail-ui-log-events");}if(K.notification){BR.push("common-ui-notification");}if(BX.UA.ie>0){K.backButton=0;NeoConfig.backButtonFull=0;NeoConfig.backButtonSearch=0;}if(K.cw&&!K.noCache){BR.push("mail-common-cachewarmer");}BV=K.hasConv?"mail-common-precache-thread":((Math.random()<K.preCacheChampThreshold)?"mail-common-precache-ranking":"mail-common-precache-unread");if(K.bidi){BR.push("comms-intl-bidi");}if(K.themeJSModule!=="false"){BR.push(K.themeJSModule);}if(K.searchSuggestions===1){BR.push("searchautocomplete-extra-modules");}BR.push("mail-ui-workspace-fresh","searchautocomplete","mail-ui-boss","comms-ui-envelope","mail-ui-backbutton");if(K.showErrors){BR.push("common-utils-error");}BR.push("node-menunav","substitute","event-mousewheel","event-hover","event-outside","event-touch","event-move","event-flick","event-tap","querystring-stringify","cache-base","cache-offline","cache-plugin");BR.push(BV,"mail-ui-workspace-horizontal-slider","contacts-api-config","contacts-ui-contactseventstranslator","mail-error",function(Bd){Bd.config.fetchCSS=true;if(K.prefetchAd&&(parseInt(K.prefetchAdType,10)===2)){Ap();}if(K.themeJSModule!=="false"){Bd.mail.ui.themes[K.themeJSModule].init();}var Bc={},Bb=Bd.one("#rail-resize-hori");if(Bb){Bc=new Bd.mail.ui.WorkspaceHSlider();}var Ba=Bd.mail.common,BY=Ba&&Ba.cachewarmer,BZ;if(BY){if(parseInt(K.disablePrefetchLaunchMsgs,10)===0){BY.setupLaunch(BW);if(BW&&!(M++)){BZ=2000;BY.addInboxPreFetching();}BY.addCompose(BZ,!BZ,c);if(!BZ){BY.addDelay(5000);BY.addInboxPreFetching();BY.add(function(){M=1;});}}BY.warmUp("pixiedust",["mail-common-pixiedust"]);BY.run();}YUI().use("uh2-base",function(){if(K.setFinished){K.setFinished("uh2");}if(K.isBizmail){Bd.fire("change:username");}Bd.one("window").on("load",AY);});if(K.hasUh2Notification){Bd.Lang.later(9000,null,function(){Bd.use("uh2-notification-base",function(){var Be=false;if(K.isInternalIP){Be=window.location.href.match(/&rtb_extra=1/)||window.location.href.match(/\?rtb_extra=1/);}if(Be){(new Image()).src="/"+K.scriptBase+"/rtbeacon.gif?uh2_done=1";}});});}if(window.location.search.indexOf("qa=1")>0){O("launch","flushStat",null,{intl:true,bucket:true});}if(!Bd.UA.ie||Bd.UA.ie>8){t._setUpFreshToolTips();}if(K.showFeedback){t._setupFeedback();}if(K.tabsSupported&&!K.tabs&&K.tabsInMenu&&K.showTabsCallout){Bd.later(500,null,AJ);}});if(!(K.mrd&&K.mrd.action&&K.mrd.action==="compose")){BX.config.fetchCSS=false;}BX.Lang.later(0,null,function(){if(NeoConfig.useAttComposerTT&&(!BX.Tictac||!BX.Tictac.attach)){BX.once("tictacs-loaded",function(){BX.use.apply(BX,BR);});}else{BX.use.apply(BX,BR);}});t.presetDataItems();function BU(){var BY=["CMUSGRD2S01","CMUSGRCM02","CMUSGRCM03","CMUSGRCM04","CMUSGRCM05","CMUSGRCM06","CMUSGRCM07","CMUSGRCM09","CMUSGRCM10","CMUSGRCM11","CMUSGRCM12","CMUSGRCM13","CMUSGRCM14","CMUSGRCM15","CMUSGRCM16"];return BX.Array.indexOf(BY,NeoConfig.expBucketId)>-1;}if(!NeoConfig.targetingOptOut&&!NeoConfig.isMailPlus&&BU()&&NeoConfig.enableMessageKeywords){BX.use("mail-ui-messagekeywords",function(BY){BY.mail.ui.MessageKeywords.initialize();});}if(!NeoConfig.targetingOptOut&&NeoConfig.enableMsgListDomains&&NeoConfig.expBucketId==="CMUSGRMLD01"){BX.use("mail-ui-messagelistdomains",function(BY){BY.mail.ui.MessageListDomains.initialize();
});}if((BT=BX.one("#low-bandwidth-container"))!==null){BT.remove(true);}Z.stat("theme","name=>"+NeoConfig.theme.id);if(NeoConfig.theme.id==="sochi-winter-olympic"){O("olympic","olympic_launched");}if(NeoConfig.enableTL1Fallback){BX.use("mail-ui-mb-rec-controller",function(BY){t.mbRecController=new BY.mail.ui.mbRecController();t.mbRecController.init();});}BX.use("mail-ui-mb-controller",function(BY){if(K.mbPencilTop){t.mbController=new BY.mail.ui.mbController({rootNode:J});}else{if(K.mbPencilList){t.mbController=new BY.mail.ui.mbController({rootNode:BY.one(".list-view-items")});}}});if(NeoConfig.enableSponsoredThemes){BX.use("mail-ui-sponsored-themes-view",function(BY){t.sponsoredThemeView=new BY.mail.ui.SponsoredThemes.View();BY.on("themes:changeSuccess",function(BZ){if(BZ.name&&NeoConfig.themeList[BZ.name]&&NeoConfig.themeList[BZ.name].sponsored){t.sponsoredThemeView.render(BZ.name);}});if(NeoConfig.themeList[NeoConfig.theme.id].sponsored&&NeoConfig.theme.id==="sochi-winter-olympic"){t.sponsoredThemeView.render(NeoConfig.theme.id);}});}if(K.userVoiceFeedbackPopup){window.UserVoice=window.UserVoice||[];(function(){var BZ=document.createElement("script");BZ.type="text/javascript";BZ.async=true;BZ.src="//widget.uservoice.com/GnqW94kJH38RyG8SOBiAg.js";var BY=document.getElementsByTagName("script")[0];BY.parentNode.insertBefore(BZ,BY);})();}if(NeoConfig.fbUser===1){BX.use("mail-ui-fb-token-refresh",function(BY){BY.mail.ui.FBTokenRefresh.init();});}t.set("postLoadFired",1);BX.fire("ws:postLoad");}function l(){var BR,BS=NeoGV.statQueue;for(BR=0;BR<BS.length;BR++){O(BS[BR].name,BS[BR].well);}NeoGV.statQueue=[];}function An(BU){C.one("window").on("load",BO);var BV,BR=D.parseQueryString();l();F="launch_welcome"+((K.low_bandwidth)?"_low":(NeoConfig.isSSL?"_ssl":""));R();C.namespace("contacts");C.contacts.clientConfig={requestFn:C.common.net.SessionMgr.requestProxy,wssid:K.wssid,guid:K.neoguid,wspath:K.socdirProxyPath};if(K.strings){strings.str_ctrl=K.strings.str_ctrl;strings.str_enter=K.strings.str_enter;strings.str_ctrl_shift=K.strings.str_ctrl_shift;strings.str_ctrl_alt=K.strings.str_ctrl_alt;strings.str_right_click=K.strings.str_right_click;}K.windowId=Math.round(Math.random()*1000000000);if(K.multitask){var BT=K.hasConvView?"ds:conv:":"ds:msg:";C.on(BT+"remove",function(Ba,BZ,BX){if(BX){var BW,BY=BZ.length;for(BW=0;BW<BY;BW++){Ay(BZ[BW]);}}});if(K.hasConv){C.on("ds:conv:change",function(){var BY,Bc,BW,Bb,BX,Ba,BZ,Bd;BY=[].slice.call(arguments);Bc=K.hasConv?BY[0]:BY[4];BW=BY[1];Bb=BY[2];if(Bc==="move"){Bd=BW.length;for(BZ=0;BZ<Bd;BZ++){Ba=BW[BZ].fid;BX=Bb[BZ].fid;Ay(BW[BZ]);}}});}else{C.on("ds:msg:change",function(){var BW,Ba,BZ,BY,BX,Bb;BW=[].slice.call(arguments);Ba=BW[4];BY=BW[5];BZ=BW[2];if(Ba==="move"){Bb=BZ.length;for(BX=0;BX<Bb;BX++){Ay({mid:BZ[BX].mid,fid:BY});}}});}}function BS(){var BX=false,Bf=false;if(!BF){AX();}if(window.navigator.registerProtocolHandler){var Bi=window.location.origin+"/neo/launch?action=compose&To=%s";window.navigator.registerProtocolHandler("mailto",Bi,"Yahoo!");}C.fire("ws:initLoad");C.mail.Tabs.setPageMode(0);if(K.tabs){C.use("common-ui-navtabs");O("launch","tabs:on",null,{bucket:true,browser:true});}else{O("launch","tabs:off",null,{bucket:true,browser:true});}var Bc=C.one(Ah),Bj,Ba,Be,Bg,Bk;if(!AV&&Bc){AV=new A0({root:Bc.one(Aa),menu:{template:function(Bo,Bl){var Bn=K.mnuTmplMap[Bo.replace("btn","menu")],Bm=Bn?["mail-ui-inboxmenu-base",Bn]:"mail-ui-inboxmenu-base";C.use(Bm,function(Bp){Bp.mail.ui.InboxMenu.insert(Bo,Bl);});},keys:function(Bm,Bl){C.use("mail-ui-inboxmenu-base",function(Bn){Bl(Bn.mail.ui.InboxMenu.getValidKeys(Bm));});},enterAccel:function(Bl){C.use("mail-ui-inboxmenu-base",function(Bm){Bl(Bm.mail.ui.InboxMenu.getEnterAccel());});}}});AV.on("itemSelected",AI);e.originalNav=AV;A4=Bc.one(k);}var Bh=function(){if(E.msgHdrStack.length){var Bl=C.one("#tablist .messagetabs.active a"),Bm=0,Bo=[],Bq,Bn,Bp=false;Ba="Inbox";if(Bl){Bn=parseInt(Bl.getAttribute("tabindex"),10);}C.all("#tablist .messagetabs").each(function(Br){Bm=parseInt(Br.one("a").getAttribute("tabindex"),10);var Bs="div#shellcontent #messageid"+Bm;Br.remove();Bq=C.mail.model.DataStore.Messages.toMessage(Ba,E.msgHdrStack[Bm]);if(Bm===Bn){Bp=[Bq,Bs];}else{Bo.push([Bq,Bs]);}});if(Bp){Bo.push(Bp);BU=2;}if(Bo){setTimeout(function(){var Bs,Bt=C.mail.Tabs.getActiveTab(),Br=function(Bv){var Bu=C.one(Bv);if(Bu){Bu.remove();}};for(Bs in Bo){C.fire("openMessage",{fid:Ba,msg:Bo[Bs][0]},C.bind(Br,null,Bo[Bs][1]));}if(Bt){C.mail.Tabs.switchToTab(Bt);}},10);}}};if(BU===1){Bh();F=(K.low_bandwidth)?"launch_inbox_low":(NeoConfig.isSSL?"launch_inbox_ssl":"launch_inbox");}if(!A9){var Bd,BZ;C.fire("Y.mail.ui.Workspace:switchToInbox:start");Ba=(E&&E.fid)||"Inbox";BZ={fid:Ba,dontBind:Am,type:"list"};if(K.hasConv){Bj=new C.mail.ui.ConvView(BZ);}else{Bj=new C.mail.ui.MessagesView(BZ);}Bf=Bj.isEmpty(Ba);Bj.once("renderComplete",function(){t.fire("initComplete",Bd);});Bg={p_label:strings.str_nav_left_folders,s_label:Ba,widget:Bj,ult:{action:"folder_tab"}};Bd=C.one("#inboxcontainer");if(Bd){Bg.yTabEl=C.one("#tabinbox").get("parentNode");Bg.yTabContentEl=Bd;Bg.inactive=(BU!==1);Bg.sync=true;v.set("active",!Bg.inactive);}A9=AO(Bg);A9.widget.set("loaded",1);if(A9){A9.on("activeChange",function(Bl){v.set("active",Bl.newVal);});BV=1;C.fire("Y.mail.ui.Workspace:switchToInbox:complete");}}if(strings.str_cfg_tog_prefetch_contacts){Ad(true);}var BY=(Bj&&Bj.get("active"))?Bj:Be;if(!BX&&BU===1&&BY){S={isFolderEmpty:Bf,goTo:BU};}if(!K.noDarla){if(!BX){if(S){if(K.intl==="us"){O("launch","beforeDarlaInboxView");}if(K.prefetchAd){if(K.prefetchAdType===1){Ap();}C.fire("mt:view",{action:((Bf&&BU===1)?F+"_empty":F)});}else{P(function(){BY.fire("darlaEvent",{action:((Bf&&BU===1)?F+"_empty":F)});},false);}}else{if(K.intl==="us"){O("launch","beforeDarlaWelcomeView");}}}}if(!A3&&K.contactsTabEnabled){Bg={yTabEl:C.one("#tabcontacts").get("parentNode"),label:"Contacts",noDefault:true,inactive:true,forcePane:true,sync:true,ult:{action:"contacts_tab",spid:"contacts_tab"},init:function(Bm,Bl){C.use("contacts-ui-contactsview",function(Bo){var Bn=Bo.contacts.ui.getContactsViewInstance();
Bn.type="contactstab";BB(Bn,Bm);Bm.widget=Bn;Bo.contacts.ui.ContactsView.contactsTab=Bm;Bl();});}};A3=AO(Bg);}function Bb(Bl){if(BA){G=C.calendar.ui.getCalendarViewInstance();G.type="calendartab";G.render(BA.elContent,Bl);}}function BW(){var Bl=(new Date()).getDate();if(Bl!==N){Q.setAttribute("data-day",Bl);N=Bl;}}if(!BA&&K.calendarTabEnabled){Bg={yTabEl:C.one("#tabcalendar").get("parentNode"),label:"Calendar",noDefault:true,inactive:true,forcePane:true,sync:true,ult:{action:"calendar_tab",spid:"calendar_zodiac"},init:function(Bn,Bm){function Bl(){BB(G,Bn);Bn.widget=G;C.calendar.ui.CalendarView.calendarTab=Bn;Bm();}if(!C.calendar){if(Bk){Bk.cancel();}C.use("calendar-ui-calendarview",function(){Bb();Bl();});}else{Bl();}}};BA=AO(Bg);if(L){C.on("nav:refreshCalendar",BW);BW();}}if(!y&&K.notepadTabEnabled){Bg={yTabEl:C.one("#tabnotepad").get("parentNode"),label:"Notepad",noDefault:true,inactive:true,forcePane:true,sync:true,ult:{action:"notepad_tab",spid:"notepad_tab"},init:function(Bm,Bl){C.use("notepad-ui-notepadview",function(Bo){var Bn=Bo.notepad.ui.getNotepadViewInstance();Bn.type="notepadtab";BB(Bn,Bm);Bm.widget=Bn;Bo.notepad.ui.NotepadView.notepadTab=Bm;Bl();});}};y=AO(Bg);}if(K.isCorpmail&&!(C.UA.ie&&C.UA.ie<9)){Bk=C.later(50,null,function(){Bk=null;C.use("calendar-ui-calendarview",function(){Bb(true);});});}}D.startConsole(BR.ylog);BS();t.set("cascadeReady",true);H=BU;if(K.mrd&&K.mrd.action){o(null,true);}if(E.openCompose){C.fire("newMessage");}return BV;}function Ay(BW){var BV,BR,BU,BT,BS;if(!BW.cid&&!BW.mid){return;}BV={fid:BW.fid};if(K.hasConv&&BW.cid){BU=AK.model.ConvStore.Conversations;BS=BU.getPermCidPart;BV.cid=BS(BW.cid);BV.tabKey="cid";}else{if(BW.mid){BR=AK.model.DataStore.Messages;BT=BR.getPermMidPart;BV.mid=BT(BW.mid);BV.tabKey="mid";}}C.fire("tab:removeRef",{data:BV});}function Ak(BR,BT){var BU=C.one("#paneshell");var BS=strings.str_tog_loadRTLCss?"right":"left";if(BT){BR.set("shellcontentOffset",BU.one("#shellcontent").getStyle(BS));BU.one("#shellcontent").setStyle(BS,"0");BU.addClass("withoutshellnavigation");}else{BU.one("#shellcontent").setStyle(BS,BR.get("shellcontentOffset"));BU.removeClass("withoutshellnavigation");}}function BQ(BR,BS){if(BS){C.one("#shellnavigation").all(".items").addClass("hidden");}else{C.one("#shellnavigation").all(".items").removeClass("hidden");}}function AE(BR,BS){if(BS){C.one("#main").addClass("withouttoolbar");}else{C.one("#main").removeClass("withouttoolbar");}C.fire("mbEvent",{action:(BS?"hide":"show")});}function u(BR){var BU=C.one(Ah),BS,BT;if(AV&&BR.newVal){BS=AV.get("content");if(BS){BS.remove();}BT=BR.newVal;BT=BT?BT.get("content")||"":"";if(BT){BU.insert(BT,0);}if(BU.hasClass("hidden")){BU.removeClass("hidden");}if(AV){AV.set("active",0);}AV=BR.newVal;if(AV){AV.set("active",1);}}}function A5(BS){if(A4&&BS.target.get("active")){var BR=BS.prevVal,BT=BS.newVal,BU=BT?BT.get("content")||"":"";if(BU!==Aw){A4.setContent(BU);if(BR){BR.set("active",0);}Aw=BU;if(BT){BT.set("active",1);}}}}function AP(BS,BY){var BT=new Date().getTime();C.detach("list-stat:renderComplete");C.detach("tab:reactivated");C.detach("list-stat:tabDone");C.fire("stat:feature_invoke",{"message":"UI_LIST_START_SUCCESS","feature_group":"LIST"});if(BS&&A9&&A9.widget.msgList.get("fid")===BS.fid){var BW=function(Bc){if(Bc&&(Bc.type==="messagelist"||Bc.type==="convlist")){C.fire("stat:feature_complete",{"message":"UI_LIST_COMPLETE_SUCCESS","feature_group":"LIST"});}Bb.detach();};var Bb=C.once(["tab:reactivated","list-stat:tabDone"],BW);}else{C.once("list-stat:renderComplete",function(Bc){C.fire("stat:feature_latency",{"message":"UI_LIST_COMPLETE","feature_group":"LIST","value":Bc.endTime-BT});C.fire("stat:feature_complete",{"message":"UI_LIST_COMPLETE_SUCCESS","feature_group":"LIST"});});}if(!BS||!BS.fid){return;}var BR=new D.Stopwatch("FolderView"),BX=K.bidi,Ba=BS.extraParams||(BS.smartFolder&&BS.forceRefresh),BU=BS.smartFolder&&!BS.forceRefresh,BV=BS.fid;if(!f){f=true;F=(K.low_bandwidth)?"launch_inbox_low":(NeoConfig.isSSL?"launch_inbox_ssl":"launch_inbox");}BV=BV.replace(/%2f/g,"%5c");var BZ=BS.bb;q.get(BV,{success:function(Bj){BS=Bj;var Be=BS.folderInfo.fid,Bc=BS.folderInfo.name,Bf=C.mail.ui.common.StringUtils.getSystemFolderName(Be,Bc,BU),Bh,Bd=K.roundTrip,Bk,Bg=window.rt_LogTime,Bi;if(BY){Bk=v.get("fid");if(Bk&&Bk.fid!==Be){v.set("fid",{fid:Be,name:Bc,checkMail:false});}}else{if(A9){if(BX){Bf=A9.widget.msgList.getFolderNameBidi(Bf,BS.folderInfo.dir,BS.total);}A9.set("title",Bf);if(NeoConfig.backButtonFull&&!BZ&&(AS.getActiveTabIndex()||A9.widget.msgList.get("fid")!==Be)){C.fire("initPage",{"fid":Be});}A9.widget.msgList.stopwatch=BR;A9.widget.msgList.set("extraParams",Ba);A9.widget.msgList.set("fid",Be);Bh=(A9.widget.msgList.get("fid")===Be);C.mail.Tabs.switchToTab(A9);}else{An(1);if(BX){Bf=A9.widget.msgList.getFolderNameBidi(Bf,BS.folderInfo.dir);}A9.set("title",Bf);}E.fid=Be;Bi=function(){if(BV===E.fid){if(Bd&&Bg){if(Bd.t3){Bg("t3",Bd.t3,true);delete Bd.t3;}if(Bd.t4){Bg("t4",Bd.t4,true);delete Bd.t4;}}if(BR){BR.stop();}}};if(!A9.widget.handledInitialRender){Bi();A9.widget.msgList.stopwatch=null;A9.widget.handledInitialRender=true;}A9.widget.once("renderComplete",function(){Bi();A9.widget.msgList.stopwatch=null;});}}});}function AI(BU){var BT=BU?BU.dataAction:0,BR,BS=BU?BU.item:0;switch(BT){case"compose":case"autocompose":BR={action:"compose_new_nav_toolbar",spid:"compose_new"};if(BS&&BS.hasClass("menu-active-item")){BR.action="compose_menu_toolbar_sel";BR.append={ltxt:"compose"};}if(C.mail.Tabs.getActiveTab().widgetType==="messagepane"){BR.append={sec:"msgReadTlbr"};}C.fire("mt:click",BR);if(BT==="autocompose"){O("autocompose","launch");Z.stat("autocompose","launch=>fresh");}C.fire("newMessage",{noScroll:true,flavor:BT});break;case"new-conv":break;}}function AX(){var BR=K.neoJsHeader.module,BS=K.neoJsHeader.headerClass;C.Lang.later(0,null,function(){v.render();});AS.render();C.mail.ui.SearchBar.render();C.Lang.later(0,null,function(){C.use(BR,function(BT){BT.mail.ui[BS].render();
});});h();BF=1;C.fire("stat:feature_complete",{"message":"UI_LAUNCH_SUCCESS","feature_group":"LAUNCH"});C.fire("stat:feature_latency",{"message":"UI_LAUNCH_COMPLETE","feature_group":"LAUNCH","value":new Date().getTime()-NeoGV.startTime});t.fire("renderComplete");}function h(){v.on("fidChange",function(BY){var Ba=BY.prevVal||{},BZ=Ba.fid,BW=BY.newVal.fid,BV=BY.newVal.smartFolder||Ba.smartFolder;if(BW==="Inbox"){O("workspace","folderSwitchToInbox");}else{O("workspace","folderSwitchFromInbox");}D.assert(BW.search("_")===-1);if(A9){var BX=BZ;if(!BX){BX=(E&&E.fid)||"Inbox";}if(BW!==BX||(BW===BX&&BV)){A9.widget.set("loaded",0);}}AP(BY.newVal);});C.on("openMessage",Az);C.on("openConv",Aq);C.after("search:input",BE);C.on("tab:click",function(BV){var BW=BV&&BV.cfg&&BV.cfg.ult,BY,BX;if(BW){BX=E.fid&&E.fid.toLowerCase();if(BX&&BW.action==="folder_tab"){switch(BX){case"inbox":case"draft":case"sent":case"trash":BY="folderview_"+BX;break;case"%40b%40bulk":BY="folderview_bulk";break;case"%40c%40chats":BY="folderview_chat";break;default:BY="folderview_custom";}BW.spid=BY;}C.fire("mt:click",BW);}});C.on("newMessage",AQ);C.on("editMessage",m);C.on("updateDataStore",AH);C.on("startPrefetch",function(BZ){var BY=C.mail.common,BW=BY&&BY.cachewarmer,BX=BZ.msgHdrList,Ba=BZ.fid,BV=BZ.preCacheMids;if(BW){BW.preFetchMessages(Ba,BX,100,BV);}if(BZ.prefetchNextRelease&&BW){BW.prefetchNextRelease(K.prefetchRelease);}});C.on("openInbox",function(){v.set("fid",{fid:"Inbox",name:strings.str_tabs_inbox});});C.on("openRUEFCInbox",function(){v.set("fid",{fid:"Inbox",extraParams:{maxMessagesToScanForContacts:K.msgsToScanContacts||2000},smartFolder:true,name:strings.str_nav_email_from_ctcts});});C.on("openContacts",AZ);C.on("openCalendar",A7);C.on("openNotepad",n);C.on("openFolder",AP);function BU(BV){if(BV.hasClass("calendar")){C.fire("openCalendar");}if(BV.hasClass("contacts")){C.fire("openContacts");}if(BV.hasClass("notepad")){C.fire("openNotepad");}if(BV.hasClass("settings")){C.fire("openOptions");}}C.on("ds:folder:system:switch",BU);function BS(BX){var BW=C.one("#tabs"),BV,BY;if(BW){BV=BW.one('[data-tid="'+BX+'"]');if(BV){BY=BV.get("parentNode");if(BY.hasClass("hidden")){AS.autoCloseTabs();BY.removeClass("hidden");}}C.fire("tab:resize");}}function BT(){var BW=C.mail.Tabs,Bd=BW.getActiveTab(),Ba=false,BX,BZ=Bd&&Bd.widget&&Bd.widget.fid,BY=Aj.one('>li[data-fid="'+BZ+'"]'),Bf=Bd.get("widget"),Bc=["Inbox","Draft","Sent","%40B%40Bulk","Trash"],BV=Bd.widgetType;BW.switchLaterNav=null;C.one("#toolbar").removeClass("with-backsearch");if((BV==="convpane"||BV==="messagepane")&&C.mail.ui.searchTab){var Be=Bd.prevTabId;Ba=Be===C.mail.ui.searchTab.get("id")?true:false;}if(parseInt(K.infinitePane,10)===1){var Bb=C.all(".infp-arrow");if(Bd.widgetType){if(Bd.widgetType.indexOf("pane")>0){Bb.removeClass("hidden");}else{Bb.addClass("hidden");}}}if(Bf&&Bf.NAME==="AuthorView"){if("multitask"!==B.getAttribute("data-open")){C.fire("navigation:switch",{"type":"none"});}if(T){if(L){T.addClass("defrost");}else{T.removeClass("frost");}}}else{if(T){if(L){T.removeClass("defrost");}else{T.addClass("frost");}}}if(!Ba){if(BY){BY.addClass("selected");Ag.removeClass("open");BW.switchLaterNav=null;if(B.getAttribute("data-open")==="searchNav"){C.fire("navigation:switch",{"type":"none"});}}else{if(BZ){if(BZ===A){Aj.all("li.selected").removeClass("selected");if(K.multitask&&BW.holdNavSwitch){BW.switchLaterNav="searchNav";}else{C.fire("navigation:switch",{"type":"searchNav"});}}else{if(!NeoConfig.nav&&(!K.multitask||(C.Array.indexOf(Bc,BZ)<0))){C.fire("navigation:switch",{"type":"Folders"});}}}}}else{BX=C.one(".search-nav");if(BX){BX.removeClass("hidden");}if(B.getAttribute("data-open")==="searchNav"){C.fire("navigation:switch",{"type":"none"});}C.one("#toolbar").addClass("with-backsearch");}if(!Bd.isRemovable){BS(Bd.get("id"));}if(L){if((K.nav==="top"||K.nav==="final")&&Bd.isRemovable&&B.hasClass("nav-fixed")){L.addClass("subtab-active");}else{L.removeClass("subtab-active");}}}C.on("tabChange",BT);C.one("#tabinbox").once("mousedown",function(BV){if(f){return;}BV.halt(true);var BW=(E&&E.fid)?{fid:E.fid,name:BV.currentTarget.get("text")}:{fid:"Inbox",name:strings.str_tabs_inbox};v.set("fid",BW);if(!(M++)){C.fire("startPrefetch",{fid:"Inbox",msgHdrList:null,delay:100,prefetchNextRelease:true});}F=(K.low_bandwidth)?"launch_inbox_low":(NeoConfig.isSSL?"launch_inbox_ssl":"launch_inbox");});var BR=C.one("#signout");if(BR){BR.on("click",function(BV){C.fire("signout");BV.preventDefault();});C.on("signout",AC);}C.on("addContact",AD);C.on("mrd:launch",o);C.on("update:density",BC);C.on("update:previewPane",Ai);C.on("showMultitaskingOnboarding",r);C.on("windowresize",function(){C.fire("cv:fixupList");});C.after("tabChange",s);window.onbeforeunload=Av;window._TBCD=AF;C.on("themes:change",function(BV){var BW;if(BV.info&&BV.info.meta){BW=BV.info.meta.darktab?"addClass":"removeClass";B[BW]("tictac-dark-theme");}});C.on("navigation:switch",function(BV){C.use("mail-ui-workspace-ext",function(){if(!NeoConfig.nav){t._setupNavigationSwitch(BV);}else{t._setupNavigationSwitchForNav(BV);}});});C.on("navigation:toggle",function(BV){C.use("mail-ui-workspace-ext",function(){t._setupNavigationToggle(BV);});});C.one("window").on("load",function(){var BW=window.performance,BV=[];if(!NeoConfig.log_assetlatency||!BW||!BW.getEntries||!BW.timing){return;}if(!NeoConfig.inThrottleAssetLatency||(BW.timing.loadEventStart-BW.timing.responseStart)<NeoConfig.log_assetlatency_onload_delay){return;}BV=BW.getEntries();C.Lang.later(1000,null,function(){BH(BV);});});}function BH(BT){var BU={},BS,BR=BT.length,BV={};for(BS=0;BS<BR;BS++){BV=BT[BS];BU[BV.name]={start:BV.fetchStart,duration:BV.duration,conn:BV.connectEnd-BV.connectStart,dns:BV.domainLookupEnd-BV.domainLookupStart};}C.use("common-net-sessionmgr",function(){var BW=[];BW.push(C.JSON.stringify(BU));C.common.net.SessionMgr.requestProxy("/neo/assetStat",{method:"POST",data:BW.join("&"),service:"assetStat"});});}function BD(){if(K.hasConvView){if(K.hasConvV3){t.presetConvs();
}}else{t.presetMsgs();}}function Ao(){var BU,BR,BT,BV,BS;if(parseInt(K.launchMsgPrefetch,10)===1&&K.prefetchObj&&K.prefetchObj.isConv&&K.prefetchObj.result){BT=K.prefetchObj.result;BT=C.JSON.parse(C.common.Utils.parseMultiPartResponse(BT.conv,BT.boundary));for(BU in BT){BR=BT[BU];if(!BR.success){continue;}BS=BR[BR.key];if(BR.id.indexOf("GDM")!==-1||BR.id.indexOf("getdisplaymessage")!==-1){BV=BS.result&&BS.result.message[0];if(BV){BP(BV);}}else{if(BR.id.indexOf("LMT")!==-1||BR.id.indexOf("listmessagesinthread")!==-1){if(BS.result){BN(BS.result);}}}}O("workspace","prefetchedMessages_"+AU);O("workspace","prefetchedConversations_"+Y);p=A8={};C.detach(BM);C.detach(j);}}function BN(BR){var BS=BR.conversation.cid;if(!p[BS]){A2[BS]="server";Y++;C.mail.Controller.Conversations.preset({fid:"Inbox",conv:BR});}}function z(){if(parseInt(K.launchMsgPrefetch,10)===1&&K.prefetchObj&&K.prefetchObj.result){var BS=K.prefetchObj.result.message;for(var BR in BS){BP(BS[BR]);}if(K.prefetchObj.prefetchLimitReached){A8={};C.detach(BM);}O("workspace","prefetchedMessages_"+AU);}}function BP(BV){var BT,BS,BU;if(BV.sourceFolderInfo&&BV.sourceFolderInfo.fid){BU=BV.sourceFolderInfo.fid;}else{BU="Inbox";}if(!A8[BV.mid]){AT[BV.mid]="server";AU++;if(K.vertPane){var BR=0;while(BR<20){BT=K.msgListObj[BR];if(BT&&BV.mid===BT.mid){BV.snippet=BT.snippetStr||"";break;}BR++;}}C.mail.Controller.Messages._preset({fid:BU,msgObj:BV});if(K.hasConvView&&C.mail.Controller.Conversations){C.mail.Controller.Conversations.presetMsg({fid:BU,msgObj:BV});}}if(!BV.sourceFolderInfo){BS={key:"missingsourceFolderInfo",mid:BV.mid,yid:NeoConfig.loginId,host:NeoConfig.hostName,wssid:NeoConfig.wssid,time:(new Date()).getTime()};D.netError(C.JSON.stringify(BS));}}function AA(){C.use("common-ui-dialog-helper",function(BS){var BR=strings.str_modal_pagination_change.replace("{{str_branding_mail}}",strings.str_branding_mail);BS.common.ui.DialogHelper.alert({hd:"",bd:BR,hideClose:true,disableEsc:true},{ok:{handler:function(){AB(true);}}});});}function s(BS){if(BS){if(BS.msgPane){var BR=BS.msgPane.getRoot();if(BR&&BR.one(".message-header")){C.mail.ui.MessagePaneUtils.resizeSubject(BR);}}}}function o(BS,BR){C.use("mail-controller-mrd",function(BT){if(BT.mail.Controller.MRD){if(BR){BT.mail.Controller.MRD.handleLaunch();}else{BT.mail.Controller.MRD.handleClick(BS);}}});}function AF(BR){if(BR){C.use("mail-controller-mrd",function(BS){BS.mail.Controller.MRD.handleToolbar(BR);});}}function AZ(BR){C.fire("Y.mail.ui.Workspace:openContacts:start");C.use("contacts-ui-contactsview",function(BT){var BS=BT.contacts.ui.getContactsViewInstance(BR);BS.updateConfig(BR);BT.mail.Tabs.switchToTab(A3);});}function n(){C.fire("Y.mail.ui.Workspace:openNotepad:start");C.use("notepad-ui-notepadview",function(BS){var BR=BS.notepad.ui.getNotepadViewInstance();BR.updateConfig();BS.mail.Tabs.switchToTab(y);});}function AD(BT,BU,BS,BR){if(BT===BU){BT="";}C.use("contacts-ui-addcontactdialog","common-net-sessionmgr",function(){new C.contacts.ui.AddContactDialog[(BS||BR)?"editDialog":"createDialog"](BR?BR:(BS?{fields:BS}:{name:V(BT),email:V(BU)}),{requestFn:C.common.net.SessionMgr.requestProxy,disableBuddyAdd:strings.str_cfg_tog_disableBuddyAdd,guid:K.neoguid,wspath:K.socdirProxyPath,composeFn:function(BW){var BV={cbfn:function(BX){var BY=BX.get("header");BY.to=[{email:BW||""}];BX.set("header",BY);}};AQ(BV);}});});}function A7(){if(BA&&K.calendarTabEnabled){C.mail.Tabs.switchToTab(BA);}}function BE(BS){if(strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false){return false;}if(NeoConfig.searchRefactorEnabled){return false;}var BU,BV;Aj.all("li.selected").removeClass("selected");if(BS.query!==undefined){BS.query=(typeof BS.query==="string")?{keyword:BS.query}:BS.query;}var BR=new D.Stopwatch("Search","start");var BT=new Date().getTime();C.detach("search-stat:renderComplete");C.fire("stat:feature_invoke",{"message":"UI_SEARCH_START_SUCCESS","feature_group":"SEARCH"});BS.stopWatchRT=BR;if(!C.one("#yucs-input_wrap ul li > [role=option]")){C.common.Utils.ymmastats.stat("searchsuggestions_nosuggestionsgiven");}C.use("mail-ui-mailSearchController",function(BW){if(BW.mail.ui.searchTab&&!(window.location.href.match(/&multi=1/)||window.location.href.match(/\?multi=1/))){BV=BW.mail.ui.searchTab;BW.mail.Tabs.switchToTab(BV);BU=BV.widget;BU.set("query",BS.query);BU.set("customTitle",BS.customTitle);BU.set("prefilterRefinements","prefilterRefinements" in BS?BS.prefilterRefinements:true);BU.set("displayQueryInSearchBar","displayQueryInSearchBar" in BS?BS.displayQueryInSearchBar:true);BU.set("showDDWithSearchResults",!!BS.showDDWithSearchResults);BU.set("displayTextInSearchBar",BS.displayTextInSearchBar);BU.set("searchRequestId",BS.searchRequestId);BU.set("stopWatchRT",BR);BU.set("searchingContact",BS.searchingContact);if(BS.addToRecentSearches!==undefined){BU.set("addToRecentSearches",BS.addToRecentSearches);}BU.sync();}else{BS.fid=A;BS.type="search";AO({isRemovable:true,widget:new BW.mail.ui.Search(BS),acwHandler:function(BX){BW.mail.ui.searchTab=BX.tab;BW.mail.ui.searchTab.widget.sync();}});}});C.once("search-stat:renderComplete",function(){C.fire("stat:feature_latency",{"message":"UI_SEARCH_COMPLETE","feature_group":"SEARCH","value":new Date().getTime()-BT});C.fire("stat:feature_complete",{"message":"UI_SEARCH_COMPLETE_SUCCESS","feature_group":"SEARCH"});});return true;}function AR(){var BT=AS.getByType("compose");for(var BS in BT){var BR=BT[BS].widget;if(BR.isClean()){return true;}}return false;}function Au(){var BT,BU,BR,BX=AS.getByType("compose"),BW=function(BY){if(BY&&BY.widgetType==="compose"){C.fire("stat:feature_complete",{"message":"UI_COMPOSE_COMPLETE_SUCCESS","feature_group":"COMPOSE"});}BT.detach();},BV=function(BY){AS.switchToTab(BY);};for(var BS in BX){BU=BX[BS];BR=BU.widget;if(BR.isClean()){BT=C.once(["tab:reactivated","tabChange"],BW);C.Lang.later(0,0,BV,BU);return;}}}function At(BS){var BR=BS.widget;if(BR){var BT=BR.tab||AS.getActiveTab();BT.detach("closeHalted");
BT.on("closeHalted",function(BU){BU.halt(true);});}}function AQ(BT,BU){var BS=t,BR=!!(BT&&BT.oMsg);if(BT&&!BT.startTime){BT.startTime=new Date().getTime();C.fire("stat:feature_invoke",{"message":"UI_COMPOSE_START_SUCCESS","feature_group":"COMPOSE"});}if(NeoConfig.useAttComposerTT&&(!C.Tictac||!C.Tictac.attach)){C.once("tictacs-loaded",function(){AQ(BT,BU);});}else{if(!BR&&t.hasCleanCompose()){t.switchToCleanCompose();return;}At(BT);C.once("FullCompose:fullComposeReady",function(){C.fire("stat:feature_latency",{"message":"UI_COMPOSE_COMPLETE","feature_group":"COMPOSE","value":new Date().getTime()-BT.startTime});C.fire("stat:feature_complete",{"message":"UI_COMPOSE_COMPLETE_SUCCESS","feature_group":"COMPOSE"});});C.use("mail-ui-composeview-compose-loader",function(){var BV=new C.mail.ui.Compose.ComposeLoader({context:BT,workspace:BS,force:BU,tabs:AS,strings:{str_tabs_compose_fresh:strings.str_tabs_compose_fresh}});if(BT&&BT.flavor==="autocompose"){BV.addModule("mail-ui-autocompose");}BV.load();});}}C.on("load-address-book-contacts",function(BR){var BS=BR.delay||false;Ad(BS);});function Ad(BR){C.use("contacts-api","contacts-api-utils",function(BU){var BS=BU.contacts,BT=BS.utils,BV=BS.api;if(!BT.areContactsLoaded()){if(BR){BU.Lang.later(0,null,function(){BV.load();});}else{BV.load();}}});}function m(BS){BS=BS||{};BS.forceNew=false;var BR=t;C.use("mail-ui-composeview-compose-loader",function(){var BT=new C.mail.ui.Compose.ComposeLoader({context:BS,workspace:BR,force:BS.forceNew,tabs:AS,strings:{str_tabs_compose_fresh:strings.str_tabs_compose_fresh},openAsDraft:true});if(BS&&BS.flavor==="autocompose"){BT.addModule("mail-ui-autocompose");}BT.load();});}function AN(BS,BR){if(BS.oMsg&&BS.fid){BR.CMGStart=new Date();C.mail.Controller.Messages.get({fid:BS.fid,msg:BS.oMsg,cachekey:"ComposeOrigin",ovparams:{truncateAt:null}},{success:function(BU,BT){if(!BR.CMGEnd){BR.CMGEnd=new Date();if(BT&&BT.respProps){BR.wasCached=BT.respProps.wasCached;}}},failure:function(){}});}}function Ar(BY,BZ,BR){BR.start(1,"GetTabCB");var BV=C.mail.model.DataStore.Messages.getPermMidPart,BX=BY.msgPane&&BY.msgPane.get("message"),BU=(BX&&BX.message&&BX.message.mid)||"",BT=(BX&&BX.message&&BX.message.cid)||"",BW=BU&&BY.msgPane.fullView&&BV(BZ.mid)===BV(BU);if(BX&&BY.msgPane.fullView&&!BU&&!BT){var BS=K.loginId;BS+=":"+(BX.fid||"MISSING FID");if(BX.message&&BX.message.header&&BX.message.header.receivedDate){BS+=":"+BX.message.header.receivedDate;}else{BS+=":MISSING MESSAGE BODY";}C.use("common-utils-error",function(){D.error.report("MissingMidError in hasMsgTab for YID:FID:REC_DATE"+BS,"MessageRead",1);});O("messageread","openMessageGetTabIssue");}if(BW){if(BY.msgPane.markAsRead){BY.msgPane.markAsRead();}}return BW;}function BI(BS,BV,BR){BR.start(1,"GetTabCB");var BX=C.mail.model.ConvStore.Conversations.getPermCidPart,BT=BS.msgPane&&BS.msgPane.get("message"),BW=(BT&&BT.message&&BT.message.cid)||"",BU=BW&&BS.msgPane.fullView&&BX(BV.cid)===BX(BW);if(BT&&BS.msgPane.fullView&&!BW){O("convread","openConvGetTabIssue");}return BU;}function w(Bh,Bn){try{var Bc=(Bh.msg.msgs&&(!K.hasConvView||(Bh.fid==="Draft"&&Bh.msg.totalMsgs===1)))?Bh.msg.msgs[Bh.msg.msgs.length-1]:Bh.msg,Bv=Bh.fid,Bz=Bh.sortCol||0,BS=Bh.query||0,Br=Bh.searchRequestAttrs||{},BY=Bh.searchListMgr||{},Bp=Bh.index||0,Ba=Bh.noScroll,Bd=50,BR=Bh.arrMsgSeq||0,Bk=(BR&&BR.length)||0,Be=(Bp-Bd>0)?Bp-Bd:0,Bj=(BR&&(((Bp+Bd)<Bk)?Bp+Bd:Bk))||null,Bl=(BR&&BR.slice(Be,(Be+Bj>Bk)?Bj:Be+Bj))||0,Bt=Be,Bb=D.Stopwatch,Bo=Bb.get("MsgInPreview"),Bw=null,Bi={},BT=false,BZ=Bh.callFromLaunch?Bh.callFromLaunch:false,BU,B1=function(){if(BZ){P(function(B3){Bo.start(1,"TabDarlaEvent");B3.fire("darlaEvent",{action:(K.low_bandwidth)?"launch_message_low":(NeoConfig.isSSL?"launch_message_ssl":"launch_message")});},false);}},Bf,BV,Bq,Bx,BW,Bg,B0="",Bs=Bh.isConv&&!Bh.midtocid?"cid":"mid",Bu=Bh.isConv?"convread":"messageread";if(typeof Bc==="string"){Bc=Bh.isConv&!Bh.midtocid?{cid:Bc}:{mid:Bc};}if(Bc&&!Bc[Bs]){return;}C.fire("MessagePane:inception",{fid:Bv,message:Bc});Bo=new Bb("MsgInTab");Bo[Bs]=Bc[Bs];Bo.isConv=Bh.isConv;if(Bv===A){Bq=Bc.fid?Bc.fid:Bc.sourceFolderInfo.fid;}BT=(Bv===A&&Bq==="Draft");document.onselectstart=function(){return false;};setTimeout(function(){document.onselectstart=null;},500);if(Bc.mid&&(Bv==="Draft"||BT)){C.detach("read-stat:draftRendered");C.once("read-stat:draftRendered",function(){if(Bh.isConv){C.fire("stat:feature_latency",{"message":"UI_READ_DRAFTCONV_COMPLETE","feature_group":"READ","value":new Date().getTime()-Bh.startTime});C.fire("stat:feature_complete",{"message":"UI_READ_DRAFTCONV_COMPLETE_SUCCESS","feature_group":"READ"});}else{C.fire("stat:feature_latency",{"message":"UI_READ_DRAFTMESSAGE_COMPLETE","feature_group":"READ","value":new Date().getTime()-Bh.startTime});C.fire("stat:feature_complete",{"message":"UI_READ_DRAFTMESSAGE_COMPLETE_SUCCESS","feature_group":"READ"});}});C.fire("editMessage",{oMsg:Bc,fid:(BT?Bq:Bv),action:"edit",enableRetry:(BT?true:false),noScroll:Ba});return;}Bw=(Bh.isConv&&Bh.msg.cid)?AS.getTab(function(B3){return BI(B3,Bc,Bo);}):AS.getTab(function(B3){return Ar(B3,Bc,Bo);});if(Bw){C.mail.Tabs.destroyTabWidget(Bw);Bw=null;}if(K.multitask&&!Bw){Bi.fid=Bh.fid;if(Bh.isConv&&!Bh.midtocid){Bi.cid=AK.model.ConvStore.Conversations.getPermCidPart(Bc.cid);Bi.tabKey="cid";}else{Bi.mid=AK.model.DataStore.Messages.getPermMidPart(Bc.mid);Bi.tabKey="mid";}Ay(Bi);}Ad();Bo.start(1,"NewView");if(Bw){Bw.invisible=0;Bf=Bw.widget;BV=Bf.msgPane;Bf.fid=BV.fid=Bv;Bf.stopwatch=BV.stopwatch=Bo;BV.sortedColumn=Bz;BV.searchQuery=BS;BV.searchRequestAttrs=Br;BV.searchListMgr=BY;BV.processData=Bh.processData;BV.type=Bh.type;BV.arrMessageSequence=Bl;BV.arrMessageSequenceStartIndex=Bt;Bf.callFromLaunch=BZ;Bo.start(1,"preload");BV.preload(Bc);}else{BU={msgList:0,fid:Bv,cid:Bh.msg.cid,message:Bc,submessage:Bh.submsg,midtocid:Bh.midtocid,neighbors:Bh.neighbors,sortedColumn:Bz,searchQuery:BS,arrMessageSequence:Bl,arrMessageSequenceStartIndex:Bt,callFromLaunch:BZ,stopwatch:Bo};
if(Bh.isConv&&Bh.fid!=="%40C%40Chats"){Bf=new C.mail.ui.ConvView(BU);}else{Bf=new C.mail.ui.MessagesView(BU);}BV=Bf.msgPane;}Bf.once("renderComplete",function(){if(!Bh.isConv){Ab(Bo,Bf,BV);O(Bu,"tabbedMessageRead");C.fire("stat:feature_latency",{"message":"UI_READ_MESSAGE_COMPLETE","feature_group":"READ","value":new Date().getTime()-Bh.startTime});C.fire("stat:feature_complete",{"message":"UI_READ_MESSAGE_COMPLETE_SUCCESS","feature_group":"READ"});}B1();if(Bn){Bn();}});if(Bh.isConv){BV.once("renderConvComplete",function(){Ab(Bo,Bf,BV);O(Bu,"tabbedMessageRead");C.fire("stat:feature_latency",{"message":"UI_READ_CONV_COMPLETE","feature_group":"READ","value":new Date().getTime()-Bh.startTime});C.fire("stat:feature_complete",{"message":"UI_READ_CONV_COMPLETE_SUCCESS","feature_group":"READ"});});}Bo.start(1,"EscapeMessageSubject");BW=Bh.isConv?Bc.subject||strings["str_msg-view_tab_no_subject"]:(Bc.header&&Bc.header.subject)||Bc.subject||strings["str_msg-view_tab_no_subject"];BW=V(a(BW));Bg=C.mail.Tabs.getActiveTab();if(Bg&&C.mail.ui.searchTab&&Bg===C.mail.ui.searchTab){BW=BW.replace(/\^_/g,"");}if(K.bidi){B0=Bh.isConv?Bc.subjectDir||"":(Bc.header&&Bc.header.subjectDir)||Bc.subjectDir||"";if(B0===""&&C.Intl.detectDirection){B0=C.Intl.detectDirection(BW);}}var B2,Bm="";if(Bh.isConv&&Bh.type!=="search"){B2=Bc&&Bc.recipients;if(B2&&B2.length){Bm=V(a(B2[B2.length-1].name));}}else{if(Bc.header&&Bc.header.from){Bm=C.mail.ui.PaneUtils.getName(Bc.header.from);}}Bo.start(1,"AddCW");var BX={data:Bi,p_label:Bm,s_label:BW,s_labelDir:B0,widget:Bf,isRemovable:true,forcePane:Bh.isConv,noScroll:Ba,searchQuery:BS};if(Bw){BX.tab=Bw;}else{BX.acwHandler=g;}BX.acwHandlerArgs={stopwatch:Bo,msgPane:BV,fid:Bv,message:Bc,neighbors:Bh.neighbors,usedTabPool:Bx,isConv:Bh.isConv};if(Bh.isConv){C.one("#shellcontent").addClass("loadingConv");}Bw=AO(BX);if(BV){BV.fire("convAddedToDOM");}}catch(By){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:1",By,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:1");O(Bu,"openMessageError");C.use("common-utils-error",function(){D.error.report("openMessageError",By,1,1,1);});}}function Aq(BS,BR){C.fire("stat:feature_invoke",{"message":"UI_READ_CONV_START_SUCCESS","feature_group":"READ"});BS=BS||{};BS.isConv=1;BS.startTime=new Date().getTime();w(BS,BR);}function Az(BS,BR){C.fire("stat:feature_invoke",{"message":"UI_READ_MESSAGE_START_SUCCESS","feature_group":"READ"});BS=BS||{};BS.startTime=new Date().getTime();if(BS.msg&&BS.msg.mid&&(AT[BS.msg.mid]==="server")){O("workspace","readServerPrefetchedMessage");}BS.isConv=K.hasConvView?1:0;if(BS.isConv){BS.midtocid=true;}BS.isConv=K.hasConvView&&!BS.forceMessageOpen?1:0;w(BS,BR);var BT=BS.msg.flags&&BS.msg.flags.isRead;if(!d){if(BT){O("workspace","FirstReadMessage");}else{O("workspace","FirstUnReadMessage");}d=true;}}function g(BU){var BR=BU.cfg.acwHandlerArgs,BS=BR.isConv?"convread":"messageread";BR.stopwatch.start(1,"TabCallFromLaunch");BR.stopwatch.title="MsgInTab Stopwatch\n";BR.stopwatch.start(1,"PostOpenMessage");if(BR.usedTabPool){try{BR.msgPane.set("message",{fid:BR.fid,message:BR.message,neighbors:BR.neighbors});}catch(BT){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:2",BT,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:2");O(BS,"openMsgSetMsgError");}}}function BJ(BR,BS){C.use("common-ui-dialog-helper",function(BT){setTimeout(function(){var BU={hd:strings.str_modal_tabdeactivate_title,bd:strings.str_modal_tabdeactivate_body};BT.common.ui.DialogHelper.confirm(BU,{ok:{handler:BS},cancel:{}});},0);});}function Ae(BR){var BS;try{BS=AS.createTab(BR);BS.on("tab:add",x);if(BR.acwHandler){BS.on("tab:add",BR.acwHandler);}}catch(BT){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:3",BT,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:3");O("workspace","createTabError");}return BS;}function BK(BR){var BT=BR.tab||Ae(BR),BU=BR.widget,BS=BU&&BU.type;try{AS.addTab(BR,BT);}catch(BV){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:4",BV,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:4");O("workspace",("addTabError"+(BS||"")));}return BT;}function x(BW){var BR=BW.cfg,BU=BW.tab,BV=BR.widget,BT=BV&&BV.type;if(!BU.reuse){BB(BR.widget,BU);}if(!BR.inactive){try{C.mail.Tabs.switchToTab(BU);}catch(BS){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:5",BS,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:5");O("workspace",("tabActiveError"+(BT||"")));}}}function AO(BS){if(!BS.sync){var BR=AS.getActiveTab();if(!AS.canDeactivateTab(BR)){if(BR===C.mail.ui.optionsTab){C.fire("tab:deactivateOptionsTab",{newTab:true,addtab:function(){BK(BS);}});}else{BJ(BR,function(){BK(BS);});}return null;}}return BK(BS);}C.on("bindContentWidget",function(BR){BB(BR.cw,BR.tab);});function BB(BS,BV){var BW,BR;try{if(BS){var BT=[],BU=BS.type;if(BV.detachWidget){BV.detachWidget();}BW=function(BY){var BZ=BY.currentTarget&&BY.currentTarget.widget&&BY.currentTarget.widget.msgPane&&BY.currentTarget.widget.msgPane.message;if(BS.get("hideToolbar")){AE(BS,BY.newVal);}if(BS.get("hideNavbar")){Ak(BS,BY.newVal);}if(BS.get("clearNavbar")){BQ(BS,BY.newVal);}K.msgrData=K.msgrData||{};K.msgrData.message=(BZ&&BZ.fid==="%40C%40Chats")?BZ:null;};if(!BS.get("navToolbar")){BS.set("navToolbar",e.originalNav);}BV.after("navKeysChange",function(BY){t.set("navKeys",BY.newVal);});if(BV.activeChangeHandle){BV.activeChangeHandle.detach();}BV.activeChangeHandle=BV.after("activeChange",BW);BR=function(BY){if(BY.newVal&&BS.set){if(!BV.reuse){BV.detachWidget();
}}};BT.push(BV.on("closeChange",BR));if(BS.on){BT.push(BS.on("navToolbarChange",u));BT.push(BS.on("contentToolbarChange",A5));}BV.evtHandles=BT;BV.detachWidget=function(){var Ba,BZ=BV.evtHandles,BY=BZ.length,Bb;for(Bb=0;Bb<BY;Bb++){Ba=BZ[Bb];if(Ba){Ba.detach();}BZ[Bb]=null;}BV.evtHandles=[];};}}catch(BX){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:6",BX,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:6");O("workspace",("bindTabError"+(BU||"")));}}function A1(BR){if(BR!==t.get("navKeys")){if(AG){AG.detach();}if(BR){AG=C.on("key",BR.onKeyDown,C.one("document"),("down:"+BR.charCodes.join(",")),t);if(C.UA.os==="macintosh"&&C.UA.gecko){C.on("key",BR.onKeyPress,C.one("document"),"press:63",t);}}}}function AM(BR){if(typeof(BR)==="string"&&BR!==""&&(location.href.indexOf("fullpage")===-1)){var BS=(BR==="1")?0:1;if(0!==BS){AA();return;}}AB();}function AH(BR){Af=C.common.persist.UserData.get("userUIPref.messagesPerPage");if(BR.modifiedObjs.userdata){C.common.persist.UserData.load(true);}if(BR.modifiedObjs.metadata){C.mail.persist.MetaData.load();}if(typeof(BR.msgPaneVisible)!=="undefined"){A9.widget.previewPaneUIChange(BR.msgPaneVisible);}}function AB(BT){if(BT){try{var BS=window.location.href.split("#")[0],BX=(BS.indexOf("?")!==-1),BU=(BS.indexOf(".rand")!==-1),BV=".rand="+(Math.round(Math.random()*1000000000)),BR="";if(BU){BR=BS.replace(/\.rand\=([\d]+)/g,BV);}else{BR=(BX)?BS+"&"+BV:BS+"?"+BV;}window.location.href=BR;return;}catch(BW){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:7",BW,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:7");}window.location.reload();}else{Af=C.common.persist.UserData.get("userUIPref.messagesPerPage");C.common.persist.UserData.load(true);C.mail.persist.MetaData.load();}}function BC(BR){C.use("mail-ui-workspace-ext",function(){t._switchDensity(BR);});}function Ai(BR){C.use("mail-ui-workspace-ext",function(){t.setUdbKey(BR);});}function r(BR){if(K.tabs){return;}C.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_multitask_callout_rollup",function(BV){var BU=BV.ui.Templates.minty_module_offscreen_bin_multitask_callout_rollup,BS=decodeURIComponent(K.multitaskHelpUrl),BT=D.ezSub(BU.base,{tabs_learn_more_url:BS,user_locale:K.lang.replace("-","_")},BU);BV.fire("onboard:tip",{node:BV.one("#multitask a"),template:BT,fn:function(){BV.fire("onboard:tipclose");if(BR&&BR.queuedObCallback&&BR.ctx){BR.queuedObCallback.apply(BR.ctx);}},dir:"left",offset:[105,-16]});K.showMultitaskTutorial=false;BV.use("mail-ui-workspace-ext",function(){t.setUdbKey({"multitask_onboarding":1});});});}function AJ(){C.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_tabs_callout",function(BU){var BT=BU.ui.Templates.minty_module_offscreen_bin_tabs_callout,BS=D.ezSub(BT.base,{img_tabs_ob:K.image_path+"/nq/a/img/misc/tabs-onboarding-1.png",attlink:NeoConfig.partnerType==="sbc"?BT.attlink:""},BT),BR=AS.getActiveTab();if(BR&&BR.get("id")!=="tabinbox"){return;}BU.fire("onboard:tip",{node:BU.one("#btn-conv-view"),template:BS,fn:function(){BU.fire("onboard:tipclose");},dir:"right",width:230,offset:[-8,-15]});BU.use("mail-ui-workspace-ext",function(){t.setUdbKey({"tabs_onboarding":1});});O("tabs","callout",null,{bucket:true,browser:true});});}function AW(){return A9;}function BL(BS){var BR=C.mail.Tabs.tabs,BV,BU,BT,BW;for(BV=0;BV<BR.length;BV++){BT=BR[BV].widget;if(BT){if((BW=BT.get("composeWidgets"))&&BW.length){for(BU=0;BU<BW.length;BU++){if(BS(BW[BU])){if(K.hasConvView&&BT.msgPane&&BT.msgPane.message&&BT.msgPane.message.msgs&&BT.msgPane.message.msgs.length===1){return null;}return{compose:BW[BU],tab:BR[BV]};}}}}}return null;}function Al(BR){return BL(function(BS){return BS.matchOrigin(BR);});}function AL(){return BL(function(BR){return(BR.get("active")?true:false);});}function Ac(BT,BR){var BS=0,BU;BU=BL(function(BV){if(BV.get("dirty")&&BV.get("dirty")!=="ForceClose"){BS++;}if(BT){if(!BV._canClose(BR)){return true;}}});return BU?-1:BS;}function Av(BU){var BT,BR=0,BV;BT=window.onBeforeUnloadBizMail;if(BT){BT();return;}try{BR=Ac();}catch(BS){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:8",BS,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:8");}if(BR){BV=strings.str_error_ComposeNavigateAway;}if(BV&&BR){if(window.event){window.event.returnValue=BV;}if(BU&&BU.returnValue){BU.returnValue=BV;}return BV;}}function AC(){setTimeout(function(){try{if(K.isBizmail){C.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});}window.location.href=X(strings.str_cfg_url_signout,{},null,null,strings);}catch(BR){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:9",BR,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:9");}},100);}function Ab(BR,BS,BT){if(BR){BR.stop();}if(BS){delete BS.stopwatch;}if(BT){delete BT.stopwatch;}}C.augment(t,C.Attribute);t.addAttrs({navKeys:{setter:A1}});C.mix(t,{addContentWidget:AO,init:An,processStatQueue:l,postLoad:Ax,render:AX,moUpdate:AM,presetMsgs:z,presetConvs:Ao,presetDataItems:BD,refreshPersistData:AB,getFolderContent:AW,getComposeDirtyCount:Ac,composeEnumerate:BL,composeFindOrigin:Al,composeFindActive:AL,prefetchedMidsHash:AT,prefetchComposeOrigin:AN,hasCleanCompose:AR,switchToCleanCompose:Au});};C.mail.ui.Workspace=new I();e=C.mail.ui.Workspace;function R(){var Y=1;window.onerror=function(o,l,h){var g,m,j,k,n,i="unhandled_exception";g=typeof o==="string"?o.replace(/\s+/g,"-").substr(0,64):"empty";m=g.replace(/[^\w]/gi,"_");j=typeof l==="string"?l:"empty";k=j!=="empty"&&j!==""&&j!==" "&&j!=="undefined"&&j!=="null";n=j.indexOf("s.yimg.com/zz/combo")<0&&j.indexOf("neo/launch")<0&&j.indexOf("storm/launch")<0;
if(g.indexOf("YWA-BeaconScheduler")>=0||(k&&n)){i="ext_unhandled_exception";}if(j.indexOf("s.yimg.com/zz/combo?")>=0){j=j.replace(/[0-9]/g,"").match(/s.yimg.com\/zz\/combo\?(.{0,60})/)[1].replace(/[^\w]/gi,"_");}else{if(j.indexOf("launch/combo.php?")>=0){j=j.replace(/[0-9]/g,"").match(/launch\/combo.php\?(.{0,60})/)[1].replace(/[^\w]/gi,"_");}else{if(j.indexOf("neo/launch")>=0){j="Launch";}else{j=j.substr(0,60).replace(/[^\w]/gi,"_");}}}O("Window.error",i,null,{bucket:true,browser:true,storm:true});O("Window.error",i+":msg:"+g,null,{bucket:true,browser:true,storm:true});C.fire("util:ymstats",{"name":i,"tags":{"browser":NeoConfig.browser,"msg":m,"file":j}});if(Y){Y=0;C.use("common-utils-error",function(){Y=1;D.error.report("[msg: "+o+"] [file: "+l+"] [line#: "+h+"] ",i.toUpperCase(),1,1,1);});}};}},"1.0.0",{requires:["event-resize","mail-controller-tictacs","mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","common-ui-toolbar-base","mail-ui-searchbar","common-utils-stats","mail-ui-common-string-utils","mail-common-tracker","ymma-stats"]});

YUI.add("mail-ui-factory-base",function(G){G.namespace("mail.ui");var C=G.mail.ui.Factory={},E={};function D(L){var K=G,I,J,M=L.split("."),H=M.length;for(J=0;J<H;J++){if(J===H-1){I=M[J];}else{K=K[M[J]];}}return[K,I];}function B(L,J){if(!L||!J){return;}var I=D(L),K=I[0],H=I[1],M;if(K[H]&&K[H]!==J){if(!(L in E)){E[L]=K[H];}M=K[H];K[H]=J;F(L,J,M);}}function A(L){if(L&&L in E){var J=D(L),K=J[0],H=J[1],M,I;M=K[H];K[H]=E[L];I=K[H];if(I!==M){F(L,I,M);}}}function F(I,H,J){C.fire("uifactory:change",{ns:I,newCtor:H,oldCtor:J});}G.augment(C,G.EventTarget);G.mix(C,{register:B,unregister:A});},"1.0.0");

YUI.add("mail-ui-basewidget",function(F){var E="Neo",A=":";var D=function(G){var H=this;if(!G){G={};}H.prefix=G.prefix||E;H.emitFacade=G.emitFacade||true;F.EventTarget.call(H,{emitFacade:H.emitFacade});};D.prototype.constructor=D;var C={_getEventName:function(I,H){var J=this,G=J.prefix;if(!H){H=J;}if(H.NAME){G=H.NAME;}if(H.constructor&&H.constructor.NAME){G=H.constructor.NAME;}return{"ev":G+A+I,"name":G,"type":I};},neoEvent:function(J,K){var M=this,L=(F.Lang.isObject(K))?K:{},H=M.prefix,I=M,G;if(K.context){I=K.context;}if(K.addTarget===1){I.addTarget(F);}G=M._getEventName(J,I);H=G.name;L.prefix=H;L.emitFacade=M.emitFacade;return M.publish(G.ev,L);},neoFire:function(H){var I=this,G=Array.prototype.slice.call(arguments);G[0]=I._getEventName(H).ev;return I.fire.apply(I,G);}};D.prototype=C;F.mix(D,F.EventTarget,false,null,1);F.namespace("common.Utils.event");F.common.Utils.event=D;var B=function(G){var H=this;B.superclass.constructor.call(H,G);H.set("navKeys",F.mail.ui.navKeys);if(!H.NAME){H.NAME="BaseWidget";}};F.extend(B,F.common.ui.ContentWidget);F.augment(B,F.common.Utils.event);F.namespace("mail.ui").BaseWidget=B;},"1.0.0",{requires:["common-ui-contentwidget","mail-ui-navkeys"]});

YUI.add("mail-ui-header",function(E){var B=E.common.Utils.substitute,A=E.common.persist.UserData,C=E.common.Utils,F=E.mail.ui.headerUtils;var D=function(){};E.extend(D,E.mail.ui.HeaderBase);E.mix(D.prototype,{omModifiedHeaderMenuFlag:false,omMenuObj:{},omModifiedOptionsMenuFlag:false,omOptionsMenuObj:{},calAddedOptionsMenuFlag:false,calOptionsMenuObj:null,render:function(){var J=this;E.on("menu:config",J.setUhMenuConfig,J);E.on("change:username",J.setUhUsername);E.on("search:config",J.setSearchBtnText);var I=false,G=false;E.Global.on("ucs:userMenuShow",function(){var S=this;if((S.omModifiedHeaderMenuFlag||!I)){var W=new E.EventTarget();W.publish("ucs:userMenuItems",{broadcast:2,emitFacade:true});var Q=[];var N=[],U,K,R,O,M=true;if(S.omMenuObj&&S.omMenuObj.length){for(var P=0;O<S.omMenuObj.length;P++){R=S.omMenuObj[P];if(R.icon["class"]!=="signout"&&R.data_action.search("offline")===-1){K={menuText:R.label,actionType:"customEvent",actionData:R.data_action,icon:R.icon["class"].substr(5),isActive:R.selected};N.push(K);if(M&&R.selected){M=false;}}}Q.push(N);for(var X=0;O<S.omMenuObj.length;X++){R=S.omMenuObj[X];if(R.icon["class"]==="signout"||R.data_action.search("offline")>-1){U=[{menuText:R.label,actionType:"customEvent",actionData:R.data_action,isDisabled:M}];Q.push(U);}}}if(NeoConfig.userDataObj&&NeoConfig.userDataObj.otherYahooMboxes&&NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal){var L=NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal,T=NeoConfig.userDataObj.otherYahooMboxes.yMbox,V=[];for(O=0;O<L;O++){U={menuText:T[O].email,actionType:"customEvent",actionData:"bizmail|"+O,highlightDisable:true,isDisabled:false};V.push(U);}Q.push(V);}W.fire("ucs:userMenuItems",{"menuGroups":Q,reset:true});I=true;S.omModifiedHeaderMenuFlag=false;}},J);E.Global.on("ucs:userMenuItemClick",function(L){var K=L.actionData.split("|");F.handleUHMenus({dataAction:K[0],uhArgs:K});});E.Global.once("ucs:helpDebugMenuShow",function(){E.use("mail-debug",function(L){J.setUhDropdown(J,"_shared_module_offscreen_bin_menus_debug",L.mail.Debug.getDebugMenuObj,"ucs:helpDebugMenuItems");if(NeoConfig.isInternalIP!==1){var K=L.one("#yuhead-help-panel");K.removeChild(K._node.lastChild);}});});E.Global.on("ucs:helpDebugMenuItemClick",function(K){E.use("mail-debug",function(L){L.mail.Debug.handleDebugOption({dataAction:K.actionData});});});E.Global.on("ucs:utilityMenuShow",function(){if(J.omModifiedOptionsMenuFlag||!G||J.calAddedOptionsMenuFlag){var K="_shared_module_offscreen_bin_menus_options_fresh";J.setUhDropdown(J,K,F.getOptionsMenuObj,"ucs:utilityMenuItems",{omOptionsMenuObj:J.omOptionsMenuObj,calOptions:J.calOptionsMenuObj},F.logOptionsLinkViews);if(J.omModifiedOptionsMenuFlag||!G){J.omModifiedOptionsMenuFlag=false;G=true;}if(J.calAddedOptionsMenuFlag){J.calAddedOptionsMenuFlag=false;}}else{F.logOptionsLinkViews();}});E.Global.on("ucs:utilityMenuItemClick",function(K){F.handleUHMenus({dataAction:K.actionData});});E.Global.on("ucs:logoDebug",function(K){F.showDialogBox({altKey:true,preventDefault:function(){}});});var H=E.one("#yuhead-me-signout")||E.one("#yucs .yucs-signout");if(H){H.on("click",function(){E.fire("signout");if(parseInt(NeoConfig.isBizmail,10)===1){if(NeoConfig.isInternal==="1"){E.Cookie.remove("YM.BM",{path:"/",domain:"mail.yahoo.com"});}else{E.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});}}});}if(NeoConfig.isCorpmail){corpsignout(E);E.all(".yucs-profile-items-panel a").each(function(K){var L=K.getAttribute("href");if((L.indexOf("profile")!==-1)||(L.indexOf("edit")!==-1)){K.ancestor().setAttribute("style","display:none;");}});E.one(".yucs-profile-items-panel .yucs-separator").setAttribute("style","display:none;");}this.rendered=1;E.fire("header:rendered");},setSearchBtnText:function(G){if(!window.ucs){return;}var H=ucs.UhSearchInterface.setVertSearchBtnText;if(!G.mode||G.mode==="default"){H(strings.str_uh_searchmail);}else{H(G.searchLabel);}},setUhUsername:function(){if(NeoConfig.isBizmail){var G=C.escapeHtml(A.get("userSendPref.defaultFromAddress"));E.Lang.later(0,null,function(){var H=new E.EventTarget();H.publish("ucs:userNameChange",{broadcast:2,emitFacade:true});H.fire("ucs:userNameChange",{username:G});});}},setUhMenuConfig:function(H,G,I){I=I||this;switch(H.id){case"btn-uh-account":I.omModifiedHeaderMenuFlag=true;I.omMenuObj=G;I.setUhOpiStatus(H.icon["class"].substr(5));break;case"btn-options":I.omModifiedOptionsMenuFlag=true;I.omOptionsMenuObj=G;break;case"btn-caloptions":I.calAddedOptionsMenuFlag=true;I.calOptionsMenuObj=G;break;}},setUhOpiStatus:function(G){var H=new E.EventTarget();H.name="ucs";H.publish("ucs:opiUpdateStatus",{broadcast:2,emitFacade:true});H.fire("ucs:opiUpdateStatus",{"opiStatus":G});},setUhDropdown:function(L,K,I,J,G,H){G=G||{};E.use(K,function(Q){var N=Q.ui.Templates[K],P=I(N,G),M;if(NeoConfig.isCorpmail){P.upgrade=false;P.om_options=false;P.account_info=false;}else{P.account_info=true;}M=B(N.base,P,{},null,strings);var R=L.getMenuGroupsFromMarkup(M);var O=new Q.EventTarget();O.publish(J,{broadcast:2,emitFacade:true});O.fire(J,{menuGroups:R,reset:true});if(H){H();}});},getMenuGroupsFromMarkup:function(U){var J=/<ul(.*?)<\/ul>/gm,N=/<li(.*?)<\/li>/gm,I=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*title=(.)(.*?)\5\s*>(.*?)<\/a>/,O=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*>(.*?)<\/a>/,M,V,Q,R,S,P=[];while((M=J.exec(U))){R=M[0];var K=[];while((V=N.exec(R))){S=V[0];Q=I.exec(S)||O.exec(S);if(Q){var L=Q[2],H=Q[4],T=Q[Q.length-1],G={menuText:T};switch(L){case"upgrade":if(NeoConfig.deprecateMailPlus){G.actionType="customEvent";}else{G.actionType="link";G.url=H;G.target="_blank";}break;case"newfeature":case"blog":case"help":case"help_upgrade":case"community":case"fullmail":case"feedback":case"legal":case"privacy":case"ads":case"copyright":case"ovi-terms":case"link":G.actionType="link";G.url=H;G.target="_blank";break;default:G.actionType="customEvent";break;}if(L==="fullmail"){G.target="_self";}G.actionData=L;K.push(G);}}!E.common.Utils.isEmpty(K)&&P.push(K);
}return P;},showMobilizer:function(G){G.preventDefault();E.use("mobilizer",function(){YMobilizer.load({app:"mail.new",lang:NeoConfig.lang,proxy:NeoConfig.launch_protocol+window.location.host+"/"+NeoConfig.scriptBase+"/mobilizer_proxy.html"});});}},true);E.namespace("mail.ui.Header");E.mail.ui.Header=new D();E.namespace("test.Header");E.mix(E.test.Header,{headerObj:E.mail.ui.Header,setUhMenuConfig:E.mail.ui.Header.setUhMenuConfig,getOmMenuObj:function(){return E.mail.ui.Header.omMenuObj;},setUhOpiStatus:E.mail.ui.Header.setUhOpiStatus,setUhDropdown:E.mail.ui.Header.setUhDropdown,getMenuGroupsFromMarkup:E.mail.ui.Header.getMenuGroupsFromMarkup,getHelpMenuObj:F.getHelpMenuObj,getOptionsMenuObj:F.getOptionsMenuObj,showDialogBox:F.showDialogBox,showMobilizer:E.mail.ui.Header.showMobilizer,handleUHMenus:F.handleUHMenus,optOutredirect:F.optOutredirect,openOptOutDialog:F.openOptOutDialog,switchToBizmailAcct:F.switchToBizmailAcct});},"1.0.0",{requires:["node","mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]});

YUI.add("mail-ui-header-base",function(A){var B=function(){};B.prototype={render:function(){},bindUI:function(){}};A.namespace("mail.ui.HeaderBase");A.mail.ui.HeaderBase=B;},"1.0.0");

YUI.add("mail-ui-header-utils",function(C){var A=C.common.Utils.substitute,B=C.common.Utils;var D={getHelpMenuObj:function(E){var F={send_feedback_menu:strings.str_tog_sendFeedbackEnabled?E.send_feedback_menu:"",report_problem_url:NeoConfig.reportURL+(NeoConfig.reportURL.indexOf("?")===-1?"?":"&")+"isFresh=1&pc=1",report_problem:NeoConfig.strings.reportProblem,upgrade:(strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1")?E.upgrade:"",adfree:"",ads:strings.str_cfg_tog_aboutOurAdsEnabled?E.ads:"",copyright:strings.str_cfg_tog_disableCopyrightLink?"":E.copyright,blog:strings.str_cfg_tog_mailBlogEnabled?E.blog:"",tos_url:"atos",kbshortCuts:E.kbshortCuts,return_to_original:NeoConfig.hideReturnLink!=="1"?E.return_to_original:"",switch_to_full:NeoConfig.low_bandwidth?E.switch_to_full:"",full_mail_url:"/"+NeoConfig.scriptBase+"/launch?full=1",new_feature_url:NeoConfig.newFeatureURL,ovi:NeoConfig.partnerType==="nokia"?E.ovi:""},G;if(NeoConfig.partnerType==="sky"){F.send_feedback_menu="";}if(NeoConfig.mbFeedbackUrl){F.report_problem_url=NeoConfig.mbFeedbackUrl;}if(NeoConfig.deprecateMailPlus&&strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1"){F.upgrade="";F.adfree=E.adfree;}F.hide_help_ul=F.send_feedback_menu||F.return_to_original||F.switch_to_full?"":E.hide_help_ul;if(NeoConfig.intl==="us"&&NeoConfig.lang==="ko-KR"){F.str_cfg_url_tos="http://info.yahoo.com/legal/us/yahoo/utos/ko-kr/";F.str_cfg_url_copyright="http://info.yahoo.com/legal/us/yahoo/copyright/ko-kr/";}G=F.report_problem_url;if(G.indexOf("qna")===-1){if(NeoConfig.expBucketId&&NeoConfig.expBucketId!=="0"&&(!NeoConfig.mbFeedbackUrl)){F.report_problem_url=NeoConfig.stormFeedBackUrl;}if(NeoConfig.stormUserVoice){F.report_problem_url=NeoConfig.stormUserVoice;}if(F.send_feedback_menu){if(G&&G.indexOf("feedback.yahoo.com")===-1&&G.indexOf("uservoice")===-1){F.send_feedback_menu="";}}}return F;},getOptionsMenuObj:function(I,E){var H=E.omOptionsMenuObj,K={},J=E.calOptions,F,G={url_minty_options:"#",url:I.url,themes:strings.str_cfg_tog_showThemeOption?I.themes:"",cal_options:"",om_options:"",upgrade:"",adfree:""};if(strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1"){if(NeoConfig.deprecateMailPlus){G.upgrade="";G.adfree=I.adfree;}else{G.upgrade=I.upgrade;G.adfree="";}}if(H){for(F=0;F<H.length;F++){K={data_action:H[F].data_action,title:H[F].title,label:H[F].label,id:H[F].id};G.om_options+=B.substitute(I.om_options,K,0,0,strings);}}if(J){G.cal_options+=B.substitute(I.cal_options,K,0,0,strings);}G=C.mix(G,D.getHelpMenuObj(I));return G;},showDialogBox:function(F){F.preventDefault();if(F.altKey){if(typeof NeoConfig==="undefined"){return;}var E=["Neo Version: \n","Build number: ",NeoConfig.buildNumber,"\n","Build time: ",NeoConfig.buildTime,"\n","Build: ",NeoConfig.git_branch,"\n \n","SSH Hash: ",NeoConfig.git_hash,"\n \n","Hostname: ",NeoConfig.hostName||window.location.hostname];if(NeoConfig.enableExpUltTracker&&NeoConfig.expBucketId!=="0"){E.push("\n \nBucket: "+NeoConfig.expBucketId);}C.use("common-ui-dialog-helper",function(I){var H=I.common.ui.DialogHelper,G=NeoConfig.isSSL?"https://s.yimg.com":"http://mail.yimg.com";H.alert({modal_classes:"lg",hd:"Version",bd:"<pre>"+E.join("")+"</pre>"+'<div><img src="'+G+'/nq/j/camping.jpg" style="width:520px;" /></div>'});});}else{yui.fire("openInbox");}},handleUHMenus:function(I,H){var J=H||this,E=I.dataAction,G="uh_"+E+"_lnk";switch(E){case"newfeature":case"blog":case"help":C.fire("darlaEvent",{action:"help_dd_click_"+E});case"help_upgrade":case"community":case"fullmail":case"feedback":case"legal":case"privacy":case"ads":case"copyright":case"ovi-terms":case"link":C.fire("mt:click",{action:G});break;case"upgrade":if(NeoConfig.deprecateMailPlus){C.use("mail-ui-adfree-mail-dialog",function(K){K.mail.ui.AdFreeMailDialog.show();});}break;case"options":C.fire("openOptions",this);C.fire("mt:click",{action:G});break;case"Calendar_options":if(!C.calendar){break;}C.fire("openCalendar");C.fire("calendarOptions",this);C.fire("mt:click",{action:G});break;case"kbshortcuts":C.use("mail-ui-shortcuts-dialog",function(K){K.mail.ui.ShortcutsDialog.show();});C.fire("mt:click",{action:G});break;case"modal":C.use("modal_css",function(){J.openOptOutDialog();});C.fire("mt:click",{action:G});break;case"themes":C.use("mail-ui-themes",function(K){K.mail.ui.Themes.showThemesDialog();});C.fire("mt:click",{action:G});break;case"bizmail":var F=(I.uhArgs&&I.uhArgs[1])||I.item._node.getAttribute("data-index");J.switchToBizmailAcct(F);break;default:break;}},optOutredirect:function(L){var M=L.get("contentBox"),O=M.all("input"),G=M.one("textarea"),H=null,I=[];for(var J=0;J<O.size();J++){H=O.item(J);if(H.get("checked")){I.push(H.getAttribute("id")+"=true");}}H=G;I.push("additionalFeedback="+H.get("value"));var E=NeoConfig.launch_protocol+window.location.host+window.location.pathname;var F=E.indexOf("/",(E.indexOf(window.location.host)+window.location.host.length+2));var N=E.substring(0,F)+"/optOut";I.push("ncrumb="+NeoConfig.ncrumb);N+="?"+I.join("&");try{document.location.replace(N);}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-header-headerUtils:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-header-headerUtils:1");}},openOptOutDialog:function(){C.use("comms-ui-dialog-base","_shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup",function(H){var G=H.ui.Templates._shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup,E=A(G.base,null,null,null,strings);var F=new H.comms.ui.Dialog({template:E,centered:true,cssPrefix:"modal"});F.get("contentBox").on("click",function(J){var K=H.common.Utils.getDataAction(J),I=K.action;if(I){J.preventDefault();switch(I){case"continue":H.mail.ui.headerUtils.optOutredirect(F);break;case"cancel":F.destroy();break;default:break;}}});F.render().show();});},switchToBizmailAcct:function(H){var J=NeoConfig.userDataObj.otherYahooMboxes.yMbox[H];var G=J.email.split("@");
var I=J.isBizmail;var F;var E={domain:G[1],sid:J.sledid,silo:J.silo,account:G[0],farm:J.farm};window.onBeforeUnloadBizMail=function(){if(I){if(NeoConfig.isInternal==="1"){C.Cookie.setSubs("YM.BM",E,{path:"/",domain:".mail.yahoo.com"});}else{C.Cookie.setSubs("YM.BM",E,{path:"/",domain:".yahoo.com"});}}else{if(NeoConfig.isInternal==="1"){C.Cookie.remove("YM.BM",{path:"/",domain:"mail.yahoo.com"});}else{C.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});}}};if(J.url){F=J.url;}else{F="https://mail.yahoo.com";}document.location.replace(F);},logOptionsLinkViews:function(){C.fire("mt:view",{action:"options_menu"});}};C.namespace("mail.ui.headerUtils");C.mail.ui.headerUtils=D;},"1.0.0",{requires:["common-utils","common-persist-user-data"]});

YUI.add("rocket-stats",function(C){var D,B,F,K,G=C.namespace("common.Utils.rocketstats"),L=[],I,A,H;G.stat=function(R,O,Q,N){if(!D&&C.one){D=1;C.one(window).on("beforeunload",I);C.one(window).on("unload",I);}if(!NeoConfig||(parseInt(NeoConfig.trackRocketStat,10)===1)){var M=NeoConfig,P=(M.expBucketId==="0"?(M.isUltThrottled*1?"NoBucket":"NoUlt"):M.expBucketId);H='{"page":"'+R+'","key":"'+O+'"';if(N){if(N.intl){H+=',"intl":"'+N.intl+'"';}if(N.browser){H+=',"browser":"'+M.browser+'"';}if(N.bucket){H+=',"bucket":"'+P+'"';}if(N.storm){H+=',"storm":"1"';}}if(Q!==F){H+=',"value":'+Q;}H+="}";L.push(H);J();}};G.intlStat=function(O,M,N){G.stat(O,M,N,{intl:true});};G.bucketStat=function(O,M,N){G.stat(O,M,N,{bucket:true});};G.browserStat=function(O,M,N){G.stat(O,M,N,{browser:true});};G.stormStat=function(O,M,N){G.stat(O,M,N,{storm:true});};function J(){if(L.length>49){clearTimeout(B);E();}else{B=B||setTimeout(E,180000);}}I=G.unloadQ=function(){if(L[0]){E();A=new Date();while(new Date()-A<100){}}};function E(){B=0;if(L[0]){try{K=new XMLHttpRequest();K.open("POST","stat?storm=1");K.send(L.join("\n"));}catch(M){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-comms-shared-src-rocketstats-js-src-rocketstats:1",M,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-comms-shared-src-rocketstats-js-src-rocketstats:1");}L=[];}}},"1.0.0");

YUI.add("mail-common-lowbandwidth",function(B){B.namespace("mail.common");B.namespace("mail.common.LowBandwidth");function A(){if(B.Cookie.get("YM.NEO_LITE")===null){var D=B.common.persist.NeoData;var C=new Date();C.setDate(C.getDate()+30);B.Cookie.set("YM.NEO_LITE","1",{path:D.get("cookiePath"),domain:D.get("cookieDomain"),expires:C});}B.common.Utils.rocketstats.stat("launch","SwitchLowBandwidth");}B.mix(B.mail.common.LowBandwidth,{setLWCookie:A});},"1.0.0",{requires:["node","rocket-stats"]});

YUI.add("mail-controller-tictacs",function(G){var D,B,C,A,E=NeoConfig.isAMT||!!NeoConfig.isInternal||!!NeoConfig.isInternalIP,F;B={};if(!NeoConfig.tictac){return;}for(D in NeoConfig.tictacsClientConf){if(NeoConfig.tictacsClientConf.hasOwnProperty(D)){A=D;F=A+"-";C=NeoConfig.tictacsClientConf[D];break;}}G.Object.each(C,function(I,H){var J=I.event;if(!J){return;}if(!E||window.location.search.indexOf(I.name+"=0")===-1){if(!B[J]){B[J]=[];}B[J].push(H);}});G.Object.each(B,function(I,H){G.once(H,function(){var J=arguments;G.use(I,function(K){K.Array.each(I,function(M){var L=NeoConfig.tictacsClientConf[A][M].name;if(!K.Tictac[L]||!K.Tictac[L].loader){K.log("Module or loader missing for tictac "+L,"warn","tictac");return;}K.log('Binding "'+H+'" after "Y.Tictac['+L+'].loader": '+K.Tictac[L].loader);K.after(H,K.Tictac[L].loader);try{K.Tictac[L].loader.apply(null,J);}catch(N){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-tictacs:1",N,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-tictacs:1");K.log("Exception caught in loader for tictac "+L+".  Error = "+N.message,"warn","tictac");}});K.fire("tictacs-loaded");});});});});

YUI.add("mail-ui-button-ctxt",function(B){var R=NeoConfig.grayoutEnabled,N="buttonContext",I="onemsg",Q="multimsg",E="hasnomsg",A="hasonemsg",V="hasmultimsg",G="hasthreadmsg",L="disabled",K=[E,A,V,G],M=K.length;function U(X,Y){var W=J(X);if(W){if(Y){X.replaceClass(W,Y);}else{X.removeClass(W);}}else{X.addClass(Y);}}function J(Y){var X,W;for(X=0;X<M;++X){W=K[X];if(Y.hasClass(W)){return W;}}return null;}function S(X){var Z=X.node||X.item,W=X.root,a=X.action,Y;if(!Z||!W){return false;}if(Z.get("tagName")==="A"){Z=Z.get("parentNode");}if(Z.hasClass(L)){return false;}Y=J(W);switch(Y){case E:if(Z.hasClass(I)||Z.hasClass(Q)){return false;}break;case V:if(Z.hasClass(I)){return false;}break;case G:case A:if(NeoConfig.convReplyBtnsInTlbr&&(a==="reply_sender"||a==="reply_all"||a==="forward")&&W.hasClass("disableReplyGroup")){return false;}break;}return true;}function O(Z,W){var a={"folder-empty-spam":"%40B%40Bulk","folder-empty-trash":"Trash"},Y=a[Z],X;if(Y){W=B.one('#system-folders li[data-fid="'+Y+'"]');}if(W){X=J(W);}if(X){switch(Z){case"folder-allread":case"folder-empty":case"folder-empty-spam":case"folder-empty-trash":return X===V;}}return true;}function P(W,X){var Z=this,Y=E;X=X?X:false;if(W>1){Y=V;}else{if(X){Y=G;}else{if(W===1){Y=A;}}}if(Z.get(N)!==Y){Z.set(N,Y);}}function D(Z){var Y=Z.node,W=Y.get("parentNode"),X=Y.get("id").replace("btn-","menu-"),b=B.one("#"+X),a=J(W)||E;U(b,a);}function F(){var X,Y=B.one("#menu-msglist"),W=B.one("#pagetoolbar");if(Y&&W){X=J(W)||E;U(Y,X);}}function C(W,Y){var Z=this,X;if(W&&Y){X=J(W)||E;U(Y,X);}if(!NeoConfig.tog_empty_folders){Z.patchFolderMenu(Y);}}function H(b){var Z,a=["spam","trash"],W,Y,X;for(Z in a){W=B.one("#storm-listnav li."+a[Z]);if(W&&b){Y=b.one('li[data-action="folder-empty-'+a[Z]+'"]');if(Y){X=J(W)||E;U(Y,X);}}}}function T(W){var X=this;T.superclass.constructor.call(X,W);X._evts.push(B.on("listItemSelect",function(Y){if(R&&Y){X.setButtonContext(Y.total);}}));X.addAttrs({BUTTON_CTXT_ATTR:{}});X._evts.push(X.on(N+"Change",function(Z){var Y=this.root;if(Y){U(Y,Z.newVal);}}));}if(R){B.extend(T,B.mail.ui.Toolbar,{buttonEnabled:S,setNodeButtonMenu:D,setButtonContext:P});B.namespace("mail.ui").Toolbar=T;B.namespace("mail.ui").ContextButton={setNodeMessageListMenu:F,setNodeFolderMenu:C,patchFolderMenu:H,folderActionEnabled:O,buttonEnabled:S};}},"1.0.0",{requires:["common-ui-toolbar-base"]});

YUI.add("ymma-stats",function(C){var D,B,L,K,E=C.namespace("common.Utils.ymmastats"),M=[],H,A,F,G={},I,J;K=function(){E.setKey=function(T,S){if(typeof(T)==="object"){C.mix(G,T,true);}if(typeof(T)==="string"){G[T]=S;}};E.getKey=function(S){return G[S];};E.stat=function(U,T,W,V,S){if(!D&&C.one){D=1;C.one(window).on("beforeunload",H);C.one(window).on("unload",H);}if(NeoConfig.enableYmma){C.fire("MailLog",{m:U+(T?(" "+T):"")});if(!T){T="bucketId=>"+NeoConfig.expBucketId;}else{if(T.indexOf("bucketId")<0){T+=",bucketId=>"+NeoConfig.expBucketId;}}F=U+"~"+W+"~"+V+"~"+S+"~"+T;M.push(F);N();}};function N(){if(M.length>49){clearTimeout(B);O();}else{B=B||setTimeout(O,15000);}}H=E.unloadQ=function(){if(M[0]){O();A=new Date();while(new Date()-A<100){}}};function O(){B=0;if(M[0]){L=new XMLHttpRequest();L.open("POST","ymstat");L.send(M.join("\n"));M=[];}}function R(T){var S=[];if(T&&typeof JSON==="object"){C.Object.each(T.tags,function(V,U){S.push(U+"=>"+V);});S=S.join(",");if(T.unit){E.stat(T.name,S,T.unit,T.type,T.dataum);}else{E.stat(T.name,S);}}}function Q(W,V){var S=[],U={"message":1,"tae":1,"api":1,"visible":"yes","bucketId":{value:NeoConfig.expBucketId},"farm":{value:(NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx")},"mailEnv":{value:NeoConfig.mailEnv}};for(var T=0;T<W.length;T++){if(V[W[T]]){S.push(W[T]+"=>"+V[W[T]]);}else{if(C.Lang.isObject(U[W[T]])){S.push(W[T]+"=>"+U[W[T]].value);}else{return false;}}}return S.join(",");}function P(U,W,V,S){if(S){E.stat(U);}else{var T=Q(W,V);E.stat(U,T);}}C.on("util:ymstats",R);C.on("stat:feature_invoke",function(S){I=S.feature_group;delete S.feature_group;P("feature_invoke_"+I,["message","farm","mailEnv"],S);P(I+"_invoke_success",null,null,true);});C.on("stat:feature_complete",function(S){J=S.feature_group;delete S.feature_group;P("feature_complete_"+J,["message","farm","mailEnv"],S);P(J+"_complete_success",null,null,true);I="";});C.on("stat:feature_fail",function(S){if(!I){I=S.feature_group;}delete S.feature_group;P("feature_fail_"+I,["api","visible","bucketId","mailEnv"],S);});C.on("stat:webservice_fail",function(S){if(!I){I=S.feature_group;}delete S.feature_group;P("webservice_fail_"+I,["tae","message","farm","api","bucketId","visible","mailEnv"],S);});C.on("stat:feature_latency",function(T){J=T.feature_group;delete T.feature_group;var S=Q(["farm","message","mailEnv"],T);E.stat("feature_latency_"+J,S,"ms","duration",T.value);});};C.namespace("common.Util").ymmastats=new K();},"1.0.1");

YUI.add("common-ui-conv-listview",function(C){var U=C.namespace("common.ui"),c=C.Node,V=c.one,b=C.Object,E=C.common.Utils,N=E.log,H=21,K=c.getDOMNode,M="pageSize",A="pageCount",Z="-",L=".",T="page",F="list",Q="id",B="input",X="refresh",G="reload",d="requestSize",J="selected",P="subselected",O="#",W="selectionCount",R="getElementsByTagName",S;var a=function(Y){return function(){var f=this,e=arguments;C.use("common-ui-conv-listview-ext",function(){try{f[Y].apply(f,e);}catch(g){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-listview-conv-listview:1",g,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-listview-conv-listview:1");E.error.report("ConvView-ListExt error for API "+Y,g,1,1,1);}});};};function D(){this._lazyAddAttrs=false;D.superclass.constructor.apply(this,arguments);}C.mix(D,{NAME:"listview",ATTRS:{page:{value:0,validator:function(Y){return !((Y<0)||(Y>=this.get(A)));}},pageCount:{getter:function(){var Y=this;return Math.ceil(Y.get("model").get(F).length/Y.get(M))||1;}},pageSize:{value:100},entireElementChecks:{value:false},requestSize:{value:200},selectionCount:{setter:function(Y){if(Y>1){this.checkmode=1;}return Y;},getter:function(){return this.selCount();}},selectionType:{getter:function(){return this.selType();},value:"none"},selection:{getter:function(){return b.keys(this._sel);},setter:a("_setSelection")},subselection:{getter:function(){return this._subselIndex;}},focused:{value:false},activeItem:{value:null},isActive:{value:true},selectNew:{value:true},model:{valueFn:function(){return new I();},setter:function(Y){var e=this;e.detachAll();if(Y){Y.after(G,function(){e.set(T,0,{noupdate:1});e._clearSelect();e._sel={};e._sync(1);});Y.after(X,function(g){var h,f;e._ss=b.values(e._sel);if(g.requestSize){h=0;f=Math.min(e.stop(),g.requestSize);}else{h=e.start();f=e.get(d);}N({m:"Request mails",start:h,reqSize:f});e._model.request(h,f);});Y.after("listChange",a("_listchange"),e,1);}this._model=Y;return this._model;}},status:{setter:function(){if(this._parentNode){var Y=a("_setStatus");Y.apply(this,arguments);}}},showFocus:{value:false},selectVersion:{value:1},animateOnRemove:{value:0},expandOnClick:{value:false},cellHeight:{value:0}}});C.extend(D,C.Base,{LIST_CLASS_NAME:"list-view-items",ITEM_CLASS_NAME:"list-view-item",ITEM_MASTER_CLASS_NAME:"list-view-item-master",ITEM_DETAIL_CLASS_NAME:"list-view-item-detail",STATUS_CLASS_NAME:"list-view-status",PAGE_CLASS_NAME:"list-view-items-page",ITEM_SUBCONTAINER_CLASS_NAME:"list-view-item-subcontainer",ITEM_CONTAINER_CLASS_NAME:"list-view-item-container",IGNORE_FLAG:"flag",IGNORE_ICON:"icon",IGNORE_ARROW:"arrow",IGNORE_DELETE:"delete-msg",IGNORE_SRCH:"msg-lst-srch",EXPAND_CLASS_NAME:"arrow",RETRY_CLASS_NAME:"expansion_retry",IGNORE_CLASS_NAME_INFO:"info",IGNORE_UNREAD:"info-unread",CHECKBOX:"input",HEADER_CLASS_NAME:"list-header",STATUS_ROLE:"row",SELECTIONTYPENONE:"none",SELECTIONTYPEMAIN:"main",SELECTIONTYPESUB:"sub",SELECTIONTYPEMIXED:"mixed",initializer:function(Y){var e=this;e._bind();e._maxLength=0;e._guid=C.guid();e._sel={};e._subselIndex=-1;e.checkmode=0;e.set("expandOnClick",Y&&Y.expandOnClick?true:false);},render:function(k){var l=this,f=0,g=c.one(k),h=l.get("model").get(F),j=g.one(L+l.LIST_CLASS_NAME),Y=l.get(M),e=j.all("div"+L+l.ITEM_CLASS_NAME);e.each(function(i){i.set(Q,l._id(f++));});l._bindEvents(g);l._srcNode=j;l._parentNode=g;l._r=1;l._maxLength=Math.max(Y*H,j.get("offsetHeight"));if(!h[l.start()]){l._sync();}},scrollToTop:function(){this._srcNode.set("scrollTop",0);},pageUpOrDown:function(e){var Y=C.one(".list-view-items").get("offsetHeight");var f=this._srcNode.get("scrollTop");f=e?f-Y:f+Y;this._srcNode.set("scrollTop",f);},home:function(){this.set(T,0);},end:function(){this.set(T,this.get(A)-1);},next:function(){this.set(T,this.get(T)+1);},previous:function(){this.set(T,this.get(T)-1);},getTrueCountItems:function(){var e=this,Y=V(O+e._id(e.stop()-1));return Y?(e.stop()-e.start()):C.all("#inboxcontainer .list-view-item-master").size();},hasAllSelected:function(){var e=this,Y=NeoConfig.infiniteScroll?0:e.start();return e.checkmode&&(e.get(W)>=(e.stop()-Y));},getTrueEndItem:function(){var f=this,e,Y=V(O+f._id(f.stop()-1));if(!Y){e=C.all("#inboxcontainer .list-view-item-master");Y=e.item(e.size()-1);}return Y;},selectAll:function(f){var h=this,e=typeof f==="undefined"?1:f,g,Y;if(h.hasAllSelected()){e=0;}g=NeoConfig.infiniteScroll?0:h.start();Y=h.stop()-1;if(Y>=g){h._selectRange(g,e,Y);}return e;},selectSome:function(h){var k=this,Y=0,f,g=k._model.get(F),j=NeoConfig.infiniteScroll?0:k.start();k._clearSelect();var e={"isRead":["totalUnread",false],"isunRead":["totalUnread",true],"isFlagged":["totalFlagged",true],"isunFlagged":["totalFlagged",false]};for(Y=j;Y<k.stop();Y++){if(!!g[Y]&&!!g[Y][e[h][0]]===e[h][1]){if(NeoConfig.infiniteScroll){k._sel[Y]=g[Y];}else{k._selectByIndex(Y,1,null,1,0,1);}}}f=k.selCount();k.set(W,f);if(NeoConfig.infiniteScroll){if(f){k.checkmode=1;}k.sync();}},selCount:function(){var Y,e=0;for(Y in this._sel){e++;}return e;},selType:function(){var Y,f=this,e=f.SELECTIONTYPENONE;for(Y in this._sel){e=f._isSubindex(f._toIndexN(Y))?(e===f.SELECTIONTYPEMAIN?f.SELECTIONTYPEMIXED:f.SELECTIONTYPESUB):(e===f.SELECTIONTYPESUB?f.SELECTIONTYPEMIXED:f.SELECTIONTYPEMAIN);}return e;},getItemEl:function(Y){return V(O+this._id(Y));},traverse:function(f){var i=this,e,h,g=V(L+i.LIST_CLASS_NAME),Y=g.all("div"+L+i.ITEM_CLASS_NAME);Y.each(function(j){e=i._getIndexN(j);h=i._model.get(F)[e];f&&f(j,h,e);});},_setSelected:function(){},_renderItem:function(Y){return Y+"";},_showSubitems:function(){},_renderSubitem:function(){},_focusItem:function(Y){Y.focus();},_id:function(Y){return this._guid+Z+(typeof Y==="object"?Y.join(Z):Y);},_idSub:function(e,Y){return e+Z+Y;},start:function(){var Y=this;return Y.get(T)*Y.get(M);},stop:function(){var Y=this;return Math.min(Y.start()+Y.get(M),Y._model.get(F).length);},refresh:function(e){if(this._parentNode){var Y=this.get("model");
if(e){Y.refresh();}else{Y.reload();}}},sync:function(){this._sync();},renderPage:a("_renderPage"),_renderVisiblePages:a("_renderVisiblePages"),resetFocus:function(){var Y=this;Y.setAttrs({activeItem:null,focused:false});Y._clearSelect();Y.fire("lv:resetFocus");},_bind:function(){var Y=this;Y.after("pageChange",function(f){if(f.details&&!f.details[0].noupdate){if(NeoConfig.infiniteScroll){Y._appendConversations(Y.start(),Y.stop());}else{Y._sel={};Y._lastSS=Y._lastSel=0;Y._sync(0,f.newVal-f.prevVal);}}},Y);},_appendConversations:a("_appendConversations"),_keydown:a("_keydown"),_isCheckboxBorder:a("_isCheckboxBorder"),_sync:a("_sync"),_blur:a("_blur"),_selectRange:a("_selectRange"),_expandItem:a("_expandItem"),_resetSelection:a("resetSelection"),getCurrentPage:a("getCurrentPage"),_getListItem:function(i,f){var j=this,h=i.target?i.target:i,Y,g;g=h.ancestor(function(e){if(!f&&(e.hasClass(j.IGNORE_ARROW)||e.hasClass(j.IGNORE_FLAG)||e.hasClass(j.IGNORE_DELETE)||e.hasClass(j.IGNORE_SRCH)||e.hasClass(j.IGNORE_CLASS_NAME_INFO)||e.hasClass(j.IGNORE_UNREAD))){Y=1;}return(e.hasClass(j.ITEM_CLASS_NAME)&&!e.hasClass(j.HEADER_CLASS_NAME))||Y;},true);return Y?0:g;},_getIndexN:function(h){var g=h.get(Q).split(Z),f=1*g.pop(),e=g.pop(),i=g.pop();var Y=i?[1*e,f]:f;return Y;},_toIndexS:function(Y){return(typeof Y==="object"?Y.join(Z):Y.toString());},_toIndexN:function(Y){var e=Y.split(Z);return(e.length===1?e[0]:[e[0],e[1]]);},_formatIndexS:function(Y,e){return(Y+Z+e);},_getIndexS:function(Y){var e=this;return e._toIndexS(e._getIndexN(Y));},_isSubindex:function(Y){return(typeof Y==="object");},_getSubindex:function(Y){return(typeof Y==="object")?Y[1]:-1;},_getMainindex:function(Y){return(typeof Y==="object")?Y[0]:Y;},_getItemContainer:function(Y){var e=this;return Y.ancestor(function(g){var f=g.hasClass(e.ITEM_CONTAINER_CLASS_NAME);return f;});},_getMasterItem:function(f){var g=this,Y=null,e;e=g._getItemContainer(f);if(e){Y=e.one(L+g.ITEM_MASTER_CLASS_NAME);}return Y;},_getSubitemContainer:function(e){var Y,f=this;Y=f._getItemContainer(e);if(Y){Y=Y.one("."+f.ITEM_SUBCONTAINER_CLASS_NAME);}return Y;},_getNeighborMasterItem:function(g,f){var Y,h=this,e=h._getIndexN(g);Y=h._getItemContainer(g);if(Y){Y=f?h.getItemEl(e+1):h.getItemEl(e-1);}return Y;},_getEndDetailItem:function(f,h,g){var i=this,Y,e;Y=i._getItemContainer(f).all(L+i.ITEM_DETAIL_CLASS_NAME);if(Y){e=Y.item(h?0:Y.size()-1);if(e&&(g||e.get("parentNode").getStyle("display")!=="none")){return e;}}return null;},_getNodeType:function(Y){var e=this;return(e._isSubindex(e._getIndexN(Y))?e.SELECTIONTYPESUB:e.SELECTIONTYPEMAIN);},_selectToRender:function(){var h=this,Y,g,f={};for(var e in h._sel){Y=h._toIndexN(e);g=-1;if(h._isSubindex(Y)){g=Y[1];Y=Y[0];}if(!f[Y]){f[Y]=[];}f[Y].push(g);}return f;},_checkbox:function(h){var f=h.target||h,g,Y=NeoConfig.hoverPreview?false:f.hasClass("info");if((f.hasClass("cbox")||f.get("parentNode").hasClass("cbox")||Y||(f.hasClass("fixed")&&f.hasClass("start"))||(f.get("type")||"").toLowerCase()==="checkbox")||this._isCheckboxBorder(h)){g=K(f).parentNode[R](B);if(g&&g.length>0){return{state:g[0].checked};}}},_isTextField:function(f){var Y=f.target||f;if(Y.get("type")&&Y.get("type")==="text"){return true;}},_entireElementCheck:function(h){if(this.get("entireElementChecks")){var g,i=this,Y=h.target||h;var f=Y.ancestor(function(e){return e.hasClass(i.ITEM_CLASS_NAME);},true);if(f){g=K(f)[R](B);if(g){return{state:g[0].checked};}}}},_showSelectedItem:function(e,f){var h=this,Y,g=f?"addClass":"removeClass";e[g](J);if(!h._isSubindex(h._getIndexN(e))){Y=h._getItemContainer(e);Y[g](P);Y.all(L+h.ITEM_DETAIL_CLASS_NAME).each(function(i){i[g](P);});}},_select:function(f,Y,g,h,n,o){var k=this,p,m,j,e,l=k.selCount();if(f){var i=k.getItemEl(k._getIndexN(f));if(i&&f!==i){f=i;}j=k._getIndexN(f);e=k._toIndexS(j);if(!g||(g&&g.compareTo(f))){if(C.one("#"+f.get("id"))){k._showSelectedItem(f,Y);f.set("aria-selected",(Y?true:false));if(l===1&&Y&&n){m=(K(C.Node.one(O+k._id(k.get("selection")[0])))[R](B));if(m){m[0].checked=Y;}}if((l>=1)||h){m=(K(f)[R](B));if(m){m[0].checked=Y;k.checkmode=(l>1)?1:Y;k._lastSel&&Y&&((K(k._lastSel).getElementsByTagName(B))[0].checked=1);}}}if(Y){p=k._model.valueAt(j);p&&(k._sel[e]=p);}else{delete k._sel[e];}o||k.set(W,k.selCount());}else{k._selectRange(f,Y,g);}}},_selectByIndex:function(e,j,Y,f,i,h){var k=this,g;if(j){g=k._model.get(F)[e];g&&(k._sel[e]=g);}else{delete k._sel[e];}this._select(this.getItemEl(e),j,Y,f,i,h);},_clearSelect:function(e){var f=this,Y=f.selCount();if(Y&&!e){if(Y===1&&f._lastSel){f._select(f._lastSel,0);}else{f.selectAll(0);}}f.checkmode=0;f._lastSel=f._lastSS=0;f._sel={};Y&&f.set(W,f.selCount());},_clearSubselect:function(){var Y,e,f=this;for(Y in this._sel){e=f._toIndexN(Y);if(f._isSubindex(e)){f._select(V(O+f._id(e)),0);delete f._sel[Y];}}},_adjustShiftSelection:function(g,j){var k=this,i,e,f,h,Y;if(j){i=k._getNodeType(j);e=k._getNodeType(g);h=k._getMasterItem(g);f=k._getMasterItem(j);if(i===k.SELECTIONTYPEMAIN){g=h;}else{Y=k._getItemContainer(j).all(L+k.ITEM_DETAIL_CLASS_NAME);if(Y){g=Y.item((k._getIndexN(f)>k._getIndexN(h))?0:Y.size()-1);}}}return g;},_onSelect:function(o){var k=this,h=o.which===3?k._getListItem(o,true):k._getListItem(o),s=k._checkbox(o)||k._entireElementCheck(o),f,m,l,n,Y,j,t,i,q=o.type,r=(o.metaKey||o.ctrlKey),p=o.shiftKey;if(!h){return;}m=k._getIndexN(h);if(k._isSubindex(m)){l=k._getSubindex(m);h=k._getMasterItem(h);}j=k.SELECTIONTYPEMAIN;i=h.hasClass(J);function g(){var u,e;e=u=false;if(h){if(r){f=!i;}else{f=s?!s.state:1;}if(f&&(!r&&!p)&&(!s||!k.checkmode)){if(f===1&&k._sel[k._getIndexS(h)]&&k.selCount()===1&&!K(h)[R](B)[0].checked){e=true;}else{k._clearSelect();u=true;}}k.set("showFocus",false);if(p){k._lastSel=f?h:0;k._select(h,1,k._lastSS,1,0,1);k.set(W,k.selCount());}else{k._lastSel=0;if(!e){k._select(h,f,0,s||(o.button>1),r,1);if(!C.Lang.isUndefined(l)){k._subselIndex=l;}k.set(W,k.selCount());}else{if(k.selCount()===1&&!C.Lang.isUndefined(l)){k._subselIndex=l;k.fire("subselect");
}}k._lastSel=f?h:0;k._focusItem(h);k._subselIndex=-1;}if(((k.selCount()===1)||!p)&&f){k._lastSS=h;}k.setAttrs({activeItem:h||null,focused:1});o.preventDefault();if(s||r||p){n=k._model.isCollapsible(k._model.valueAt(m));C.fire("mt:click",{action:j===k.SELECTIONTYPEMAIN?(n?"click_select_thrd":"click_select"):"click_select_thrd_msg",append:{ltxt:[f,",",p,",",r,",",k.selCount()].join("")}});}}}if((q==="mousedown")&&(S=!i)){g();}if(q==="mouseup"&&!S&&i&&o.button<2){g();}if(q==="click"||q==="dblclick"){if(i){if(!s&&!r&&!p){t=k._model.valueAt(m);n=k._model.isCollapsible(t);Y=k._isSubindex(m);k.fire("command",{e:o,index:Y?k._getSubindex(m):k._getMainindex(m),subindex:Y?k._getSubindex(m):-1,mainindex:k._getMainindex(m),item:t});}}o.preventDefault();}},_bindEvents:function(e){var Y=this;e.on("mousedown",this._onSelect,Y);e.on("mouseup",this._onSelect,Y);e.on("click",this._onSelect,Y);e.on("dblclick",this._onSelect,Y);e.on("keydown",function(){Y._keydown.apply(Y,arguments);});e.on("focus",function(f){Y.setAttrs({activeItem:(Y._getListItem(f,1)||null),focused:true});});e.on("blur",function(){Y._blur.apply(Y,arguments);Y.setAttrs({focused:false});});Y.after("showFocusChange",function(f){V(L+Y.LIST_CLASS_NAME)[(f.newVal?"addClass":"removeClass")]("showfocus");});}});function I(){this._lazyAddAttrs=0;I.superclass.constructor.apply(this,arguments);}C.mix(I,{NAME:"listmodel",ATTRS:{KEY:{value:"id"},SUBKEY:{value:"subid"},list:{value:[]},length:{setter:function(Y){this.get(F).length=Y;},getter:function(){return this.get(F).length;}}}});C.extend(I,C.Base,{NAME:"listmodel",valueAt:function(Y){var e=this.get(F);if(typeof Y==="string"){var f=Y.split(Z);Y=(f.length===1)?f[0]:[f[0],f[1]];}if(typeof Y==="object"){return(this.getSubitem(e[Y[0]],Y[1]));}else{return e[Y];}},setRange:a("setRange"),update:a("update"),remove:a("remove"),reverse:a("reverse"),indexesOf:a("indexesOf"),refresh:function(){var Y=this;Y.fire(X);Y._refresh=1;},reload:function(){var Y=this;Y.set("length",0);Y.fire(G);}});U.ConvListModel=I;U.ConvListView=D;},"1.0.0",{requires:["base-base","node","event-focus"]});

YUI.add("mail-ui-maillist",function(B){var D=B.common.Utils,O=D.escapeHtml,R=D.unescapeHtml,I=B.mail.ui.common.StringUtils,V=B.mail.ui.Accounts,H=B.mail.Controller,U=H.Folders,L=B.common.persist.UserData,J="userUIPref.defaultSortOrder",E=["externalAccounts","aliases","disposableAddresses"],P=E.length,K,S,F="date",N=(24*60*60*1000),C=new Date(),A=C.getTime(),T=C.setHours(0,0,0,0),X=C.setHours(23,59,59,999),G=X-A+1,W=T-N*6,M=function(){K=V.buildAccountList();};for(S=0;S<P;++S){L.after("knownAddress|"+E[S]+"Change",M);}var Q=function(Y){var a=this;a._requests=[];Y=Y||{};a.evt=[];a.folderIDSortCol={};a.listAPIObj={};function Z(){Q.superclass.constructor.call(a);function b(){a.dateResetHandle.cancel();C=new Date();A=C.getTime();T=C.setHours(0,0,0,0);X=C.setHours(23,59,59,999);G=X-A+1;W=T-N*6;a.dateResetHandle=B.Lang.later(G,a,b);a.refresh();}a.dateResetHandle=B.Lang.later(G,a,b);}Z();};B.extend(Q,B.common.ui.ContentWidget);B.mix(Q.prototype,{getColorIndicator:function(Z,a){var Y=Z||a;K=K||V.buildAccountList();return(Y&&K[Y])?K[Y]:"";},getFolder:function(Z){var Y=this;U.get(Y.fid,{success:function(b){var a=b.folderInfo;if(!a.localizedName){a.localizedName=I.getSystemFolderName(a.fid,a.name,B.Lang.isObject(Y.extraParams));}Z(b);}});},getFolderNameBidi:function(b,Z,a,Y){if(typeof b==="undefined"){return"";}if(typeof Y==="undefined"){Y=strings.str_tog_loadRTLCss?"rtl":"ltr";}if(typeof Z==="undefined"){Z=NeoConfig.bidi&&B.Intl.detectDirection?B.Intl.detectDirection(b,Y):"";}b=((Z==="rtl")?"\u202B":"\u202A")+b+"\u202C";b+=(Y==="rtl")?"\u200F":"\u200E";if(typeof a!=="undefined"){b='<span dir="'+Z+'">'+b+"</span>";}return b;},updateTitle:function(){var Y=this;Y.getFolder(function(Z){var a=Z.folderInfo.localizedName;Y.set("title",a);},true);},setLabel:function(){var Y=this;Y.getFolder(function(Z){Y.parentNode.one(".list-view").set("aria-label",Z.folderInfo.localizedName);},false);},setFocusNodeAttr:function(Y){this.set("focusNode",Y);return Y;},removeSelection:function(){var Z=this,Y=Z._listview;if(Y){Z.setFocusNodeAttr(Y.getItemEl(Y.start()));Y.set("selection",0);}else{if(!NeoConfig.previewPanePref){Z._listview.clearSelection(0,1,1);}}},formatFromName:function(b,a,f){var e=this,d=strings.str_cfg_tog_show_contact_name&&B.contacts&&B.contacts.utils,Y,c,Z={nameDir:""};if(e.fid==="Draft"||e.fid==="Sent"){if(b){c=b;Z.nameDir=a?a:(NeoConfig.bidi&&B.Intl.detectDirection?B.Intl.detectDirection(c):"");}}else{Y=f.name?f.name:f.email;c=d?B.contacts.utils.getShownContactName(f):Y;if(NeoConfig.bidi){if(B.Intl.detectDirection&&c){Z.nameDir=B.Intl.detectDirection(c);}else{if(f.nameDir){Z.nameDir=f.nameDir;}}}}Z.name=c?O(R(c)):" ";return Z;},initAttrs:function(Y){var a=this,Z={selectCount:{getter:function(){return(a._listview)?a._listview.getSelectCount():0;}},selectType:{getter:function(){return(a._listview&&a.listview.getSelectType?a._listview.getSelectType():null);}},fid:{setter:a.setFid},extraParams:{setter:a.setExtraParams},title:{value:a.title},fullpane:{setter:a.setFullpane},vertical:{value:Y.vertical},view:{getter:function(){return(a._listview);}},sortInfo:{getter:function(){return a.sortedColumn;}},page:{getter:function(){return(a._listview?a._listview.get("page"):-1);}},pageCount:{getter:function(){return(a._listview?a._listview.get("pageCount"):-1);}}};a.addAttrs(Z);},setExtraParams:function(Y){var Z=this;Z.extraParams=Y;},reset:function(){var Y=this;Y.folder=null;Y.cancelRequests();NeoConfig.msgrData={reply:{},spam:{spims:[]},message:null};},cancelRequests:function(){for(var Y=0;Y<this._requests.length;Y++){this._requests[Y].abort();}this._requests.length=0;this.sorting=0;},refresh:function(){var Y=this;Y._listview.setStatus(strings[(Y.fid==="%40C%40Chats")?(NeoConfig.hasConv?"str_msg_list_loading_ims":"str_msg_list_loading_conversation"):"str_msg_list_loading"]);Y._listview.refresh();},restoreSortOrder:function(){var Z=this,Y=Z.folderIDSortCol;Z.sortedColumn=Y[Z.fid];if(!Z.sortedColumn){Z.sortedColumn=Z.columns.date;Z.sortedColumn.action=F;}Z.sortedColumn.sortOrder=(D.isEmpty(Y)?L.get(J):0)||Z.sortedColumn.sortOrder;Z.showSortOrder();},showSortOrder:function(){},setFullpane:function(Y){var Z=this;if(Y){Z.rootNode.addClass("inbox-fullpane");Z.rootNode.setStyles({width:"auto",height:"auto"});}else{B.use("common-persist-cookie-data",function(d){var b=d.common.persist.getCookie(),c,a=Z.get("vertical");if(a){c=b.get("pos.h2slider");c=c&&c.substr(1);c=Math.max((c?c:NeoConfig.vertPane?330:630),0);Z.rootNode.setStyles({width:c,height:"auto"});}else{c=b.get("pos.vslider");Z.rootNode.removeClass("inbox-fullpane");c=Math.max((c?c:148),0);Z.rootNode.setStyles({height:c,width:"auto"});}});}},handleDarlaEvent:function(b,a){var d=this,c=a?{Inbox:"scroll_inbox","%40C%40Chats":"scroll_inbox",Draft:"scroll_draft",Sent:"scroll_sent",Trash:"scroll_trash","%40B%40Bulk":"scroll_spam"}:{Inbox:"folderview_inbox","%40C%40Chats":"folderview_chat",Draft:"folderview_draft",Sent:"folderview_sent",Trash:"folderview_trash","%40B%40Bulk":"folderview_bulk"},Y,Z=b||(d.folder&&d.folder.total===0);Y=c[d.fid]||(a?"scroll_folder":"folderview_custom");d.fire("darlaEvent",{action:(Z&&!a)?Y+"_empty":Y});},bindInfiniteScroll:function(){var e=this,Z,c,b,a,Y,d=e.rootNode.one(".list-view-items");e.page=1;e.prevY=0;e.debouncedFn=D.debounce(function(){Y=e._listview.get("cellHeight");if(NeoConfig.adOpt){Z=Math.floor(d.get("offsetHeight")/2);b=Y*10;a=Y*20;c=Z>b?(Z>a?a:Z):b;}else{c=Y*25;}if(Math.abs(e.prevY-e.scrollTop)>c){e.rotateAds(e.scrollTop-e.prevY>0);e.prevY=e.scrollTop;}},200);e.throttleListScroll=B.throttle(function(f){e.onListScroll(f);},300);e.infiniteScrollHandlers.push(e.rootNode.one(".inf-scroll-top").on("click",function(){e._listview.scrollToTop();B.fire("mt:click",{action:"scroll_to_top"});e.handleDarlaEvent(false);}));B.on("update:density",e.updateDensity,e);e.infiniteScrollHandlers.push(d.on("scroll",function(f){e.throttleListScroll(f);e.debouncedFn();}));},onListScroll:function(c){var f=this,b=c.currentTarget,a=b.get("scrollTop"),Z=b.get("offsetHeight"),d=((a+Z)/b.get("scrollHeight"))*100,Y=f._listview.getCurrentPage(a)||1;
f.scrollTop=a;if(Y!==f.page){f.updatePage(Y);f.page=Y;}f.toggleScrollTopBtn(a);if(a===0&&f.infScrollMsgCount){f.fire("infiniteScroll:checkMail");}if(d>=70){f.loadNextPage();}},updateDensity:function(){var Z=this,Y=B.one("#inboxcontainer").hasClass("vp");Z._listview.set("cellHeight",Y?(B.mail.persist.MetaData.get("neo.pref.general.snippets")!=="-1"?NeoConfig.vertPaneCellHeight[1]:NeoConfig.vertPaneCellHeight[0]):NeoConfig.cellHeight[NeoConfig.msgListDensity]);Z.updatePage();Z._listview._renderVisiblePages();},toggleScrollTopBtn:function(Y){if(Y>0){this.rootNode.one(".icon-back-to-top").removeClass("hidden");}else{this.rootNode.one(".icon-back-to-top").addClass("hidden");}},rotateAds:function(){var Y=this;Y.handleDarlaEvent(false);B.fire("mbEvent",{action:"rotate",source:"scroll"});B.fire("rotateD2S");},loadNextPage:function(){var Y=this;if(!Y._listview.get("freeze")){Y._listview.set("freeze",1);Y._listview.next();}},updatePage:function(Z){var f=this,a=f.rootNode,b=f._listview,Y=b.get("cellHeight"),c=b.get("pageSize")*Y,e,d;if(!Z){Z=b.getCurrentPage(a.one(".list-view-items").get("scrollTop"))||1;}e=a.all(".list-view-items-page");d=e.size()-1;e.each(function(h,g){if((g>=Z-1&&g<=Z+1)||h.one(".expanded")){if(!h.one(".list-view-item-container")){f._listview.renderPage(g);h.setStyle("height","auto");}}else{h.set("innerHTML","");if(g===d){h.setStyle("height",h.get("children").size()*Y+"px");}else{h.setStyle("height",c+"px");}}});},detachInfiniteScrollEvents:function(){var Z=this,Y=Z.infiniteScrollHandlers.length;while(Y--){Z.infiniteScrollHandlers[Y].detach();}Z.infiniteScrollHandlers=[];}},true);B.mail.ui.MailList=Q;},"1.0.0",{requires:["common-ui-contentwidget","mail-controller-folders","common-persist-user-data","mail-ui-common-string-utils","mail-ui-accounts","mail-model-datastore","rocket-stats","io","yui-throttle"]});

YUI.add("mail-ui-conv-maillist-view",function(C){var D=C.namespace("mail.ui"),A=10;function B(E){var F=this;F.listObj=E.listObj;B.superclass.constructor.apply(this,arguments);}C.extend(B,C.common.ui.ConvListView,{_renderItem:function(H,E,G,J,F){var I=this;return I.listObj.renderItem(H,E,G,J,F);},_focusItem:function(E,H){var G=this;var F=G.listObj.setFocusNodeAttr(E);if(F&&!H){F.focus();}},_showSubitems:function(E,F){var G=this;return G.listObj.showSubitems(E,null,F);},_renderSubitems:function(F,E){var G=this;return G.listObj.renderSubitems(F,E);},_renderSubitem:function(G,E,F,I){var H=this;return H.listObj.renderSubitem(G,E,F,I);},getSelected:function(L,I,U,F){var P=this,O=P.get("selection"),R=O.length,Q=O.length,N=[],E=[],V={},H={},S,G,K,J,M=false,W=P._model.get("KEY"),T=P._model.get("SUBKEY");while(Q--){S=P._model.valueAt(O[Q]);if(S){K=P.listObj.isSubitem(S);M=M||K;J=K?T:W;E.push(S[J]);V[S[J]]=S;H[S[J]]=O[Q];}}if((R===1)&&U&&F&&!NeoConfig.noCache){G=parseInt(P._getMainindex(P._toIndexN(O[0])),A);U(P._model.get("list"),G,N,F);}L({arr:E,map:V,neighbors:N,selmap:H});},isSelectedThread:function(){var H=this,F=H.get("selection"),E,G;if(F.length>=1){E=H._model.valueAt(F[0]);G=(E&&E.totalMsgs>1)?true:false;}else{G=false;}return G;},setStatus:function(E){var F=this;F.set("status",E);},setLength:function(E){var F=this;F._model.set("length",E);},refreshBody:function(){var E=this;E.sync();},updateUlSize:function(){},updateItemByIndex:function(E){var H=this,G=false,F;F=H.getItemEl(E);if(F){G=F.get("parentNode").hasClass("expanded")?true:false;}H._model.update(E,H.listObj._listmodel.valueAt(E),G);},getSelectClass:function(){return"";},getSelectCount:function(){var E=this;return E.get("selectionCount");},getSelectType:function(){var E=this;return E.get("selectionType");},reverse:function(E){var F=this;F._model.reverse();if(!F.get("selectionCount")){if(E){F.end();}else{F.home();}}},toggleScrollPos:function(){var E=this;E.end();},setScrollByIndex:function(){},getItem:function(F){var G=this;var E=G.listObj._listmodel.valueAt(G._getIndexN(G._getListItem(F,1)));return E;},setItems:function(H,E,F){var G=this;G._model.set("length",F);G._model.setRange(H,E);},selectLastSingle:function(){var E=this;return{item:E._model.valueAt(E.get("selection").pop())};},clear:function(F,H,E){var G=this;if(E){G._model.get("list").length=0;}else{G._model.reload();}},clearSelection:function(){},setSelected:function(I,E){var H=this,G={},F=H._model.get(E?"SUBKEY":"KEY");G[F]=I;H._model.indexesOf(G,E,function(J){H.set("selection",J);});},removeByKey:function(H,E){var I=this,G=I._model.get(E?"SUBKEY":"KEY"),F=[];C.Array.each(H,function(J){var K={};K[G]=J;F.push(K);});I._model.indexesOf(F,E,function(J){C.common.Utils.traceMsg("removing indexes from model, count "+C.Object.keys(J).length);I._model.remove(J);});}});D.ConvMailListView=B;},"1.0.0",{requires:["common-ui-conv-listview"]});

YUI.add("mail-ui-listview-controls",function(A){var F=A.common.Utils,E=F.substitute,J=A.ui.Templates,D=A.Plugin.Menu;var G="_shared_module_offscreen_bin_menus_message_list_sortby",B="_shared_module_offscreen_bin_menus_message_list_cbox_select",H="up",I={"SearchList":["flagged","unRead","conv"],"ConversationList":["sender","recipient","conv","subject","relevance"],"MessageList":["conv","relevance"],"MessageListTo":["conv","sender","relevance"],"list":["conv","recipient","relevance"],"listTo":["conv","sender","relevance"]};var C=function(L,M,K){var N=this;N.list=M;N.type=K;N.node=L;N.template=null;};A.mix(C.prototype,{setup:function(){var L=this;try{return L["_"+L.type+"Setup"].apply(L,arguments);}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-maillist-base-listview-controls:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-maillist-base-listview-controls:1");}return false;},_paginationSetup:function(L){var M=this,K=M.list.get("view");if(L){M.template=L;}if(K){K.after("renderComplete",A.bind(M._pageChange,M));K.after("updatePagination",A.bind(M._pageChange,M));}M._pageChange(false);return true;},_pageFooterSetup:function(L){var M=this,K=M.list.get("view");if(L){M.template=L;}if(K){K.after("renderComplete",A.bind(M._nextPage,M));K.after("updatePagination",A.bind(M._nextPage,M));}M._nextPage(false);return true;},_sortoptionsSetup:function(K,L){var M=this;if(K){M.template=K;}M._handleSortMenu(L);},_handleSortMenu:function(K){var L=this;L.node.addClass("pressed");L.createMenuFor(G,L.node,"#menu-ml-sortby",{},function(){var M=L.node.menu.getMenuNode();L.updateSortMenu(K);M.on("menuSelected",function(P){var Q=P.dataAction,O=L.list,N=M.one("li.sortby");A.fire("mt:click",{action:"msglist_sortMnu",append:{ltxt:Q}});O.fire("sortList",{sortType:Q,targetNode:P.item.get("parentNode"),currentSortedColumn:N});});M.after("menu:state",function(O){var N=O.state;if(N==="hide"){L.node.removeClass("pressed");L.node.unplug(A.Plugin.Menu);this.destroy(true);}});});},updateSortInViewMenu:function(O,K){var N=this,R=N.list.NAME,L=O.hasClass("optionMenu")?O:O.ancestor("#menu-conv-view"),M=L.all(".sortby-group a"),P=L.one(".sortby-group .sortby"),Q,U,S,T;if(R==="MessageList"&&K&&(K==="Sent"||K==="Draft")){R="MessageListTo";}else{if(R==="SearchList"){T={"Sent":true,"Draft":true,"%40C%40Chats":true};if(N.list.get("data").type==="list"){R=(T[N.list.get("fid")])?"listTo":"list";}}}S=I[R],Q=N.list.get("sortInfo");U=L.one('a[data-action="'+Q.action+'"]').get("parentNode");if(P){P.removeClass("sortby").removeClass("asc").removeClass("desc").removeAttribute("aria-sort");P.one("b").removeClass("icon-chevron-down").removeClass("icon-chevron-up");P.one("i.icon-checkmark").removeClass("icon-checkmark");}U.one("i.icon").addClass("icon-checkmark");U.one("b").removeClass("icon-chevron-down").removeClass("icon-chevron-up");U.addClass("sortby "+(Q.sortOrder===H?"asc":"desc"));U.one("b").addClass(Q.sortOrder===H?"icon-chevron-up":"icon-chevron-down");U.setAttribute("aria-sort",(Q.sortOrder===H?"ascending":"descending"));M.each(function(W){var V=W.get("parentNode"),X=W.getAttribute("data-action");A.Array.indexOf(S,X)>=0?V.hide():V.show();});},updateSortMenu:function(K){var N=this,Q=N.list.NAME,L=N.node.menu.getMenuNode(),M=L.all("a"),O=L.one(".sortby"),P,T,R,S;if(Q==="MessageList"&&K&&(K==="Sent"||K==="Draft")){Q="MessageListTo";}else{if(Q==="SearchList"){S={"Sent":true,"Draft":true,"%40C%40Chats":true};if(N.list.get("data").type==="list"){Q=(S[N.list.get("fid")])?"listTo":"list";}}}R=I[Q],P=N.list.get("sortInfo");T=L.one('a[data-action="'+P.action+'"]').get("parentNode");if(O){O.removeClass("sortby").removeClass("asc").removeClass("desc").removeAttribute("aria-sort");}T.addClass("sortby "+(P.sortOrder===H?"asc":"desc"));T.setAttribute("aria-sort",(P.sortOrder===H?"ascending":"descending"));M.each(function(V){var U=V.get("parentNode"),W=V.getAttribute("data-action");A.Array.indexOf(R,W)>=0?U.hide():U.show();});},_selectoptionsSetup:function(K){var L=this;if(K){L.template=K;}L._handleSelectMenu();},_handleSelectMenu:function(){var K=this;K.node.get("parentNode").addClass("pressed");K.createMenuFor(B,K.node,"#menu-ml-cbox",{},function(){var L=A.one("#menu-ml-cbox");L.on("menuSelected",function(M){var N=M.dataAction;K.list.fire("selectMessages",{action:N});},K);L.after("menu:state",function(N){var M=N.state;if(M==="hide"){K.node.get("parentNode").removeClass("pressed");K.node.unplug(A.Plugin.Menu);this.destroy(true);}});});},createMenuFor:function(O,K,N,M,P,L){L=L||{};A.use("common-ui-menu-helper",O,function(T){var S=T.common.ui.MenuHelper,R=E(J[O].base,null,L,null,strings),Q;if(T.Lang.isString(N)){N=T.one(N);}if(!N){N=R;}if(M&&M.loading){Q=M.loading.node?M.loading.node:N;S.createLoadingMenu(Q);}S.create(K,{menu:N},P);});},_nextPage:function(T){var N,O=this,K=O.node,R,S=O.template;if(T&&(!(N=K.get("parentNode"))||!(N.get("parentNode")))){return;}A.one(".list-view-items").appendChild(E(S.footer_wrapper,0,0,0,strings));K=A.one(".pagination-footer");var P=O.list.get("page")+1,Q=O.list.get("pageCount"),M=(P===Q),L={class_disabled_next:(P===Q)?" disabled":" enabled",class_disabled_first:(P===1)?" disabled":" enabled",aria_disabled:M?"true":"false"};K.setContent(E(NeoConfig.infiniteScroll?S.infinite_scroll_footer:S.pagination_footer,L,0,0,strings));if(NeoConfig.pagedResults||NeoConfig.infiniteScroll){K.detach("click");K.on("click",function(Y){var U=F.getDataAction(Y),X,Z,V;V=U.action;if(V.indexOf("-page")!==-1){V=V.substr(0,V.indexOf("-page"));}if(V){X=Y.target.ancestor(function(a){return a.get("tagName").toLowerCase()==="span";},true);if(X&&!X.hasClass("disabled")){Z=A.config.win||window;Z.scrollTo(0,0);}if(A.Lang.isNull(Y.target.ancestor(".disabled"))){O.list.fire("pageAction",{args:{action:V}});var W=Y.target.ancestor(".list-view-footer")||Y.target.ancestor(".pagination-footer");if(NeoConfig.infiniteScroll&&X&&X.get("id")==="btn-load-more"){R="load_more";
}else{R="nav_"+V+(W?"_btm":"");}A.fire("mt:click",{action:R});}}Y.preventDefault();Y.stopPropagation();});}},_pageChange:function(T){var M,N=this,K=N.node,S=N.template;if(!K){return;}if(T&&(!(M=K.get("parentNode"))||!(M.get("parentNode")))){return;}var P=N.list.get("page")+1,R=N.list.get("pageCount"),O=(P===1),Q=(P===R),L={first_class_disabled:O?" disabled":" enabled",first_aria_disabled:O?"true":"false",current:P,total:R,last_class_disabled:Q?" disabled":" enabled",last_aria_disabled:Q?"true":"false"};if(K.one("#btn-ml-count")&&K.one("#btn-ml-count").menu){K.one("#btn-ml-count").unplug(D);}K.setContent(E(S.pagination_inner,L,0,0,strings));K.detach("dblclick");K.on("dblclick",function(U){if(U.target.ancestor(".pagination-count")){A.use("mail-common-inline-edit",function(V){V.log("Enabling Editable Pagination control for Message View toolbars");var W=new V.mail.common.EditablePaginationControl(K,{setPage:function(Y){N.list.fire("pageAction",{args:{action:"page",val:Y}});},getPageTotal:function(){return N.list.get("pageCount");},getCurrentPage:function(){return N.list.get("page");}},U);W.enableEditablePagination(U);var X=U.target.ancestor(".list-view-footer")||U.target.ancestor(".pagination-footer");A.fire("mt:click",{action:"nav_page"+(X?"_btm":"")});});}U.stopPropagation();});if(NeoConfig.pagedResults){K.detach("click");K.on("click",N._arrowClick,N);K.on("keydown",function(U){if(U.keyCode===13){N._arrowClick(U);}},N);}},_arrowClick:function(P){var R=this,L=F.getDataAction(P),K=R.list.folder,O,Q,M;M=L.action;if(M.indexOf("-page")!==-1){M=M.substr(0,M.indexOf("-page"));}if(M){O=P.target.ancestor(function(S){return S.get("tagName").toLowerCase()==="span";},true);if(O&&!O.hasClass("disabled")){Q=A.config.win||window;Q.scrollTo(0,0);}if(A.Lang.isNull(P.target.ancestor(".disabled"))){F.rocketstats.stat("listview","pagination:"+(K&&K.isSystem?"system:":"custom:")+M);R.list.fire("pageAction",{args:{action:M}});var N=P.target.ancestor(".list-view-footer")||P.target.ancestor(".pagination-footer");A.fire("mt:click",{action:"nav_"+M+(N?"_btm":"")});}}P.preventDefault();P.stopPropagation();},_handleMenu:function(){}});A.mail.ui.ListViewControls=C;},"1.0.0",{requires:[]});

YUI.add("mail-ui-conv-maillist-model",function(B){var C=B.namespace("mail.ui");function A(D){var E=this;E.listObj=D.listObj;A.superclass.constructor.apply(this,arguments);}B.extend(A,B.common.ui.ConvListModel,{request:function(F,D){var E=this;E.requestItems(F,D,function(I,H,G){E.set("length",G);E.setRange(I,H);E.fire("MailListModel:data",{data:H});});},requestItems:function(H,F,D,E){var G=this;G.listObj.requestItems(H,F,D,E);},getSubitem:function(E,D){var F=this;return F.listObj.getSubitem(E,D);},getSubitemCount:function(D){var E=this;return E.listObj.getSubitemCount(D);},isSubitem:function(D){var E=this;return E.listObj.isSubitem(D);},requestSub:function(E,D){var G=this,F;G.listObj.renderIndex=D;G.requestSubitems(E,function(H){F=G.get("list")[D];if(F){if(H&&H.snapshotTime&&F.snapshotTime&&F.snapshotTime>H.snapshotTime){H.snapshotTime=F.snapshotTime;}else{}}G.update(D,H,true);G.expanding=false;});},requestSubitems:function(E,D){var F=this;F.listObj.requestSubitems(E,D);},isCollapsible:function(D){return(D.totalMsgs>1)?true:false;}});C.ConvMailListModel=A;},"1.0.0",{requires:["common-ui-conv-listview"]});

YUI.add("mail-ui-convlist-base",function(A){var e=A.mail.Controller.Conversations,Q=A.mail.model.ConvStore.Conversations,M=Q.getPermCidPart,O=A.mail.model.DataStore.Folders,a=A.common.Utils,N=A.mail.ui.common.StringUtils,S=a.escapeHtml,W=a.unescapeHtml,i=a.substitute,D=A.common.persist.UserData,g=A.mail.persist.MetaData,j="userUIPref.messagesPerPage",E="userUIPref.defaultSortOrder",G="pageRenderComplete",b="itemUpdate",d=[],B=10,k=A.mail,Z=k&&k.model?k.model.DataStore.Messages:{},C=Z.getPermMidPart,L="Trash",c="%40B%40Bulk",I="date",U="down",P="up",T=null,X=1,K="neo.pref.tutorial.search",F=(strings.str_cfg_tog_hkr_siu===true?"hkr_siu":"cg_siu"),V=strings.str_cfg_tog_hkr_siu===true,f={"http://mail.yimg.com/a/i/cal/bell4.gif":"bell","http://mail.yimg.com/a/i/us/pim/ybang_16x16_1.gif":"certified"},h,R,H=1;var J=function(l){var q=this;l=l||{};q.evt=[];q.lastMsgIdx=-1;J.superclass.constructor.call(q,l);var n=[],m,o=A.one("#inboxcontainer div.inbox.thread-content"),p=o&&o.all("div.list-view-item.selected");if(p){p.each(function(s){var r=s.one("input"),t=r.get("value");n.push(t);});}q.selectedCids=n;q.title="";q.infiniteScrollHandlers=[];q.restoreSortOrder();if(!l.dontBind&&(l.fid==="Inbox")){m=NeoConfig&&NeoConfig.msgListObj;}q.view=l.view||{};q.dontBind=l.dontBind;q.template=l.TEMPLATE||NeoConfig.msgListTmpl;q.pageSize=NeoConfig.pageSize*1||25;q.paginationCntrls=null;if(!m||(l.fid==="%40S%40Search")){q.createPaginatedList(m);}else{q.createPaginatedList(m,NeoConfig.totalConversations);}q.initAttrs(l);q.set("fid",l.fid||"Inbox");function Y(AC,AD,AA){function t(){AB.set("page",Math.min(AB.get("page"),v/NeoConfig.pageSize-1));AB.set("freeze",1);w.fire("refresh",{requestSize:(AB.get("page")+1)*NeoConfig.pageSize});w._refresh=1;q.infScrollMsgCount=0;if(!AB.hasAllSelected()){q.selectAllNode.set("checked",0);}if(q.checkMailEvts){for(var AG=0;AG<q.checkMailEvts.length;AG++){q.checkMailEvts[AG].detach();}}}if(AC===q.fid){if(H!==AA){if(AA==="checkmail"){if(!q.sorting){q.refresh();}}else{if(NeoConfig.infiniteScroll){var v=200,AF=-1,x=25,AB=q._listview,w=q._listmodel,AE=q.rootNode.one(".inf-scroll-btn"),s=AE.one(".check-mail-text"),z=AB.get("activeItem"),r=q.rootNode.one(".list-view-items").get("scrollTop"),u=w.get("list").length?w.get("list")[0].receivedDate:0;if(AB._sel){for(var y in AB._sel){if(parseInt(y,B)>AF){AF=y;}}}if(r>0&&z&&AB._getIndexN(z)>v-20||AF&&AF>v-20){q.requestItems(0,x,function(AJ,AH){var AI;q.infScrollMsgCount=0;for(var AG=0;AG<AH.length;AG++){if(AH[AG].receivedDate<=u){break;}q.infScrollMsgCount++;}if(q.infScrollMsgCount===0){return;}else{if(q.infScrollMsgCount===1){AI=strings.str_inf_scroll_one_new_msg;}else{AI=i(strings.str_inf_scroll_new_msgs,{msg_count:q.infScrollMsgCount},null,null,strings);}}s.setContent(AI);if(s.hasClass("hidden")){q.checkMailEvts=[];q.checkMailEvts.push(q.on("infiniteScroll:checkMail",t));}},null,true);}else{t();}return;}else{q._listview.refresh(1);if(!q._listview.hasAllSelected()){q.selectAllNode.set("checked",0);}}}}q.updateTitle();}}q.on("visibleChange",function(r){if(r.newVal){if(q.needFlush){Y(q.fid);q.needFlush=0;}NeoGV.masStarted=false;}});q.evt.push(A.on("ds:msg:flush",Y,q));q.evt.push(A.on("ds:conv:change",q.changeConv,q));q.evt.push(A.on("ds:conv:refresh",q.changeConv,q));q.evt.push(A.on("ds:conv:remove",q.removeConv,q));q.evt.push(A.on("ds:msg:remove",q.removeConvByMid,q));A.mix(q,{update:function(){q._listview.refreshBody();}});};A.extend(J,A.mail.ui.MailList);A.mix(J.prototype,{NAME:"ConversationList",renderItem:function(o,l,n,q,m){var p=this,Y;if((A.server&&!o)||!o){return"";}if(o.expanded){m=true;}Y=p.lastMsgIdx=o.msgs.length-1;if(o.msgs.length){o.colorIndicator=p.getColorIndicator(o.msgs[Y].externalPopServer,o.msgs[Y].xapparentlyto);}p.renderIndex=l;p.renderExpand=m;h=q;R=n;return i(p.template.message,o,p.formatters,o,strings,null,p);},isRenderSelected:function(Y,l){if(Y){for(var m=0;m<Y.length;m++){if(l===Y[m]){return true;}}}return false;},createPaginatedList:function(t,m){var q=this,o=0,v=0,r=t?t.length:0,x,y=!NeoConfig.infiniteScroll&&(q.sortedColumn.sortKey===I)&&(q.sortedColumn.sortOrder===P),Y=m?(y?m-r:0):0,w=[],s;if(r){for(o=0;o<r;o++){v=Math.max(v,t[o].rawDate);}s=new Date().getTime();for(o=0;o<r;o++){x=t[o];w[Y++]={cid:x.cid,anchorDate:x.anchorDate,colorIndicator:x.colorIndicator,fid:x.fid,subject:x.subject?W(x.subject):"",subjectDir:(NeoConfig.bidi&&x.subjectDir)?x.subjectDir:"",totalMsgs:x.totalMsgs,totalUnread:x.totalUnread,totalFlagged:x.totalFlagged,totalHasAttach:x.totalHasAttach,totalDraft:x.totalDraft,recipients:x.participantList,xapparentlyto:x.xapparentlyto,checksum:x.checksum,snapshotTime:v,receivedDate:x.rawDate,snippet:x.snippetStr?x.snippetStr:"",size:x["data-size"]&&parseInt((x["data-size"].split("=").pop()).replace('"',""),B),inboxservices:(x.inboxservices&&A.Lang.isString(x.inboxservices))?A.JSON.parse(x.inboxservices):[],msgicon:(x.msgicon?x.msgicon:""),msgCountsByFolder:x.msgCountsByFolder,msgs:[{mid:x.mid,fid:x.mfid,cid:x.cid,flags:x.mflags}]};if(x.messageInfo&&x.summary){Q.setPrefetch(x,"Inbox",s);}}}J.setConvHeaderList(w);if(m){w.length=m;}var n,p,u=NeoConfig.infiniteScroll?NeoConfig.pageSize:(1*D.get(j))||50;n=new A.mail.ui.ConvMailListModel({KEY:"cid",SUBKEY:"mid",length:m,list:w,listObj:q});p=new A.mail.ui.ConvMailListView({model:n,pageSize:u,requestSize:(function(){return(u<=100)?u*2:u;})(),listObj:q,expandOnClick:!NeoConfig.hasConvView,cellHeight:A.one("#inboxcontainer").hasClass("vp")?(g.get("neo.pref.general.snippets")!="-1"?NeoConfig.vertPaneCellHeight[1]:NeoConfig.vertPaneCellHeight[0]):NeoConfig.cellHeight[NeoConfig.msgListDensity]});if(y){p.end();}q._listmodel=n;q._listview=p;q.vlist=p;p.on("selectionCountChange",function(){if(q.selectAllNode){q.selectAllNode.set("checked",(q._listview.hasAllSelected()?1:0));}});if(q.parentNode){q.render(q.parentNode);}function l(){if(q.selectAllNode){q.selectAllNode.set("checked",(q._listview.hasAllSelected()?1:0));}}q._listview.on("command",q.onCommand,q);q._listview.on("selectionCountChange",q.onListViewSelect,q,true);
q._listview.on("subselect",q.onSubselect,q,true);q._listview.after("renderComplete",l);l();},onCommand:function(l){var m=this;function Y(n){var o,q,p=a.wcopy(n.map[n.arr[0]]);if(l.subindex!==-1){q=m._listview._formatIndexS(l.mainindex,l.subindex);o=a.wcopy(m._listview._model.valueAt(q));}m.fire("command",{e:l.e,fid:l.subindex!==-1?m.getMsgFid(l.item):m.fid,message:p,index:l.index,submessage:o,neighbors:m.convertNeighbors(n.neighbors,m.fid)});}m._listview.getSelected(Y,null,J.getNeighbors,m.fid);},onSubselect:function(){var Y=this;Y.onListViewSelect({newVal:1});},onListViewSelect:function(Y){var p=this,n,l;l=(p.parentCW.subToolbars instanceof Array)?p.parentCW.subToolbars[p.fid].root.one("#btn-move"):"";if(l){l.removeClass("disabled");}p.set("selectCount",Y.newVal);if(NeoConfig.infiniteScroll){var o=p.rootNode.one(".list-header-wrapper .count");if(Y.newVal>0){if(o){o.setContent(i(strings.str_msg_selected,{num_selected_msgs:Y.newVal}));}}else{if(o){o.setContent("");}}}function m(s){var v=true;for(var r in s.map){var w=p.getMsgFid(s.map[r]);if(w!=="Draft"&&w!=="Sent"){v=false;break;}}if(l&&v){l.addClass("disabled");}if((NeoConfig.infiniteScroll||NeoConfig.pagedResults)&&Y.newVal===1&&!p._listview.checkmode){var t,q=p._listview._toIndexN(s.selmap[s.arr[0]]),u=a.wcopy(s.map[s.arr[0]]);if((n=p._listview.get("subselection"))!=-1){t=a.wcopy(p._listview._model.valueAt(p._listview._formatIndexS(q,n)));}p.fire("singleSelect",{fid:p._listview._isSubindex(q)?p.getMsgFid(u):p.fid,message:u,submessage:t,neighbors:p.convertNeighbors(s.neighbors,p.fid)});}}if(Y.newVal>0){p._listview.getSelected(m,null,J.getNeighbors,p.fid);}},changeConv:function(AF,AD,x,v,m){var z=this,AA,p=0,w=0,t,AB=x?x.length:0,r,AE,u,q,AL={},Y={},AJ=z._listview,AH=(z._listview)?z._listmodel.get("list"):z.vlist.arrItems,AM=[],AG,s,AC,AI,y,o=AH.length,AK,l=function(n){z._listview._model.indexesOf(n,false,function(AN){z._listview._resetSelection(Object.keys(AN)[0]);});};m=m||{};if(AF==="move"){if(z.fid!=="Draft"){z.moveConv(AD,x,v);}return;}if((m.fromSearch)||(x.length===1&&!Q.canConvOverlapInFids(z.fid,x[0].fid))){if(!m.fromConv||AF!=="msg:move"){return;}}if(AB>0){for(AA=0;AA<AB;AA++){u=M(x[AA].cid);AL[u]=x[AA];Y[u]=x[AA];}AA=0;r=(z.fid!==L&&z.fid!==c);while((AA<o)&&(p!==AB)){AI=AH[AA];if(AI){q=M(AI.cid);}if(AI&&(q in AL)){if(q in Y){s=(z.fid,AL[q]);AG=AH[AA];t=0;AC=AE=null;if(!s.sparse){AC=A.mail.model.ConvStore.Conversations.toConvInfoEvent(z.fid,s);}else{if(s.moved){AK=(m.mids)?m.mids.length:0;for(w=0;w<AI.msgs.length;w++){if((AI.msgs[w].fid===z.fid)){t++;}}if(r&&(m.fid!==L&&m.fid!==c)){if((t>AK)||(m.srcFid&&(m.srcFid!==z.fid))){z.requestSubitems(s,l,true);}else{z.removeConv(z.fid,[s]);}}else{if(t===0){z.removeConv(z.fid,[s]);}}}else{AC=s;}}if(AC){if(!AC.anchorDate&&AF!=="lmt"&&(AF!=="msg:remove"||!r)){y=true;break;}if(AG.snapshotTime>=AC.snapshotTime){AE=AG.snapshotTime;}AH[AA]=a.merge(AG,AC,true);if(AE){AH[AA].snapshotTime=AE;}AM.push(AA);}}p++;}AA++;}if(y){z.refresh();}else{if(AM.length>1){AJ.refreshBody();z.updateTitle();}else{if(AM.length===1){AJ.updateItemByIndex(AM[0]);if(AF==="msg:remove"){if(s.totalMsgs===0||z.fid==="Draft"&&s.totalDraft===0){z.removeConv(z.fid,[s]);}else{if(m.reason!=="savedraft"){z._listview._resetSelection(AM[0]);}}}}}}}},removeConv:function(o,n){var m,p=this;if(o===p.fid){if(n){var l=[],Y=n?n.length:0;for(m=0;m<Y;m++){l.push(n[m].cid);}p._listview.removeByKey(l);}else{p._listview.refresh();}}},removeConvByMid:function(p,n){var r=this,o,m=r._listmodel.get("list"),l,Y,q=[];if(p==="Draft"&&p===r.fid){for(l=0;l<m.length;l++){o=m[l];if(o&&o.msgs&&o.msgs.length===1){for(Y=n.length-1;Y>-1;Y--){if(C(n[Y].mid)===C(o.msgs[0].mid)){q.push(o);n.splice(Y,1);}}}if(n.length===0){break;}}if(q.length){r.removeConv(p,q);}}},moveConv:function(n,o){if(n&&o){var m=false,p=this,Y=n?n.length:0;for(var l=0;l<Y;l++){if(o[l].fid===p.fid){m=true;break;}}if(m){p._listview.refresh(1);p.updateTitle();}}},showSearchTooltip:function(){var r=this,n=A.comms.ui.ToolTips,p=A.one(".yucs-form-input"),q=A.ui.Templates._shared_module_search_searchtooltip_rollup,o,Y={shim:false,zIndex:1001,position:"center",width:"auto",delay:{show:500,hide:50,auto:1000},render:true,autoHide:false,trigger:".tutorial-trigger"};function m(){for(var t in r.searchTooltipEvts){A.detach(r.searchTooltipEvts[t]);}if(this.searchTooltipIns){this.searchTooltipIns.destructor();this.searchTooltipIns=null;}var u,s=A.one(".searchtooltip");if(s){u=s.ancestor(".yui3-tooltips",false);if(u){u.remove();}}}function l(){if(o){r.searchTooltipIns.setTriggerContent(o);}var s=A.one(".tooltips-text");r.searchTooltipEvts.push(s.on("click",function(u){var t=u.target.ancestor(".tutorial-btn",true,".tooltips-text");if(!t){return;}else{if(t.hasClass("close")){g.set(K,-1);m();}}}));r.searchTooltipEvts.push(s.on("blur",function(){m();}));r.searchTooltipEvts.push(A.one("document").on("keydown",function(u){var t=u.target.ancestor(".searchtooltip",true);if(!t){m();}}));s.focus();}r.searchTooltipEvts=[];n.OFFSET_XY=[0,10];if(r.searchTooltipIns){m();}r.searchTooltipIns=new n(Y).plug(A.Plugin.WidgetAnim);o=i(q.base,null,null,null,strings);r.searchTooltipIns.on("triggerEnter",l);r.searchTooltipIns.showTooltipFor(p);},setPrevPaneVisibility:function(){var Y=this;if(NeoConfig.previewPanePref){Y._listview.set("previewPaneEnabled",true);}else{Y._listview.set("previewPaneEnabled",false);}},render:function(m){var o=this,l;o.parentNode=A.Node.one(m);o.set("parentNode",o.parentNode);o.rootNode=o.parentNode.one(".inbox.thread-content");o.set("rootNode",o.rootNode);function Y(){if(!o.template){o.template=A.ui.Templates._shared_module_message_list_threaded_rollup;}var p=o.template;var q={message_list_full_pane:"",user_pref_height:"",conv_list_width:"",conv_list_height:"",thread:"",has_multiple_mailboxes:"",conv_list_header:"",get_message_response:"",show_from_header:p.show_from_header?i(p.show_from_header,0,0,0,strings):"",search_results:p.search_results||"",show_snippet:"",show_snippet1:"",show_snippet_else:p.show_snippet_else,show_snippet_else1:p.show_snippet_else1,inf_scroll_top:NeoConfig.infiniteScroll?p.inf_scroll_top:""};
o.parentNode.set("innerHTML",i(o.template.base,q,0,0,strings));o.render(m);}if(!o.rootNode){if(!o.template){A.use("_shared_module_message_list_threaded_rollup",Y);return;}else{Y();}}l=o.rootNode.one(".list-view");if(o.fid!=="Inbox"||o.dontBind){o.rootNode.one(".list-view .list-view-items").set("innerHTML","");}o._listview.render(l);o.bindUI();o.setPrevPaneVisibility();o.set("focusNode",o.rootNode.one(".list-view .list-view-items"));o.listRender=1;o.fire("render");var n=A.one("#tutorial-restart");if(n){n.on("click",function(){A.use("mail-ui-convs-opt-in-dialog",function(p){p.mail.ui.ConvsOptInDialog.show();});});}if(NeoConfig.onboardPC){A.use("mail-ui-onboarding",function(p){p.mail.ui.Onboarding.showDialog();});}A.use("comms-ui-tooltips-widget","minty_module_offscreen_bin_convs_callout_rollup","minty_module_offscreen_bin_themes_callout_rollup",function(){A.on("showConvOnboarding",function(){var r=A.ui.Templates.minty_module_offscreen_bin_convs_callout_rollup,q=i(r.base,null,null,null,strings);A.fire("onboard:tip",{node:A.one("#btn-closemsg"),template:q,fn:function(){A.fire("onboard:tipclose");},dir:"right",offset:[30,32]});var p=A.one(".convstooltip .settings");p&&p.on("click",function(){A.fire("openOptions",{view:"viewing_email"});});a.rocketstats.stat("onboarding","convtooltip");A.fire("finishConvOnboarding");});A.on("showThemesOnboarding",function(){var r=A.ui.Templates.minty_module_offscreen_bin_themes_callout_rollup,q=i(r.base,null,null,null,strings);var p=setTimeout(function(){A.fire("onboard:tipclose");},15000);A.fire("onboard:tip",{node:A.one(".attribution"),template:q,fn:function(){if(p){clearTimeout(p);}A.fire("onboard:tipclose");},dir:"left",offset:[48,-80]});a.rocketstats.stat("onboarding","themestooltip_conv");});A.one("document").on("click",function(){A.fire("onboard:tipclose");});});},requestItems:function(Y,r,m,v){var q=this,w=(this.fid==="%40C%40Chats"),l="Client.FolderIdDoesntExist",s=q.extraParams,t,p,o;function u(x){var y=x.convInfo;q.folder=x.folder;q._listview.setLength(q.folder.totalConversations);m(Y,y,q.folder.totalConversations);q.sorting=0;}o={fid:q.fid,sortKey:q.sortedColumn.sortKey,sortOrder:q.sortedColumn.sortOrder,groupBy:q.sortedColumn.groupBy};A.mix(o,{start:Y,numCInfos:r||100,bidiDetection:NeoConfig.bidi});if(s){for(var n in s){o[n]=s[n];}}t={success:u,failure:function(x){if(NeoConfig.infiniteScroll&&Y!==0){q._listview.set("page",q._listview.get("page")-1);q._listview.set("freeze",0);}else{q._listview.setStatus(i(q.template.loading_error,0,0,0,strings),true);}if(w&&x.code===l){q.handleDarlaEvent("%40C%40Chats");}else{if(x.reason===e.Error.request){a.rocketstats.stat("convslist","BadRequest_"+(v?"cid":"info"));}}q.sorting=0;},timeout:NeoConfig.wsListTimeout||60000,suppressCodes:["*"],suppressLogs:w&&[l],exceptCodes:[999],stopwatch:q.stopwatch};p=e.list;q._requests.push(p.call(e,o,t,++H));},showSubitems:function(Y,l){var m=this;A.use("transition",function(u){var t,o=Y.ancestor(".list-view-item-container"),s=o.one(".list-view-item"),r=m._listview._getIndexN(s),q;if(o.hasClass("expanded")){Y.transition({duration:0.25,height:{value:0},opacity:{value:0},on:{end:function(){o.removeClass("expanded");if(NeoConfig.hasConvView){u.fire("tutorConvListCollapse");}}}});m.renderExpand=false;t=false;m._listview._model.valueAt(r).expanded=false;}else{var p=m.rootNode.one(".list-view-item-container.expanded .list-view-item-subcontainer"),n;if(p){m.showSubitems(p,true);}q=Y.get("children").size();Y.setStyles({"height":0,"opacity":0});o.addClass("expanded");n=(parseInt(o.one(".list-view-item-master").getStyle("height"),B)+(u.UA.ie?1:0))*q+"px";if(T){T.stop(T.wasCached?"ConvListExpandCached":"ConvListExpandNotCached");T=null;}Y.transition({duration:0.25,height:{value:n},opacity:{value:1},on:{end:function(){if(NeoConfig.hasConvView){u.fire("tutorConvListExpanded");}}}});m.renderExpand=true;t=true;m._listview._model.valueAt(r).expanded=true;}if(!l){u.fire("mt:click",{action:t?"expand_thrd":"collapse_thrd"});if(m._listview.countClicked){u.fire("mt:click",{action:t?"count_expand_thrd":"count_collapse_thrd"});}}});},getSubitem:function(l,Y){return(l&&l.detail)?l.msgs[Y]:null;},getSubitemCount:function(Y){return(Y.detail?Y.msgs.length:0);},isSubitem:function(Y){return(Y.mid?true:false);},getAllAccountEmails:function(){var r={},s=(D.get("externalAccounts")||{}).extAccount||[],l=(D.get("aliases")||{}).alias||[],Y=(D.get("disposableAddresses")||{}).deaName||[],q=s.concat(l,Y),o=D.get("userSendPref"),m,n,p=q.length;r[o.defaultID]=1;r[o.defaultFromAddress]=1;for(n=0;n<p;n++){if((m=q[n].address)){r[m]=1;}}return r;},requestSubitems:function(s,m,Y){T=new a.Stopwatch("ConvListExpand");var q=e.get,u,t,p=this,l,o={fid:p.fid,cid:s.cid,checksum:s.checksum,anchorDate:s.anchorDate};var n=function(v){l=p._listview.getItemEl(p.renderIndex);l.addClass("expand_error");t=l.one(".thread_expansion_error");if(!t){A.use("_shared_module_message_list_thread_expansion_error",function(){var w={can_retry:function(){return !v.convPermDeleted?i(A.ui.Templates._shared_module_message_list_thread_expansion_error.can_retry,null,null,null,strings,null,p):"";}};l.one(".subj").hide();t=A.Node.create(i(A.ui.Templates._shared_module_message_list_thread_expansion_error.base,0,w,0,strings));l.insertBefore(t,l.one(".date"));});}};var r={success:function(x){var w,v=p.get("view");x.detail=true;if(m){m(x);}T.wasCached=r.respProps&&r.respProps.wasCached?1:0;l=v.getItemEl(p.renderIndex);l.removeClass("expand_error");if(!Y){l.get("parentNode").removeClass("expanded");w=v._getSubitemContainer(l);p.showSubitems(w,null);}if(u){u.cancel();l.removeClass("loading");}},failure:function(v){p._listmodel.expanding=false;p._listmodel.expanding=false;n(v);if(u){u.cancel();l=p._listview.getItemEl(p.renderIndex);l.removeClass("loading");}},errorPosition:12};u=A.later(500,p,function(){l=p._listview.getItemEl(p.renderIndex);l.addClass("loading");});p._requests.push(q.call(e,o,r,++H));},convertNeighbors:function(Y){return Y;},getSelected:function(Y){var m=this;
function l(p){var q,n=(p&&p.arr?p.arr.length:0),o=[];for(q=0;q<n;q++){o.push(p.map[p.arr[q]]);}Y(o);}m._listview.getSelected(l,null,J.getNeighbors,m.fid);},setFid:function(Y){var l=this;if(l.fid!==Y||l.extraParams){l.prevFid=l.fid;l.reset();l.fid=Y;if(l._listview){if(strings.str_cfg_tog_preserve_msglist_scroll){l._listview.setRefreshScrollToBottom(!NeoConfig.infiniteScroll&&l.sortedColumn.sortKey===I&&l.sortedColumn.sortOrder===P&&!l.sortedColumn.groupBy);}l.refresh();}}},formatParticipantList:function(p){var q=this,l,Y="",m,o,n;q.accountEmails=q.accountEmails||q.getAllAccountEmails();if(p.recipients.length===1){if(q.fid==="Draft"||q.fid==="Sent"){o=p.msgs[0]&&p.msgs[0].toEmail?S(W(p.msgs[0].toEmail)):"";}else{if((q.accountEmails&&q.accountEmails[p.recipients[0].email])){o=strings.str_me;}else{o=q.formatFromName(null,null,p.recipients[0]).name;o=S(W(o));}}Y=i(q.template.from_name,o,{from:o},null,strings,null,q);}else{if(p.recipients.length>1){for(l=0;l<p.recipients.length;l++){if((q.accountEmails&&q.accountEmails[p.recipients[l].email])){o=strings.str_me;}else{m=(q.fid==="Draft"||q.fid==="Sent")?p.recipients[l]:q.formatFromName(null,null,p.recipients[l]);n=m.name.split(" ");if(n.length===2){o=(strings.str_tog_showFirstAsFriendlyName?n[0]:n[1]);}else{o=m.name;}o=S(W(o));}Y+=i(q.template.from_name,o,{from:o},null,strings,null,q);if(l<p.recipients.length-1){Y+=", ";}}}}return Y?Y:"&nbsp;";},getMsgFid:function(Y){return(Y.fid||((Y.folderInfo&&Y.folderInfo.fid)?Y.folderInfo.fid:(Y.sourceFolderInfo&&Y.sourceFolderInfo.fid)?Y.sourceFolderInfo.fid:this.fid));},getInboxService:function(o){var n=o.srvmap,l,Y,m="";if(!n){Y=o.msgs[0].inboxservices||[];o.srvmap=n={};for(l=Y.length-1;l>=0;l--){n[Y[l].name]=Y[l].value;}}if(!strings.str_cfg_tog_certified_icon&&n.crt){delete n.crt;}if((V||!n.crt)&&(n[F]||n.siu||(o.msgs.length&&o.msgs[0].msgicon))){if(n&&n[F]){m=f[n[F]]||"";}else{if(o.msgs[0].msgicon){m=o.msgs[0].msgicon;}}}if(NeoConfig.isSSL&&m==="certified"){m="certified-ssl";}n.inboxService=m;return m;},formatters:{id:function(){return h;},cid:function(Y){return Y.cid;},subject:function(Y){return Y.subject?S(W(Y.subject)):strings["str_msg-view_no_subject"];},subjectDir:function(Y){return(NeoConfig.bidi&&Y.subjectDir)?S(W(Y.subjectDir)):"";},xapparentlyto:function(m,Y,l){return m.msgs[l.lastMsgIdx].xapparentlyto;},status_conv:function(l){var Y="&nbsp;";if(l.totalReplied){Y=strings["str_msg_list_info-replied"];}else{if(l.totalForwarded){Y=strings["str_msg_list_info-forwarded"];}else{if(l.totalUnread){Y=strings["str_msg_list_info-unread"];}}}return Y;},status_title:function(m){var l="",Y=m.srvmap.inboxService||"";if(Y==="certified"||Y==="certified-ssl"){l=i(strings.str_msg_list_info_verified_attr,strings);}return l;},checkbox_label:function(m,Y,l){return i(strings.str_msg_list_checkbox_label,{convnumber:(l.renderIndex+1)});},checked:function(m,Y,l){return(l._listview&&R&&l._listview.checkmode)?" checked=true ":"";},containerselect:function(){return(R?" subselected ":"");},page_conversation_history:function(Y){return i(Y.template.page_conversation_history,Y,Y.formatters,0,strings);},archiving_disabled:function(Y){return i(Y.template.archiving_disabled,Y,Y.formatters,0,strings);},from:function(Y){return S(W(Y));},from_name:function(m,Y,l){return l.formatParticipantList(m);},fromDir:function(){return"";},sender:function(m,Y,l){var n=l;return i(n.template.sender,0,0,0,strings,null,n)+" "+S(W(m.from.name));},received_date:function(Y){return a.dateFormatter(new Date(Y.anchorDate*1000),strings.str_tog_dateformat_header_long_l10n);},date:function(m,Y,l){if(m.anchorDate){return a.dateFormatter(new Date(m.anchorDate*1000),strings.str_tog_dateformat_messagelist_timeonly_l10n);}else{if(m.receivedDate){return a.dateFormatter(new Date(m.msgs[l.lastMsgIdx].receivedDate*1000),strings.str_tog_dateformat_messagelist_timeonly_l10n);}}return"";},receivedDate:function(l){var Y=l.anchorDate*1000;return a.dateFormatter(new Date(Y),Neo.getDateFormat(Y,true));},expanded:function(m,Y,l){var n=l;return m.msgs.length>1&&n.renderExpand?n.template.expanded:"";},snippetStr:function(m,Y,l){var n=l;return m.snippet&&(n.fid!=="%40C%40Chats")?S(W(m.snippet)):i(n.template.noSnippet,null,null,null,strings,null,n);},snippet:function(n,Y,l){var o=l,m=(g.get("neo.pref.general.snippets")!="-1")?true:false;return(o.fid!=="%40C%40Chats"&&m)?i(o.template.snippet,n,o.formatters,n,strings,null,o):"";},omitsnippetline:function(n,Y,l){var o=l,m=(g.get("neo.pref.general.snippets")!="-1")?true:false;return(o.fid!=="%40C%40Chats"&&m)?"":i(o.template.omitsnippetline,n,o.formatters,n,strings,null,o);},hasAttach:function(m,Y,l){var n=l;return m.totalHasAttach?n.template.hasAttach:"";},size:function(Y){return Math.ceil(Y.size/1000);},is_threadofone:function(m,Y,l){var n=l;if(m.totalMsgs<=1){return i(n.template.is_threadofone,null,null,null,strings,null);}return"";},threadCount:function(Y){return Y.totalMsgs>1?Y.totalMsgs:"";},thread_cnt:function(m,Y,l){var n=l;return m.totalMsgs>1?i(n.template.thread_cnt,m,n.formatters,m,strings,null,n):"";},thread_cnt1:function(m,Y,l){var n=l;return m.totalMsgs>1?i(n.template.thread_cnt1,m,n.formatters,m,strings,null,n):"";},flags:function(m,Y,l){var n=l;return[(R?" selected ":" "),(m.totalUnread>0?" unread ":""),(m.totalFlagged>0?" flagged ":""),n.getInboxService(m)].join(" ");},flag_info:function(m){var Y="",l=m.srvmap.inboxService||"";if(l){Y=l;}else{if(m.totalUnread){Y="unread";}else{if(m.totalReplied){Y="replied";}else{if(m.totalForwarded){Y="forwarded";}}}}return"info-"+Y;},bold:function(Y){return Y.totalUnread?"bold":"";},flag_info_hover:function(l){var Y=l.srvmap.inboxService||"";if(Y==="certified"||Y==="certified-ssl"){return"info-"+Y;}return"";},flag_star:function(m,Y,l){var n=l;return i(n.template.flag_star,m,n.formatters,m,null,null,n);},flag_attachment:function(m,Y,l){var n=l;return m.totalHasAttach?n.template.hasAttachment:"";},isFlagged1:function(m,Y,l){var n=l;return m.totalFlagged>0?i(n.template.isFlagged1,m,n.formatters,m,strings,null,n):"";
},isFlagged2:function(m,Y,l){var n=l;return m.totalFlagged>0?i(n.template.isFlagged2,m,n.formatters,m,strings,null,n):"";},isFlagged_else1:function(m,Y,l){var n=l;return m.totalFlagged>0?"":i(n.template.isFlagged_else1,m,n.formatters,m,strings,null,n);},isFlagged_else:function(m,Y,l){var n=l;return m.totalFlagged>0?"":i(n.template.isFlagged_else,m,n.formatters,m,strings,null,n);},isFlagged:function(m,Y,l){var n=l;return m.totalFlagged>0?i(n.template.isFlagged,m,n.formatters,m,strings,null,n):"";},hide_attachments_else:function(m,Y,l){var n=l;return i(n.template.hide_attachments_else,m,n.formatters,null,(m.totalHasAttach?strings:null),null,n);},contains_attachment:function(m,Y,l){var n=l;if(m.totalHasAttach){return i(n.template.hide_attachments_else,0,0,0,null,null,n);}return"";},to_frm_srch_title:function(m,Y,l){return NeoConfig.strings[l.fid==="Sent"||l.fid==="Draft"?"str_mas_to_srch_attr":"str_mas_frm_srch_attr"];},inboxservices:function(q,l,n){try{var r=n,p=q.srvmap,Y=(q.msgs[n.lastMsgIdx].inboxservices&&A.Lang.isString(q.msgs[n.lastMsgIdx].inboxservices)&&q.msgs[n.lastMsgIdx].inboxservices.match("data-certified"))?[{name:"crt",value:"transactional"}]:[];if(!p){q.srvmap=p={};for(var m=Y.length-1;m>=0;m--){p[Y[m].name]=Y[m].value;}}return((V||!p.crt)&&(p[F]||q.msgicon))?i(r.template.inboxservices,q,r.formatters,q,null,null,r):"";}catch(o){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-maillist-conv-convlist:1",o,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-maillist-conv-convlist:1");return"";}},msgicon:function(n){var m=n.srvmap,Y={"http://mail.yimg.com/a/i/cal/bell4.gif":"https://s.yimg.com/nq/i/cal/bell4.gif","http://mail.yimg.com/ok/u/assets/sprite/fresh/y_16x16_1.gif":"https://s.yimg.com/ok/u/assets/sprite/fresh/y_16x16_1.gif"};if(a.isSSL()&&m&&m[F]&&Y[m[F]]){m[F]=Y[m[F]];}var l=m&&m[F]?m[F]:n.msgicon;if(l&&l.match(/ybang_/g)){l=l.replace("a/i/us/pim/ybang_16x16_1.gif","ok/u/assets/sprite/fresh/transparent_1x1_1.gif");}return l;},msgicon_title:function(n,Y,l){var o=l,m=o.formatters.flag_info(n);return(m!=="info-"&&m!=="")?strings[["str_msg_list_",m].join("")]:"";},get_nested_message_response:function(n,Y,l){var o=l,m="";if(n.detail&&l.renderExpand){m=i(o.template.nestedmessagetree,n,o.formatters,n,strings,null,o);}return m;},nestedmessage:function(p,Y,m){var q=m,o="",l,n={formatters:q.msgFormatters,template:q.template,parent:m};if(p.detail){for(l=0;l<p.msgs.length;l++){n.renderSubid=l;o+=i(q.template.nestedmessage,p.msgs[l],null,p.msgs[l],strings,null,n);}}return o;},string_unread:function(){return strings["str_msg_list_info-unread"];}},msgFormatters:{id:function(n,Y,l){var m=l.parent._listview._idSub(h,l.renderSubid);return m;},flag_sub_class:function(m,Y,l){return[l.parent.isRenderSelected(R,l.renderSubid)?" selected ":" ",R?" subselected ":" ",(m.flags.isRead?"":" unread "),(m.flags.isFlagged?" flagged ":"")].join("");},flag_sub_star:function(m,Y,l){return i(l.template.flag_sub_star,m,l.formatters,m,null,null,l);},flag_sub_attachment:function(m,Y,l){return m.flags.hasAttachment?l.template.hasAttachment1:"";},checked:function(m,Y,l){return(l.parent._listview&&l.parent.isRenderSelected(R,l.renderSubid)&&l.parent._listview.checkmode)?" checked=true ":"";},hide_attachments_else1:function(m,Y,l){return i(l.template.hide_attachments_else1,m,null,null,(m.flags.hasAttachment?strings:null),null,l);},receivedDate:function(l){var Y=l.receivedDate*1000;return a.dateFormatter(new Date(Y),Neo.getDateFormat(Y,true));},from:function(Y){return S(W(Y));},from_name1:function(o,l,m){var n,Y;m.parent.accountEmails=m.parent.accountEmails||m.parent.getAllAccountEmails();if((m.parent.accountEmails&&m.parent.accountEmails[o.from.email])){n=(m.parent.getMsgFid(o)==="Draft")?strings.str_draft_label:strings.str_me;}else{n=(m.parent.fid==="Draft"||m.parent.fid==="Sent")?o.from.name:m.parent.formatFromName(null,null,o.from).name;n=S(W(n));}Y=i(m.template.from_name1,n,null,n,strings,null,m);return Y;},fromDir:function(Y){return NeoConfig.bidi?Y.from.nameDir:"";},snippetStr:function(n,Y,l){var o=l,m=n.snippet?S(W(n.snippet.replace(/^(\n|\r)+$/,""))):"";return m?m:i(o.template.noSnippet,null,null,null,strings,null,o);},folder_name:function(m,Y,l){return i(l.template.folder_name,m,null,m,strings,null,l);},folderName:function(o,Y,l){var n=l.parent.getMsgFid(o);var m=N.getSystemFolderName(n,n);return S(W(m));},folder_vis:function(o,l,m){var n=m.parent.getMsgFid(o);var Y=O.get(n);if(n===m.parent.fid||!Y||(Y.isSystem&&n!=="Draft")){return i(m.template.folder_vis,null,null,null,strings,null);}return"";},is_draft:function(m,Y,l){if(l.parent.getMsgFid(m)==="Draft"){return i(l.template.is_draft,null,null,null,strings,null);}return"";},is_draft1:function(m,Y,l){if(l.parent.getMsgFid(m)==="Draft"){return i(l.template.is_draft,null,null,null,strings,null);}return"";},bold1:function(Y){return Y.flags.isRead?"":"bold";},snippet1:function(m,Y,l){return i(l.template.snippet1,m,null,m,strings,null,l);},isFlagged3:function(m,Y,l){return m.flags.isFlagged?i(l.template.isFlagged3,m,l.formatters,m,strings,null,l):"";},isFlagged4:function(m,Y,l){return m.flags.isFlagged?i(l.template.isFlagged4,m,l.formatters,m,strings,null,l):"";},isFlagged5:function(m,Y,l){return m.flags.isFlagged?i(l.template.isFlagged5,m,l.formatters,m,strings,null,l):"";},isFlagged_else3:function(m,Y,l){return m.flags.isFlagged?"":i(l.template.isFlagged_else3,m,l.formatters,m,strings,null,l);},isFlagged_else2:function(m,Y,l){return m.flags.isFlagged?"":i(l.template.isFlagged_else2,m,l.formatters,m,strings,null,l);},to_frm_srch_title:function(n,Y,l){var m=l.parent.getMsgFid(n);return NeoConfig.strings[m==="Sent"||m==="Draft"?"str_mas_to_srch_attr":"str_mas_frm_srch_attr"];},flag_sub_info:function(n,l,m){var Y=[m.parent.isRenderSelected(R,m.renderSubid)?" info-selected ":"",R?" info-subselected ":"",(n.flags.isRead?"":" info-unread "),(n.flags.isFlagged?" info-flagged ":"")].join("");
return Y;},status:function(){return"unread";}},columns:{date:{sortKey:I,sortOrder:U},attachment:{sortKey:I,groupBy:"hasAttachment",sortOrder:U},"sort-flagged":{sortKey:I,groupBy:"flagged",sortOrder:U},unRead:{sortKey:I,groupBy:"unRead",sortOrder:U},subject:{sortKey:"subject",sortOrder:P}},sortList:function(l,p){var n=this,m,s,q=false,Y=n.columns,r=strings.str_msg_list_sorting,o=n.sortedColumn;if(n.sorting===1||!Y[l]||(n.folder&&n.folder.totalConversations===1)){return;}m=a.wcopy(Y[l]);m.action=l;if(l===o.action){m.sortOrder=(o.sortOrder===U)?P:U;switch(l){case"sort-flagged":m.groupBy=(o.groupBy==="flagged")?"unFlagged":"flagged";break;case"unRead":m.groupBy=(o.groupBy==="unRead")?"read":"unRead";break;case"attachment":m.groupBy=(o.groupBy==="hasAttachment")?"noAttachment":"hasAttachment";break;}q=true;}n.folderIDSortCol[n.fid]=n.sortedColumn=m;s=(m.sortKey===I)&&(m.sortOrder===P&&!m.groupBy);if(q&&!((l==="unRead")||(l==="flagged"))){if(n._listview.getSelectCount()>1){n._listview.clearSelection(1);}n._listview.reverse(s,r);}else{n._listview.setStatus(r);n.sorting=1;n._listview.refresh();n._listview.toggleScrollPos(s);}if(m.sortKey===I&&m.sortOrder!==D.get(E)&&!m.groupBy){D.set(E,m.sortOrder);D.saveOne(E);}if(n.sortMenu){n.sortMenu.updateSortInViewMenu(p);}},bindUI:function(){var l=this,Y=g.get(K)||0;l.evt.push(l.after("fidChange",function(){l.setLabel();}));l.evt.push(l._listview.on("beforeRender",function(){l.fire("beforeRender");},l));l.evt.push(A.on("previewPane:expanded",function(){l._listview.set("previewPaneEnabled",true);},l));l.evt.push(A.on("previewPane:collapsed",function(){l._listview.set("previewPaneEnabled",false);},l));if(NeoConfig.searchTooltip===1&&!NeoConfig.recentSearchList&&Y!==-1&&Y<X){l.appendMessageFrequency=0;l.evt.push(l._listview.on("appendConversations",function(){var m=this;m.appendMessageFrequency++;if(!m.appendMessageTimer){m.appendMessageTimer=setTimeout(function(){m.appendMessageFrequency=0;m.appendMessageTimer=null;},30000);}if(m.appendMessageFrequency===2){if(Y!==-1&&Y<X){Y++;m.appendMessageFrequency=0;A.use("comms-ui-tooltips-widget","_shared_module_search_searchtooltip_rollup",function(){m.showSearchTooltip();});}}},l));}l.evt.push(l.on("pageAction",function(n){var m;if(n.args&&n.args.action){if(NeoConfig.infiniteScroll&&n.args.action==="home"){l._listview.scrollToTop();}else{if(n.args.action==="page"){l._listview.set("page",n.args.val);}else{m=l._listview[n.args.action];if(m){m.call(l._listview,n.args.action);}}}}},l));l.evt.push(l._listview.on("renderComplete",function(m){l.fire("renderComplete",m);Neo.formatParticipantLists();A.fire("list-stat:renderComplete",{"endTime":new Date().getTime()});},l));l.evt.push(l._listview.on(G,function(){Neo.formatParticipantLists();},l));l.evt.push(A.on("cv:fixupList",function(){Neo.formatParticipantLists();},l));l.evt.push(l._listview.on(b,function(m){var n;if(m.itemNode){n=m.itemNode.one(".name-list");Neo.formatParticipantList(A.Node.getDOMNode(n));}},l));l.evt.push(l.rootNode.on("click",l.clickHandler,l));if(NeoConfig.infiniteScroll){l.bindInfiniteScroll();}},updateSortDropDown:function(Y){var l=this;l.sortMenu=new A.mail.ui.ListViewControls(Y.node,l,"sortoptions");l.sortMenu.updateSortInViewMenu(Y);},clickHandler:function(p){var n=this,q=p.target,l,r,s,o=a.getDataAction(p);switch(o.action){case"selectAll-message":case"selectAll":A.Lang.later(0,n,function(){n.selectAllNode.set("checked",n._listview.selectAll(1));A.fire("mt:click",{action:"msglist_selAll",args:{fid:n.fid}});});break;case"select-dd":n.createSelectMenu(o.node);break;case"retry-msglist-load":n.refresh();break;case"menu":if(o.node.hasClass("sortby")){n.sortMenu=new A.mail.ui.ListViewControls(o.node,n,"sortoptions");n.sortMenu.setup(n.template);}break;case"thrd-read":l=q.ancestor(".list-view-item").hasClass("unread")?"read":"unread";break;case"date":case"unRead":case"attachment":case"sort-flagged":n.sortMenu=new A.mail.ui.ListViewControls(o.node,n,"sortoptions");n.sortList(o.action,q);break;}if(q.getAttribute("data-action")==="msg-frm-srch"){NeoGV.masStarted=true;a.rocketstats.stat("massearch","clickedsearch");l="frmSrch";}if(q.hasClass("arrow")){s=n._listview.getItem(p);var Y=p.target.ancestor(".list-view-item");var m=this._listview._getIndexN(Y);n._listview._expandItem(s,m,Y);}if(q.hasClass("flag")||q.ancestor(".flag")){l=q.ancestor(".list-view-item").hasClass("flagged")?"unflagged":"flagged";s=n._listview.getItem(p);r=l==="flagged"?"flag_":"unflag_";r+=s.mid?"thrd_msg":(s.totalMsgs>1?"thrd":"message");A.fire("mt:click",{action:r});}else{if(q.hasClass("delete-msg")){l="delete";s=n._listview.getItem(p);A.fire("mt:click",{action:s.mid?"msglist_delBtn_thrd_msg":(s.totalMsgs>1?"msglist_delBtn_thrd":"msglist_delBtn")});}else{if(q.hasClass("expansion_retry")){A.fire("mt:click",{action:"retry_expand_thrd"});}}}if(l){A.use("mail-ui-proxyevents",function(){s=s||n._listview.getItem(p);A.mail.ui.MailEventsProxy.handleUI({action:l},n.getMsgFid(s),n,[s]);});}},setToolbarElements:function(l){var m=this,Y;if(l){Y=l.one("#pagetoolbar");if(Y){m.selectAllNode=l.one(".cbox input");if(m.selectAllNode){m.selectAllNode.set("checked",0);}}}},createSelectMenu:function(l){var m=this,Y=m._listview;m.selectMenu=new A.mail.ui.ListViewControls(l,m,"selectoptions");m.selectMenu.setup(m.template);if(!m.selectMenuEventListener){m.selectMenuEventListener=m.on("selectMessages",function(n){var o=n.action;switch(o){case"all":m.selectAllNode.set("checked",Y.selectAll(1));break;case"none":m.selectAllNode.set("checked",Y.selectAll(0));break;case"Read":case"unRead":case"Flagged":case"unFlagged":m.selectAllNode.set("checked",Y.selectSome("is"+o));}A.fire("mt:click",{action:"msglist_selectMnu",args:{fid:m.fid},append:{ltxt:"sel_"+o}});});}}},true);J.setConvHeaderList=function(m){for(var n=0,Y=m.length;n<Y;n++){d.push(m[n]);}};J.getConvHdrList=function(){return d;};J.getNeighbors=function(){};A.mail.ui.ConvList=J;},"1.0.0",{requires:["mail-ui-maillist","mail-ui-conv-maillist-model","mail-ui-conv-maillist-view","mail-controller-conversations","mail-ui-listview-controls","transition"]});


YUI.add("mail-ui-convpane-base",function(C){C.namespace("mail.ui");var D=C.common.Utils,N=D.escapeHtml,U=D.unescapeHtml,B=D.rocketstats,I=C.ui.Templates,b=C.mail,R=b.ui.MessagePaneUtils,S=b&&b.Controller?b.Controller.Messages:{},Q=b&&b.model?b.model.DataStore.Messages:{},O=Q.getPermMidPart,G=b.model.ConvStore.Conversations,A=G.getPermCidPart,E=Q.toMessage,T=Q.toMessageInfo,L=C.one("#inboxcontainer"),M="mail-ui-convpane-bind",F=b.model.ConvStore,X="ERROR: ConvPaneRead ",K=200,V=1000*10*60,W=15000,P=1,H={};var Z=function(Y){var c=this;Z.superclass.constructor.call(c,Y);Y=Y||{};c.formatters._shared_module_thread_thread_display_rollup=function(){var d=I._shared_module_thread_thread_display_rollup;return c.numSelected&&d?c.sub({s:d.base,f:c.readFormatters}):"";};c.oTemplate=I._shared_module_thread_thread_pane;c.statOp="convread";c.stopwatchPreview="MsgInPreview";c.composeWidgets={};c.midObjMap={};c.lftNotifyID=null;c.initialRender=false;c.dirty=false;c.primaryMid=null;c.refreshOnActive=false;c.flagMsgList=[];c.set("handleKeysLocally",1);c.set("charCodes","13, 32, 33,34,38,40,35,36, 46, 65, 69, 70, 65+meta, 65+ctrl, 75, 76, 82, 83, 90, 188, 190");c.set("parentNode",c.parentNode);c.expandMessageTimers={};if(Y.fid&&Y.message){c.set("message",{message:Y.message,submessage:Y.submessage,neighbors:Y.neighbors,fid:Y.fid,midtocid:Y.midtocid?Y.message.mid:null});}c._cancelMarkAsRead=function(){if(c.tmFireRead){clearTimeout(c.tmFireRead);c.tmFireRead=null;}};};C.extend(Z,C.mail.ui.MailPane,{onKeyDown:function(j){var i=this,f,m,p,n,d,l,Y,k,q;if(!i.message){return;}l=i.message.msgs;var g=function(){var r,s=false,e;if(i.selNode===null){s=true;i.selNode=C.one(".thread-item");i.activationNode=null;}else{e=i.selNode.next("div.thread-item")||i.selNode.next("div.add-to-conv");if(e&&e.hasClass("super-hidden")){if(i.superCollapsedNode){r=i.superCollapsedNode;}}else{r=e;}if(r&&document.activeElement===i.selNode._node){s=true;i.selNode=r;i.activationNode=null;}}i.focusMessageCard();return s;};var h=function(){var r,e;if(i.selNode){e=i.selNode.previous("div.thread-item");if(e&&e.hasClass("super-hidden")){if(i.selNode.previous("div").hasClass("supercollapsed")){r=i.superCollapsedNode;}else{r=i.listNode&&i.listNode.one(".thread-item");}}else{r=e;}if(r&&document.activeElement===i.selNode._node){i.selNode=r;i.activationNode=null;}}i.focusMessageCard();};var o=function(r){var e;for(e=l.length-1;e>-1;e--){d=l[e];if(i.getMsgFid(d)!=="Draft"){i.initReplyForward(r.action,d);return;}}};if(i.selNode){if(i.selNode.hasClass("add-to-conv")){var c=i.selNode.previous();p=c.getAttribute("data-mid");}else{p=i.selNode.getAttribute("data-mid");}n=i.getMessageIdxByMid(p);d=l[n];}if(j.metaKey||j.ctrlKey){return;}if(j.keyCode===38||j.keyCode===40){return;}j.halt();if(this.activationNode&&this.activationNode===this.selNode){this.activationNode=null;switch(j.keyCode){case 83:if(!g()){h();}f="spam";C.use(M,function(){i.handleUI(d,f);});return;case 46:if(!g()){h();}f="delete";C.use(M,function(){i.handleUI(d,f);});return;case 76:f=d.flags.isFlagged?"unflagged":"flagged";m=d.flags.isFlagged?"unflag_thrd_msg_hdr":"flag_thrd_msg_hdr";C.use(M,function(){i.handleUI(d,f);});return;case 75:f=d.flags.isRead?"unread":"read";m=d.flags.isRead?"unread_thrd_msg_hdr":"read_thrd_msg_hdr";C.use(M,function(){i.handleUI(d,f);});return;case 65:i.composeAction=true;i.initReplyForward("reply_all",d);return;case 82:i.composeAction=true;i.initReplyForward("reply_sender",d);return;case 70:i.composeAction=true;i.initReplyForward("forward",d);return;default:break;}}switch(j.keyCode){case 13:case 32:if(i.selNode.hasClass("supercollapsed")){i.expandSuperCollapsedNodes();i.selNode=i.listNode&&i.listNode.one(".thread-item");}else{if(i.selNode.hasClass("add-to-conv")){i.initReplyForward("reply-all",d);}else{if(i.selNode.hasClass("quickReply")){i.activeComposeWidget.cv.composeView.onKeyDown(j);}else{if(!i.selNode.hasClass("expanded")){i.scrollOnExpansion=true;if(i.parentCW.msgList&&NeoConfig.horzPane){Y=false;}else{Y=true;}i.expandMessages(n,"one","no",false,{no_scroll_to_msg:Y});i.selNode=i.getMsgNodeByMid(p);}else{i.collapseMessage(i.selNode);}}}}i.focusMessageCard();break;case 190:g();break;case 188:h();break;case 90:this.activationNode=this.selNode;break;case 65:k={};i.composeAction=true;k.action="reply_all";o(k);break;case 82:k={};i.composeAction=true;k.action="reply_sender";o(k);break;case 70:k={};i.composeAction=true;k.action="forward";o(k);break;case 75:q=i.message;f=q.totalUnread?"read":"unread";m=q.totalUnread?"read_thrd_hdr":"unread_thrd_hdr";i.handleUI(q,f);break;case 76:q=i.message;f=q.totalFlagged?"unflagged":"flagged";m=q.totalFlagged?"unflag_thrd_hdr":"flag_thrd_hdr";i.handleUI(q,f);break;default:Z.superclass.onKeyDown.call(i,j);break;}},setMessage:function(d){var e=this,c=false,Y=D.Stopwatch.get("MsgInPreview")||e.stopwatch;if(Y){Y.start(1,"Set");C.fire("MessagePane:inception",d);}clearTimeout(e.slowLoad);clearTimeout(e.loadingTimer);e.isLoaded=0;e.scrollTop=0;e.disableTruncate=0;e.primaryMid=null;e.numRetries=e.loading_slow=e.loading_error=e.loading_moved=0;e.expandAllMode=false;e.readBatch=null;if(d){if(d.message.length>0){e.handleMultipleMessagesSelected(d,Y);}else{c=true;e.handleSingleMessageSelected(d);}}else{e.clearSelection(d);}e.fire("paneMessage",{content:c});},clearSelection:function(){var Y=this;Y.numSelected=0;Y.registerLFTNotify();Y.neighbors=Y.message=null;if(!Y.get("visible")){return;}if(Y.isPrevPaneVisible()){Y.saveDraftAction();}Y.render();},handleSingleMessageSelected:function(c){var d=this,Y=d.message||{};d.updateSingleMessageSelectedState(c,Y);if(!d.get("visible")){return;}if(!d.parentNode){return;}d.registerLFTNotify();if(Y.cid===d.message.cid){if(!d.submessage){return;}if(!d.selectMessage(d.submessage)){d.loadPaneContent(1);d.selectMessage(d.submessage);}}else{if(Y.cid){d.abortRequests();}B.stat(d.statOp,"setMessage");d.bufferPaneContent();}},bufferPaneContent:function(){var c=this,Y;if(c.tmPendingLoad){clearTimeout(c.tmPendingLoad);Y=c.loadPaneContent;
}else{c.loadPaneContent(11);}c.tmPendingLoad=setTimeout(function(){clearTimeout(c.tmPendingLoad);c.tmPendingLoad=null;Y&&Y.call(c,2);},K);},updateSingleMessageSelectedState:function(c,Y){this.numSelected=1;this.fid=c.fid;if(!Y.cid||(c.message.cid&&A(Y.cid)!==A(c.message.cid))||c.midtocid){if(this.isPrevPaneVisible()){this.saveDraftAction();}this.message=c.message;}this.submessage=c.submessage;this.midtocid=c.midtocid;if(this.submessage){this.scrollOnExpansion=true;}this.neighbors=c.neighbors;},handleMultipleMessagesSelected:function(c,Y){var d=this;if(d.isPrevPaneVisible()){d.saveDraftAction();}d.numSelected=c.message.length;d.neighbors=d.message=null;if(!d.get("visible")){return;}d._cancelMarkAsRead();Y&&Y.start(2,"PreLoadExtra2");d.loadExtra(function(){Y&&Y.start(2,"LoadExtraCB2");try{d.render();}catch(f){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:1",f,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:1");}});},getMessage:function(){var d=this,c=(d.message)?{message:d.message,fid:d.fid}:null,Y=D.Stopwatch.get("MsgInPreview")||d.stopwatch;Y&&Y.start(1,"Get");if(d.numSelected&&!d.message){c={message:new Array(d.numSelected),fid:d.fid};}Y&&Y.start(1,"PostGet");return c;},hasMessage:function(){var Y=this;return(Y.message&&Y.message.cid);},showActionsBar:function(c){var d,Y=C.all(".thread-item .thread-actions");Y.removeClass("show-actions");Y.addClass("hide-actions");d=c&&c.one(".thread-actions");d.removeClass("hide-actions");d.addClass("show-actions");},getMessageIdxByMid:function(c){var Y=O(c);return this.midObjMap[Y];},getMessageIdxByMidLookup:function(d,f,c){var Y=O(d);for(var e=0;e<f.length;e++){if(O(f[e].mid)===Y){return e;}}return c?null:0;},getMsgFromNode:function(c){var e=this,Y,d;if(c){Y=c.getAttribute("data-mid");d=e.getMessageIdxByMid(Y);if(C.Lang.isNumber(d)){return e.message.msgs[d];}}},getMsgNodeByMid:function(d){var Y=this.get("parentNode"),c=O(d);if(Y){return Y.one("div[data-mid='"+c+"']");}},getComposeNodeByMid:function(d){var Y=this.get("parentNode"),c=O(d);if(Y){return Y.one("div[data-draftmid='"+c+"']");}},refreshMidObjMap:function(d){var e={},Y;for(var c=0;c<d.length;c++){Y=O(d[c].mid);e[Y]=c;}return e;},removeDraft:function(e){var f=this,Y=null,d=f.message.msgs,c;for(c=e-1;c>=0;c--){if(d[e].inReplyTo===d[c].mimeMsgId){Y=d[c].mid;break;}}if(Y){delete f.composeWidgets[O(Y)];}},collapseAllMessageCards:function(){var f=this,Y=f.get("parentNode"),d,e,c;if(Y){d=Y.all("div.thread-item");d.each(function(g){if(!g.hasClass("quickReply")&&!g.hasClass("tall-compose")){g.setStyles({"height":"auto","margin-top":0}).removeClass("expanded");e=g.one(".thread-body");e.setStyles({"height":0,"opacity":0});g.one(".thread-footer")&&g.one(".thread-footer").addClass("hidden");f.fire("MessagePane:unload",g);}});c=f.getMsgNodeByMid(f.message.msgs[0].mid);f.selNode=c;f.focusMessageCard();}},getComposeWidgets:function(){var d=this,Y=[],c;for(c in d.composeWidgets){Y.push(d.composeWidgets[c].cv.composeView);}return Y;},registerLFTNotify:function(c){var Y=this;if(!c){if(Y.lftNotifyID){C.fire("ds:conv:unreg",Y.lftNotifyID);Y.lftNotifyID=null;}}else{if(!Y.lftNotifyID||(A(Y.lftNotifyID)!==A(c))){Y.lftNotifyID=c;C.fire("ds:conv:reg",Y.lftNotifyID);}}},triggerConvOnboarding:function(){if(this.message.totalMsgs>1&&NeoConfig.showConvTutorial){setTimeout(function(){C.fire("showConvOnboarding");},300);NeoConfig.showConvTutorial=0;}},render:function(m){try{var i=this,g,d,h,Y=i.getStopwatch();var c=m&&!i.parentNode&&i.message,k=function(){try{i.renderComplete();i.paneRendered=true;if(NeoConfig.showMultitaskTutorial){setTimeout(function(){C.fire("showMultitaskingOnboarding",{queuedObCallback:i.triggerConvOnboarding,ctx:i});},300);}else{i.triggerConvOnboarding();}if(!i.wasCached){i.initializeAllDrafts();i.parentCW.showToggleThreadButton();}else{setTimeout(function(){i.initializeAllDrafts();i.parentCW.showToggleThreadButton();if(i.fid==="Draft"){i.listNode.all(".loadhide").removeClass("loadhide");i.getRoot()&&i.getRoot().one(".conv-loading").addClass("hidden");}},1);}i.bindContentUI&&i.bindContentUI();}catch(n){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:2",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:2");}};i.parentNode=C.one(m)||i.parentNode;if(c){i.loadPaneContent(3);return;}Y&&Y.start(1,"Render");if(!i.parentNode){return;}h=i.parentNode;i.set("parentNode",h);if(h){if(!i.hasStarted&&i.message){i.fireEvent("start");i._cancelMarkAsRead();}i.appendMarkup();C.one("#shellcontent").removeClass("loadingConv");i.setDocRole();if(!i.eventsBound){i.bindUI();}if(i.fullView){i.setTitle();}i.quickReplyBox=i.parentNode.one(".add-to-conv");g=i.getRoot();i.listNode=g&&g.one(".thread-item-list");i.hdr=g&&g.one(".message-header");i.threadItems=i.listNode&&i.listNode.all(".thread-item");i.superCollapsedNode=i.listNode&&i.listNode.one(".supercollapsed");if(i.superCollapsedNode){var f=0,l=true;i.threadItems.each(function(e){if(f===0||f===i.message.msgs.length-1){f++;return;}else{if(i.fid==="Sent"){if(i.message.msgs[i.getMessageIdxByMid(e.getAttribute("data-mid"))].fid==="Sent"){l=false;}else{if(l){e.addClass("super-hidden");}}}else{if(i.fid==="Draft"){if(i.message.msgs[i.getMessageIdxByMid(e.getAttribute("data-mid"))].fid==="Draft"){d=e.previous();d&&d.removeClass("super-hidden");l=false;}else{if(l){e.addClass("super-hidden");}}}else{if(e.hasClass("unread")){l=false;}else{if(l){e.addClass("super-hidden");}}}}}f++;});}}i.fireEvent("render");if(!i.outboundReq&&i.message){if(i.message.msgs&&i.message.msgs[i.message.msgs.length-1].body){i.isLoaded=1;}Y&&Y.start(1,"MessageInDOM");k();setTimeout(function(){if(i.tbarCallBack){i.tbarCallBack.apply(i.tbarScope,[C]);}},0);}}catch(j){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:3",j,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:3");
B.stat(i.statOp,"renderError");C.use("common-utils-error",function(){D.error.report((X+"renderError"),j,1,1,1);});}},setTitle:function(Y){var d=this,c=Y||(d.message&&d.message.subject?N(U(d.message.subject)):d.fid==="Draft"?strings.str_tabs_compose:strings["str_msg-view_tab_no_subject"]);if(d.get("title")!==c){d.set("title",c);}},requestPaneContent:function(f,c,e,d){var i=this,h=f?f.cid||0:0,g,Y=i.getStopwatch();if(h||i.midtocid){c.args={fid:i.fid,primeMsg:f,stopwatch:Y};i.fireEvent("get");if(Y){Y.start(1,"YCMSGGetBegin");if(!Y.YCMSGGetBegin){Y.YCMSGGetBegin=new Date();}}e.oldMsgCnt=i.message.msgs&&i.message.msgs.length;g=C.mail.Controller.Conversations.getConv(e,c,d,f);}return g;},openComposeCards:function(){var e=this,c=0,d=e.composeWidgets||"",Y;if(d){for(Y in d){c++;}}return c;},getRemovedMsg:function(Y,c){var e,d,f,g=null;if(!Y||!c){return null;}for(e=0;e<Y.length;e++){f=false;for(d=0;d<c.length;d++){if(Y[e].mid===c[d].mid){f=true;break;}}if(!f){g=Y[e];break;}}return g;},loadPaneContent:function(y,z,m,v,x,c,l){try{var o=this,Y=o.message,h=Y?Y.cid||0:0,w,i,d=!x&&!o.submessage&&(o.midtocid?NeoConfig.hasConvV3:F.Conversations.canBatchLMTGDM(Y,o.fid)),t=(z&&!m)?z:0,q=o.retryPrefix(t),g,f;o.currentLmtContext=c;if(!x){g=o.getStopwatch(),f=new D.Stopwatch(d?"LoadConvBatch":"LoadConv");}g&&g.start(2,"Load");m=m||{};if(h&&!o.hasStarted){o.fireEvent((o.fullView?"tab":"preview")+":start");o.hasStarted=true;o._cancelMarkAsRead();}if(h||o.midtocid){var k={success:function(AA){var AC=0,AI,AD,AH,AB;o.setRefreshTimer();try{if(x){if(c){AI=o.lftSendSaveCongruencyCheck(o.message,AA,c);if(AI.oldIdx>=0||AI.newIdx>=0){o.resetRequestLoadingState(false);i=(AI.oldIdx!=-1)?AI.oldIdx:AI.newIdx;AD=AA.msgs[i];AD=E(o.getMsgFid(AD),AD);if(AI.oldIdx>=0){AC=1;}if(AD.fid==="Draft"){if(!c.draftMID){AH=O(c.origin.oMsg.mid);AB=o.getComposeNodeByMid(AH);AB.setAttribute("data-mid",O(AD.mid));}o.insertMsgAtPos({msg:AD,pos:i,replace:AC});}else{if(AD.fid==="Sent"){if(AI&&AI.newIdx&&o.message.msgs[AI.newIdx]&&o.message.msgs[AI.newIdx].mid===c.newMsg.mid){return;}o.insertMsgAtPos({msg:AD,pos:i,replace:AC},true);}}}if(!AI.remainder||(c.newMsg&&(c.newMsg.fid=="Draft"))){return;}}else{o.resetRequestLoadingState(false);return;}}if(f===-1){B.stat(o.statOp,"successdupcall_load");D.assert(0,"successdupcall",1);return;}var AG=k&&k.respProps&&k.respProps.wasCached,j=k&&k.respProps&&k.respProps.callPerf,AF=[AA,AG,false,d];if(g){g.start(1,"LMTFetchEnd");g.YCMSGGetEnd=new Date();g.wasCached=AG;g.BECallTime=j;}if(f){f.wasCached=AG;f.YCMSGGetBegin=g&&g.YCMSGGetBegin;f.YCMSGGetEnd=g&&g.YCMSGGetEnd;f.BECallTime=j;f.stop();}o.registerLFTNotify(AA.cid);o.loadExtra(function(){g&&g.start(3,"PreOnSuccess");o.onSuccess.apply(o,AF);v&&v();});f=-1;}catch(AE){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:4",AE,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:4");B.stat(o.statOp,(q+"loadConvSuccessError"));C.use("common-utils-error",function(){D.error.report("loadConvSuccessError",AE,1,1,1);});}},failure:function(e){var j;clearTimeout(o.loadingTimer);o.cleanRefreshTimer();if(o.message&&o.message.cid){o.registerLFTNotify(o.message.cid);}o.loadExtra(function(){o.onFailure.apply(o,[e,false]);},1);if(o.midtocid){j=o.conv_deleted_error?"_Deleted":"_NotFound";if(o.searchQuery){B.stat("TAE46","SearchMessage"+j);}else{B.stat("TAE46","MRDMessage"+j);}}},notify:C.bind(J,o),errorPosition:y||99,suppressCodes:!z&&x&&["*"],suppressNotification:true,convOrigin:o.searchQuery?"search":o.midtocid?"mrd":"general"},s,r,n;if(o.fid==="Draft"&&Y.msgs&&((c&&c.newMsg)||!Y.totalDraft)){for(var p=Y.msgs.length-1;p>=0;p--){n=Y.msgs[p].fid||Y.msgs[p].sourceFolderInfo.fid;if(n!=="Draft"){r=n;break;}}}else{r=o.fid;}k.openedFrom=o.midtocid?"search":(y!=3?"pane":r);s={cid:h,ovparams:m,cfid:r};s.msg=o.midtocid?{mid:o.midtocid}:o.submessage;s.mfid=o.midtocid?o.fid:o.getMsgFid(s.msg?s.msg:Y.msgs[Y.msgs.length-1]);s.checksum=m.checksum?m.checksum:Y.checksum;s.silentFetch=x;m.checksum=null;if(c&&c.newMsg){s.newMsg=c.newMsg;}o.fireEvent("get");if(o.usedPreload){if(o.preloadedMsg){o.loadExtra(function(){g&&g.start(3,"PreOnSuccess");o.onSuccess.apply(o,[o.preloadedMsg,true,true]);o.preloadedMsg=null;});}else{if(o.preloadFailure){o.loadExtra(function(){o.onFailure.apply(o,[o.preloadFailure,true]);o.preloadFailure=null;},1);}}}else{B.stat("convread",(q+"loadMessageRequest"));w=o.requestPaneContent(Y,k,s,d);o.abortRequests();if(o.outboundReq){o.request=w;o.requestType="loadMessage";}}o.usedPreload=0;o.isRetrying=t;if(o.outboundReq&&!l){clearTimeout(o.loadingTimer);o.loadingTimer=setTimeout(function(){o.loadExtra(function(){if(o.outboundReq){o.render();}});},300);clearTimeout(o.slowLoad);o.slowLoad=setTimeout(function(){B.stat(o.statOp,"slowLoad");o.loadExtra(function(){o.handleSlowRequest();},1);},W);}}}catch(u){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:5",u,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:5");B.stat(o.statOp,(q+"loadConvError"));}},insertBody:function(){var h=this,g=h.message,e,Y,f,d,c;if(g&&g.msgs){Y=g.msgs.length;f=g.msgs;for(e=0;e<Y;e++){if(f[e]&&f[e].body){d=h.getMsgNodeByMid(f[e].mid);if(!(e===Y-1&&h.getMsgFid(f[Y-1])==="Draft")){c=d&&d.one(".body");if(c){c.setContent(f[e].body.display);}}}}}},attach:function(){var Y=this;Y.msgChangeHandle=C.on("ds:msg:change",function(e,m,f,o,i){var n=Y.message,c=f&&f[0],j=Y.parentNode,l,h,d,k,g;l=c.mid;h=c&&Y.getMessageIdxByMid(l);if(!n||!n.msgs||!C.Lang.isValue(h)||(!Y.initialRender&&i!=="flag")){return;}else{d=n.msgs[h];}if(Y.fullView&&i==="move"){if(Q.hasMoved(d.mid,l,Y.getMsgFid(d),e)){if(n.msgs.length>1){Y.dirty=true;Y.handleSingleMsgDelete(d);}else{Y.set("close",1);}return;}}if(d&&c&&O(c.mid)===O(d.mid)&&c.flags&&d.flags&&j&&!Y.outboundReq){if(c.flags.isFlagged!==d.flags.isFlagged){Y.dirty=true;
Y.updateMessageFlagMarkup(c);}if((c.flags.isRead!==d.flags.isRead)||(i==="flag"&&o[0].flags.isRead)){Y.dirty=true;Y.updateMessageReadMarkup(c,c.flags.isRead);}k=Y.message.msgs[h];g=k&&k.body&&k.body.display;Y.message.msgs[h]=c;if(g&&c.body){Y.message.msgs[h].body.display=g;}}});Y.convDeleteHandle=C.on("ds:conv:remove",function(g,h,d){var f=Y.message,c,e=0;if(!f){return;}if(g===Y.fid){if(!Y.isStepping){Y.arrMessageSequence=null;}if(Y.fullView&&h&&f.cid){for(c=0;c<h.length;c++){if(A(f.cid)===A(h[c].cid)){e=1;}}}if(e||(!h&&d)){Y.set("close",1);}}});Y.convChangeHandle=C.on("ds:conv:change",function(AC,AB,x,z,n,r){var e=Y.message,m=Y.parentNode,d=AB&&AB[0],s=x&&x[0],u=z&&z[0],l=n&&n.reason==="savedraft",f,AA,c,p,o,AE,q,AD,w,t,g,j,y,k;if(!e||C.Object.isEmpty(Y.midObjMap)||(!Y.initialRender&&AC!=="msg:flag"&&AC!=="msg:remove"&&AC!=="msg:add")){return;}if(AC==="move"){for(y=0;e&&y<x.length;y++){AD=x[y].cid;w=x[y].fid;t=AB[y].cid;g=AB[y].fid;if(Y.fullView){if(A(AD)===A(e.cid)){if(!Y.isStepping){Y.set("close",1);}}}}return;}if(d&&s&&A(d.cid)===A(s.cid)&&G.areSameConvs(s,Y.message)&&m){if(AC==="msg:remove"){k=Y.getRemovedMsg(d.midMap,s.midMap);var v=Y.midObjMap[O(k.mid)];if(!C.Lang.isValue(v)){return;}if(l){return;}if(k.fid==="Draft"&&!l){Y.removeDraft(v);}Y.message.msgs.splice(v,1);Y.message.midMap.splice(v,1);Y.message=F.Conversations.calcConvSummary(Y.message);p=Y.message.msgs;o=p.length;Y.midObjMap=Y.refreshMidObjMap(p);if(o>0){if(!l){c=Y.getMsgNodeByMid(k.mid);if(c){c.remove();Y.fire("MessagePane:unload",c);}var h=Y.message.msgs[Y.message.msgs.length-1].fid||Y.message.msgs[Y.message.msgs.length-1].sourceFolderInfo.fid;if(h!=="Draft"){Y.quickReplyBox&&Y.quickReplyBox.show();}Y.updateCount();}}else{if(Y.fullView){Y.set("close",1);}else{if(!(l&&Y.get("active"))){Y.set("message",null);}}return;}}else{if(AC==="msg:add"){AA=n[0][0];if(r.cachedMsg&&AA.fid==="Sent"){j=T(AA.fid,r.cachedMsg);Y.insertMsgAtPos({msg:j,replace:0},true);}else{if(Y.fid==="Draft"&&Y.message.msgs.length===1){return;}else{Y.ignoreLMT=true;f={origin:r.sdo.get("origin"),draftMID:r.sdo.get("draftMID"),newMsg:{cid:AA.cid,fid:AA.fid,mid:AA.mid}};if(Y.get("active")){Y.loadPaneContent(4,null,{force:true},null,true,f,true);}return;}}}}if(C.Lang.isValue(u.totalFlagged)||C.Lang.isValue(u.totalUnread)){if(d.totalFlagged!==s.totalFlagged){q=s.totalFlagged>0?true:false;Y.message.totalFlagged=s.totalFlagged;Y.dirty=true;Y.updateConvFlagMarkup(q);}if(d.totalUnread!==s.totalUnread){AE=s.totalUnread>0?false:true;Y.message.totalUnread=s.totalUnread;Y.dirty=true;Y.updateConvReadMarkup(AE);}}}});},detach:function(){var Y=this;Y.stepIndex=Y.isStepping=null;Y.msgChangeHandle&&Y.msgChangeHandle.detach();Y.convChangeHandle&&Y.convChangeHandle.detach();Y.convDeleteHandle&&Y.convDeleteHandle.detach();Y.threadHeaderHandler&&Y.threadHeaderHandler.detach();Y.rteActiveHandler&&Y.rteActiveHandler.detach();Y.threadItemHandler&&Y.threadItemHandler.detach();Y.refreshHandler&&Y.refreshHandler.detach();Y.subjectHandle&&Y.subjectHandle.detach();NeoConfig.convReplyBtnsInTlbr&&Y.newMessageHandler&&Y.newMessageHandler.detach();if(Y.widthUpdateTimer){Y.widthUpdateTimer.cancel();Y.widthUpdateTimer=null;}C.each(Y.expandMessageTimers,function(c){c.cancel();});Y.cleanRefreshTimer();Y.registerLFTNotify();},setRenderFocus:function(){var Y=this;Y.setFocusNode();},setFocusNode:function(){},isConvActive:function(c){var Y=this;if(!Y.message&&!Y.message.cid){return false;}return(A(Y.message.cid)===A(c));},loadExtra:function(c,Y){var j=this,f=Y?["mail-ui-convpane-error"]:["mail-ui-convpane-read"],d=D.Stopwatch.get("MsgInPreview")||j.stopwatch,e,h,g;if(!Y&&P){j.bindPaneContent&&(h="MsgPaneRead_Preloaded");P=0;}d&&d.start(2,"LoadExtraBody");g=function(){try{var m=f,k;d&&d.start(2,"LoadExtraUseCB");if(j.setFullFormatters&&!j.setFull){j.setFullFormatters();}try{c.apply(j);}catch(l){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:6",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:6");B.stat(j.statOp,"loadExtraCBApplyError");C.use("common-utils-error",function(){D.error.report("loadExtraCBApplyError",l,1,1,1);});}if(H){for(k=0;k<m.length;k++){if(typeof m[k]!=="function"){H[m[k]]=1;}}}}catch(l){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:7",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:7");B.stat(j.statOp,"loadExtraCBError");}};for(e=0;e<f.length;e++){if(H[f[e]]){f.splice(e,1);e--;}}if(f.length){f.push(g);C.use.apply(C,f);}else{g(C);}d&&d.start(2,"PostLoadExtraBody");}});function a(Y,d){var c=this;if(c.message&&Y){d=d||c.message.cid;if(!d){}C.fire("Y.mail.ui.ConvPane:"+Y,d,c.guid);}}function J(Y){var c=this;if(Y==="async"&&!c.outboundReq){c.outboundReq=1;}}C.mix(Z.prototype,{NAME:"ConversationPane",fireEvent:a,updateMessageReadMarkup:function(d,c){if(d){var Y=this.getMsgNodeByMid(d.mid);if(Y){c?Y.removeClass("unread"):Y.addClass("unread");}}},updateConvReadMarkup:function(Y){var c=this.get("parentNode").one(".message-header");if(c){Y?c.removeClass("unread"):c.addClass("unread");C.fire("MessagePane:markConvRead",this.message,Y);}},updateMessageFlagMarkup:function(f){var c,d,e,Y;if(f){c=this.getMsgNodeByMid(f.mid);if(c){e=c&&c.one(".flag");Y=e.hasClass("flagged");d=e.one("a");e.toggleClass("flagged").set("title",strings[Y?"str_msg_list_flag_attr":"str_msg_list_flagged_attr"]);e.set("aria-label",strings[Y?"str_msg_list_flagged":"str_msg_list_not_flagged"]);d&&d.set("aria-checked",!Y);}}},updateConvFlagMarkup:function(Y){var c=this.get("parentNode").one(".message-header .flag");if(c){Y?c.addClass("flagged"):c.removeClass("flagged");c.set("title",strings[Y?"str_msg_list_convflagged_attr":"str_msg_list_convflag_attr"]);c.set("aria-label",strings[Y?"str_msg_list_convflagged":"str_msg_list_not_convflagged"]);}},convertShortcuts:function(){var d=this,Y=d.parentNode,c=Y.one("div.tripane.content")||Y.one("div.message.content");
C.Lang.later(0,null,function(){R.convertShortcuts(Y,c);});},saveDraftAction:function(Y,e){var d=this,c;if(!d.saveDrafts){Y&&Y();}else{d.saveDrafts(function(f){if(!e&&!f&&Y){c={hd:strings.str_comp_title_saveasdraftfailmultiple,bd:strings.str_comp_saveasdraftfailmultiple};C.common.ui.DialogHelper.confirm(c,{ok:{handler:function(){Y();}},cancel:{}});}else{Y&&Y();}});}},handleSingleMsgDelete:function(g){var h=this,f=h.message,e=f.msgs,Y,d,c=g.mid;if(c){Y=h.getMsgNodeByMid(c);Y&&Y.remove(true);d=h.getMessageIdxByMid(c);e.splice(d,1);h.midObjMap=h.refreshMidObjMap(e);}},resetRequestLoadingState:function(Y){var c=this;clearTimeout(c.loadingTimer);clearTimeout(c.slowLoad);c.loading_slow=0;c.conv_deleted_error=0;c.loading_error=Y?1:0;c.outboundReq=null;c.request=null;c.isRetrying=0;},requestAllMessages:function(f,g,Y,d,c){var e;if(c){e=new Date();if(c.stopwatch){c.stopwatch.start(1,"YCMSGGetBegin2");c.stopwatch.YCMSGGetBegin2=e;}if(c.RSstopwatch){c.RSstopwatch.YCMSGGetBegin=e;}}S.getMultipleMessages(f,Y,this.getMsgFid,d);},focusMessageCard:function(){var c=this,Y;if(!(c.parentCW.msgList&&c.parentCW.msgList._listview.get("focused"))){c.selNode&&c.selNode.focus();}if(!NeoConfig.previewPanePref){if(!c.selNode){return;}Y=c.selNode.ancestor("body");Y.all(".infp-arrow").removeClass("hidden");}},updatePaneContent:function(){var Y=this;this.saveDraftAction(function(){Y.loadPaneContent(5,null,{force:true},null,true,null,true);clearTimeout(Y.slowLoad);});},setRefreshTimer:function(c){var d=this,Y=c||V;if(d.fid==="Draft"&&d.message.msgs.length===1){return;}d.cleanRefreshTimer();d.refreshTimer=C.Lang.later(Y,d,function(){if(d.get("active")===1){d.updatePaneContent();}else{d.refreshOnActive=true;}});},cleanRefreshTimer:function(){this.refreshOnActive=false;if(this.refreshTimer){this.refreshTimer.cancel();}},preload:function(g){var h=this,e=g.mid,Y=new D.Stopwatch("PreLoadMessage"),d,f;if(e){var c={success:function(i){if(Y===-1){B.stat("convread","successdupcall_preload");D.assert(0,"successdupcall",1);return;}d=c&&c.respProps&&c.respProps.wasCached;if(h.message){h.loadExtra(function(){h.onSuccess.apply(h,[i,false,true]);});}else{h.preloadedMsg=i;}Y=-1;},notify:C.bind(J,h),failure:function(i){if(h.message){h.loadExtra(function(){h.onFailure.apply(h,[i,true]);},1);}else{h.preloadFailure=i;}},errorPosition:9,suppressCodes:["*"]};B.stat("convread","preloadRequest");h.usedPreload=1;f=h.requestPaneContent(g,c,{fid:h.fid,msg:g,cachekey:"Prime"});h.abortRequests();if(h.outboundReq){h.request=f;h.requestType="preload";}}},isChat:function(){return false;},getMsgFid:function(Y){return Y.fid||Y.sourceFolderInfo&&Y.sourceFolderInfo.fid||Y.folderInfo&&Y.folderInfo.fid||this.fid;},isPrevPaneVisible:function(){return L.hasClass("prevPaneVisible")&&!L.hasClass("offscreen");}},true);C.mail.ui.ConvPane=C.mail.ui._ConvPane=Z;},"1.0.0",{requires:["_shared_module_thread_thread_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-controller-conversations","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils","mail-model-convstore"]});

YUI.add("mail-ui-convview-base",function(C){var E=C.common.Utils,a=C.mail,J=a.ui,N=J.MessagePaneUtils,M=a.model.DataStore,G=M.Folders.get,P=E.substitute,F=C.ui.Templates,I="div.empty-folder",H="#inboxcontainer",T="hidden",D=NeoConfig,W=D.grayoutEnabled,V=null,S="%40B%40Bulk",L="%40C%40Chats",R="darlaEvent",A="message",O="renderComplete",U="%40S%40Search",K="title",Q="visible",B=C.mail.Tabs;function Z(){var Y=C.mail.ui.ContextButton;if(W&&Y){Y.setNodeMessageListMenu();}}var X=function(Y){var d=this,c;X.superclass.constructor.call(d,Y);c=d.hasMsgList;Y=Y||{};d.msgPane=new J.ConvPane(C.mix(Y,{fullView:!c&&!Y.query,visible:!c||(NeoConfig.previewPanePref?true:false)}));if(Y.stopwatch){d.msgPane.stopwatch=Y.stopwatch;}d.callFromLaunch=Y.callFromLaunch?Y.callFromLaunch:false;d.msgList=c?Y.msgList||new J.ConvList(Y):0;d.supportPreview=true;d._nextprevModule="mail-ui-convpane-next-prev";d.darlaActionKey=(D.low_bandwidth)?"message_tabpane_low":(NeoConfig.isSSL?"message_tabpane_ssl":"message_tabpane");d.scrolling=[".list-view-items",".message.content"];function b(){d.addAttrs({scrollWidth:{value:null}});d.after("activeChange",d.afterActiveChanged,d);var f=function(){if(d.msgList&&d.msgList._listview){d.msgList._listview.updateUlSize();}};d.formatters={reply_group:function(){if(NeoConfig.convReplyBtnsInTlbr){var g=d.hasMsgList?d.toolbarMods.Inbox:d.toolbarMods.Conversation;return P(F[g].reply_group,0,0,0,strings);}},non_ad:function(g){return P(F._shared_module_folder_empty_rollup.non_ad,g,d.formatters,0,strings);},random_footer:function(i){var h=1;var g=Math.floor((Math.random()*h)+1);return P(F._shared_module_folder_empty_rollup["random_footer_"+g],i,d.formatters,0,strings);},random_footer_1:function(){return"";},random_footer_2:function(){return"";},empty_inbox:function(g){if(g.fid=="Inbox"){return P(F._shared_module_folder_empty_rollup.empty_inbox,g,d.formatters,0,strings);}return"";},empty_trash:function(g){if(g.fid=="Trash"){return P(F._shared_module_folder_empty_rollup.empty_trash,g,d.formatters,0,strings);}return"";},empty_spam:function(g){if(g.fid=="%40B%40Bulk"){return P(F._shared_module_folder_empty_rollup.empty_spam,g,d.formatters,0,strings);}return"";},empty_draft:function(g){if(g.fid=="Draft"){return P(F._shared_module_folder_empty_rollup.empty_draft,g,d.formatters,0,strings);}return"";},empty_folder:function(g){if(g.fid!="Inbox"&&g.fid!="Trash"&&g.fid!="%40B%40Bulk"&&g.fid!="Draft"){return P(F._shared_module_folder_empty_rollup.empty_folder,g,d.formatters,0,strings);}return"";},page_conversation_history:function(g){return d.isChat(d.fid)?P(F._shared_module_folder_empty_rollup.page_conversation_history,g,d.formatters,0,strings):"";},page_conversation_history_else:function(g){return !d.isChat(d.fid)?P(F._shared_module_folder_empty_rollup.page_conversation_history_else,g,d.formatters,0,strings):"";},archiving_disabled:function(g){return !D.ssa_enabled?P(F._shared_module_folder_empty_rollup.archiving_disabled,g,d.formatters,0,strings):"";},full_view:function(g){var h=d.isChat(d.fid)?L:d.fid;return !c?P(F[d.toolbarMods[h]].full_view,g,0,0,strings):"";},full_view_else:function(g){var h=d.isChat(d.fid)?L:d.fid;return c?P(F[d.toolbarMods[h]].full_view_else,g,0,0,strings):"";},msg_nav_arrows:function(h){var g="minty_module_toolbar_inbox_message_thread";return P(F[g].msg_nav_arrows,h,d.formatters,0,strings);},cancellable:function(g){return(d.msgPane&&d.msgPane.fullView)?P(F["minty_module_toolbar_inbox_message_thread"].cancellable,g,d.formatters,0,strings):"";},has_spam_button:function(h){var g=!d.isActualFolder(d.fid,"Sent")&&!d.isActualFolder(d.fid,"Draft")?P(F[d.msgToolbarMod].has_spam_button,h,d.formatters,0,strings):"";return g;},spam_menu:function(h){var g=(d.fid==S)?"":P(F[d.msgToolbarMod].spam_menu,h,d.formatters,0,strings);return g;},spam_menu_else:function(h){var g=(d.fid==S)?P(F[d.msgToolbarMod].spam_menu_else,h,d.formatters,0,strings):"";return g;},has_preview_pane:function(h){var g=d.isChat(d.fid)?"minty_module_toolbar_inbox_conversation_thread_rollup":"minty_module_toolbar_inbox_default_thread_rollup";return(D.switchView!=1&&c)?P(F[g].has_preview_pane,h,0,0,strings):"";},has_switch_view:function(h){var g=d.isChat(d.fid)?"minty_module_toolbar_inbox_conversation_thread_rollup":"minty_module_toolbar_inbox_default_thread_rollup";return(D.switchView==1&&c)?P(F[g].has_switch_view,h,0,0,strings):"";},has_sms_menu_else:function(g){return !strings.str_cfg_tog_hasSMS?P(F.minty_module_toolbar_inbox_conversation_thread_rollup.has_sms_menu_else,g,d.formatters,0,strings):"";},has_sms_menu_else1:function(g){return strings.str_cfg_tog_hasSMS?P(F.minty_module_toolbar_inbox_conversation_thread_rollup.has_sms_menu_else1,g,d.formatters,0,strings):"";},is_mon:function(){return strings.str_cfg_tog_monster_ad_empty_l10n?F._shared_module_folder_empty_rollup.is_mon:"";},is_lrec:function(){return !strings.str_cfg_tog_monster_ad_empty_l10n?F._shared_module_folder_empty_rollup.is_lrec:"";},from_search:function(i){var g=B.getActiveTab(),h=false;if(C.mail.ui.searchTab&&g.prevTabId==C.mail.ui.searchTab.get("id")){h=true;}return h?P(F["minty_module_toolbar_inbox_message_thread"].from_search,i,0,0,strings):"";}};if(d.msgList){d.once("activeChange",function(){var g=d.msgList;if(g.folder&&C.Lang.isNumber(g.folder.totalConversations)){g.updateTitle(g.folder.totalConversations);}f();d.checkPreview();});}C.on("msgsview:splitterdone",f);function e(g){if(g.newVal==1){d.dsFolderChange&&d.dsFolderChange.detach();d.dsFolderRename&&d.dsFolderRename.detach();d.footer&&d.footer.setStyle("visibility","hidden");}else{if(c){d.dsFolderChange=C.on("ds:folder:change",function(l,k,m){if(m&&m.length>0){var j,h;for(j=0,h=k.length;j<h;j++){if(m[j].total!==undefined&&k[j].folderInfo.fid==d.fid){d.renderToolbarsOrEmpty();break;}}}});}else{d.dsFolderRename=C.on("ds:folder:rename",function(i,h){if(d.msgPane&&d.fid==i.folderInfo.fid){d.fid=h.folderInfo.fid;d.msgPane.set("fid",d.fid);}});}}}d.on("closeChange",function(i){var h,g=d.subToolbars;for(h in g){g[h].set("close",i.newVal);
}e(i);});d.set("children",[d.msgPane,d.msgList]);d.msgPane&&d.msgPane.on(R,function(g){d.fire(R,g);});d.msgPane&&!d.msgPane.fullView&&d.msgPane.on("paneMessage",function(g){d.setPPToolbarItems(g.content);});C.on("msgsview:movetonewfolder",function(){var g=B.getActiveTab();if(d.hasMsgList&&g&&g.widget&&g.widget==d){d.handleUI({action:"folder-new",tbAction:true},d.fid,d.msgList);}});if(!c){d.msgPane.on("scrollWidthChange",function(g){d.set("scrollWidth",g.newVal);if(d.get("active")){C.fire("ws:fpMsgWidth",g);}});d.on("scrollWidthChange",function(g){if(g.reset){d.msgPane.scrollWidthReset();}});}else{d.after("contentToolbarChange",function(){d.msgList&&d.msgList.setToolbarElements(C.one("#toolbar"));});}d.set(K,c?d.msgList.get(K):d.msgPane.get(K));d.setToolbars();e({newVal:0});if(c){d.bindMsgList();}else{d.msgPane.on("fidChange",function(g){d.fid=g.newVal;d.setToolbars();});}d.set("charCodes","13,27,33,34,35,36,37,38,39,40,46,85,186,188,190,"+d.numCodes.join(",")+","+d.keyCodes.join(",")+","+"32+ctrl+shift,73+shift,84+shift,67");d.set("reuse",Y.reuse);}b();};C.extend(X,C.mail.ui.MailView);C.mix(X.prototype,{NAME:"ConversationView",msgToolbarMod:"minty_module_toolbar_inbox_message_thread",toolbarMods:{Inbox:"minty_module_toolbar_inbox_default_thread_rollup","%40C%40Chats":"minty_module_toolbar_inbox_conversation_thread_rollup",Draft:"minty_module_toolbar_inbox_drafts_thread_rollup","%40B%40Bulk":"minty_module_toolbar_inbox_spam_thread_rollup",Sent:"minty_module_toolbar_inbox_sent_thread_rollup","%40S%40Search":"minty_module_toolbar_inbox_search_thread_rollup",Conversation:"minty_module_toolbar_fragments_reply_group_conv"},renderEmptyFolder:function(d){var e=this,c,Y=F._shared_module_folder_empty_rollup,b;b=C.one(H).one(I);if(!b){C.one(H).append(P(Y.base,{folder_name:d,fid:e.fid},e.formatters,0,strings,F));}else{b.one(".col-a").setContent(P(Y.non_ad,{folder_name:d,fid:e.fid},e.formatters,0,strings,F));}b=C.one(H).one(I);c=b.one("#random-options-open");if(c){c.delegate("click",function(){yui.fire("openOptions",{view:"viewing_email"});},"span");}C.one(H).get("children").addClass(T);if(b){b.removeClass(T);}if(W){e.setToolbars();}else{e.set("contentToolbar","");}if(e.fid=="Trash"||e.fid==S){C.fire("foldersview:resetFocus",e.fid);}},renderToolbarsOrEmpty:function(){var e=this,Y,d,c,b;if(e.fid&&(d=G(e.fid))&&(d.total===0)){c=C.mail.ui.common.StringUtils.getSystemFolderName(e.fid,d.folderInfo.name);if(D.bidi){c='<span dir="'+d.folderInfo.dir+'">'+c+"</span>";}C.use("_shared_module_folder_empty_rollup",function(){e.renderEmptyFolder.apply(e,[c]);});}else{b=C.one(H).one(I);if(b){Y=C.one(H).get("children");if(Y){Y.removeClass(T);}b.addClass(T);}e.setToolbars();}},createInfNav:function(){var e=this,b,d,Y,c;d=e.msgPane&&e.msgPane.get("parentNode")&&e.msgPane.get("parentNode").one(".thread-item-list");if(!d){return;}Y=d.all(".infp-arrow");c=C.common.Utils.debounce(function(){Y.each(function(f){if(f.hasClass("invisible")){b=d.get("scrollTop")+200;f.setStyle("top",b);f.removeClass("invisible");}else{f.addClass("invisible");}});},200,true);d.on("scroll",c);Y.each(function(f){f.removeClass("hidden");if(!f.infPane){f.addClass("loaded");f.on("click",e.handleToolbarSelection,e);f.on("mouseover",function(){this.removeClass("arrowtrans");this.removeClass("loaded");this.addClass("steady");},f);f.on("mouseout",function(){this.addClass("arrowtrans");},f);f.infPane=true;}});setTimeout(function(){Y.each(function(f){if(f.infPane){f.addClass("steady");f.removeClass("loaded");}});},2500);},createToolbar:function(Y){var c=this,b;b=new J.Toolbar({template:Y,menu:{template:function(e,d){C.use("mail-ui-inboxmenu-base",function(){J.InboxMenu.insert(e,d,c.fid,{enableAddContact:function(f){f(c.isEnableAddToContacts(c));}});});},keys:function(e,d){C.use("mail-ui-inboxmenu-base",function(){var f=J.InboxMenu.getValidKeys(e);if(e.get("id")==="menu-move"){f=f.concat([68,96,97,98,99,100,101,102,103,104,105]);e.on("menu:state",function(g){if(g.state==="hide"){if(c.msgList&&c.msgList.get("focusNode")){c.msgList.get("focusNode").focus();}}});}d(f);});},enterAccel:function(d){C.use("mail-ui-inboxmenu-base",function(e){d(e.mail.ui.InboxMenu.getEnterAccel());});}}});b.on("itemSelected",c.handleToolbarSelection,c);return b;},setToolbars:function(Y){var b=this;if(W){C.use("mail-ui-button-ctxt",function(){b._setToolbars(Y);});}else{b._setToolbars(Y);}},_setToolbars:function(Y){var f=this,c=f.isChat(f.fid),e=c?L:f.fid,d=(c||f.hasMsgList)?f.toolbarMods[e]:f.msgToolbarMod;if(!d){d=f.hasMsgList?f.toolbarMods.Inbox:f.msgToolbarMod;}if(d=="minty_module_toolbar_inbox_default_thread_rollup"&&C.ui.Templates.minty_module_toolbar_inbox_default_thread_rollup){b();}else{if(d==f.msgToolbarMod&&!Y){f.msgPane&&f.msgPane.setToolbar&&f.msgPane.setToolbar(d,f.setToolbars,f);}else{C.use(d,b);}}function b(){var g=NeoConfig.previewPanePref?true:false,m=(d==f.msgToolbarMod&&e==S),h,k={previewToggle:strings[g?"str_msg-view_btn_hidepreview":"str_msg-view_btn_showpreview"],spam_data_action:m?"notspam":"spam",str_spam_attr:strings[m?"str_not_spam_attr":"str_spam_conv_attr"],str_spam:strings[m?"str_not_spam":"str_spam"]},s,t=0,p=e,n=f.subToolbars.Inbox,j,r,i,l,q=C.one("#rail-resize-vert");if(f.msgList){h=f.msgList._listview&&f.msgList._listview.isSelectedThread();t=f.msgList.vlist.getSelectCount();}else{if(f.msgPane){if(f.msgPane&&f.msgPane.message&&f.msgPane.message.msgs&&f.msgPane.message.msgs.length>1){h=true;}t=1;}}if(W){j=G(e);k.msgliststate=Y?(h?"hasthreadmsg":"hasonemsg"):"hasnomsg";}k.replyGroupState=f.msgPane.get(Q)?(f.msgPane.message?"":"disableReplyGroup"):"hideReplyGroup";s=P(F[d].base,k,f.formatters,0,strings,F);if(strings.str_cfg_tog_use_reedit&&e=="%40S%40Search"&&f.msgPane&&f.msgPane.message.sourceFolderInfo&&f.msgPane.message.sourceFolderInfo.fid=="Sent"){p=e+"+Sent";}if(!(p in f.subToolbars)){var o=G(p);if(o&&!o.isSystem&&n){f.subToolbars[p]=n;if(n.setButtonContext){n.setButtonContext(t,h);}}else{f.subToolbars[p]=f.createToolbar(s);}}if(f.subToolbars[p].setButtonContext){f.subToolbars[p].setButtonContext(t,h);
}if(f.get("contentToolbar")!==f.subToolbars[p]){f.set("contentToolbar",f.subToolbars[p]);}if(q&&(q.getComputedStyle("display")!=="none")){f.positionToolbarItems(true);}else{f.positionToolbarItems(false);}if(NeoConfig.infinitePane=="1"&&!NeoConfig.previewPanePref){r=C.one("#pagetoolbar");i=r&&r.one("#btn-prev-msg");l=r&&r.one("#btn-next-msg");i&&i.addClass("hidden");l&&l.addClass("hidden");f.createInfNav();}}},getComposeWidgets:function(){var Y=this;if(Y.msgPane){return(Y.msgPane.getComposeWidgets());}},getCurrentMsg:function(){var d=this,c,Y=d.msgList,b=d.msgPane;if(b&&b.message){c=b.message;}else{if(Y._listview&&Y._listview.getSelectCount()==1&&Y.getSelected){Y.getSelected(function(e){if(e){c=e[0];}});}}return c?c:null;},isEnableAddToContacts:function(b){b=b||this;var c=b.getCurrentMsg(),Y;if(c){Y=b.getFromEmail(c);!N.isKnownEmailAddress(Y);return !N.isKnownEmailAddress(Y);}return;},getFromEmail:function(Y){var b;if(Y){b=Y.from||(Y.header&&Y.header.from);return b&&b.email||"";}else{return"";}},singleSelectHandler:function(g){var f=this,k=f.msgPane,i=g.details[0],d,l=i.message,e=l.msgs&&l.msgs.length>0?l.msgs[0].mid:(l&&l.mid),h=k&&k.get(Q),Y=E.Stopwatch.get("MsgInPreview");if(h){if((k&&k.message&&k.message.mid)==e){return;}N.handleMsgInPreviewStopwatch(Y,k,i.fid,e);d=f.msgList._listview.isSelectedThread();var j=g.submessage?true:false,c={pp:1},b=(l.msgs&&l.msgs[0].from&&l.msgs[0].from.email)?l.msgs[0].from.email.split("@"):["",""];c.count=l.totalMsgs;c.unrdCnt=l.totalUnread;c.drftCnt=l.totalDraft,c.sndrDmn=b[1];C.fire("mt:click",{action:!j?"open_msg":(g.fid==="Draft"?"open_thrd_drftMsg":"open_thrd_msg"),append:c,spid:"msgread_reading_pane"});if(NeoConfig.multitask&&l){f.createRefTab(l);}}k&&k.set(A,i);f.msgDetails=l?g.details[0]:null;if(g.index){C.use("rocket-stats",function(o){o.common.Utils.rocketstats.stat("convread","SelectIndex_"+g.index);if(V!==null){var n=V-g.index,m=n>0?"MAX":"-MAX";o.common.Utils.rocketstats.stat("convread","SelectIndexDiff_"+((Math.abs(n)<=200)?n:m));}V=g.index;});}},handleUI:function(b,d,Y,c){var e=this;b.msgPane=e.msgPane;C.use("mail-ui-proxyevents",function(){C.mail.ui.MailEventsProxy.handleUI(b,d,Y,c);});},updatePreviewPaneToolbar:function(b){var Y=this.subToolbars[this.fid],c=Y?(Y.root||Y.get("content")):null;if(b.newVal===1&&!this.msgList._listview.checkmode&&this.msgPane.get(Q)){c&&c.removeClass("disableReplyGroup");}else{c&&c.addClass("disableReplyGroup");}},updatePreviewPaneCounter:function(c){var e,Y=this.subToolbars[this.fid],b=c.newVal,d;if(Y&&Y.setButtonContext){e=G(this.fid);d=this.msgList._listview.isSelectedThread();Y.setButtonContext(b,d);}if(b>1||(b===1&&this.msgList._listview.checkmode)){this.msgPane.set(A,{message:new Array(b)});this.msgDetails=null;}else{if(b==0){this.msgPane.set(A,null);this.msgDetails=null;}}},bindMsgList:function(){var d=this,b=d.msgList,c=d.msgPane;b.on("singleSelect",d.singleSelectHandler,d);b.on("sortList",function(e){this.sortList(e.sortType,e.targetNode,e.currentSortedColumn);});b.on(R,function(f){d.fire(R,f);});b.on("toggleToCol",function(){if(J&&J.MessagesViewColResize){J.MessagesViewColResize.toggleCol("to",true);}});c&&c.on("transferFocusChange",function(f){if(f.newVal){b.set("focus",1);}});b.on("command",function(f){var e=0,g=f.details[0].message;if(f.e&&f.e.type!="dblclick"&&((d.msgPane&&d.msgPane.get(Q))||strings.str_cfg_tog_open_by_dblclick)){e=1;}if(e){return;}var j=f.submessage?true:false,i={pp:e},k=(g.msgs&&g.msgs[0].from&&g.msgs[0].from.email)?g.msgs[0].from.email.split("@"):["",""];i.count=g.totalMsgs;i.unrdCnt=g.totalUnread;i.drftCnt=g.totalDraft;i.sndrDmn=k[1];C.fire("mt:click",{action:!j?"open_msg":(f.fid==="Draft"?"open_thrd_drftMsg":"open_thrd_msg"),append:i,spid:"message_tabpane"});var h=(d.isChat(f.fid))?["mail-ui-messagesview-base","_shared_module_message_display_fresh_rollup","_shared_module_message_pane_fresh"]:[];C.use(h,function(l){l.fire("openConv",{msg:f.message,submsg:f.submessage,fid:f.fid,neighbors:f.neighbors,sortCol:b.sortedColumn,arrMsgSeq:b._listview.arrItems||(b._listview._model&&b._listview._model.get("list")),index:f.index||(b._listview.rootSelect&&b._listview.rootSelect.index)||null,isThread:true});});});b.on("fidChange",function(e){if(d.fid!=e.newVal){d.msgDetails=null;d.fid=e.newVal;c&&c.set(A,null);d.renderToolbarsOrEmpty();d.toggleColumns(e.prevVal,e.newVal);}});if(c||W){b.on("selectCountChange",d.updatePreviewPaneCounter,d);NeoConfig.convReplyBtnsInTlbr&&b.on("selectCountChange",d.updatePreviewPaneToolbar,d);}b.on(O,function(f){if(!d.get("loaded")){d.set("loaded",1);}if(b.get("active")&&!f.silent){b.handleDarlaEvent(d.isEmpty(d.fid));}});C.one("#msg-list").one("div.list-view-items").on("keydown",function(h){var g=C.UA.os,f=(g=="windows"||g=="win");if((f&&h.shiftKey&&h.keyCode==121)||(!f&&h.ctrlKey&&h.shiftKey&&h.altKey&&h.keyCode==77)){h.preventDefault();E.simulateContextMenu(h.target);}});function Y(e){var g,f;if(!e){return false;}g=e.ancestor(".list-view-item");if(!g){return false;}f=g.ancestor(".list-view-item-subcontainer");if(!f){return false;}return true;}C.one("#msg-list").one("div.list-view-items").on("contextmenu",function(h){var i=h.currentTarget,g;h.halt();function f(){C.mail.ui.InboxMenu.insert("menu-msglist",function(){var e=C.one("#menu-msglist");Z();C.common.ui.MenuHelper.create(i,{menu:e,isContext:true,xy:[h.clientX,h.clientY],keys:function(j){j(C.mail.ui.InboxMenu.getValidKeys(e));},enterAccel:function(j){j(C.mail.ui.InboxMenu.getEnterAccel());}},function(){var j=e.one('a[data-action="fullheader"]');if(Y(h.target)){j.addClass("enable-menuitem-in-conv");}else{j.removeClass("enable-menuitem-in-conv");}e.on("menuSelected",function(l){var k={action:l.dataAction,contextmenuTarget:h.target};if("addcontact"===l.dataAction){k.context="msg";}C.mail.ui.MailEventsProxy.handleUI(k,d.fid,d.msgList);C.fire("mt:click",{action:"rt_click_msglst",append:{ltxt:k.action}});});e.on("menu:state",function(k){if(k.state=="hide"){if(d.msgList&&d.msgList.get("focusNode")){d.msgList.get("focusNode").focus();
}}});});},d.fid,{isContext:true,enableAddContact:function(e){e(d.isEnableAddToContacts());}});C.fire("mt:click",{action:"rt_click_msglst_preview"});}C.use("mail-ui-inboxmenu-base",function(e){e.use("common-ui-menu-helper",function(j){g=j.common.ui.MenuHelper;g.createLoadingMenu(i,{isContext:true,xy:[h.clientX,h.clientY]});j.use("mail-ui-inboxmenu-base",function(k){k.use("mail-ui-proxyevents",function(){f();});});});});});},toggleColumns:function(b,Y){if(b===L){C.one(".list-view").all(".col-hd.info, .col-hd.file").removeClass("hidden");}else{if(Y===L){C.one(".list-view").all(".col-hd.info, .col-hd.file").addClass("hidden");}}},afterActiveChanged:function(b){var c=this,Y=c.msgList;if(b){if(c.hasMsgList&&!C.server){!c.slidersSet&&C.Lang.later(0,c,c.loadResizersAndSliders);if(b.newVal&&c.get("loaded")){Y.handleDarlaEvent(c.isEmpty(c.fid));}}else{if(!c.hasMsgList&&c.msgPane.message&&typeof b.prevVal!=="undefined"){if(b.newVal){c.triggerDarlaWithAIC();}}}Y&&Y.set(Q,b.newVal);}},handleDefaultCase:function(h){var g=this,i=h.item,d=h.action,Y=g.fid,e=g.msgList,j=g.msgPane,c=g.getComposeWidgets(),f={action:d,id:(i?i.get("id"):0),forwardAsAttachment:h.forwardAsAttachment||0,fid:(i&&i.getAttribute("data-fid")?i.getAttribute("data-fid"):Y),widget:(g.type==="messagepane"?g:null),item:i,hasMsgList:g.hasMsgList,tbAction:h.tbAction,hasCompose:c&&c.length},b;if(h.context){f.context=h.context;}if(g.hasMsgList){g.handleUI(f,Y,e);}else{b=j&&j.get(A);g.handlePostAction(f,Y,null,b);}},render:function(Y){var d=this,b=d.msgList,c=d.msgPane;d.set("parentNode",C.one(Y));(b||c).on(O,function(){if(!d.hasMsgList){!d.callFromLaunch&&setTimeout(function(){d.triggerDarlaWithAIC();},0);}d.fire(O);});if(b){b.render(Y);}if(d.fid!==U||b===0){c&&c.render(Y);}window.msgTime=(new Date()).getTime();if(d.fid&&d.fid!==U){d.set("focusNode",(b||c).get("focusNode"));d.renderToolbarsOrEmpty();window.msgTime=(new Date()).getTime();}},showToggleThreadButton:function(){var c=this,b,Y=c.get("contentToolbar");if(Y&&Y.root){b=Y.root.one(".toggle-thread");b.removeClass("hidden");if(b.hasClass("thread-cards-collapsed")){b.removeClass("thread-cards-collapsed").addClass("thread-cards-expanded");b.setAttribute("title",strings.str_collapse_all_attr);b.one(".icon-text").setContent(strings.str_collapse_all);}}}},true);C.namespace("mail.ui").ConvView=X;},"1.0.0",{requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-convlist-base","mail-ui-convpane-base","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils"]});

YUI.add("_shared_module_thread_thread_pane",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_thread_thread_pane={base:'<div class="threadpane {{page_message_pane_view}}" {{page_message_pane_view1}} tabindex="-1"> <div id="{{page_message_pane_view2}}" class="{{page_message_full_view}} thread-content content"> {{page_show_comm_modes}} {{page_show_comm_modes_else}} </div></div>',page_message_pane_view:"tripane",user_pref_height:'style="top:{{msg_pane_top}};{{tripane_pos}}:{{msg_list_width}}"',page_message_pane_view1:"{{user_pref_height}}",page_message_pane_view2:"msg-preview",page_message_full_view:"message ",global_spearmint_view:"{{_shared_module_message_prompt}} ",global_spearmint_view_else:'<div class="welcomemsg large">{{str_msg_welcome}}</div> ',page_show_comm_modes:"{{global_spearmint_view}} {{global_spearmint_view_else}} ",page_show_comm_modes_else:"{{_shared_module_thread_thread_display_rollup}} "};},"1.0.0",{requires:["_shared_module_message_prompt","_shared_module_thread_thread_display_rollup"]});

YUI.add("minty_module_toolbar_inbox_default_thread_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_toolbar_inbox_default_thread_rollup={base:'<div id="pagetoolbar" class="{{msgliststate}} {{replyGroupState}}"> <span class="btn btn-hdr cbox" id="btn-ml-cbox" tabindex="0"><label><input title="{{str_msg_list_select_all_msgs_attr}}" type="checkbox" class="focusable neoFocusable enabled" tabindex="-1" data-action="selectAll-message" title="{{str_msg_list_select_all_msgs_attr}}"><span class="icon"></span></label></span><span id="btn-select-dd" data-action="select-dd" role="button" aria-haspopup="true" class="btn neoFocusable enabled"><i class="icon icon-chevron-down"></i></span><span class="spacer-divider icon"></span> {{reply_group}} <span class="btn multimsg" role="button" title="{{str_delete_conv_attr}}" data-action="delete"> <i class="icon-delete"></i><span class="icon-text">{{str_delete}}</span> </span> <span class="btn multimsg" id="btn-move" role="button" aria-haspopup="true" title="{{str_move_conv_attr}}" data-action="menu"> <i class="icon-move"></i><span class="icon-text">{{str_move}}</span><b class="icon icon-chevron-down"></b> </span> <span class="btn multimsg" id="main-btn-spam" role="button" title="{{str_spam_attr}}" data-action="{{spam_data_action}}"> <i class="icon-spam"></i><span class="icon-text">{{str_spam}}</span> </span> <span class="btn multimsg" id="btn-spam" role="button" aria-haspopup="true" title="{{str_menu_spam_toggle_attr}}" data-action="menu"> <b class="icon icon-chevron-down"></b> </span> <span class="btn multimsg" id="btn-actions" role="button" aria-haspopup="true" title="{{str_actions_conv_attr}}" data-action="menu"> <i class="icon-more"></i><span class="icon-text">{{str_more}}</span><b class="icon icon-chevron-down"></b> </span> <span class="btn btn-absolute btn-view-dd" id="btn-conv-view" role="button" aria-haspopup="true" title="{{str_view_conv_attr}}" data-action="menu"><span class="icon-text">{{str_view}}</span><b class="icon icon-chevron-down"></b></span> <a href="#" class="btn btn-absolute btn-close-msg hidden" id="btn-closemsg" title="{{str_close}}" data-action="closemsg"><i></i></a> <span class="bevel_divider toggle-thread-divider hidden"></span> <span class="toggle-container"> <span class="btn toggle-thread thread-cards-expanded hidden" title="{{str_collapse_all_attr}}" data-action="thread-toggle"> <i class="icon-collapse-list"></i><span class="icon-text">{{str_collapse_all}}</span> </span> </span></div>',reply_group:'<span class="btn onemsg s-tp reply" role="button" title="{{str_reply_attr}}" data-action="reply_sender"> <i class="icon-reply"></i> </span> <span class="btn onemsg s-tp reply-all" role="button" title="{{str_reply_to_conv_attr}}" data-action="reply_all"> <i class="icon-reply-all"></i> </span> <span class="btn onemsg s-tp forward" role="button" title="{{str_forward_conv_attr}}" data-action="forward"> <i class="icon-forward"></i> </span> <span class="bevel_divider reply_group_divider"></span>'};},"1.0.0");

YUI.add("_shared_module_thread_thread_display_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_thread_thread_display_rollup={base:"{{message_selection}}{{message_selection_else}}",message_selection:'<div class="emptypane"> <h2 class="count">{{num_selected_msgs}}</h2> </div>',conv_deleted_error:'<div class="message"> {{str_conv_deleted_error}} </div> ',msg_deleted_error:'<div class="message"> {{str_msg_deleted_error}} </div> ',is_perm:"{{str_comp_loading_error_perm}} ",multi_retry:"{{str_comp_multi_retry}} ",multi_retry_else:"{{str_comp_loading_error}} ",is_perm_else:"{{multi_retry}} {{multi_retry_else}} ",can_retry:'<div class="message"> <span class=\'retry\' data-action="retry-conv-load">{{str_try_again}}</span> </div> ',show_tae:'<div class="message error_code">{{str_error_code}} {{tae_code}}</div>',conv_loading_error:'<div class="message"> {{is_perm}} {{is_perm_else}} </div> {{can_retry}} {{show_tae}} ',diff_folder_error:'<div class="message">{{str_error_msg_diff_folder_switch}}</div> ',loading_slow_msg:"{{str_comp_loading_msg}}",loading_slow_conv:"{{str_comp_loading_conv}}",loading_slow_else:'<div class="conv-loading">{{loading_slow_msg}}{{loading_slow_conv}}</div> ',loading_slow:"<div class=\"message\">{{str_comp_slow_loading}}</div> <div class='message'> <span class='retry' data-action=\"retry-conv-load\">{{str_try_again}}</span> </div> ",conv_loading_error_else:"{{loading_slow_else}} {{loading_slow}} ",page_loading:'<div id="loadingpane" class="conv-loadingpane"> {{conv_deleted_error}} {{msg_deleted_error}} {{conv_loading_error}} {{diff_folder_error}} {{conv_loading_error_else}}</div> ',expanded:"expanded",isUnread:"unread",active:"active",hasDraft:"hasdraft",super_collapsed:"super-hidden",loadhide:"loadhide",isFlagged:"flagged",isFlagged1:"{{str_msg_list_flagged_attr}}",isFlagged_else:"{{str_msg_list_flag_attr}}",isFlagged2:"{{str_msg_list_flagged}}",isFlagged_else1:"{{str_msg_list_not_flagged}}",from:'<span class="from lozengfy" data-name = "{{from_name}}" data-address = "{{from_id}}" title="{{from_id}}" data-action="contact-card-menu">{{from_name}}</span> ',isInternal:'<span class="qtd-report"><a href="#" data-action="bug"><i title="Report a problem with quoted text"> Problem with Quoted Text? </i></a></span> ',to_str:'<span class="to">{{str_comp_label_to_fresh}} </span>',recipients:'<span class="lozengfy" data-action="contact-card-menu" data-name = "{{rcpt_name}}" data-address = "{{rcpt_id}}" title="{{rcpt_id}}">{{rcpt_name}}</span>',more_recipients:'<span class="more_recp" data-action="more"> {{str_hdr_more_recipients}}</span>',hasDraft1:'<span class="draft" role="gridcell">{{str_draft}}</span>',hasAttachment:'<div class="icon file"></div>',msg_blocked:'<div class="blocked"><div class="base-blocked"> <h3>{{str_msg_view_heading_blocked_images}}</h3> <div class="blocked-image"> <div class="btn show-text"> <a role="button" href="#" title="{{str_msg_view_btn_show_images_attr}}" data-action="show-images">{{str_msg_view_btn_show_images}}</a> </div> <div class="btn options"> <a role="button" href="#" title="{{str_msg_view_btn_options_attr}}" data-action="mail-options">{{str_msg_view_btn_options}}</a> </div> </div></div></div> ',msg_deleted_error1:'<div class="message"> {{str_msg_deleted_error}} </div> ',is_perm1:"{{str_comp_loading_error_perm}} ",multi_retry1:"{{str_comp_multi_retry}} ",multi_retry_else1:"{{str_comp_loading_error}} ",is_perm_else1:"{{multi_retry1}} {{multi_retry_else1}} ",can_retry1:"<div class='message'> <span class='retry' data-action=\"retry-msg-load\">{{str_try_again}}</span> </div> ",show_tae1:'<div class="message error_code">{{str_error_code}} {{tae_code}}</div>',msg_deleted_error_else:"<div class='message'> {{is_perm1}} {{is_perm_else1}} </div> {{can_retry1}} {{show_tae1}} ",loading_error:"{{msg_deleted_error1}} {{msg_deleted_error_else}} ",diff_folder_error1:"<div class='message'>{{str_error_msg_diff_folder_switch}}</div> ",loading_slow_else1:'<div class="msg-loading s-loader"></div> ',loading_slow1:"<div class='message'> {{str_comp_slow_loading}} </div> <div class='message'> <span class='retry' data-action=\"retry-msg-load\">{{str_try_again}}</span> </div> ",loading_error_else:"{{loading_slow_else1}} {{loading_slow1}} ",msg_loading:'<div id="loadingpane" class="msg-loadingpane"> {{loading_error}} {{diff_folder_error1}} {{loading_error_else}}</div> ',quoted_text_collapse:'<div class="thread-quoted-text unselectable" title="{{str_qtd_expand}}"> <span class="icon icon-chevron-right qtd-expansion-icon" data-action="quoted-text"></span> <span class="qtd-expansion-text" data-action="quoted-text">{{str_qtd_expand}}</span> </div> ',quoted_text_expand:'<div class="thread-quoted-body hidden">{{quoted_text_body}}</div> ',msg_truncated:'<div class="msg-truncated"> <h3>{{str_msg_view_msg_truncated}}</h3> <span class="rht"> <span class="btn left right"><a role="button" href="#" data-action="view-full-msg">{{str_msg_view_btn_view_full}}</a></span> </span></div> ',with_icons:'<div class="thread-footer withicons hidden"> <span class="addconvtitle"> <a href="#" data-action="reply_sender"> <i class="icon icon-reply"></i>{{str_reply}} </a> <a href="#" data-action="reply_all"> <i class="icon icon-reply-all"></i>{{str_reply_all}} </a> <a href="#" data-action="forward"> <i class="icon icon-forward"></i>{{str_forward}} </a> </span> <span class="card-actions-menu"> <a href="#" data-action="menu"> <i class="icon icon-more"></i>{{str_more}} </a> </span></div>',with_icons_else:'<div class="thread-footer hidden"> <span class="addconvtitle">{{str_reply_options}}</span> <span> | </span> <span class="card-actions-menu"><a href="#" data-action="menu">{{str_more}}</a></span></div>',thread_item:'<div data-mid="{{mid}}" class="thread-item {{expanded}} {{isUnread}} {{active}} {{hasDraft}} {{super_collapsed}} {{loadhide}}" data-action="select-thread" tabindex="0"> <div class="thread-item-header"> <div class="contents"> <div class="icon info info-real {{flag_info}}" role="gridcell" title="{{status_title}}" data-action="thread-item-unread"></div> <div class="icon info info-hover {{flag_info_hover}}" role="gridcell" title="{{status_title}}" data-action="thread-item-unread"></div> <div class="icon flag {{isFlagged}}" data-action="thread-item-flag" title="{{isFlagged1}} {{isFlagged_else}}" aria-label="{{isFlagged2}} {{isFlagged_else1}}"> </div> {{from}} {{isInternal}} <span class="thread-snippet">{{snippet}}</span> <span class="load-error-msg"></span> <div class = "recipients"> {{to_str}}{{recipients}}{{more_recipients}} </div> {{/recptList}} <span class="loader"></span> <div class="loz"> <span class="btn btn-contact lozenge small left right" data-action="contact-menu"> <a role = "button" title="{{str_btn_lozenge_attr}}" href="#" tabindex="-1" dir="{{msg_display_name_dir}}"></a> </span> </div> </div> <div class="thread-info"> {{hasDraft1}} {{hasAttachment}} <span class="thread-date"> <span class="short" title="{{received_date}}">{{date}}</span> </span> </div></div> <div class="thread-body"> {{msg_blocked}} <div class="body undoreset"> {{msg_loading}} {{body}} </div> {{quoted_text_collapse}} {{quoted_text_expand}} {{msg_truncated}}</div>{{with_icons}}{{with_icons_else}} </div> ',super_collapsed_btn:'<div class="supercollapsed loadhide" data-action="thread-super-collapse" tabindex="0"><span class="more-icon icon icon-add"></span>{{str_supercollapsed_show}}</div> ',conv_loading:'<div class="conv-loading s-loader"></div> ',nav_arrows:'<div class="infp-arrow s-tp arrowtrans left-ar" data-action="prev" title="{{str_previous_conv_left}}"><span class="icon x-gap icon-chevron-left left-arrow"><i></i></span></div> <div class="infp-arrow s-tp arrowtrans right-ar" data-action="next" title="{{str_next_conv_right}}"><span class="icon x-gap icon-chevron-right right-arrow"><i></i></span></div> ',anyUnread:"unread",anyFlagged:"flagged",anyFlagged1:"{{str_msg_list_convflagged_attr}}",anyFlagged_else:"{{str_msg_list_convflag_attr}}",anyFlagged2:"{{str_msg_list_convflagged}}",anyFlagged_else1:"{{str_msg_list_not_convflagged}}",mail_search_enabled:"</a>",folder_message:'<div aria-label="{{str_msg-view_message_header}}" class="y-module message-header {{anyUnread}}"> <div aria-label="{{str_msg-view_message_header}}" class="focusholder" tabindex="-1"></div> <div class="icon flag {{anyFlagged}}" data-action="thread-flag" title="{{anyFlagged1}} {{anyFlagged_else}}" aria-label="{{anyFlagged2}} {{anyFlagged_else1}}"> </div> <div class="icon info info-unread" data-action="thread-unread"></div> <h3 "{{msg_subjectDir}}"> <span class="thread-subject" title="{{msg_subject}}">{{msg_subject}}</span> <span class="summary">{{summary}}</span> {{mail_search_enabled}} </h3> </div> ',page_compose_email_else:"hidden",attached_files_else:"hidden",browser_plus_attach_else:"simple-upload {{attached_files_else}} ",browser_plus_attach:"<h2>{{str_rte_attachments_attach_files}}</h2> <h3>{{str_rte_attachments_drag_files}}</h3> ",transfer_error:"transfer-error",waiting:"in-queue ",image:'<div style="background-image:url({{thumbnailurl}});"></div> ',in_progress:'<div class="prog-indicator"> <div class="progress" style="width:{{progress}}%"></div> </div> ',browser_plus_attach1:'<li role="presentation" class="attachmentVisible {{transfer_error}} {{waiting}} {{type}}"> <div class="file-container"> {{image}} <b/></b> </div> <span class="fname">{{filename}}</span> {{in_progress}}</li>',waiting1:"in-queue ",in_progress1:"downloading ",transfer_error1:"lozengeerror",transfer_warn:"lozengewarn",retry:'<span role="presentation" class="btn lozenge lozengeretry small hidden"><a role="presentation" tabindex="-1" title="{{str_btn_retry_file_attr}}">&nbsp;<b></b></a></span>',transfer_error2:"lozengeerror-remove",browser_plus_attach_else1:'<li role="presentation" class="attachmentVisible {{waiting1}} {{in_progress1}} {{type}}"><div tabindex="-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="lozengeProgress"></div> <span role="presentation" class="btn lozenge {{transfer_error1}} left small"><a role="option" title="{{filesize}}" tabindex="-1" class="{{transfer_warn}}">{{filename}}</a></span>{{retry}}<span role="presentation" class="btn lozenge lozengeremove {{transfer_error2}} right small"><a role="presentation" tabindex="-1" title="{{str_btn_remove_file_attr}}">&nbsp;<b></b></a></span></li>',file_attach_files:"{{browser_plus_attach1}}{{browser_plus_attach_else1}} ",multiple_files_failed:"{{str_rte_attachments_error_mult}}",multiple_files_failed_else:"{{str_rte_attachments_error_single}}",attachments_error:"{{multiple_files_failed}} {{multiple_files_failed_else}} ",display_av_logo:'<img src="https://s.yimg.com/ok/u/assets/img/norton-horizlogo.png" data-action="av_sponsor" class="avLogo" title="{{str_comp_av_norton_attr}}" alt="{{str_comp_av_norton_attr}}"/>',show_attachment_icon:'<div role="tabpanel" class="attachments-pane gwell rte-pane-fresh shaded" > <div role="toolbar"> <form method="post" enctype="multipart/form-data" class="attachment-button-form" target="" action=""> <span class="icon icon-attachment s-tp attachment-button-attach" title="{{str_comp_attach_singular}}"> <input type="file" id="attachment-button-input" name="uploadfile" class="attachment-button-file" tabindex="0"/> </span> <span id="upload_file_selection" class="hidden" title="{{str_comp_attach_singular}}"> <span id="uploader-v2"></span> </span> <span id="attach-btn-menu" class="hidden icon icon-chevron-down s-tp attach-btn-menu" title="{{str_comp_attach_menu_title_fresh}}" data-action="menu"></span> </form> <span class="btn left right menu attachment-button-disabled hidden"> <a role="button" href="#" tabindex="-1" >{{str_comp_attach}}</a> </span> <span role="alert" class="switch-to-basic-link hidden"> {{str_rte_attachments_basic_message}} <a role="button" href="#">{{str_rte_attachments_basic_link_text}}</a>. </span> </div></div>',is_underline:'<span data-action="underline" role="button" class="icon icon-underline s-tp" title="{{str_rte_underline_attr}}"></span> ',is_rtl:'<span id="btn-rtl" data-action="bidi" value="rtl" role="button" class="icon icon-rtl s-tp" title="{{str_rte_right_to_left}}"></span> <span id="btn-ltr" data-action="bidi" value="ltr" role="button" class="icon icon-ltr s-tp" title="{{str_rte_left_to_right}}"></span> ',is_rtl_else:'<span id="btn-ltr" data-action="bidi" value="ltr" role="button" class="icon icon-ltr s-tp" title="{{str_rte_left_to_right}}"></span> <span id="btn-rtl" data-action="bidi" value="rtl" role="button" class="icon icon-rtl s-tp" title="{{str_rte_right_to_left}}"></span> ',bidi:"{{is_rtl}} {{is_rtl_else}} ",spellCheckEnabled:'<span id="btn-spellchk" data-action="spellcheck" role="button" class="icon icon-check-spelling s-tp" title="{{str_rte_check_spelling_attr_fresh}}"></span> <span id="btn-spell-langs" data-action="menu" role="button" aria-haspopup="true" title="{{str_toolbar_spelling_menu_toggle_attr_fresh}}" class="icon icon-chevron-down s-tp"></span> ',show_formatter_well:'<div role="tabpanel" class="rte-pane-fresh format-pane gwell shaded"> <div role="toolbar" class="format-inner"> <span id="btn-fontnamesize" class="icon icon-choose-font s-tp" data-action="menu" role="button" title="{{str_comp_font_menu_attr_fresh}}"></span> <span data-action="bold" class="icon icon-bold s-tp" role="button" title="{{str_rte_bold_attr}}"></span> <span data-action="italic" role="button" class="icon icon-italic s-tp" title="{{str_rte_italic_attr_fresh}}"></span> {{is_underline}} <span id="btn-forecolor" data-action="menu" role="button" aria-haspopup="true" class="icon icon-text-highlight s-tp" title="{{str_rte_color_attr_fresh}}"></span> <span id="btn-insertunordered" data-action="menu" role="button" class="icon icon-list-bullets"></span> <span id="btn-indent" data-action="menu" role="button" class="icon icon-indent"></span> <span id="btn-text-align" data-action="menu" role="button" aria-haspopup="true" class="icon icon-align-left"></span> {{bidi}} <span data-action="insertlink" role="button" class="icon icon-link s-tp" title="{{str_rte_link_attr_fresh}}"></span> <span id="emoticon" data-action="menu" role="button" aria-haspopup="true" class="icon icon-emoticons s-tp" title="{{str_comp_emoticons}}"></span> <span class="om-buttons"></span> {{spellCheckEnabled}} <span id="switchtext-plain" class="switchtext btn-isPlain last icon icon-chevron-double-right s-tp" role="button" title="{{str_rte_richtext}}" target="plain-text"></span> <span id="switchtext-rich" class="switchtext btn-isRich last hidden icon icon-chevron-double-left s-tp" role="button" title="{{str_rte_plaintext}}" target="rich-text"></span> </div> </div> ',message_selection_else:'{{folder_message}}  <div class="thread-item-list" tabindex="-1"> {{page_loading}} {{thread_item}} {{super_collapsed_btn}} {{qr_bar}} <div class="add-to-conv loadhide" data-action="thread-item-replyall" tabindex="0">  <div class="compose"> <div class = "composeshim"></div> <table role="presentation" border="0" style="margin:0;width:100%;border-spacing:0; border-collapse:collapse;"> <tbody role="presentation"> <tr role="presentation"> <td role="presentation"> <div class="compose-header"> <div class="reply-text"> <span class="addconvtitle">{{str_comp_click_replyall}}</span> </div> </div> </td> </tr> <tr role="presentation"> <td role="presentation"> <div class="dummy-compose-msg"> </div> </td> </tr> <tr role="presentation"> <td role="presentation" style="padding-bottom:5"> <div class="attachments-well {{page_compose_email_else}} {{browser_plus_attach_else}}"> <div class="attachments-welcome"> {{browser_plus_attach}} </div> <ul role="listbox" aria-live="polite" class="file-attach hidden"> {{file_attach_files}} </ul> <span class="btn left right attachment-button-removeall hidden"> <a role="button" href="#" title="{{str_comp_attach_removeall}}">{{str_comp_attach_removeall}}</a> </span> <div class="file-count"> <span class="attachments-count hidden">{{str_rte_attachments_num_files}}</span> <span class="attachments-size hidden">{{str_rte_attachments_sizes}}</span> {{display_av_logo}}</div> <div role="alert" class="error transfer-error hidden"> <span class="attachmenterror"> {{attachments_error}} </span> </div> </div> </td> </tr> <tr role="presentation"> <td role="presentation" class="footer-separator"> <div class="bottomToolbar"> <span class="btn default" data-action="send" role="button"> <a href="#" title="{{str_comp_send_attr}}">{{str_comp_send}}</a> </span> <div class="rte-well-container">{{show_attachment_icon}}{{show_formatter_well}}</div> </div> </td> </tr> </tbody> </table> </div> </div> {{/qr_bar}} {{conv_loading}} {{nav_arrows}} </div>'};
},"1.0.0");

YUI.add("mail-controller-conversations",function(C){var y,AB=C.mail,Z=AB.model.ConvStore,G=AB.model.DataStore,l=Z.Conversations,i=G.Messages,K=i.getPermMidPart,H=l.getPermCidPart,V=C.common.Utils,t=V.rocketstats.stat,a=AB.Controller,o=AB.ParkQueue,k={passthru:{list:"ListFolderThreads",get:"ListMessagesInThread",map:"GetCids"}},AC,h={},I,n=43000,A={},J={};function B(){if(I){I=null;}I={gdmHit:0,gdmMiss:0,gdmAdd:0,gdmUsed:0,lmtHit:0,lmtMiss:0,lmtAdd:0,lmtUsed:0,batchHit:0,batchMiss:0};}function v(AD,Y,AE){o.park(Y,AE);}function P(AD,Y,AE,AF){o.unpark(Y,AF);}function b(Y,AD){t("convctrl","Request_LFT");if(AD.cbk.stopwatch){AD.cbk.stopwatch.getListBegin=new Date();}if(!C.Lang.isUndefined(Y.nextprev)){delete Y.nextprev;}}function U(AG,AL,AF){var AI;if(AL.cbk.stopwatch){AL.cbk.stopwatch.getListEnd=new Date();}var AK=AG.conversations.length,AE=[],AM,AH,AJ=0,AD,Y=AG.folder;if(Y.total&&!AK){AG.code="ResponseCountMismatch";AF("failure");return;}for(AH=0;AH<AK;AH++){AD=AG.conversations[AH].conversation.messageInfo[0].receivedDate;if(AD>AJ){AJ=AD;}}AI=new Date().getTime();for(AH=0;AH<AK;AH++){AM=l.toConvInfo(AG.folder.folderInfo.fid,AG.conversations[AH]);AM.snapshotTime=AJ;AM.reqTime=AI;AE.push(AM);}AG.convInfo=AE;l.threadUpdate(AE,AL.origParms.fid);if(Y&&!AL.batch&&!AL.origParms.nextprev&&!(NeoConfig.infiniteScroll&&AL.origParms.start)){a.Folders.set(Y,null,AL.reason);}}function M(AD,Y){l.set(AD,Y);}function s(Y){t("convctrl","LFTError:"+Y.code);if(Y.code==="Client.InvalidRequest"||Y.code==="Client.EmptyPostBody"){t("convctrl","E_ConvCorrupt_LFTInvalidRequest");}else{t("convctrl","E_ConvCorrupt_LFTGenericFailure");}}function c(){}function d(Y,AE,AD){if(Y.errors&&(Y.errors.length!==0)){AD("failure");return AC._error(AE.origParms,Y.errors[0]);}}function E(Y){t("convctrl","GetCidsError:"+Y.code);if(Y.code==="Client.InvalidRequest"){t("convctrl","E_ConvCorrupt_GetCidsInvalidRequest");}else{t("convctrl","E_ConvCorrupt_GetCidsGenericFailure");}}function u(AG,AH,AF){var AE;function Y(AJ,AK){var AI=l.get(AJ,AK,true);return AI?AI:null;}function AD(AJ,AI){return(AJ.checksum&&(AJ.checksum===AI.checksum));}if((AE=Y(AG.fid,AG.cid))&&(AD(AE,AG))&&!AG.force){AH.cbk&&(AH.cbk.respProps={wasCached:true});AF("success");return AE;}AG.prime=AG.cachekey||"Prime";AH.cbk&&(AH.cbk.respProps={wasCached:false});t("convctrl","Request_LMT");}function p(AD){var AE=AD.conv,Y;if(!l.isCached(AD.fid,AE.conversation.cid)&&AE.messageInfo&&C.Lang.isArray(AE.messageInfo)&&AE.messageInfo.length){AE.conversation.summary.iDate=l.getAnchorDate(AD.fid,AE);Y=new Date().getTime();M(AE,Y);f(H(AE.conversation.cid),true);}}function S(Y){var AD=Y.msgObj;if(AD&&AD.mid){f(K(AD.mid),false);}}function w(AE,AH,AF){var AD,AG,Y=AH.origParms;if(AE.code&&AE.code===5001){if(AE.message&&AE.message.indexOf("no results returned from filters $..midscids[")>=0){AF("failure");return;}}if(AE.messageInfo&&C.Lang.isArray(AE.messageInfo)&&AE.messageInfo.length){if(Y.cid&&Y.cid!=="$(cid)"){AE.conversation.cid=Y.cid;}AG=AE.conversation.cid;if(Y.anchorDate){AE.conversation.summary.iDate=Y.anchorDate;}AD=new Date().getTime();M(AE,AD);}else{AG=AE.cid;}if(AH.resp&&AH.resp.callPerf&&AH.cbk){AH.cbk.respProps=AH.cbk.respProps||{};AH.cbk.respProps.callPerf=AH.resp.callPerf;}return l.get(Y.fid,AG,true);}function x(Y){if(Y.code==="Client.InvalidConvId"||Y.code==="Server.InvalidConvId"){Y.convPermDeleted=true;}t("convctrl","LMTError:"+Y.code);if(Y.code==="Server.ListMessagesInThreadFailed"){t("convctrl","E_ConvCorrupt_LMTFailure");}else{if(Y.code==="Client.InputInvalid"){t("convctrl","E_ConvCorrupt_LMTInvalidInput");}else{t("convctrl","E_ConvCorrupt_LMTGenericFailure");}}}function g(AF,AS,AI,AG){var AN,AD,AM,AL,AO,AE,AU,AR,AK,AJ,AP,AQ={},Y,AT=[];function AV(){if(!AF.silentFetch){AA(AJ,AP,AI);}AS&&AS.success(Y);}function AH(AW){return((AS&&AS.taeUiCbk)?AS.taeUiCbk(AW):false);}AN=a.batch();if(!AF.cid){AK=l.midToConv(AF.cfid,AF.msg.mid);if(AK){AF.cid=AK.cid;AF.checksum=AK.checksum;}else{AT.push(AN.Conversations.map({chain:{id:"getcids",api:"GetCids"},fid:AF.cfid,mids:[AF.msg.mid]},function(AY,AW,AX){if(AX==="failure"){AS&&AS.failure(AY);}}));}}AU={chain:{id:"listmessagesinthread",api:"ListMessagesInThread"},fid:AF.cfid};if(!AF.cid){if(NeoConfig.hasConvV3){AU.chain.filter=r("getcid");AU.cid="$(cid)";}AU.chain.parameter=[{source:"getcids.midscids[0].cid",destination:"listmessagesinthread.cid"}];AU.chain.dependency=["getcids"];}else{AU.cid=AF.cid;AU.checksum=AF.checksum;}if(AF.ovparams.force){AU.force=AF.ovparams.force;}AO=(AS&&AS.openedFrom)||"missing";AT.push(AN.Conversations.get(AU,{success:function(AZ,AY,Ad){var Ac,Ab,Aa,AW,Ae,AX,Af=true;if(!AZ||!AZ.cid||!AZ.msgs||!AZ.msgs[0]){Af=false;C.fire("MailLog",{m:"Invalid conversation repsonse",resp:AZ});}if(Ad==="failure"||!Af){AS&&AS.failure(AZ);}else{if(AY&&AY.respProps){AS.respProps=AY.respProps;AJ=(AY.respProps.wasCached===true);}AW=H(AZ.cid);if(!AF.silentFetch){if(!AJ){f(AW,true);}Q(AW,true);}Y=AZ;Aa=Y.msgs.length;if(AJ&&AI){AZ.chainedLMTMsg=NeoConfig.hasConvV3?N(AF.cfid,Y,F(AF.cfid,Y)):Y.msgs[0];AZ.chainedLMTId="listmessagesinthread";}for(Ac=0;Ac<Y.msgs.length;Ac++){if(!Y.msgs[Ac].header){Y.msgs[Ac]=G.Messages.toMessage(AF.cfid,Y.msgs[Ac]);}if(Y.msgs[Ac].fid==="Draft"){if(AF&&AF.newMsg){Ae=AF.oldMsgCnt||0;for(Ab=0;Ab<Y.msgs.length;Ab++){if(Y.msgs[Ab].mid===AF.newMsg.mid){AX=Y.msgs[Ab];break;}}if(AX&&(AX.inReplyTo===Y.msgs[Ac].inReplyTo)&&Y.msgs.length-1>Ae){Y.msgs.splice(Ac,1);Y.midMap.splice(Ac,1);}}}}if(Aa!==Y.msgs.length){Y=l.calcConvSummary(Y);}Y.msgs=D(Y.msgs);Y.msgs.reverse();Y.midMap=O(Y);if(!AI){AV();return;}if(AD){Y.fullmsg=AD;AV();}}},notify:AS.notify,errorPosition:AS.errorPosition||100,suppressNotification:AS.suppressNotification,convOrigin:AS.convOrigin||"regular",taeUiCbk:AH,openedFrom:AO}));if(AI){if(AF.fid==="%40C%40Chats"){AQ={displayPref:"text/json",urlDetection:false,emailDetection:false,annotateOption:{annotateText:"none"}};}AR={chain:{id:"getdisplaymessage",api:"GetDisplayMessage"},fid:AF.mfid,snapshotTime:AF.snapshotTime,ovparams:AQ,cachekey:"Prime"};
if(AF.msg){AR.msg=AF.msg;AR.mid=AF.msg.mid;}else{if(NeoConfig.hasConvV3){AR.chain.filter=X(AF.cfid,AG);AR.fid="$(fid)";}AR.chain.parameter=[{source:"listmessagesinthread.messageInfo[0].mid",destination:"getmessage.message[0].mid"}];AR.chain.dependency=["listmessagesinthread"];}AR.ofid=AF.mfid||AF.cfid||null;AT.push(AN.Messages.get(AR,function(AZ,AX,AY){var AW;if(AY==="failure"){AS&&AS.failure(AZ);return;}else{if(AY==="success"){if(AX&&AX.respProps){AS.respProps=AX.respProps;AP=(AX.respProps.wasCached===true);}AW=K(AZ.mid);if(!AF.silentFetch){if(!AP){f(AW,false);}Q(AW,false);}AD=AZ;if(Y){Y.fullmsg=AD;AV();}}}}));}AM=(AS&&AS.errorPosition)||100;AL=(AS&&AS.suppressCodes)||[];AE=AS&&AS.convOrigin;AN.setAsReadOp(true);AN.execute({errorPosition:AM,suppressCodes:AL,suppressNotification:AS.suppressNotification,openedFrom:AO,taeUiCbk:AH,convOrigin:AE});return AT;}function j(AG,AD,AF,AM,AH){var AL,AK,Y,AE,AI,AN;function AJ(AQ,AO,AP){if(AP!=="failure"){R(AQ,AO,AP);if(AO&&AO.respProps&&AO.respProps.wasCached===true){AQ.chainedLMTMsg=NeoConfig.hasConvV3?N(AQ.fid,AQ,F(AQ.fid,AQ)):AQ.msgs[0];AQ.chainedLMTId=AI;}}}if((AN=l.get(AF,AM.cid,false))){AK=NeoConfig.hasConvV3?N(AF,AN,F(AF,AN)):AN.msgs[0];}if(NeoConfig.hasConvV3){AI="LMT_"+AD;if(AK){AL=AK.sourceFolderInfo.fid;}else{AI="LMT_"+AD;AL="$(fid)";AK=AM.msgs[0];AG.Conversations.get({chain:{id:AI,api:"ListMessagesInThread"},fid:AF,cid:AM.cid,checksum:AM.checksum,cachekey:AH,anchorDate:AM.anchorDate,prefetch:true},{success:AJ,suppressCodes:["*"],backgroundLogs:["*"]});Y={id:"GDM_"+AD,api:"GetDisplayMessage",filter:X(AF,AM),parameter:[{source:"listmessagesinthread.messageInfo[0].mid",destination:"getmessage.message[0].mid"}],dependency:[AI]};}AE={fid:AL,msg:null,cachekey:AH,prefetch:[AK]};if(Y){AE.chain=Y;}AG.Messages.get(AE,{success:z,suppressCodes:["*"],backgroundLogs:["*"]});}else{if(!AK){AG.Conversations.get({fid:AF,cid:AM.cid,checksum:AM.checksum,cachekey:AH,anchorDate:AM.anchorDate,prefetch:true},{success:AJ,suppressCodes:["*"],backgroundLogs:["*"]});AK=AM.msgs[0];}AG.Messages.get({fid:L(AK),msg:null,cachekey:AH,prefetch:[AK]},{success:z,suppressCodes:["*"],backgroundLogs:["*"]});}}function r(AE,AD){var Y;switch(AE){case"latest":case"eu":case"folder":Y={iterator:(AE==="latest")?"$..messageInfo[0]":(AE==="eu")?"$..messageInfo[?(@.flags.isRead==0)][-1:]":"$..messageInfo[?(@.sourceFolderInfo.fid=='"+AD+"')][0]",select:{mid:"$..mid",fid:"$..sourceFolderInfo.fid"}};break;case"getcid":Y={iterator:"$..midscids[0]",select:{cid:"$..cid"}};break;}return Y;}function X(AD,Y){return r(F(AD,Y),AD);}function F(AD,Y){return((AD==="Sent"||AD==="Draft")?"folder":(Y.totalUnread>0&&Y.totalMsgs>1)?"eu":"latest");}function N(AG,AF,AH){var AD,AE,Y;for(AD=0;AD<AF.msgs.length;AD++){AE=AF.msgs[AD];if(AH==="latest"){return AE;}if((AH==="folder")&&(AF.msgs[AD].sourceFolderInfo.fid===AG)){return AE;}if(!AE.flags.isRead){Y=AE;}}if(!Y){Y=AF.msgs[0];}return Y;}function L(Y){return(Y.fid||((Y.folderInfo&&Y.folderInfo.fid)?Y.folderInfo.fid:(Y.sourceFolderInfo&&Y.sourceFolderInfo.fid)?Y.sourceFolderInfo.fid:this.fid));}function O(AF){var AD=[],Y,AE;for(Y=0;Y<AF.msgs.length;Y++){AE=AF.msgs[Y];AD.push({mid:AE.mid,fid:AE.fid});}return AD;}function D(AH){var AE,AD=[],AF=[],Y,AG;for(AE=0;AE<AH.length;AE++){if(AH[AE].sourceFolderInfo.fid==="Draft"){AD.push(AH[AE]);continue;}Y=0;AG=AD.length;while(AG>0&&Y<AG){if(AH[AE].mimeMsgId===AD[Y].inReplyTo){AD[Y].oMsgMid=AH[AE].mid;AF.push(AD.splice(Y,1)[0]);AG--;}else{Y++;}}AF.push(AH[AE]);}Y=0;AG=AD.length;while(AG>0){AF.push(AD.splice(0,1)[0]);AG--;}return AF;}function AA(AD,AE,Y){I[AD?"lmtHit":"lmtMiss"]++;if(Y){I[AE?"gdmHit":"gdmMiss"]++;I[AD&&AE?"batchHit":"batchMiss"]++;}}function R(AF,Y,AD){var AE;if(AD!=="failure"){if(!Y||!Y.respProps||!Y.respProps.wasCached){AE=H(AF.cid);f(AE,true);}}}function z(AF,AD,AE){var Y;if(AE!=="failure"){if(!AD||!AD.respProps||!AD.respProps.wasCached){Y=K(AF.mid);f(Y,false);}}}function f(AE,AD){var Y=AD?A:J;Y[AE]&&T(AD);Y[AE]=0;I[AD?"lmtAdd":"gdmAdd"]++;}function Q(AE,AD){var Y=AD?A:J;Y[AE]|=1;}function e(AD){var Y=0;for(var AE in AD){if((AD[AE]&3)===1){AD[AE]|=2;Y++;}}return Y;}function T(AD){var Y=AD?A:J;I[AD?"lmtUsed":"gdmUsed"]+=e(Y);}function q(Y,AD){while(AD>0){t("OCCache",Y+"_"+(AD>10?10:AD));AD-=10;}}function m(){return h;}function W(AH,AG,AI){var AE,AD,AF=AH,Y;if(!C.Lang.isArray(AF)){AF=[AF];}for(AE=0;AE<AF.length;AE++){if(AF[AE]&&AF[AE].cid){Y=H(AF[AE].cid);AD=h[Y]=h[Y]||[];AD.push({action:AG,params:AI,cid:AF[AE].cid,ts:(new Date()).getTime()});}}}k.batchable=k.passthru;k.entity="cids";AC=a.extend("Conversations",k);AC.bulkOps={remove:{bs:100,min:100,max:1000},flag:{bs:100,min:100,max:1000},move:{bs:100,min:100,max:1000},spam:{bs:10,min:10,max:20,fixed:10}};y=k.order;C.mix(AC,{getConv:g,batchAddConvPrefetch:j,preset:p,presetMsg:S,addTAE46Hist:W});AC.hook("list",{pre:b,success:U,failure:s});AC.hook("get",{pre:u},y.cacheCheck);AC.hook("get",{success:w,failure:x});if(NeoConfig.hasConvPerf){AC.hook("get",{pre:v},y.gdmDelay);AC.hook("get",P,y.unpark);}AC.hook("map",{pre:c,success:d,failure:E});B();C.on("mailerrormodule:loaded",function(){C.mail.Error.registerTAE46Hist(m);});setInterval(function(){var Y;T(true);T(false);for(Y in I){q(Y,I[Y],null);}B();},n);},"1.0.0",{requires:["launch-utils","rocket-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data","mail-model-convstore","mail-model-datastore"]});

YUI.add("mail-model-convstore",function(C){C.namespace("mail.model");var L="ds:conv:",O="ds:msg:",G="change",B="refresh",E="remove",D="reg",I="unreg",H="Trash",K="%40B%40Bulk",N="invalidarg",Q=C.mail,J=C.Lang,P=C.common.Utils,F=500,M=Q.model.ConvStore={};function A(S){try{C.fire.apply(C,S);}catch(R){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-convstore:1",R,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-convstore:1");C.use("common-utils-error",function(){var T=(S[1]&&J.isString(S[1]))?S[1]:"";P.error.report("convstore error for "+S[0]+T,R,1,1,1);});}}C.mix(M,{Conversations:(function(){var q={},m={},R={},x={olist:[],maxmsgs:F,sync:{}},S={},d=null;function i(AG,AF){return y(AG,AF);}function y(AG,AF){return s(AF)[u(AG)];}function s(AG){var AF=AG===H?AG:"Norm";q[AF]=q[AF]||{};return(q[AF]);}function AC(AH,AK,AI){var AG,AO,AJ,AN,AL,AM,AF;if(!(AL=y(AK,AH))){return null;}if(AI&&AL){AM=x.olist;for(AJ=0;AJ<AM.length;AJ++){if(AM[AJ].cid===AK){AN=AM.splice(AJ,1);AM.push(AN[0]);break;}}}AF=P.wcopy(AL);AF.msgs=[];V();for(AJ=0;AJ<AF.midMap.length;AJ++){AG=d.get(AF.midMap[AJ].fid,AF.midMap[AJ].mid);if(!AG){return null;}AO=AG.header?d.toMessageInfo(AF.midMap[AJ].fid,AG):AG;AF.msgs.push(AO);}return AF;}function c(AG,AI,AF){var AH={messageInfo:AG.messageInfo,folder:{folderInfo:{fid:AI}},conversation:{cid:AG.cid,summary:AG.summary}};l(AH,AF);}function l(AG,AS){var AV=J.isArray(AG),AU=AV?AG:[AG],AO=[],AP,AJ,AT,AW,AR,AF,AQ,AL,AM;function AI(AZ,AY){var AX;if(AY){AK(AZ);}AX=u(AZ.cid);s(AZ.fid)[AX]=AZ;m[AX]={fid:AZ.fid};}function AK(Ad){var AY=0,AZ,Ac,Aa,AX,Ab;Ab=Ad.fid;AX=x.olist;Aa=AH()+Ad.midMap.length;while(AY<AX.length&&Aa>x.maxmsgs){if(R[u(AX[AY].cid)]){AY++;}else{AZ=AX.splice(AY,1);Ac=t(AZ[0].cid,AZ[0].fid,true);if(Ac){Aa-=Ac.midMap.length;}}}AX.push({fid:Ad.fid,cid:Ad.cid});}function AH(){var AZ,AX,AY=0;for(AX in q){for(AZ in q[AX]){AY+=q[AX][AZ].midMap.length;}}return AY;}function AN(Ac,Aa){var AZ,AY,AX=Ac.messageInfo,Ad=Ac.folder.folderInfo.fid,Ab=AE(Ad,Ac.conversation,AX[0]);A(["MailLog",{m:"Set conversation cache info",cid:Ab.cid}]);Ab.reqTime=Aa;Ab.midMap=[];for(AY=0;AY<AX.length;AY++){AZ=AX[AY];Ab.midMap.push({mid:AZ.mid,fid:AD(AZ,Ad)});a(AZ,Ab);}AI(Ab,true);n(Ab);return Ab;}V();for(AT=0;AT<AU.length;AT++){AW=AU[AT];AP=y(AW.conversation.cid,AW.folder.folderInfo.fid);if(AP){for(AR=0;AR<AP.midMap.length;AR++){AF=AP.midMap[AR];AM=d.get(AF.fid,AF.mid);if(AM){for(AQ=0;AQ<AW.messageInfo.length;AQ++){AL=AW.messageInfo[AQ];if(AL.mid===AF.mid){break;}}if((AQ>=AW.messageInfo.length)||(AD(AL,AW.folder.folderInfo.fid)!==AF.fid)){d.removeConvMsg(AF.fid,AF.mid,false);}}}}AJ=AN(AU[AT],AS);AO.push(P.wcopy(AJ));}if(AO.length){A([L+B,"lmt",null,AO]);}}function a(AF,AG){h(AF,AG.cid);T(AF,AD(AF,AG.fid));d.syncConvHeader(AD(AF,AG.fid),AF);}function r(AJ,AG){var AF=AG.conversation,AI=AF.recentMsg?AF.recentMsg:AF.messageInfo[0],AH=AE(AJ,AF,AI);h(AI,AH.cid);AH.msgs=[P.wcopy(AI)];return AH;}function j(AL,AF){var AI,AK,AH,AG,AJ=P.wcopy(AF);AJ.msgs=[];AJ.anchorDate=null;V();for(AI=0;AI<AF.midMap.length;AI++){AG=AF.midMap[AI].fid===AL;AK=d.get(AF.midMap[AI].fid,AF.midMap[AI].mid);AH=AK.header?d.toMessageInfo(AF.midMap[AI].fid,AK):AK;if(!AH.fid){AH.fid=AF.midMap[AI].fid;}AJ.msgs.push(AH);if((AG&&!AJ.anchorDate)||AL==="Draft"){AJ.anchorDate=AH.receivedDate;}}AJ.midMap=null;return AJ;}function z(AH,AG){var AF;for(AF=0;AF<AG.messageInfo.length;AF++){if(AG.messageInfo[AF].sourceFolderInfo.fid===AH){return AG.messageInfo[AF].receivedDate;}}return null;}function p(AG,AF){var AH=(J.isString(AF)||!AF)?AF:AF.cid;if(!AG||!AH){C.error(L+"get:"+N);}return(y(AH,AG)?true:false);}function Y(AJ,AF){var AG,AI,AH;V();if((AI=d.get(AJ,AF))&&(AI.cid)&&(AH=y(AI.cid,AJ))){for(AG=0;AG<AH.midMap.length;AG++){if(d.getPermMidPart(AH.midMap[AG].mid)===d.getPermMidPart(AI.mid)){return AH;}}}return null;}function h(AF,AG){AF.cid=AG;}function T(AG,AF){AG.fid=AF;}function AD(AG,AF){return(AG.fid||((AG.folderInfo&&AG.folderInfo.fid)?AG.folderInfo.fid:(AG.sourceFolderInfo&&AG.sourceFolderInfo.fid)?AG.sourceFolderInfo.fid:AF));}function t(AJ,AI,AG){var AF,AH=y(AJ,AI);if(AH){for(AF=0;AF<AH.midMap.length;AF++){d.removeConvMsg(AH.midMap[AF].fid,AH.midMap[AF].mid,AG);}delete s(AI)[u(AJ)];}return AH;}function AE(AI,AF,AH){var AG={cid:AF.cid||"",fid:AI,snapshotTime:AH.receivedDate,checksum:AF.summary.checksum,totalMsgs:AF.summary.totalMsgs,totalUnread:AF.summary.unreadMsgs,totalFlagged:AF.summary.flaggedMsgs,totalDraft:AF.summary.hasDraft?1:0,totalHasAttach:AF.summary.hasAttachment?1:0,subject:AF.summary.totalMsgs>1?AF.summary.subject:AH.subject,subjectDir:AF.summary.totalMsgs>1?AF.summary.subjectDir:AH.subjectDir,anchorDate:AF.summary.iDate,recipients:AF.summary.participantList,msgCountsByFolder:AF.summary.msgCountsByFolder,flags:AH.flags?C.clone(AH.flags):{},recentmid:AH.mid,snippet:AH.snippet,receivedDate:AH.receivedDate};return AG;}function u(AG){var AF;P.assert(J.isString(AG),"assertfail:Invalid cid");if(J.isString(AG)){AF=AG.lastIndexOf("_");}else{AF=-1;C.fire("MailLog",{m:"Invalid cid during getPermCidPart: "+AG});}return(AF<0?AG:AG.substr(AF));}function b(AG,AF){return(AG===H?AF===H:AF!==H);}function v(AG,AF){return AG&&AF&&u(AG.cid)===u(AF.cid)&&b(AG.fid,AF.fid);}function g(AG,AF){if(!AG||!AF||(AF==="Draft")){return false;}if(NeoConfig.hasConvV3){return true;}if(AG.totalMsgs===1){return true;}if(AF==="Sent"){return false;}if((AG.totalUnread===0)&&AG.msgs&&((AG.msgs[0].fid&&AG.msgs[0].fid!=="Draft")||(AG.msgs[0].sourceFolderInfo&&AG.msgs[0].sourceFolderInfo.fid!=="Draft"))){return true;}return false;}function n(AJ){var AH,AG,AF;function AI(AP,AQ,AR,AK){A(["MailLog",{m:"Updating conversation flags",cid:AJ.cid}]);var AS=d.get(AR,AK),AO=AS.flags,AL=AP.msgCountsByFolder,AM,AN;AP.totalUnread+=(AO.isRead)?0:1;AP.totalFlagged+=AO.isFlagged?AO.isFlagged:0;AP.totalDraft+=(AD(AS,AQ)==="Draft")?1:0;AP.totalHasAttach+=AO.hasAttachment?AO.hasAttachment:0;for(AM=0;AM<AL.length;AM++){if(AL[AM].fid===AR){AN=AM;
}}if(!AN){AN=AL.length;AL.push({fid:AR,total:0,unread:0});}AL[AN].total+=1;AL[AN].unread+=(AO.isRead)?0:1;}AJ.totalMsgs=AJ.midMap.length;AJ.recentmid=AJ.totalMsgs?AJ.midMap[0].mid:"";AF={totalUnread:0,totalFlagged:0,totalDraft:0,totalHasAttach:0,msgCountsByFolder:[]};for(AH=0;AH<AJ.totalMsgs;AH++){AI(AF,AJ.fid,AJ.midMap[AH].fid,AJ.midMap[AH].mid);}A(["ConvStore:calcConvSummary",AJ,AF]);for(AG in AF){AJ[AG]=AF[AG];}return AJ;}function k(AL,AG,AH,AP,AO,AQ,AK,AI){var AF,AJ,AN;A(["MailLog",{m:"Update conversation summaries"}]);V();for(var AM in AG){if(AM&&(AF=y(AM,AH))){AJ=P.wcopy(AF);if(AI&&AI.func){AN=AI.func(AJ,AI.args);}n(AJ);s(AH)[u(AM)]=AJ;}else{AJ=AF={cid:AM,sparse:true,moved:true};}AO.push(P.wcopy(AJ));AP.push(AF);AQ.push(P.diff(AJ,AF));AK&&AK.push(AN);}}function W(AO,AP,AI,AF){var AK,AQ,AM=J.isArray(AI)?AI:[AI],AG=AP?"Trash":"Inbox",AR=[],AS=[],AT=[],AL=[],AH={},AN="msg:add";function AJ(Aa,AW){var AY,AV,AX,AZ,AU;for(AV=0;AV<AW.data.length;AV++){AZ=AW.data[AV];AU=AD(AZ,Aa.fid);for(AY=Aa.midMap.length-1;AY>=0;AY--){AX=d.get(Aa.midMap[AY].fid,Aa.midMap[AY].mid);if(AX){AQ=(AX.receivedDate)||(AX.header&&AX.header.receivedDate);if(AQ>=AZ.receivedDate){break;}}}AK=d.get(AU,AZ.mid);Aa.midMap.splice(AY+1,0,{mid:AZ.mid,fid:AU});if(!AK){a(AZ,Aa);}else{d.syncConvInfo(AU,{mid:AZ.mid,cid:AO});}}return AM;}V();AH[AO]=1;k(AN,AH,AG,AS,AR,AT,AL,{func:AJ,args:{data:AM}});if(AF){AF.cachedMsg=AK;}A([L+G,AN,AS,AR,AT,AL,AF]);}function e(){q={};m={};R={};x={olist:[],maxmsgs:F,sync:{}};d=null;}function V(){if(!d){d=Q.model.DataStore.Messages;d.setConvStore(Q.model.ConvStore.Conversations);}}function U(AJ,AR,AK,AL,AN,AT,AG){var AM,AO=AK?AK.length:0,AP,AI={},AV=AT||"",AQ=[],AS=[],AU=[],AH={},AF="msg:"+AN;AH.fid=AJ;AH.srcFid=AV;AH.mids=[];if(AN.indexOf("conv_")===0){return;}for(AM=0;AM<AO;AM++){if(AN==="move"){if(AV!==H&&AV!==K&&AJ!==H&&AJ!==K){t(AK[AM].cid,AK[AM].fid,false);}}if(AK[AM].cid){AP=AK[AM].cid;AI[AP]||(AI[AP]=1);AH.mids[AM]=AK[AM].mid;}}AH=(AJ===AV)?{}:AH;k(AF,AI,AJ,AS,AQ,AU);if(AG&&AG.fromSearch){AH.fromSearch=AG.fromSearch;}if(AG&&AG.fromConv){AH.fromConv=AG.fromConv;}A([L+G,AF,AS,AQ,AU,AH]);}function o(AH,AQ,AJ,AN,AF){var AL,AO,AM="msg:remove",AK=J.isArray(AQ)?AQ:[AQ],AG={},AP=[],AR=[],AS=[];if(!AJ&&AN&&(AN!==H&&AN!==K&&AH!==H&&AH!==K)){return;}function AI(AW,AU){var AV,AT;for(AV=0;AV<AU.data.length;AV++){for(AT=0;AT<AW.midMap.length;AT++){if(AW.midMap[AT].mid===AU.data[AV].mid){AW.midMap.splice(AT,1);break;}}}}V();for(AL=0;AL<AK.length;AL++){AO=AK[AL].cid;AG[AO]||(AG[AO]=1);}k(AM,AG,AH,AR,AP,AS,null,{func:AI,args:{data:AK}});A([L+G,AM,AR,AP,AS,AF]);}function X(AF){var AG=u(AF);R[AG]||(R[AG]=0);R[AG]++;}function AA(AF){var AG=u(AF);if(!C.Lang.isUndefined(R[AG])){R[AG]--;if(R[AG]<=0){delete R[AG];}}}function Z(AH,AI){var AG,AJ,AF;for(AG=0;AG<AH.length;AG++){AJ=u(AH[AG].cid);if(!C.Lang.isUndefined(R[AJ])&&R[AJ]>0){AF=AF||{};AF[AJ]=AH[AG];}}if(AF){A([L+B,"lft",AI,AF]);}}C.on(O+G,U);C.on(O+E,o);C.on(L+D,X);C.on(L+I,AA);function AB(AI,AJ,AR,AN){var AS,AF,AM,AT,AG=AR.flags,AL,AK,AH,AQ=[],AP=[],AO=[];if(!J.isArray(AJ)){AJ=[AJ];}V();for(AL=0;AL<AJ.length;AL++){AS=AJ[AL];if(AS.cid&&(AF=y(AS.cid,AI))){for(AK=0;AK<AF.midMap.length;AK++){d.update(AF.midMap[AK].fid,{mid:AF.midMap[AK].mid},AR,AN);}AH={};AH[AS.cid]=1;k(AN,AH,AI,AQ,AO,AP);}else{AF=AS;AM=P.wcopy(AS);if(!C.Lang.isUndefined(AG.isFlagged)){AM.totalFlagged=AG.isFlagged?AM.totalMsgs:0;}if(!C.Lang.isUndefined(AG.isRead)){AM.totalUnread=AG.isRead?0:AM.totalMsgs;}AM.sparse=1;AT={};d.applyDiff(AT,AS.msgs[0],AR);AM.msgs=[AT];AO.push(P.wcopy(AM));AQ.push(AF);AP.push(P.diff(AM,AF));}}AQ.length&&A([L+G,AN,AQ,AO,AP]);}function f(AS,AJ,AM,AO,AN){var AI,AH,AK,AF,AG,AQ=[],AP=[],AR=[],AL=0;while((AI=AM[AL++])){AH=P.wcopy(S[AI]||{cid:AI,fid:AS});delete S[AI];if(AH.msgs){AH.msgs.splice(1,AH.msgs.length-1);AF=AD(AH.msgs[0],AS);}AK=P.wcopy(AH);AK.fid=AJ;AK.sparse=1;if(AK.msgs){AG=(AF!=="Draft"&&AF!=="Sent")?AJ:AF;AK.msgs[0].folderInfo={fid:AG,name:AG};AK.msgs[0].sourceFolderInfo={fid:AG,name:AG};}AQ.push(AH);AP.push(AK);AR.push(P.diff(AK,AH));}if(AQ.length){A([L+G,AN,AQ,AP,AR]);}window.CollectGarbage&&window.CollectGarbage();}function w(AG,AH,AF){var AK,AJ,AN,AL,AP,AM=[],AO=x.olist,AI=!AF;if(!J.isArray(AH)){AH=[AH];}V();if(!AG){C.error(L+"remove:"+N);}for(AK=0;AK<AH.length;AK++){AN=AH[AK];if(!AN||!AN.cid){continue;}AL=t(AN.cid,AG,false);for(AJ=0;AJ<AO.length;AJ++){if(AO[AJ].cid===AN.cid){AO.splice(AJ,1);break;}}if(AN&&!AN.fid){AN.fid=AG;}AP=AN;S[AN.cid]=AP;AM.push(AP);}A([L+E,AG,AM.length&&AM,AI,AF]);}return{set:l,get:AC,setPrefetch:c,getPermCidPart:u,areSameConvs:v,canConvOverlapInFids:b,toConvInfo:r,toConvInfoEvent:j,getAnchorDate:z,canBatchLMTGDM:g,threadUpdate:Z,msgAdd:W,update:AB,move:f,remove:w,calcConvSummary:n,getParam:function(AF){return m[u(AF)];},isCached:p,midToConv:Y,hit:i,cacheSize:function(AF){!isNaN(AF)&&(AF>0)&&(x.maxmsgs=AF);},olist:function(){return x.olist;},flush:e};})()});},"1.0.0",{requires:["common-utils"]});

YUI.add("mail-ui-mailpane-base",function(A){A.namespace("mail.ui");var I=A.common.Utils,H=I.substitute,G=I.rocketstats,K=A.ui.Templates,M=A.mail,E=M.ui,F=A.Lang,L=M&&M.Controller?M.Controller.Messages:{},D=K.minty_module_comm_modes,J="ERROR: MessagePaneRead ",N=0,B=NeoConfig.isRTL;var C=function(O){var R=this,Q=(strings.str_cfg_tog_hasIM&&NeoConfig.hasIM),P=(strings.str_cfg_tog_hasSMS);C.superclass.constructor.call(R,O);R.NAME="MessagePane";R.numSelected=0;R.hasStarted=false;R.loading_slow=R.loading_error=R.loading_moved=R.tmPendingLoad=R.tbarMod=R.tbarCallBack=R.tbarScope=R.tmFireRead=R.slowLoad=R.loadingTimer=R.widthUpdateTimer=R.neighbors=R.message=R.outboundReq=R.request=null;R.isLoaded=R.nextPrevCounter=R.stepTimer=R.isStepping=R.scrollWidth=R.scrollWidthIncr=R.scrollWidthKill=R.fid=0;R.fullView=O.fullView;R.parentNode=O.parentNode||null;R.type="message";R.guid=A.guid();R.sortedColumn=O.sortedColumn||null;R.searchQuery=O.searchQuery||null;R.arrMessageSequence=O.arrMessageSequence||null;R.arrMessageSequenceStartIndex=O.arrMessageSequenceStartIndex;R.stopwatch=null;R.oTemplate=null;R.statOp=null;R.stopwatchPreview="PaneInPreview";R.formatters={page_show_comm_modes:function(){return !R.numSelected&&!R.get("close")?R.sub({s:R.oTemplate.page_show_comm_modes}):"";},page_show_comm_modes_else:function(){return R.numSelected&&!R.get("close")?R.sub({s:R.oTemplate.page_show_comm_modes_else}):"";},global_spearmint_view_else:function(){var S=R.oTemplate.global_spearmint_view_else;return !R.get("close")?R.sub({s:S}):"";},horzPane:function(){return NeoConfig.infiniteScroll?R.sub({s:R.oTemplate.horzPane}):"";},vertPane:function(){return NeoConfig.infiniteScroll?R.sub({s:R.oTemplate.vertPane,o:{msgLink:"http://help.yahoo.com/kb/index?page=content&y=PROD_MAIL_ML&locale=en_ZZ&id=SLN15123&actp=productlink"}}):"";},page_message_pane_view:function(){return O.fullView?"":R.oTemplate.page_message_pane_view;},page_message_pane_view1:function(){return O.fullView?"":R.oTemplate.page_message_pane_view1;},page_message_pane_view2:function(){return O.fullView?"":R.oTemplate.page_message_pane_view2;},page_message_full_view:function(){return O.fullView?R.oTemplate.page_message_full_view:"";},message_selection:function(){return R.numSelected>0&&!R.message?R.oTemplate.message_selection:"";},has_im:function(){return Q?H(D.has_im,null,R.formatters,null,strings):"";},has_sms:function(){return P?H(D.has_sms,null,R.formatters,null,strings):"";},is_fresh:function(){return R.sub({s:R.oTemplate.is_fresh});},is_fresh_else:function(){return"";}};R.on("closeChange",function(U){var S;if(U.newVal){if(R.message){R.fire("MessagePane:unload");}R.detach();if(!R.get("reuse")){try{if(R.parentNode){S=(R.parentNode.one("div.tripane .content"))||R.parentNode.one("div.message.content");R.set("parentNode",null);R.parentNode=null;}if(S){S.destroy();}}catch(T){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:1",T,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:1");}}}else{R.attach();}});!R.get("close")&&R.attach();R.addAttrs({fid:{setter:function(S){R.fid=S;}},message:{setter:function(S){if(R.message){R.fire("MessagePane:unload");}R.setMessage(S);},getter:function(){return R.getMessage();}},visible:{setter:function(T){var S=R.get("rootNode");if(S){S.setStyle("display",(T?"block":"none"));}},value:typeof O.visible==="undefined"?1:O.visible,lazyAdd:true},vertical:{setter:function(X){var S=R.get("rootNode"),V=A.common.persist.getCookie(),U,W={},Y=B?"right":"left",T;if(X){U=V.get("pos.h2slider");U=(U&&U.charAt(0)==="a")?U.substr(1):U;W.top="0px";W[Y]=(U||(NeoConfig.vertPane?330:630));}else{T=parseInt(V.get("pos.vslider"),10);W.top=T?T:154;W[Y]="0px";}S&&S.setStyles(W);},value:O.vertical,lazyAdd:true},transferFocus:{},scrollWidth:{value:null},scrollWidthActive:{value:true}});R.neoEvent("rendered",{emitFacade:true,broadcast:1});};A.extend(C,E.BaseWidget,{scrollWidthReset:function(){var O=this;if(!O.scrollWidthKill){O.scrollWidth=O.scrollWidthIncr=0;O.set("scrollWidth",null);}},scrollWidthUpdate:function(){},scrollWidthNotify:function(){var P=this,O=P.parentNode.one(".msg-body");if(O){if(N===0){N=parseInt(O.getStyle("marginRight"),10)+parseInt(O.getStyle("marginLeft"),10);}P.scrollWidthUpdate({scrollWidth:O.get("scrollWidth")+N});}},scrollWidthStartTimer:function(){},resetScrollPosition:function(){var Q=this;var O,P;if(Q.resetScroll){O=this.get("parentNode");P=O?O.one("div.tripane .content")||O.one("div.message.content"):0;if(P){P.set("scrollTop",0);Q.resetScroll=0;}}},bindUI:function(){var Q=this,P=Q.getStopwatch();P&&P.start(2,"BindUI");var O=Q.getRoot();if(A.UA.webkit&&O&&O.get("id")!=="msg-preview"){O.setStyle("-webkit-user-select","none");A.later(1000,null,function(){var R=Q.getRoot();R&&R.setStyle("-webkit-user-select","");},0,false);}if(Q.message){P&&P.start(2,"PreLoadExtra1");Q.loadExtra(function(){try{P&&P.start(2,"LoadExtraCB1");Q.bindPaneContent();}catch(R){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:2",R,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:2");}});}else{if(O&&!Q.rootBound){P&&P.start(2,"DelegateClick");O.delegate("click",function(S){G.stat("cleanup","DelegateClick");var R=I.getDataAction(S).action;switch(R){case"compose":A.fire("mt:click",{action:"compose_new_nav_toolbar",spid:"compose_new"});A.fire("newMessage");break;case"new-conv":break;case"loadContent":break;case"switchpane":Q.parentCW.switchView(NeoConfig.horzPane?"scroll-view-prev-beside":"scroll-view-prev");break;}S.preventDefault();},".media-modes span, .prevMsg a");O.on("scroll",function(){Q.resetScroll=1;});Q.rootBound=1;}}O=null;},renderComplete:function(){var R=this,P=M.model.DataStore.Folders.get(R.fid),O=R.getStopwatch();G.stat(R.statOp,"TAE4:GDM:SUCCESS:"+(P.isSystem?"system":"custom")+":"+R.numRetries);
O&&O.start(1,"postRender");R.fireEvent("complete");try{R.fire("renderComplete");}catch(Q){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:3",Q,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:3");G.stat(R.statOp,"renderCompleteError");}G.stat(R.statOp,"renderComplete");R.scrollWidthStartTimer();R.hasStarted=false;R.setRenderFocus();R.postRender();},appendMarkup:function(){try{var V=this,O=V.get("parentNode"),U=V.message,S,Q,R,P;if(!O){return;}S=O.one("div.tripane .content")||O.one("div.message.content");if(S){R=V.numSelected?V.oTemplate.page_show_comm_modes_else:V.oTemplate.page_show_comm_modes;Q=H(R,U,this.formatters,null,strings,K);S.setContent(Q);V.insertBody(S);if(V.scrollTop&&(P=V.get("rootNode"))){P.set("scrollTop",V.scrollTop);}}else{O.append(V.getMarkup());S=O.one("div.tripane .content")||O.one("div.message.content");V.insertBody(S);}if(!V.get("rootNode")){V.set("rootNode",S.get("parentNode"));V.setRootNodeTabIndex();}}catch(T){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:4",T,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:4");G.stat(V.statOp,"appendMarkupError");A.use("common-utils-error",function(){I.error.report((J+"appendMarkupError"),T,1,1,1);});}},getRoot:function(){var P=this,O=P.parentNode;return O&&(O.one(".messagepane")||O.one(".threadpane"));},sub:function(P){var T=P.s||"",R=P.o||0,O=P.f||this.formatters,S=P.a||0,Q=P.strs||strings;return H(T,R,O,S,Q);},onKeyDown:function(S){if(S.keyCode===38||S.keyCode===40){var Q=S.currentTarget.one(".base-card");Q.set("tabIndex","0");Q.focus();return;}if(S.keyCode!==65){S.stopPropagation();}else{var T=this,P=T.parentNode.one("div.tripane .content")||T.parentNode.one("div.message.content"),O=A.Node.getDOMNode(P),R;if(window.getSelection){R=window.getSelection();R.selectAllChildren(O);}else{R=document.body.createTextRange();R.moveToElementText(O);R.select();}S.halt();}},setToolbar:function(R,O,P){var Q=this;Q.tbarMod=R;Q.tbarCallBack=O;Q.tbarScope=P;},onFocus:function(){return this.fullView&&!this.message;},getMarkup:function(){var P=this;var O=H(P.oTemplate.base,P.message,P.formatters,null,strings,K);return O;},getStopwatch:function(){var O=this;return I.Stopwatch.get(O.stopwatchPreview)||O.stopwatch;},setDocRole:function(){this.get("rootNode").set("role","document");},setRootNodeTabIndex:function(){},abortRequests:function(){var S=this,Q=S.request,R=S.retryPrefix(),O,P=S.requestType||"";if(Q){Q=F.isArray(Q)?Q:[Q];for(O=0;O<Q.length;O++){G.stat(S.statOp,(R+P+"requestAbort"));Q[O].abort();}}S.request=null;},retryPrefix:function(O){var P=(O>=0)?O:this.isRetrying;return P?((P===20)?"retrySL_":"retry_"):"";},requestMessage:function(P,Q,W,V){var S=this,U=P?P.mid||0:0,T,R=W.ovparams||{},O=V||S.getStopwatch();if(U){Q.args={fid:S.fid,primeMsg:P,stopwatch:O};if(S.isChat(P)){R.displayPref="text/json";R.urlDetection=false;R.emailDetection=false;R.annotateOption={annotateText:"none"};W.ovparams=R;}S.fireEvent("get");if(O){O.start(1,"YCMSGGetBegin");if(!O.YCMSGGetBegin){O.YCMSGGetBegin=new Date();}}if(NeoConfig.noCache){R.dontCache=true;W.dontCache=true;}T=L.get(W,Q);}return T;},insertBody:function(){},attach:function(){},detach:function(){},setMessage:function(){},getMessage:function(){},render:function(){},requestPaneContent:function(){},loadPaneContent:function(){},setRenderFocus:function(){},setFocusNode:function(){},loadExtra:function(){}});E.MailPane=E._MailPane=C;},"1.0.0",{requires:["minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]});

YUI.add("mail-ui-mailview-base",function(C){var W=[48,49,50,51,52,53,54,55,56,57],T=[strings.str_cfg_sc_keycode_reply_to_all,strings.str_cfg_sc_keycode_message_forward,strings.str_cfg_sc_keycode_movemenu_display,strings.str_cfg_sc_keycode_mark_as_read,strings.str_cfg_sc_keycode_flag_selected_messages,strings.str_cfg_sc_keycode_reply_to_sender,strings.str_cfg_sc_keycode_print,strings.str_cfg_sc_keycode_toggle_preview_pane,strings.str_cfg_sc_keycode_close_tab],E=["density-regular","density-compact","density-open"],B={},N=T.length,e=NeoConfig,c=C.common,b=c.Utils,S=b.escapeHtml,V=b.unescapeHtml,h=C.contacts,m=C.mail,K=m.ui,F=m.model.DataStore,Q=F.Folders.get,R=c.persist.UserData,G=K.MessagePaneUtils,L="%40C%40Chats",O="%40B%40Bulk",A="darlaEvent",I="delete",Z="message",X="move",a="inbox-move",k="visible",d="scroll-view-prev",g="scroll-view-prev-beside",U="scroll-view-noprev",j,J=false,D=C.mail.Tabs,M=NeoConfig.nav&&C.one("#nav"),P,l;for(j=0;j<N;++j){var H=[65,70,68,75,76,82,80,86,220];B[T[j]]=H[j];}var f=function(Y){var q=this,p,o;q.statOp=null;q.evt=[];Y=Y||{};p=Y.fid||0;o=Y.msgList!==0;Y.vertical=q.verticalPreview=(C.one("#rail-resize-vert"))?1:0;q.isSearch=(Y.query==="")||Y.query;q.searchQuery=Y.searchQuery||null;q.subToolbars={};q.bottomToolbars={};q.supportPreview=true;function n(){f.superclass.constructor.call(q,Y);q.evt.push(C.on("MailOptions:PreviewPaneCollapse",function(){q.previewPaneUIChange(false);}));q.evt.push(C.on("MailOptions:PreviewPaneExpand",function(){q.previewPaneUIChange(true);}));q.evt.push(C.on("MailOptions:PreviewPaneUIChange",function(s){var r=s&&s.view;q.handlePreviewPanePrefChange(r);}));}function i(s){var r;if(s){return((r=Q(s))&&r.total===0);}return 0;}C.mix(q,{fid:p,hasMsgList:o,isEmpty:i,msgList:null,msgPane:null,type:(function(){var r=NeoConfig.hasConv;if(q.isSearch){return"searchlist";}else{if(o){return r?"convlist":"messagelist";}else{return r?"convpane":"messagepane";}}})()},true);n();};C.extend(f,C.mail.ui.BaseWidget);C.mix(f.prototype,{NAME:"MailView",keyCodes:T,numCodes:W,verticalPreview:null,isChat:function(Y){var i=this;return i.isActualFolder(Y,L);},isActualFolder:function(i,Y){var o=this,n=o.msgPane&&o.msgPane.get(Z);return(n&&n.message&&n.message.sourceFolderInfo&&n.message.sourceFolderInfo.fid||i)===Y;},refreshMessage:function(Y){var i=this;if(!i.hasMsgList&&i.msgPane){if(!NeoConfig.hasConvView){i.msgPane.set(Z,{fid:Y.fid,message:Y.msg});}if(NeoConfig.hasConvView&&Y.submsg){if(!i.msgPane.selectMessage(Y.submsg)){i.msgPane.loadPaneContent(106);i.msgPane.selectMessage(Y.submsg);}}}},handlePreviewPanePrefChange:function(Y){var i=this;switch(Y){case 0:i.getCurrentView()!==U&&i.switchView(U);break;case 1:i.getCurrentView()!==g&&i.switchView(g);break;case 2:i.getCurrentView()!==d&&i.switchView(d);break;}},handlePostAction:function(q,i,o,Y){if(!q){return;}var p=this,n=q.action,t=p.msgPane,s=p.goOnMessageDelete(),r;if(i!==O&&s&&n==="folder-new"){q.preHandle=function(u){C.use(p._nextprevModule,function(){t&&t.stepMail(NeoConfig.stepMessageAction||"next",u,1);});};}r=function(){p.handleUI(q,i,o,Y&&Y.message?[Y.message]:null);};if((p.type==="messagepane"||p.type==="convpane")&&i!==O&&i!==L&&(n===I||n===X||n===a||n==="trash"||n==="spam"||n==="sendercompromised"||n==="phished"||n==="notmymail")&&s){C.use(p._nextprevModule,function(){if(i==="Trash"&&n===I){t&&t.dialogThenStep(p,Y,q,1);}else{n===I?t&&t.stepMail("next",r,1):t&&t.stepMail(n||"next",r,1);}});}else{r();}},loadResizersAndSliders:function(){var i=this,Y=[];if(i.slidersSet){return;}Y.push("mail-ui-workspace-horizontal-slider","mail-ui-messagesview-resize");if(i.verticalPreview){Y.push("mail-ui-messagesview-vertical");}if(e.useDD){Y.push("mail-ui-messagesview-dd");}Y.push(function(n){if(K&&K.MessagesViewResize&&i.supportPreview){if(i.verticalPreview){i.horizResizer=new K.MessagesViewVertical(i);}else{i.vertResizer=new K.MessagesViewResize({messagesview:i});}}else{}if(e.useDD&i.supportPreview){if(typeof n.mail==="object"&&typeof n.mail.MessagesViewDD==="object"){m.MessagesViewDD.setDD(i);}else{}}});C.use("contacts-api","contacts-api-utils",function(){if(h&&h.utils&&!h.utils.areContactsLoaded()){h.api.load();}});C.use.apply(C,Y);i.slidersSet=true;},positionPreview:function(i,Y){var o=this,n;C.use("mail-ui-messagesview-vertical",function(){if(i&&!K.MessagesViewVertical.canGoVert()){i=false;}o.verticalPreview=i;n=i?1:2;if(o.horizResizer){o.horizResizer.setDisplay(i);}else{if(i){o.horizResizer=new K.MessagesViewVertical(o);}}if(o.vertResizer){o.vertResizer.setDisplay(!i);}else{if(!i){o.vertResizer=new K.MessagesViewResize({messagesview:o});}}if(i){o.positionToolbarItems(true);}else{o.positionToolbarItems(false);}o.msgList.set("vertical",i);o.msgList.set("fullpane",false);o.msgPane&&o.msgPane.set("vertical",i);NeoConfig.horzPane=!i;NeoConfig.vertPane=i;Y&&Y();if(NeoConfig.previewPanePref!==n){NeoConfig.previewPanePref=n;C.fire("update:previewPane",{"previewpane":n});}C.fire("verticalPreview",o);});},updateListDensity:function(n){var p=this,Y=C.one("body"),i=Y.one("#inboxcontainer"),o=Y.one("#toolbar");if(NeoConfig.vertPane&&n){Y.addClass("vp-on");i.addClass("vp");o.addClass("vp");Y.removeClass("vp-off");C.fire("update:density",{density:"density-open"});}else{Y.removeClass("vp-on");i.removeClass("vp");o.removeClass("vp");Y.addClass("vp-off");p.switchSize(E[NeoConfig.msgListDensity]);}},toggleExpandOrCollapseAll:function(Y){var i=Y&&this.msgPane.message?false:true;C.all(".toggle-thread")[i?"addClass":"removeClass"]("hidden");C.one(".toggle-thread-divider")[i?"addClass":"removeClass"]("hidden");},previewPaneUIChange:function(Y){try{var p=this,o=p.msgList,t=p.msgPane,i,r,s,n;if(NeoConfig.infinitePane==="1"){C.all(".infp-arrow").addClass("hidden");}if(p.verticalPreview&&Y&&!K.MessagesViewVertical.canGoVert()){if(NeoConfig.vertPane){p.positionPreview();}else{p.positionPreview();}}C.fire(Y?"previewPane:expanded":"previewPane:collapsed",p);if(p.verticalPreview){p.horizResizer&&p.horizResizer.setDisplay(Y);}else{p.vertResizer&&p.vertResizer.setDisplay(Y);
}o.set("fullpane",!Y);t.set(k,Y);p.updateListDensity(Y);if(NeoConfig.hasConvView){p.toggleExpandOrCollapseAll(Y);}if(NeoConfig.convReplyBtnsInTlbr){if(!Y){p.get("contentToolbar").root.addClass("hideReplyGroup");}else{if(p.msgPane.message===null){p.get("contentToolbar").root.addClass("disableReplyGroup");}else{p.get("contentToolbar").root.removeClass("disableReplyGroup");}p.get("contentToolbar").root.removeClass("hideReplyGroup");}}if(Y){i=b.Stopwatch.get(p.statOp);r=t.get(Z);s=r&&r.message&&r.message.mid;n=r&&r.fid;if(n&&s){i=G.handleMsgInPreviewStopwatch(i,t,n,s);}t.set(Z,r);}i&&i.start(1,"SetDisplay");NeoConfig.horzPane=!p.verticalPreview;NeoConfig.vertPane=p.verticalPreview;}catch(q){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:1",q,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:1");}},togglePreviewPane:function(){var p=this;if(!p.isEmpty(p.fid)){try{var i=p.msgList,n=p.msgPane,Y;if(!i||!n){return;}Y=!NeoConfig.previewPanePref;p.previewPaneUIChange(Y);if(p.verticalPreview){p.positionToolbarItems(Y);}NeoConfig.previewPanePref=Y?(p.verticalPreview?1:2):0;C.fire("update:previewPane",{"previewpane":NeoConfig.previewPanePref});p.checkPreview();i.vlist.updateUlSize();if(C.one("#inboxcontainer").hasClass("prevPaneVisible")){C.one("#inboxcontainer").removeClass("prevPaneVisible");}else{C.one("#inboxcontainer").addClass("prevPaneVisible");}C.fire("ws:previewChange",Y);}catch(o){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:2",o,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:2");}}},positionToolbarItems:function(AA){var u=this,q=NeoConfig.isRTL,y="pos.h2slider",w=330,r,z,x,p,i,o,v,n,Y,t,s;C.use("common-persist-cookie-data",function(AB){i=AB.common.persist.getCookie();r=i.get(y);n=u.get("contentToolbar");s=n.root||n.get("content");z=s.one(".spacer-divider");x=s.one("#btn-conv-view");o=s.one("#btn-closemsg");v=s.one(".toggle-container");p=((r&&r.charAt(0)==="a")?r.substr(1):r)||w;if(AA&&u.msgList){z&&z.setStyle(q?"marginRight":"marginLeft",p-60+"px");z&&z.addClass("bevel_divider");if(x){Y=x.getStyle("width");t=Y.substr(0,Y.indexOf("px"))?Y.substr(0,Y.indexOf("px")):"44";p=parseInt(p,10)+44-parseInt(t,10);x.setStyle(q?"right":"left",p-65+"px");}o&&o.setStyle("display","inline-block");NeoConfig.convReplyBtnsInTlbr&&v&&v.addClass("hidden");}else{z&&z.setStyle(q?"marginRight":"marginLeft","auto");z&&z.removeClass("bevel_divider");x&&x.setStyle(q?"right":"left","auto");if((u.type.indexOf("pane")<=0)){o&&o.setStyle("display","none");}NeoConfig.convReplyBtnsInTlbr&&v&&v.removeClass("hidden");}if(NeoConfig.wideLeftRail){AB.one("#toolbar")&&AB.one("#toolbar").addClass("wideLeftRail");}u.checkWidth();u.evt.push(AB.on("windowresize",function(){u.checkWidth();}));});},toggle_tooltip:function(i){var Y=C.one("#toolbar");switch(i){case"long_intl_search_on":Y.one("#btn-back-to-search")&&Y.one("#btn-back-to-search").addClass("s-tp");case"search_on":Y.one("#btn-move")&&Y.one("#btn-move").addClass("s-tp");Y.one("#main-btn-spam")&&Y.one("#main-btn-spam").addClass("s-tp");Y.one('.btn[data-action="delete"]')&&Y.one('.btn[data-action="delete"]').addClass("s-tp");break;case"long_intl_search_off":Y.one("#btn-back-to-search")&&Y.one("#btn-back-to-search").removeClass("s-tp");case"search_off":Y.one("#btn-move")&&Y.one("#btn-move").removeClass("s-tp");Y.one("#main-btn-spam")&&Y.one("#main-btn-spam").removeClass("s-tp");Y.one('.btn[data-action="delete"]')&&Y.one('.btn[data-action="delete"]').removeClass("s-tp");break;default:break;}},checkWidth:function(){var Y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=this;if(NeoConfig.wideLeftRail){if(C.one("#toolbar")&&C.one("#toolbar").hasClass("with-backsearch")){if(C.one("body")&&C.one("body").hasClass("wide-right-rail")){if(Y<1470){C.one("#toolbar").addClass("long-tb");i.toggle_tooltip("long_intl_search_on");}else{C.one("#toolbar").removeClass("long-tb");i.toggle_tooltip("long_intl_search_off");}}else{if(Y<1325){C.one("#toolbar").addClass("long-tb");i.toggle_tooltip("long_intl_search_on");}else{C.one("#toolbar").removeClass("long-tb");i.toggle_tooltip("long_intl_search_off");}}}else{if(Y<1170){C.one("#toolbar").addClass("long-tb");i.toggle_tooltip("search_on");}else{C.one("#toolbar").removeClass("long-tb");i.toggle_tooltip("search_off");}}}else{if(C.one("#toolbar")&&C.one("#toolbar").hasClass("with-backsearch")){if(Y<1120){C.one("#toolbar").addClass("long-tb");i.toggle_tooltip("search_on");}else{C.one("#toolbar").removeClass("long-tb");i.toggle_tooltip("search_off");}}else{C.one("#toolbar").removeClass("long-tb");i.toggle_tooltip("search_off");}}},checkPreview:function(){var o=this,Y=NeoConfig.previewPanePref?true:false,n;try{if(Y){n=o.verticalPreview?o.horizResizer:o.vertResizer;n&&n.checkDisplay();}}catch(i){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:3",i,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:3");}},switchSize:function(n){for(var Y=0;Y<E.length;Y++){if(E[Y]===n){NeoConfig.msgListDensity=Y;}}C.fire("update:density",{density:n});},getCurrentView:function(){if(NeoConfig.previewPanePref){if(NeoConfig.previewPanePref===2){return d;}else{return g;}}else{return U;}},switchView:function(i){var p=this,o,n=(i===d)||(i===g),Y;switch(i){case d:case g:case U:if(i===U){NeoConfig.infinitePane="1";}o=p.getCurrentView();Y=function(){if((o===U&&n)||(o!==U&&!n)){p.togglePreviewPane();}else{p.updateListDensity(true);}C.use("rocket-stats",function(){var q={};q[d]="preview";q[g]="vert_preview";q[U]="nopreview";b.rocketstats.stat("switchview",q[i],null,{bucket:true,intl:true});});};if((p.verticalPreview&&i===d)||(!p.verticalPreview&&i===g)){p.positionPreview((i===g),Y);
}else{Y();}}},handleDarlaEvent:function(){var Y=this;if(Y.hasMsgList){Y.msgList.handleDarlaEvent();}else{Y.fire(A,{action:Y.darlaActionKey});}},triggerDarlaWithAIC:function(o){var p=this,Y,n,i;Y=Q(p.fid);i=o||p.msgPane.message;n=C.mail.ui.common.StringUtils.getSystemFolderName(p.fid,Y.folderInfo.name);p.fire(A,{action:p.darlaActionKey,value:{siteAttr:C.mail.ui.MessagePaneUtils.getAdSiteAttribsFromMesgObj(i,p.fid),foldername:n,message:i}});if(NeoConfig.mbPencilTop&&!p.searchQuery){C.fire("mbEvent",{action:"rotate"});C.fire("rotateD2S");}},goOnMessageDelete:function(){return(R.get("userUIPref.goOnMessageDelete")==="msg");},setPPToolbarItems:function(q){var Y=C.one("#toolbar"),t,s,p,n,r=C.one(".toggle-thread-divider"),o;if(Y){t=q?"removeClass":"addClass";s=[".btn-close-msg",".toggle-container",".toggle-thread-divider"];o=function(i){i&&i[t]("hidden");};for(p=0;p<s.length;p++){Y.all(s[p]).each(o);}if(NeoConfig.convReplyBtnsInTlbr){n=Y.one(".toggle-container");if(this.verticalPreview){r&&r.addClass("hidden");n&&n.addClass("hidden");}else{n&&n.removeClass("hidden");r&&r.removeClass("hidden");}}}},handleToolbarSelection:function(s){var r=this,n=s?s.dataAction||s.currentTarget._node.getAttribute("data-action"):0,x=s?(s.item?s.item:s.currentTarget):0,y=r.msgPane,p=r.msgList,t={append:{}},u,i,w=C.mail.ui.ContextButton,o=r.get("contentToolbar")?r.get("contentToolbar").root:C.one("#pagetoolbar"),v,Y=true,q;if(!n||(w&&!w.buttonEnabled({item:x,root:o,action:n}))){return;}C.fire("mailview:toolbar-action",n);if((r.type==="messagepane")||(p&&p.get("selectCount")===1)){switch(n){case"edit":t.spid="compose_draft";break;case"reply_sender":case"reply_all":case"forward":t.spid="compose_"+n;break;case"open":t.spid="message_tabpane";t.append.rspns="new";break;case"delete":case"spam":case"sendercompromised":case"phished":case"notspam":case"move":if(r.type==="messagepane"){if(r.goOnMessageDelete()){q="message_tabpane";}else{switch(r.fid){case"Inbox":case"Draft":case"Sent":case"Trash":q="folderview_"+r.fid.toLowerCase();break;case O:q="folderview_bulk";break;case L:q="folderview_chat";break;default:q="folderview_custom";}}t.append.rspns="new";t.spid=q;}break;case"print":case"fullheader":case"set_encodings":case"addcontact":t.append.rspns="pop";break;case"prev":case"next":t.spid="message_tabpane";break;case"selectAll-message":case"select-dd":case"sender":case"recipient":case"subject":case"date":case"unRead":case"attachment":case"sort-flagged":if(p){s.target=x;p.clickHandler(s);}Y=false;break;}}else{if(n.indexOf("-view")===-1){switch(n){case"spam":case"sendercompromised":case"phished":break;case"selectAll-message":case"select-dd":case"sender":case"recipient":case"subject":case"date":case"unRead":case"attachment":case"sort-flagged":if(p){s.target=x;p.clickHandler(s);}Y=false;break;default:t.append.rspns="pop";}}}if(x.hasClass("menu-active-item")){v=C.one(".list-view-footer .btn.pressed");i=x.ancestor(".optionMenu");u=i.get("id").replace("menu","menusel");t.append.ltxt=n;}else{v=x.ancestor(".list-view-footer");u=n;if(NeoConfig.infinitePane==="1"){switch(u){case"prev":u="left";break;case"next":u="right";break;}}}t.action=["tlbr_",u,(v?"_btm":"")].join("");if(!r.hasMsgList){t.append.sec=(v)?"msgReadTlbrBtm":"msgReadTlbr";}C.fire("mt:click",t);switch(n){case"select-all":p.vlist.selectAll();break;case"menu":case"selectAll-message":break;case"prev":case"next":C.use(r._nextprevModule,function(){NeoConfig.stepMessageAction=n;y&&y.stepMail(n);});b.rocketstats.bucketStat("yas","clickStat::"+n);break;case"closemsg":if(r.msgPane){if(r.msgPane.fullView){if(NeoConfig.multitask&&!NeoConfig.tabs){r.handleTabSwitch();}else{r.set("close",1);}}else{if(r.msgPane.hasMessage()){p.vlist.selectAll(0);}}}break;case"conv-save":break;case"conv-spam":break;case"conv-help":break;case d:case g:case U:r.switchView(n);break;case"density-compact":case"density-regular":case"density-open":r.switchSize(n);break;case"themes":C.use("mail-ui-themes",function(z){z.mail.ui.Themes.showThemesDialog();});break;case"addcontact":r.handleDefaultCase({action:n,context:"msg"});break;case"togglePrevDialog":C.use("mail-ui-messagepreview",function(){x&&x.toggleClass("checked");C.mail.ui.MessagePreview.toggle(r.msgList);});break;case"tab":C.use("common-ui-navtabs",function(){c.ui.NavTabs.setTabs(1);});break;case"recent":C.use("common-ui-navtabs",function(){c.ui.NavTabs.setTabs(0);});break;default:if(Y){r.handleDefaultCase({action:n,item:x,tbAction:true});}break;}},handleFullscreenNavigation:function(Y){var i=this;i.handleToolbarSelection(Y);},onFocus:function(){if(!this.hasMsgList){return this.msgPane.onFocus();}},sortKeys:function(Y){if(this.hasMsgList){switch(Y){case 65:this.msgList.sortList("attachment",null);return true;case 68:this.msgList.sortList("date",null);return true;case 75:this.msgList.sortList("unRead",null);return true;case 76:this.msgList.sortList("sort-flagged",null);return true;}}return false;},onKeyDown:function(AU){var s=this,x=AU.keyCode,i,v=AU.metaKey,AJ=AU.shiftKey,AT=AU.ctrlKey,AC=AU.altKey,AQ=AU.metaKey||AU.ctrlKey,AS=s.fid==="Draft",AA=s.isChat(s.fid),Y=false,r=s.msgPane,AO=s.msgList,AK=C.UA,AM,AE,AD,AN=C.one("#app-list"),w,AB,z=C.UA.ie,AG=C.mail.ui.Boss;x=!AQ?B[x]||x:x;if(x>=96&&x<=105){x-=48;}if(AG&&AG.isActive()){AG.handleKeydown({keyCode:x});return true;}if(x===186){J=true;return;}if(J){if(this.sortKeys(x)){J=false;return;}J=false;}if(AS&&((x===65&&!AQ)||x===82||x===70||x===68)){return false;}if(AA&&((!AJ&&x===65)||x===82||x===70||x===68||x===75)){return false;}function o(){var AY=C.one(document.activeElement),AZ=C.one("#yucs"),AX=C.one("#yucs-top-bar");if(AY&&((AZ&&AZ.contains(AY))||(AX&&AX.contains(AY)))){return true;}return false;}switch(x){case 13:i=AU.target.ancestor("div .list-view")?"open":null;break;case 33:case 34:case 35:case 36:case 38:case 40:if(o()){return;}case 188:if(v){return;}case 190:case 37:case 39:if(NeoConfig.infinitePane!=="1"&&(x===37||x===39)){return;}if(!AO&&((AT&&(x===188||x===190))||x===37||x===39)){C.use(s._nextprevModule,function(){NeoConfig.stepMessageAction=(x===188||x===37)?"prev":"next";
r&&r.stepMail(NeoConfig.stepMessageAction,null,null,true);});}else{if(AO){AO.set("active",1);if(NeoConfig.infiniteScroll){AO._listview._keydown(AU);}else{AM=AO.get("focusNode");AE=C.one(document.activeElement);if(AM&&(!AE||!AM.contains(AE))){C.use("node-event-simulate",function(){AM.simulate("keydown",{charCode:x,keyCode:x,altKey:AC,shiftKey:AJ,ctrlKey:AT,metaKey:v});});}}}else{r.onKeyDown(AU);if(AU.keyCode===38||AU.keyCode===40){return;}}}AU.halt();break;case 46:if(!AN||(AN&&!AN.contains(AU.target))){i=I;}break;case 68:if(!AC&&!AJ){if(s.ftrNode&&s.ftrNode.inViewportRegion()&&!s.get("contentToolbar").get("content").inViewportRegion()){AM=s.ftrNode.one("#btn-move");if(AM){if(!AM.menu){C.use("node-event-simulate",function(){AM.simulate("click");});}else{AM.menu.show();}break;}}i="move-menu";}break;case 75:AD=AU.target;if(!AD.hasClass("list-view-item")){AD=C.one(".list-view-item");}i=AD.hasClass("unread")?"read":"unread";break;case 76:AD=AU.target;if(!AD.hasClass("list-view-item")){AD=C.one(".list-view-item");}i=AD.hasClass("flagged")?"unflagged":"flagged";break;case 65:if(!AJ&&!AC&&AQ){AO.vlist.selectAll(1);AU.halt();}else{if(!NeoConfig.hasConvView){if(!AQ&&!AC){i=AJ?(s.isEnableAddToContacts()?"addcontact":null):"reply_all";if(i==="addcontact"&&!v&&!AT){s.handleDefaultCase({action:i,context:"msg"});return true;}w=z;}}else{r&&r.onKeyDown(AU);}}break;case 82:if(!NeoConfig.hasConvView){if(!AJ){i="reply_sender";w=z;}}else{r&&r.onKeyDown(AU);}break;case 70:if(!NeoConfig.hasConvView){if(!AC&&!AJ&&!AQ){i="forward";w=z;}else{if(AJ&&AC){Y=true;i="forward";AC=false;AU.halt();}}if((!(AK.gecko&&AK.os==="macintosh")&&!AJ&&!v)&&(AJ||!AQ)){AU.preventDefault();}}else{r&&r.onKeyDown(AU);}break;case 86:if(!s.msgList||!s.msgPane){break;}if(v||AT||AC){break;}if(!AJ){var y=s.getCurrentView(),q;if(y===g){q=d;}else{if(y===d){q=U;}else{q=g;}}s.switchView(q);}else{if(s.msgList&&NeoConfig.hasConv){var AR=s.msgList._listview.get("selectNew");window.alert("switching to "+(AR?"non-destructive select":"destructive select"));s.msgList._listview.set("selectNew",!AR);}}return true;case 27:var u=C.one(".card-v1 .user-email a");if(u&&u.getStyle("visibility")!=="hidden"){C.mail.ContactPopup&&C.mail.ContactPopup.hideMini();}else{if(s.type==="messagepane"||s.type==="convpane"){if(NeoConfig.multitask&&!NeoConfig.tabs){s.handleTabSwitch();}else{s.set("close",1);}return true;}else{if(AG){AG.toggle(null,true);}return true;}}break;case 220:if(v||AT){if(s.type==="messagepane"||s.type==="convpane"){if(NeoConfig.multitask&&!NeoConfig.tabs){s.handleTabSwitch();}else{s.set("close",1);}return true;}}break;case 80:if(AQ){AU.halt(true);try{event.keyCode=0;}catch(t){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:4",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:4");}}if(!AC&&!AJ){s.handleDefaultCase({action:"print",item:0});}break;case 73:case 84:if(AJ&&AA&&strings.str_cfg_tog_hasSMS){var AW=(x===84)?"reply-sms":"reply-im",AP=s.getCurrentMsg();s.handleUI({action:AW},s.fid,s.msgList,AP?[AP]:null);return true;}if(AJ&&AC){C.mail.ui.Tray&&C.mail.ui.Tray.toggle();}break;case 48:case 49:case 50:case 51:if((x===51)&&AJ&&!AT&&!AC&&!v){i=I;break;}case 52:case 53:case 54:case 55:case 56:case 57:if(x>=49&&x<=57){if(AC&&M){switch(x){case 49:case 50:case 51:case 52:case 53:case 54:if(!P){P=M.all(".nav-item");}l=P.item(x-49);if(l){C.fire("nav:"+l.getAttribute("data-nav"),AU);return true;}}}else{if(AG&&AG.handleKeydown({keyCode:x})){return true;}}}var n=AU.target.ancestor("div",true);if(v||AT||AC||AJ||(!n||n.get("id")!=="menu-move")||!strings.str_tog_use_num_accel){break;}C.mail.Controller.Folders.get(null,{success:function(Aa){var Ab=Aa,AY,Ac=[],AZ,AX;AX=Ab?Ab.length:0;for(AZ=0;AZ<AX;AZ++){if(!Ab[AZ].isSystem){Ac.push(Ab[AZ]);}}AY=x===48?"Inbox":Ac[x-49];AY=(C.Lang.isString(AY))?AY:(AY?AY.folderInfo.fid:0);if(s.fid===AY){return;}if(AY){s.handlePostAction({action:X,fid:AY},s.fid,(s.hasMsgList?AO:null),(s.hasMsgList?null:r.get(Z)));}}});return true;case 67:if(AQ){var AV=C.mail.Tabs.getActiveTab().elContent;if(AV){var AL,AH,AI="",p;var AF=AV.one(".message-header .lozengeContainer.pressed .lozenge");p=document.activeElement;if(AF){AL=AF.getAttribute("data-address");AH=AF.getAttribute("data-name");if(AH){AI=AH+" <"+AL+">";}else{AI=AL;}G.initializeCopyText();G.copyToClipboard(AI,null,p);}}}return;default:break;}if(i&&!v&&!AT){AB=function(){s.handleDefaultCase({action:i,item:0,forwardAsAttachment:Y});};w?setTimeout(AB,0):AB();return true;}return false;},handleTabSwitch:function(){var q=this,n,p,o=C.contacts.ui.ContactsView,i,Y;i=q.tab.prevTabId;if(i){n=C.mail.ui.searchTab&&(i===C.mail.ui.searchTab.get("id"));if(n){D.switchToTab(C.mail.ui.searchTab);Y=C.mail.ui.searchTab.elContent.one("#msg-list");if(Y!==null&&C.UA.safari>0){Y.addClass("toggle-to-force-repaint");setTimeout(function(){Y.removeClass("toggle-to-force-repaint");},1);}return;}p=o&&(i==o.tab.get("id"));if(p){D.switchToTab(o.tab);return;}}D.switchToTab(D.tabs[0]);},ondestroy:function(){var Y,n=this;for(Y in n.evt){C.detach(n.evt[Y]);}},createRefTab:function(w){var n="",r,Y,i,q,s="",v,t,u,o,p={fid:w.fid};if(NeoConfig.hasConvView){t=m.model.ConvStore.Conversations;o=t.getPermCidPart;Y=C.mail.ui.ConvView;p.cid=o(w.cid);s=w.subject;r=w.recipients;if(r&&r.length){n=S(V(r[r.length-1].name));}i="convpane";p.tabKey="cid";}else{v=m.model.DataStore.Messages;u=v.getPermMidPart;Y=C.mail.ui.MessagesView;p.mid=u(w.mid);if(w.header){q=w.header;s=q.subject;n=C.mail.ui.PaneUtils.getName(q.from);}i="messagepane";p.tabKey="mid";}s=s||strings["str_msg-view_tab_no_subject"];s=S(V(s));C.fire("tab:addRef",{data:p,p_label:n,s_label:s,isRemovable:true,widgetType:i,init:function(AA,x){var y,z=C.mix({msgList:0,message:w,isRemovable:true},p);y=new Y(z);AA.widget=y;C.fire("bindContentWidget",{cw:y,tab:AA});x();}});}},true);C.namespace("mail.ui");C.mail.ui.MailView=f;},"1.0.0",{requires:["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","mail-ui-pane-utils"]});


YUI.add("mail-ui-pane-utils",function(B){var N=B.mail,H=N.ui,K=B.common,J=B.common.Utils,G=J.rocketstats.stat,M=N&&N.Controller?N.Controller.Messages:{},I=J.substitute,E=J.escapeHtml,C=J.unescapeHtml,D=B.Lang.trim,L=K.persist.UserData,A=function(P){var S=P.s||"",Q=P.o||0,O=P.f,R=P.a||0;return I(S,Q,O,R,strings);};B.namespace("mail.ui").PaneUtils={getBlockedMsgMarkup:function(V,Q,R){var P=V?V.imgAttachments||[]:[],O=V.inboxservices||[],U=L.get("userUIPref.imageBlocking")==="b",S=P.length&&V.blockImages==="all",T=V&&(V.hasBlockedImages||(strings.str_cfg_tog_old_imageblock?S:((S&&!M.isCertified(O))&&!(U&&V&&V.flags&&V.flags.inAddressBook))));return T?A({s:Q.msg_blocked,o:V}):"";},getAttPhotosMarkup:function(P,V,R){var T,S=P?P.imgAttachments||[]:[],U=S.length,W=[],Q=P.blockImages=="all"&&!(L.get("userUIPref.imageBlocking")=="b"&&(P&&P.flags&&P.flags.inAddressBook))&&!strings.str_cfg_tog_show_imageblock_thumbnail;for(T=0;T<U;T++){var O=S[T];if(Q){O.blocked_images="img";}else{O.blocked_images_else=V.blocked_images_else;}if(strings.str_cfg_tog_show_imageblock_thumbnail&&!O.thumbnailurl){O.thumbnailurl=strings.str_cfg_url_imageblock_thumbnail;}W.push(A({s:V.attached_photos,o:O,f:{image:function(){return O.thumbnailurl?A({s:V.image,o:O,f:R}):"";},filename:function(){return F(O);}}}));}return W.join("");},getAttFilesMarkup:function(V,R,T){var U,P=V?V.nonImgAttachments||[]:[],O=P.length,Q=[];for(U=0;U<O;U++){var S=P[U];Q.push(A({s:R.attached_files,o:S,f:{image1:function(){return S.thumbnailurl?A({s:R.image,o:S}):"";},type:function(){return H.AttachFileType.getType(S.filename);},filename:function(){if(S.filename===".eml"){S.filename=strings.str_comp_nosubject+".eml";}return F(S);}}}));}return Q.join("");},statMissingQtd:function(O){G("conv","qtdMissing");if(NeoConfig.log_error_yapache){B.use("comms-log4js",function(){var P=B.comms.log4js.getLogger("errorLogger",1,"ajax");P.log("QTD Missing [YID:"+NeoConfig.loginId+"] [MID:"+O.mid+"] [CID:"+O.cid+"]");});}},extractQuotedText:function(R,U,S,P,a){if(R&&R.body){var O,Q,Z=[],T,d,Y,c,W=0,V,b=[];try{if(R.yqtClassId){O=B.Node.create("<div>"+R.body.display+"</div>");V=R.yivPrefixNumber||[];if(V.length>0){for(T=0;T<V.length;T++){b.push("."+V[T]+R.yqtClassId);}}Z=O.all(b.join(",")+", ."+R.yqtClassId);Z&&Z.each(function(e){Y=e.get("innerHTML");c=W?"":I(U,null,null,null,strings);c+=I(S,{quoted_text_body:Y},null,null,strings);d=B.Node.create(c);e.replace(d);W++;});R.body.display=O.get("innerHTML")||O.get("textContent")||R.body.display;}if(!P[R.mid]&&a>0&&R.header.subject.indexOf("Fw: ")){G("conv","qtdExpected");if(!R.yqtClassId||!W){this.statMissingQtd(R);}P[R.mid]=true;}}catch(X){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-paneutils:2",X,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-paneutils:2");}}},getName:function(P){var O;if(P){O=D(P.name);return E(C(O))||E(C(P.email))||"";}return"";},getAddress:function(O){if(O&&O.email){return E(C(O.email));}return"";},getMsgSub:function(O){return(O&&O.subject)?E(C(O.subject)):strings["str_msg-view_no_subject"];},getMsgSubDir:function(Q,R){var O="",P;if(Q&&Q.header&&Q.header.subjectDir){O=" dir='"+Q.header.subjectDir+"'";}return O;},getNameDir:function(O){if(NeoConfig.bidi&&O&&O.nameDir){return O.nameDir;}return"";},getDataName:function(P){var O="";if(P&&P.name!==P.email){O=E(C(D(P.name)));}return O;},createRecipientList:function(P,W,R,Q,U,O){var T=[],S=Q?Math.min(Q,P.length):P.length,V;for(V=0;V<S;V++){T.push(A({s:W,o:U&&U(P[V]),f:R,a:P[V]}));}V=P.length;return(typeof O===undefined)?T.join(","):T.join(O);},isOwnEmail:function(O){this.allAccounts=this.allAccounts||this.getAllAccountEmails();return this.allAccounts&&this.allAccounts[O];},getConvName:function(O){return O.email&&this.isOwnEmail(O.email)?strings.str_me:this.getName(O);},getAllAccountEmails:function(){var V={},W=(L.get("externalAccounts")||{}).extAccount||[],P=(L.get("aliases")||{}).alias||[],O=(L.get("disposableAddresses")||{}).deaName||[],U=W.concat(P,O),S=L.get("userSendPref"),Q,R,T=U.length;V[S.defaultID]=1;V[S.defaultFromAddress]=1;for(R=0;R<T;R++){if((Q=U[R].address)){V[Q]=1;}}return V;}};function F(O){return(O.filename?E(C(O.filename)):"");}},"1.0.0",{requires:["mail-controller-messages","common-utils","mail-persist-meta-data"]});

YUI.add("common-utils-stats",function(D){var V=D.namespace("common.Utils"),F=V.rocketstats.stat,U=(window.NeoConfig&&NeoConfig.RTFirePercentage)||0,K={},I={},O,C=function(){return O||new Date();},b={Compose:{calcValues:P,calcSpaceId:Q},Compose_inline:{},FolderView:{baseSpaceId:978500090,calcValues:T},MsgInPreview:{calcValues:W,rocketStatsExtras:N,calcSpaceId:R},MsgInTab:{calcValues:W,rocketStatsExtras:N,calcSpaceId:R},SendConfirm:{baseSpaceId:978500224,calcValues:L},UpdatesTab:{baseSpaceId:978500277},ConvListExpandCached:{rocketStatsExtras:Z},ConvListExpandNotCached:{rocketStatsExtras:G},LoadMessage:{},LoadConv:{calcValues:M,rocketStatsExtras:a},LoadMessageCard:{calcValues:M,rocketStatsExtras:a},LoadConvBatch:{calcValues:M,rocketStatsExtras:a},PreLoadMessage:{rocketStatExtras:N},Search:{calcValues:E,calcSpaceId:B},AttachmentUpload:{baseSpaceId:978500442,calcValues:A}},X=V.Stat={log:function(c,i,f,d){var h,j,Y,g="profile";if(c in b){var e=b[c];j=(e.calcValues?e.calcValues(c,i,f,d):{t_done:i});if(window.rt_Done&&(e.baseSpaceId||e.calcSpaceId)&&(NeoConfig&&NeoConfig.roundTrip)){h=e.baseSpaceId||e.calcSpaceId(c,j,f,d);X.rtBeacon(h,j,f);}Y=j.kd5?c+"_conv":c;X.rstattrace(g,Y,j.t_done);if(!K[Y]&&NeoConfig.roundTrip&&NeoConfig.roundTrip.interactiveDate){X.rstattrace(g,"TimeToFirst"+Y,d.s-NeoConfig.roundTrip.interactiveDate);}e.rocketStatsExtras&&e.rocketStatsExtras(Y,j,f,d);K[Y]=1;}}},J=V.Stopwatch=function(c){var Y=this;Y.n=c;O=Y.s=C();Y.start.apply(Y,D.Array(arguments,1));O=0;};J.get=function(e){var d=D.Array(arguments,1),c=I[e],Y;if(d.length){Y=d.shift();if(c&&Y){c.stop(Y);}c=0;if(d.shift()){c=new J(e);O=c.s;c.start.apply(c,d);O=0;}I[e]=c;}return c;};X.rtBeacon=function(e,i,d){var h,j=NeoConfig,Y=[],g,f=false;if(e&&window.rt_LogTime&&Math.random()<U){e+=j.roundTrip.spaceIdOffset;if(typeof YAHOO==="undefined"){YAHOO={};}if(typeof YAHOO.RT==="undefined"){YAHOO.RT={qsvars:{}};}rt_SetSpaceid(e);for(h in i){switch(h.charAt(0)){case"t":rt_LogTime(h,i[h],true);break;default:rt_AddVar(h,i[h]);break;}}for(var c in j.userAdLocations){f=true;break;}g=!j.IsMailPlus&&j.hasAds&&f;Y.push("hasAds:"+(g?"1":"0"));rt_AddVar("kd1",g?1:0);rt_AddVar("ks1",j.cluster);rt_AddVar("ks3",(j.expBucketId==="0"?(j.isUltThrottled*1?"NoBucket":"NoUlt"):j.expBucketId));if(j.roundTrip&&j.roundTrip.adComment&&j.roundTrip.adComment.length>0){rt_AddVar("ks4",NeoConfig.roundTrip.adComment.join("/"));j.roundTrip.adComment=[];}j.RTTimerComment&&d&&Y.push(d);rt_SetComment(Y.join(";"));rt_Done();}};X.rstattrace=function(e,Y,d){var c;V.traceMsg("[stat] (Page) "+e+" (Key) "+Y+((d!==c)?" (Value) "+d:""));F(e,Y,d);};function S(c,Y){while(c){c.d=Y-c.s;c=c.sb;c=c&&c[c.length-1];}}function H(d){var f=this,c,e="";function Y(i,g){var h=0;while(h<i.length){c=i[h++];e+=g+c.n+":"+c.d+"\n";if(c=c.sb){Y(c,g+"-");}}}Y([d],e);d.rtComment=e;e=(d.title||"")+e;}J.prototype={start:function(h){var f,g,c=this,Y=c,k=h,m=arguments,j=0,e=C();if(typeof k==="number"){j=1;}else{k=-1;}while(c.sb&&--k){Y=c;c=Y.sb;c=c[c.length-1];}for(;j<m.length;j++){f=c.sb=c.sb||[];if(g=f.length){S(Y=f[g-1],e);}Y={n:m[j],s:e};f.push(Y);}},stop:function(Y){var c=this;if(!D.Lang.isNumber(c.d)){c.n=Y||c.n;S(c,C());H(c);X.log(c.n,c.d,c.rtComment,c);}}};function W(c,n,l,g){var f=g.sb,m=-1,k=f?f.length-1:-1,j,i,o,h=0,e=0,d={t_done:n};j=((g.YCMSGGetEnd&&g.YCMSGGetBegin)?g.YCMSGGetEnd-g.YCMSGGetBegin:0);if(g.isConv){j+=((g.YCMSGGetEnd2&&g.YCMSGGetBegin2)?g.YCMSGGetEnd2-g.YCMSGGetBegin2:0);}if(j){d.t1=j;}for(;k>=0;k--){var Y=f[k].n;if(Y==="OMMessageInDOM"||Y==="MessageInDOM"){m=f[k].s;break;}}if(m>0){d.t4=n;d.t_done=m-g.s;}if(i=g.BECallTime){h+=i.curlTime?i.curlTime:0;e+=i.serverTime?i.serverTime:0;}if(o=g.BECallTime2){h+=o.curlTime?o.curlTime:0;e+=o.serverTime?o.serverTime:0;}if(h){d.t5=h;}if(e){d.t6=e;}d.kd5=(g.isConv?1:0);return d;}function T(Y,e,d,c){var f={t_done:e};if(c.getListEnd&&c.getListBegin){f.t1=c.getListEnd-c.getListBegin;}f.kd5=(NeoConfig.hasConv?1:0);return f;}function M(Y,f,e,d){var g={t_done:f},c;if(d.YCMSGGetEnd&&d.YCMSGGetBegin){g.t1=d.YCMSGGetEnd-d.YCMSGGetBegin;}c=d.BECallTime;if(c&&c.curlTime){g.t5=c.curlTime;}if(c&&c.serverTime){g.t6=c.serverTime;}return g;}function N(e,c,h,g){var d=(NeoConfig.low_bandwidth)?"_lowBW":"";var Y=g.wasCached&&(D.Lang.isUndefined(g.wasCached2)?true:g.wasCached2);var f=(Y)?"_Cached":"_Uncached";X.rstattrace("profile",e+d+f,c.t_done);if(typeof c.t1=="number"){X.rstattrace("profile",e+d+f+"_WSCallTime",c.t1);}if(typeof c.t5=="number"){X.rstattrace("profile",e+d+f+"_WSCurlTime",c.t5);}if(typeof c.t6=="number"){X.rstattrace("profile",e+d+f+"_WSServerTime",c.t6);}}function a(d,Y,g,f){var c=(NeoConfig.low_bandwidth)?"_lowBW":"";var e=(f.wasCached)?"_Cached":"_Uncached";X.rstattrace("conv",d);X.rstattrace("profile",d+c+e+"_time",Y.t_done);if(typeof Y.t1=="number"){X.rstattrace("profile",d+c+e+"_WSCallTime",Y.t1);}if(typeof Y.t5=="number"){X.rstattrace("profile",d+c+e+"_WSCurlTime",Y.t5);}if(typeof Y.t6=="number"){X.rstattrace("profile",d+c+e+"_WSServerTime",Y.t6);}if(f.wasCached){X.rstattrace("conv",d+"_Cached");}}function Z(c,Y,e,d){var f="LoadConvExpando";X.rstattrace("conv",c);X.rstattrace("conv",c+"_Cached");}function G(c,Y,e,d){X.rstattrace("conv","LoadConvExpando");}function R(f,d,i,h){var c=NeoConfig,Y=(c.low_bandwidth?"low":(NeoConfig.isSSL?"ssl":"non-ssl")),g=h.wasCached&&(D.Lang.isUndefined(h.wasCached2)?true:h.wasCached2)?1:0,e={"ssl":{MsgInPreview:[978500342,978500341],MsgInTab:[978500348,978500347]},"non-ssl":{MsgInPreview:[978500340,978500339],MsgInTab:[978500346,978500345]},"low":{MsgInPreview:[978500338,978500337],MsgInTab:[978500344,978500343]}};return e[Y][f][g];}function A(Y,g,f,e){var h={t_done:g},d=e.attType,c="0";if(d==="form"){c="1";}else{if(d==="flash"){c="2";}else{if(d==="html5"){c="3";}else{if(d==="flashv2"){c="4";}else{if(d==="formv2"){c="5";}}}}}h.ks2=c;if(!D.Lang.isUndefined(e.attSize)){h.kd2=e.attSize+"";}return h;}function L(c,g,f,e){var d,j,Y=0,h={t_done:g};if(e.sb){for(d=0;d<e.sb.length;d++){j=e.sb[d];switch(j.n){case"moduleLoad":h.t1=j.d;
break;case"msgSend":h.t2=j.d;break;}}}h.kd4=e.action&&e.action==="retry"?"1":e.action&&e.action==="captcha"?"2":"0";if(!D.Lang.isUndefined(e.bodySize)){h.kd2=e.bodySize+"";}if(!D.Lang.isUndefined(e.attachCount)){h.kd3=e.attachCount+"";}return h;}function P(Y,f,e,d){var c,h,g={t_done:f};if(d.sb){for(c=0;c<d.sb.length;c++){h=d.sb[c];switch(h.n){case"moduleLoad":g.t1=h.d;break;case"initView":g.t2=h.d;break;}}}if(d.CMGStart&&d.CMGEnd){g.t3=d.CMGEnd-d.CMGStart;}g.kd4="0";if(!D.Lang.isUndefined(d.CMGSize)){g.kd2=d.CMGSize+"";}if(!D.Lang.isUndefined(d.wasCached)){g.kd3=(d.wasCached?"1":"0");}return g;}function Q(e,c,g,f){var d={"reply_sender":978500080,"reply_all":978500245,"forward":978500078,"edit":978500266},Y=d[f.action];return(Y?Y:978500077);}function E(Y,g,f,e){var d={},h={t_done:g};function c(l){var j,k;if(l.sb){for(j=0;j<l.sb.length;j++){k=l.sb[j];d[k.n]=k.d;c(k);}}}c(e);h.t1=d.start+d.serverRequest;h.t2=d.renderSearch;if(d.renderSearchGroups){h.t3=d.renderSearchGroups;}h.kd2=e.matches;h.ks2=e.source;return h;}function B(d,Y,f,e){var c={"results":978500252,"refinement":978500222};return c[e.action];}},"1.0.0",{requires:["rocket-stats"]});

YUI.add("common-utils",function(G){G.namespace("common.Utils");var B=G.common.Utils,F=G.Object,E=G.Lang,A=E.trim,H=/{{([^{}]*)}}/g;G.mix(B,{NAME:"Utils",isEmpty:function(J){var I;if(J){for(I in J){return false;}}return true;},size:function(K){var I,J=0;for(I in K){J++;}return J;},congruent:function(L,K,J,O){if(!G.Lang.isValue(K)){return G.Lang.isValue(L)?false:true;}var N=((L===K)||(J||(B.size(L)===B.size(K)))),I,M;if(E.isString(L)){N=(L===K);}if(N&&(L!==K)){F.some(L,function(P,Q){M=K[Q];N=(O&&!!O[Q])||(E.isObject(P)?B.congruent(P,M,J):(P===M));return !N;},null,true);}return N;},diff:function(L,K,J){var I,M=J?L:B.merge({},L);if(K){F.each(M,function(O,N){I=E.isObject(O)?B.diff(O,K[N],true):(O!==K[N]);if(!I){delete M[N];}},null,true);}return(!B.isEmpty(M)||(L&&!K))&&M;},wcopy:function(K,I){var M=K&&(K.length||(K.length===0))&&Object.prototype.toString.call(K)==="[object Array]",J,L=K?(M?G.clone(K):G.Object(K)):K;I=I||{};if(!M){for(J in L){if((typeof L[J]==="object")&&L[J]){L[J]=I[J]?K[J]:B.wcopy(L[J]);}}}return L;},merge:function(O,N,M,K){var L,J,I;if(E.isObject(N)){O=(E.isObject(O)&&O)||{};for(L in N){if(K&&!N.hasOwnProperty(L)){continue;}if(E.isArray(N[L])){J=N[L];if(!O[L]||M){O[L]=[];}for(I=0;I<J.length;I++){O[L].push(B.merge(O[L][I],J[I],M,K));}}else{if(E.isObject(N[L])){if(!O[L]){O[L]={};}O[L]=B.merge(O[L],N[L],M,K);}else{if((M&&(O[L]!==N[L]))||E.isUndefined(O[L])){O[L]=N[L];}}}}}else{O=N;}return O;},assert:function(J,K,I,L){if(!J){K=K||"assertfail";G.use("common-utils-error",function(){var M=(L&&L())||"";B.error.report(K+" "+M,1,1,1);});}},report:function(I){if(NeoConfig.showErrors){G.use("common-utils-error",function(){B.error.report(I,1,1,1);});}},log:function(J,I,K){if(J){if(G.Lang.isString(J)){J={m:J};}G.fire("MailLog",J,I,K);}},substitute:function(O,N,K,J,I,M,L){if(typeof O!=="string"){return;}if(L){O=L.str||O;N=L.obj||N;K=L.formatters||K;J=L.args||J;I=L.strings||I;M=L.templates||M;}return O.replace(H,function(Q,P){var S,R,T=B.substitute;if(K&&(S=(L&&L.formatters)?L.formatters[P]:K[P])){return(S(N,J,L))||"";}else{if(N&&P in N){R=N[P];return typeof R==="string"&&R.match(H)?T(R,N,K,J,I,M,L):R;}else{if(I&&P in I){R=I[P];return R.match(H)?T(R,N,K,J,I,M,L):R;}else{if(M&&P in M){return T(M[P].base||M[P],N,K,J,I,M,L);}else{return"";}}}}});},ezSub:function(K,J,I){if(typeof K!=="string"){return;}return K.replace(H,function(M,L){var N,O=B.ezSub;if(J&&L in J){N=J[L];if(typeof N==="function"){return N(J);}else{if(typeof N==="boolean"&&I){return N?(I[L].match(H)?O(I[L],J,I):I[L]):"";}else{if(typeof N==="number"&&I){return N>0?(I[L].match(H)?O(I[L],J,I):I[L]):"";}else{if(typeof N==="string"){return N.match(H)?O(N,J,I):N;}}}}return"";}else{if(strings&&L in strings){N=strings[L];return N.match(H)?O(N,J,I):N;}else{return"";}}});},regexpEscape:function(I){if(I==null){return null;}I=""+I;return I.replace(/([\^\/.*+?|()[\]{}\\=!:$])/g,"\\$1");},escapeHtml:function(J,I){if(J==null){return null;}J=""+J;J=J.replace(/&/g,"&amp;");J=J.replace(/</g,"&lt;");J=J.replace(/>/g,"&gt;");J=J.replace(/\"/g,"&quot;");J=J.replace(/\'/g,"&#39;");J=J.replace(/\\/g,"&#92;");J=J.replace(/{/g,"&#123;");J=J.replace(/&(?:amp;)+/g,"&amp;");if(I){J=J.replace(/&amp;#([A-Za-z0-9]+);/g,"&#$1;");}return J;},unescapeHtml:function(I){if(I==null){return null;}I=""+I;I=I.replace(/&amp;/g,"&");I=I.replace(/&lt;/g,"<");I=I.replace(/&gt;/g,">");I=I.replace(/&quot;/g,'"');I=I.replace(/&#39;/g,"'");I=I.replace(/&#92;/g,"\\");I=I.replace(/&#123;/g,"{");return I;},escapeStringField:function(I){return B.escapeHtml(B.unescapeHtml(I));},escapeEmailObject:function(I){return{email:B.escapeStringField(I.email),name:B.escapeStringField(I.name)};},escapeEmailObjectArray:function(L){var I=L.length,J=[],K=0;for(;K<I;K++){J.push(B.escapeEmailObject(L[K]));}return J;},remove:function(I){if(I){I.empty().remove(true);I.remove(true);}},removeHtml:function(I){if(I==null){return null;}I=""+I;I=I.replace(/<[^>]*>/g,"");return I;},isProcessDefaultEnabled:function(I){return(I.target.getAttribute("process-default")==="true");},getDataAction:function(M){var L=M.target,K=M.currentTarget,I=L.ancestor(function(N){return N.getAttribute("data-action")||N===K;},true),J=I?I.getAttribute("data-action"):0;return{node:I,action:J};},dateFormatter:function(J,I){if(Neo&&Neo.dateFormatter){return Neo.dateFormatter(J,I);}return"";},triggerDarla:function(I,J){!NeoConfig.noDarla&&G.use("mail-ui-darla",function(L){var K=L.mail.ui.darla;K&&K.trigger(I,J);});},loadDarlaAndExecute:function(I,J){var K=NeoConfig.useTictacAds?"tictac-ads-darla":"mail-ui-darla";if(J){G.use(K,function(){I(G);G.use("mail-track");});}else{G.use(K,"mail-track",function(){I(G);});}},parseQueryString:function(I){var J,K={};I=I||window.location.search.replace(/^\?/,"");if(I&&I.length>1){J=I.split("?");K=G.QueryString.parse(J.length>1?J[1]:J[0]);}return K;},sanitizeString:function(J){var I=/[\u0000-\u001f\u007f]/g;return typeof J==="string"?A(J.replace(I,"")):J;},mergeQueryString:function(J,K){var I;if(G.Lang.isObject(K)){I=J.replace(/\?.*$/,"");K=G.merge(B.parseQueryString(J),K);J=I+"?"+G.QueryString.stringify(K);}return J;},setSelect:function(J,I){if(typeof J.addClass!=="undefined"){J=[J];}G.Array.each(J,function(K){var L=G.Node.getDOMNode(K);if(typeof L.onselectstart==="object"){L.onselectstart=function(){if((window.event.srcElement||window.event.target).tagName==="INPUT"){return true;}else{return I;}};}else{if(typeof L.style.MozUserSelect!=="undefined"){L.style.MozUserSelect=I?"inherit":"-moz-none";}else{L.onmousedown=function(){return I;};}}});},onDemand:function(I,J){return function(){var L=this,K=arguments;G.use(J,function(){L[I].apply(L,K);});};},escapeRegexp:function(J){var I=/([\[|\]|\(|\)|])/g;return J.replace(I,"\\$1");},simulateContextMenu:function(M,J){var K,I=2,L,N;if(!M){return false;}M=(M._node)?M._node:M;if(M.ownerDocument.createEvent){L=G.one(M);N=L.getXY();if(J!==false&&(N[1]-G.DOM.docScrollY())<0){L.scrollIntoView();N=L.getXY();}N[1]-=G.DOM.docScrollY();K=M.ownerDocument.createEvent("MouseEvents");
K.initMouseEvent("contextmenu",true,true,M.ownerDocument.defaultView,1,0,0,N[0],N[1],false,false,false,false,I,null);return !M.dispatchEvent(K);}else{if(M.ownerDocument.createEventObject){K=M.ownerDocument.createEventObject();K.button=I;return M.fireEvent("oncontextmenu",K);}}return false;},isBrowserCORSCapable:function(){return(("withCredentials" in new XMLHttpRequest())||typeof XDomainRequest!=="undefined");},convertToInputFieldText:function(J){var I=G.Node.create("<input></input>");I.set("value",J);return I.get("value");},replaceText:function(I,J){if(I){I.setContent(I.getContent().replace(I.get("text"),J));}},makeHttpsUrl:function(I){if(I&&typeof I==="string"){I=I.replace(/^http:/,"https:");I=I.replace(/:80\//,":443/");}return I;},debounce:function(J,L,I){var K;return function(){var P=this,O=arguments;var N=function(){K=null;J.apply(P,O);};var M=I&&!K;clearTimeout(K);K=setTimeout(N,L);if(M){J.apply(P,O);}};},parseMultiPartResponse:function(T,I){var L=I?A(I):"",U="[-]*"+L+"[-]*",K,X,N,R,P,O,M,S,W,V,J,Q=[];K=new RegExp(U,"igm");X=T.split(K);for(P=0;P<X.length;P++){N=A(X[P]);if(N!==""&&N!=="--"){N=this._parseMultiPartBlockHeader(N);if(/StatusResponse/.test(N)){S=G.JSON.parse(N);if(S.StatusResponse){M=S.StatusResponse.failedRequests.length;if(M>0){for(O=0;O<M;O++){J=S.StatusResponse.failedRequests[O].id;V=this._getMethodName(J);R='{ "id" : "'+J+'", "key" : "'+V+'Response", "'+V+'Response" : '+G.JSON.stringify(S.StatusResponse.failedRequests[O])+', "success": false, "not_requested": true}';Q.push(R);}}}else{Q.push(N);}}else{Q.push(N);}}}W="["+Q.join(",")+"]";return W;},_parseMultiPartBlockHeader:function(T){var S,M,N,I,O,Q,K,J,R,P=/^([\-\_\d\w.]+\s*?:\s*?(\S+))/igm,L=/^\{/igm;if(!T){return;}S=T.split("\n");for(N=0;N<S.length;N++){M=A(S[N]);if(M===""){continue;}else{if((O=M.match(P))){Q=O[0].split(":");if(Q[0]==="Content-RequestId"){I=A(Q[1]);}}else{if(M.match(L)){K=G.JSON.parse(M);R=this._getMethodName(I);if(K&&!K.error){J='{ "id" : "'+I+'", "key" : "'+R+'Response", "'+R+'Response" : '+M+', "success": true}';}else{J='{ "id" : "'+I+'", "key" : "'+R+'Response", "ErrorResponse" : '+G.JSON.stringify(K.error)+', "success": false}';}}}}}return J;},_getMethodName:function(J){var I;if(!J){return;}if(J&&(J.indexOf("LMT_")>=0||J==="listmessagesinthread")){I="ListMessagesInThread";}else{if(J&&(J.indexOf("GDM_")>=0||J==="getdisplaymessage")){I="GetDisplayMessage";}else{if(J&&(J==="getcids")){I="GetCids";}else{I=J;}}}return I;},isSSL:function(){return(window.location.protocol==="https:");},rand:function(I){return Math.floor(Math.random()*I);}});if(!Function.prototype.bind){Function.prototype.bind=function(I){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var M=Array.prototype.slice.call(arguments,1),L=this,J=function(){},K=function(){return L.apply(this instanceof J&&I?this:I,M.concat(Array.prototype.slice.call(arguments)));};J.prototype=this.prototype;K.prototype=new J();return K;};}if(window.hasOwnProperty&&window.hasOwnProperty("getComputedStyle")){var D=window.getComputedStyle,C=window.Window||Object.getPrototypeOf(window);delete window.getComputedStyle;C.getComputedStyle=function(I,J){return D.call(this||window,I,J);};}},"1.0.0",{requires:["querystring-parse-simple","querystring-stringify-simple","launch-utils"]});

YUI.add("common-utils-apihook",function(D){var C=D.Lang,B=D.common.Utils,A=B.rocketstats;B.ApiHook=function(F){var E={};F.hook=function(K,H,G){var J,I;G=G||10;if(!H){for(I in K){F.hook(I,K[I],G);}}else{B.assert(K&&H);B.assert(C.isObject(H));B.assert(!C.isArray(H));J=E[K]=E[K]||[];J=J[G]=J[G]||[];H.hId={o:G,i:J.push(H)-1};return H.hId;}};F.unhook=function(J,L){var H,G,I,K;if(L){B.assert(J&&(L||L===0));B.assert(C.isString(J)&&C.isObject(L)&&C.isNumber(L.o)&&C.isNumber(L.i));B.assert(E[J]);B.assert(E[J][L.o][L.i].hId==L);E[J][L.o][L.i]=0;}else{for(H in E){I=E[H];for(G in I){K=I[G];for(L in K){if(K[L]==J[H]){K[L]=0;}}}}}};return function(J,I,M,S,U){var O,T,Q,P=0,L=0,N,R=U&&U.notify||function(){},V=E[J]||[],K=function(){T=2;return 1;},G={abort:K};B.assert(C.isFunction(R));function H(){function X(Z,Y){if(C.isString(Z)){I=Z;P=L=0;if(Y){J=Y;V=E[J]||[];}Q=V[0];}else{T=T||1;if(C.isFunction(Z)){G.abort=function(){var a=Z();T=2;return a===undefined?1:a;};R("async",J,S);return function(b,e,a){if(T==1){R("resume",J,S);M=b||M;G.abort=K;T=0;if(e){I=e;L=0;P=a||0;}H();}return T==1;};}if(Z){if(C.isObject(Z)){G.abort();G.abort=function(){return Z.abort();};}else{T=0;M=Y||M;H();return;}}T=2;}}while(P<V.length){Q=V[P];while(Q&&!T&&(L<Q.length)){if(O=Q[L++]){if(!C.isFunction(O)){O=O[I];}try{M=(O&&O(M,S,X,I))||M;}catch(W){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-apihook:1",W,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-apihook:1");A.stat("hookutil","hookfailure");N=["HookFailure",J,I,P,L-1].join("_");A.stat("hookutil",N);if(NeoConfig.log_error_yapache==1){D.use("common-utils-error",function(){B.error.report(W,"apihook:"+N,1,1,1);});}}}}if(T){break;}P++;L=0;}if(!T){T=2;G.abort=function(){};if(O=U){if(!C.isFunction(O)){O=O[I];}try{O&&O(M,U,I,S);}catch(W){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-apihook:2",W,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-apihook:2");N="CbkFailure_"+J+"_"+I;A.stat("hookutil","CbkFailure_"+J+"_"+I);if(NeoConfig.log_error_yapache==1){D.use("common-utils-error",function(){B.error.report(W,"apihook:"+N,1,1,1);});}}}}return G;}return H();};};},"1.0.0",{requires:["common-utils","rocket-stats"]});

YUI.add("common-user-session",function(E){var C=E.common,B=C.persist,D,A;C.UserSession={getState:function(){var G=B.getCookie("Y"),F=G&&G.get("l");return{user:F,newuser:F&&F!==A,loggedout:!F};},update:function(){var F=this.getState();A=F.user;},same:function(){var F=this.getState();return !(F.newuser||F.loggedout);}};D=NeoConfig.initCookieData||C.UserSession.getState();A=D.user;},"1.0.0",{requires:["common-persist-cookie-data","common-utils"]});

YUI.add("mail-controller-parkqueue",function(A){A.namespace("mail");var B=function(){var C=this;C.parkQueue=[];C.parkIt=0;C.parkTimer=0;};A.mix(B.prototype,{park:function(C,G){var I=this;try{if(C.batch){if(C.batchOps.parkMethod){if((C.batchOps.resumeCtx)&&(C.batchOps.resumeCtx.method!==C.method)){C.batchOps.resumeCtx.resumeFn.push({ctx:C,resumeFn:G(F)});}return;}else{C.batchOps.parkMethod=C.method;}}if(I.parkIt){C.parkIdx=I.parkQueue.push(C)-1;if(C.batch){C.batchOps.resumeCtx={method:C.method,resumeFn:[]};}C.resume=G(H);}else{if(I.parkTimer){clearTimeout(I.parkTimer);}I.parkTimer=setTimeout(D,30000);}C.unparkIt=1;I.parkIt=1;}catch(E){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-parkqueue:1",E,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-parkqueue:1");}function H(){if(C.parkIdx===undefined){return;}I.parkQueue[C.parkIdx]=0;var J=I.parkQueue.length;while(J--){if(I.parkQueue[J]){return;}}I.parkIt=0;}function F(){return;}function D(){I.parkTimer=0;if(I.parkIt){I.parkIt=0;I.doUnpark();}}},unpark:function(C,E){var D=this;if(E!="pre"&&C.unparkIt){C.unparkIt=0;setTimeout(function(){D.doUnpark.apply(D,arguments);},0);}},doUnpark:function(){var F=this;try{if(!C(1)){C();}}catch(D){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-parkqueue:2",D,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-parkqueue:2");}function E(G){return(G.parms.msg||G.parms.msgs||!G.parms.prefetch);}function C(M){var I,G,L,J,H,N=[],K=F.parkQueue.length;while(K--){if((I=F.parkQueue[K])&&(!M||E(I))){F.parkQueue[K]=0;if(M){while(K--){if((G=F.parkQueue[K])&&!E(G)){F.parkQueue[K]=0;}}}F.parkIt=0;if(I.batchOps&&I.batchOps.resumeCtx&&I.batchOps.resumeCtx.resumeFn.length>0){N=A.clone(I.batchOps.resumeCtx.resumeFn);I.batchOps.resumeCtx=null;}I.resume(I.parms,"pre");for(J=0;J<N.length;J++){N[J].resumeFn(N[J].ctx.params,"pre");}return 1;}}if(!M){F.parkIt=0;F.parkQueue.length=0;}}}});A.mail.ParkQueue=new B();});

YUI.add("mail-controller-base",function(C){var Q,H,V,P,K,e={},m=C.common.net.Error,S=C.common.Utils,d=S.rocketstats.stat,o=C.mail,g=o.Controller={},b={},I=0,F=[],j={fixParms:2,cacheCheck:4,dupcheck:12,optimistic:14,gdmDelay:16,delay:18,transport:20,deBatch:2,unpark:4,dupcbk:6,cache:8,resume:10,envelope:12,usercbk:30},M={notfound:1,moved:2,request:3,failed:4,baddata:5,wserror:6,_reservedIdx:20},T=NeoConfig.parallelRequests,l={"ListFolderThreads":["MoveThreads"]};function W(q,Y,p){return{reason:Y,data:q,fault:p,code:p&&p.code};}function L(q){var p=l[q],Y;if(p){for(Y=0;Y<p.length;Y++){if(b[p[Y]]&&b[p[Y]]>0){return true;}}}return false;}function G(p,Y){if(!T){H=p;C.fire("BaseController:pending",p,Y,F);}}function B(z,q,Y,r,x,w,u){var v,s,p=z.bulkOps,y={controller:z,api:q,method:Y,reason:u,cfg:p&&p[q],custom:{},start:0,size:0,batchOps:r,batch:r.batch,getBatch:function(){y.batch=1;return O(r);},newApi:t,opNum:I++,deBatch:1};if(e[z.ns].entity){y.batchOps.entity=e[z.ns].entity;}function t(AC,AE,AB,AD){var AA;y.api=AC;y.method=AE;y.cfg=p&&p[AC];if(AD){y.reason=AD;}if(AE==="FlagMessages"||AE==="FlagThreads"){v=AB.setFlags;if(v.spam||v.ham||v.sendercompromised||v.phished||v.notmymail){y.cfg=p.spam;}}y.parms=AB;if(typeof AB==="object"){s=y.origParms={};for(AA in AB){s[AA]=AB[AA];}s=y.modParms={};for(AA in AB){s[AA]=AB[AA];}}else{y.origParms=y.modParms=AB;}}if(!u){y.reason=q;x=x||{};if(!w&&(x.success||x.failure)){w=x;x={};}w=w||{};}y.cbk=w;if(!r.cbk){w=r.cbk=C.Object(w);w.success=w.failure=0;}t(q,Y,x);y.batchIdx=r.push(y)-1;r.count++;return y;}function A(r,u,p,s,Y,t){if(!p){p=[];p.count=0;p.waitCnt=0;}var q=B(this,r,u,p,s,Y,t);q.abort=e[this.ns].ch(r,"pre",q.parms,q,q.cbk);return q.abort;}function c(q,p,r,s){if(p.deBatch&&(s!=="pre")){var Y=p.batchOps;p.deBatch=0;Y[p.batchIdx]=0;Y.count--;if(typeof p.waitIdx!=="undefined"){F[p.waitIdx]=0;Y.waitCnt--;}if(!H){f("deBatchHook");}}}function J(r,q,u,v){if(q.batch&&(v!=="pre")){var s,p=q.batchOps,Y=p.cbk,t=p.response.result.response[q.batchIdx]={};t[q.method+"Response"]=r;p.envCnt++;if(p.envCnt===p.length){if(Y){s=Y.success;if(s){s(t);}}}}}function D(x,z,t){var y,v=0,q=z.batchOps,Y=z.method,u=e[z.controller.ns],w=u.noDelay,p=u.isdup,s=function(){F[z.waitIdx]=0;q[z.batchIdx]=0;q.waitCnt--;q.count--;},r=function(){y.dups[z.dupIdx]=0;};if(p&&(p=p[Y])){while(v<F.length){if((y=F[v++])&&(y.method===Y)&&p(y.parms,x,y,z,t)){c(x,z);y.dups=y.dups||[];z.dupIdx=y.dups.push(z)-1;z.resume=t(r);return;}}}if(!q.batch){q.ready=1;}q.waitCnt++;if(q.batch||!w||!w[z.api]){z.waitIdx=F.push(z)-1;if(H||!q.ready||(q.waitCnt!==q.count)){z.resume=t(s);z.delayed=1;}else{N();G(1,"DelayHook");K=z;v=0;while(v<q.length){if((z=q[v++])&&z.delayed){z.delayed=0;z.resume();}}}}C.fire("BaseController:delayHook",z,H);}function i(){if(V){clearTimeout(V);V=0;}}function N(){i();V=setTimeout(function(){var Y=K?K.method:"Unknown";d("controller","ForceResume_"+Y);f("resetForceResumeTimer");P=Y;},NeoConfig.controllerForceResume||30000);P=0;}function f(s){C.fire("MailLog",{m:"Resume delayed requests",caller:s});if(P){d("controller","ForceResumeWrong_"+P);}N();var Y,q,u,t=0,r=0,p=F.length;while(t<p){q=F[t++];if(q){u=1;Y=q.batchOps;if(Y.ready&&(Y.waitCnt===Y.count)){r=Y.length;while(r){q=Y[--r];if(q){K=q;F[q.waitIdx]=0;q.delayed=0;if(!q.resume()){Y[q.batchIdx]=0;Y.waitCnt--;Y.count--;}}}if(Y.count!==0){if(!Y.readonly){G(1,"resumeDelayed");return;}}}}}if(!u){F.length=0;}G(0,"resumeDelayed");K=0;i();}function R(r,p,t){var q=0,Y=p.batchOps,u=function(){return s();},s=function(){while(q<Y.length){p=Y[q++];if(p){F[p.waitIdx]=0;}}f("transportHook");};p.resume=t(u);p.parms=r;p.deBatch=0;if(L(p.method)&&T){p.blockingRequest=1;}if(!--Y.waitCnt){s=X(Y,Y.cbk);}}function n(s,p,r,t){var q,Y=p.dups;if(Y){while(Y.length){q=Y.shift();if(q){q.resume(s,t);}}}}function U(q,s){var p,Y=q.cfg,r=q.parms,t=r[s];if(Y&&t&&(q.count=p=t.length)){q.time=p*(q.cost=(1000/Y.bs));return q.time;}}function Z(Y,v){var t,y,q,x,s=0,w=0,p=new Date(),r=p-v.bst,u=p-v.st;if(r){v.bst=p;w=800/r-0.8;v.ie+=r-1000;w-=0.5*v.ie/u;if(v.la){q=0.5*w*w*(1+1/v.la);q=q<-0.5?-0.5:q>0.5?0.5:q;w+=q;}v.la=w;while(Y[s]){x=Y[s++];t=x.cfg;if(t){y=t.bs;y+=y*w;if(t.min>y){y=t.min;}if(t.max<y){y=t.max;}t.bs=y;}}}}function h(u,Y,p){try{var y,x,w,q=p.body.result,s=(p.responseHeaders&&p.responseHeaders["X-Server-Chain"])||"",t=0,r;w=a(p);while(Y[t]){y=Y[t];y.cnd="success";x=q;if(u){if(NeoConfig.hasConvV3&&p.multipart){for(r=0;r<q.response.length;r++){if((y.origParms.chain&&q.response[r].id===y.origParms.chain.id)||(!y.origParms.chain&&q.response[r].hasOwnProperty(y.method+"Response"))){x=q.response[r];if(x.success||x.not_requested){x=x[y.method+"Response"];}else{x=x.ErrorResponse;y.cnd="failure";if(y.bulk){return x;}}break;}}}else{x=q.response[t];if(x.success){x=x[y.method+"Response"];}else{x=x.ErrorResponse;y.cnd="failure";if(y.bulk){return x;}}}}t++;y.start+=y.size;if(y.cfg&&y.resp&&y.resp.mid&&x.mid){x.mid=y.resp.mid.concat(x.mid);}y.resp=x;C.mix(y.resp,{callPerf:w});if(NeoConfig.sessionTracer){C.mail.model.DataStore.Sessions.addResponse({"method":y.method,"hostname":s,"data":E(y.cnd,y.method,x)});}C.fire("MailLog",{"m":"Response","method":y.method,"hostname":s,"data":E(y.cnd,y.method,y.resp)});if((NeoConfig.log_error_yapache==1)&&(y.method==="GetDisplayMessage")){C.mix(y.resp,{allHeadersText:p.allHeadersText||"",request:p.request||"",responseText:p.responseText||""});}}}catch(v){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-base:1",v,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-base:1");}}function E(s,u,Y){var q,p,t,r;if(s==="failure"){return Y;}if(u==="ListFolders"||u==="ListFolderThreads"){return"<filtered>";}if(u==="GetDisplayMessage"){if(!Y){return"";}p=Y.message[0]?Y.message[0].mid:"";r=Y.folder&&Y.folder.folderInfo?Y.folder.folderInfo.fid:"";q={"mid":p,"fid":r,"perf":Y.callPerf};return q;}if(u==="ListMessagesInThread"){if(!Y){return"";}t=Y.conversation?Y.conversation.cid:"";
r=Y.folder&&Y.folder.folderInfo?Y.folder.folderInfo.fid:"";q={"cid":t,"fid":r,"perf":Y.callPerf};return q;}return Y;}function a(q){var Y={},p;if(q.curlTime){Y.curlTime=q.curlTime;}if(q.getResponseHeader&&(p=parseInt(q.getResponseHeader("X-Response-Time"),10)||parseInt(q.getResponseHeader("X-Server-Response-Time"),10))){Y.serverTime=p;}return Y;}function X(q,AT){var AQ,AN,AK,AU,AS,AB,AX,z,AA,AH,AO,r,AL,t,AR,AD,AV,AJ,s,AI,x,w,v,AF,y,AM=1,AC=0,AE,Y,u=C.Object(AT||{}),AP,AG=(q.entity)?q.entity:"mid";function AW(){AQ=AX=AB=AS=0;AH=[];AO=[];while(AQ<q.length){AN=q[AQ++];if(AN){if(z&&AN.size){z.processed+=AN.size;}if(AN.complete){F[AN.waitIdx]=0;q[AN.batchIdx]=0;AN.resume(AN.resp,AN.cnd);b[AN.method]--;}else{if(U(AN,AG)){AS+=AN.cost;AB+=AN.time;AX+=AN.count;}b[AN.method]=b[AN.method]||0;b[AN.method]++;AH.push(AN);}}}if(AS){(AC=(1000/AS)|0);}if((y=q[0])&&(y=y.cfg)&&y.fixed){AC=y.fixed;if(q[0].parms[AG].length<AC*2.5){AM=0;}}if(!AA){AA=1;if(AB<2000){AC*=9;}else{if(AM){AA={ie:0,la:0,bn:0};AA.bst=AA.st=new Date();z={processed:0,total:AX};}}}if(z){z.timeleft=AB;}AF=0;AQ=0;AU=[];Y=[];while((AN=AH[AQ++])&&(AN.cfg||!AF)){AE=AN.parms.chain;AL=AE||{};AL[r=AN.method]=AD={};AJ=AN.parms;delete AJ.chain;for(var p in AJ){if(AJ.hasOwnProperty(p)){AD[p]=AJ[p];}}if(AN.blockingRequest){AP=1;}AU.push(AL);AN.cbk=AN.cbk||{};AN.cbk.method=AN.cbk.method||r;Y.push(AN.cbk);AO.push(AN);if(AN.cfg){AN.size=AC;v=t=AN.start;t+=AC;AD[AG]=AD[AG].slice(v,t);if(AJ[AG].length>t){AN.bulk=AF=1;continue;}}AN.complete=1;}w=AU.length;if(w>1){u.batchopcbk=Y;AI=true;}if(!AV){try{if(z&&AT){AR=AT.progress;if(AR){AR(z);}}}catch(AY){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-base:2",AY,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-base:2");}if(w){AK=o.net.Transport.request(AI?(x?"BatchExecuteGDM":"BatchExecute"):r,AI?{call:AU}:AD,u,true,AP);}}if(AV||!w){f("transport");}}u.success=function(p){N();if(p){C.fire("util:ymstats",{"name":"webservice_latency","unit":"ms","type":"duration","dataum":p.curlTime,"tags":{"api":r}});}Z(AO,AA);h(AI,AO,p);AW();};u.failure=function(p){if(p.body&&p.body.result){h(AI,AO,p);}s(p,"failure");};AW();s=function(AY,p){if(!AV){AY=AY||{fault:"aborted"};AV=true;AQ=0;while(AQ<q.length){AN=q[AQ++];if(AN){F[AN.waitIdx]=0;AN.complete=1;AN.cnd=p||"aborted";AN.resp=W(AY,M.failed,AY.fault);}}if(p!=="aborted"){AW();}if(AK){AK.abort();}f("abort");}};return s;}g.extend=function(r,p){var q,t,s,Y=g[r];if(!Y){Y=g[r]=C.clone(Q);Y.ns=r;e[r]={};e[r].ch=S.ApiHook(Y);}p=p||{};p.ch=e[r].ch;p.order=j;C.mix(e[r],p,0,0,0,1);t=p&&p.passthru;if(t){for(q in t){Y[q]=C.bind(A,Y,q,t[q],0);Y.hook(q,{pre:D},j.delay);Y.hook(q,{pre:R},j.transport);Y.hook(q,n,1);Y.hook(q,c,j.deBatch);Y.hook(q,J,j.envelope);}}s=p&&p.batchable;if(s){for(q in s){if(!t[q]){Y.hook(q,{pre:D},j.delay);Y.hook(q,{pre:R},j.transport);Y.hook(q,c,j.deBatch);Y.hook(q,J,j.envelope);}}}return Y;};function O(s){var p=s.intf;if(p){return p;}var r,t,q,Y;p=s.intf={execute:function(u){s.ready=1;s.cbk=u;C.fire("BaseController:execute",s,H,F);if(!H){f("makeBatch");}return{abort:function(){var v=0;while(v<s.length){Y=s[v++];if(Y){Y.abort();}}}};},setAsReadOp:function(u){s.readonly=u||false;}};s.envCnt=0;s.response={error:null,result:{response:[]}};for(r in e){t=e[r].batchable;if(t){p[r]=C.Object(p);p[r].ns=r;p[r].bulkOps=g[r].bulkOps;for(q in t){p[r][q]=C.bind(A,p[r],q,t[q],s);}}}s.batch=1;s.count=s.length;s.waitCnt=0;return p;}g.batch=function(){return O([]);};Q={Error:M,abort:function(Y){if(Y){Y.abort();}},_error:W};g.hasDependentRequest=function(Y){return L(Y);};function k(v,w,u){var t,p=null,Y,s;function q(){var r;if(u.status===500||u.status===400){t=u.fault.code;if(NeoConfig.hasConvV3&&!u.body){u.body=C.JSON.parse(u.responseText);t=u.body.code;s=u.body.message;}if(/SessionIdReissue/.test(t)||/Reissuing session ID/.test(s)){p=402;}else{if(/Credentials/.test(t)||/Credentials/.test(s)){p=401;r={stat:t+"_"+Y.method};}}}v.callDefault(p,r,1);}if((Y=u.callback)&&Y.service==="mail"){C.use("mail-error",function(r){if(o.Error){o.Error.handle(v,w,u);}else{q();}});return v.isdone()||v.async(q);}}m.onError(k);},"1.0.0",{requires:["mail-net-transport","common-net-error-base","common-utils","common-utils-apihook","rocket-stats"]});

YUI.add("mail-controller-messages",function(E){var AB,AG=E.mail,J=AG.model.DataStore,D=J.Messages,R=E.common.Utils,y=R.rocketstats.stat,o=R.ymmastats,A=E.Lang,W=AG.Controller,s=AG.ParkQueue,L=D.getPermMidPart,X=D.getParam,G=NeoConfig.truncateAt||50000,F={},U,AE={"Neighbors":0},q=0,V=0,t=0,h=0,j=0,T=NeoConfig.msgCacheInterval||30000,AA=R.parseQueryString()||{},p=function(){return new Date().getTime();},c=p(),l=NeoConfig.hasConvV3?"$(mid)":"_chainedbatch",n={passthru:{send:"SendMessage",get:"GetDisplayMessage",getMulti:"GetDisplayMessage",list:"ListMessages",search:"SearchMessages",save:"SaveMessage",scan:"VirusScanAttachments"},isdup:{ListMessages:function(e,Y){return(e&&Y&&e.fid===Y.fid&&e.numInfo===Y.numInfo&&e.sortKey===Y.sortKey&&e.sortOrder===Y.sortOrder&&e.startInfo===Y.startInfo);}},noDelay:{get:1}},r=[],i=0,K=0,AD,S,d,k="[NONE]",C=10;function O(Y){E.use("mail-debug",function(){if(confirm("Y! Internal: Found invalid message query param.\nPlease click OK to send for Y!Mail Engineering diagnosis.")){AG.Debug.emailIssue(Y);}});}n.batchable=n.passthru;n.entity="mid";AD=W.extend("Messages",n);S=AD.Error;d=AD._error;AB=n.order;try{k=NeoConfig.userDataObj.userSendPref.loggedInAlias;}catch(AC){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:1",AC,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:1");}AD.bulkOps={remove:{bs:100,min:100,max:1000},flag:{bs:100,min:100,max:1000},move:{bs:100,min:100,max:1000},spam:{bs:20,min:20,max:50,fixed:20}};function H(e,AJ,Y){var AH,AI;if(AJ==="Draft"){return"none";}switch(e){case"0":AI="none";break;default:AI="all";break;}if(!strings.str_cfg_tog_old_imageblock){if(AJ==="%40B%40Bulk"){AI="all";}if(e==="b"&&Y&&(AH=Y.flags)&&AH.inAddressBook){AI="none";}}else{if(e==="b"){AI=AJ==="%40B%40Bulk"?"all":"none";}}return AI;}function Z(AK){var AI,Y,AJ,e,AH;if(AK.batch&&AK.batchOps&&(AH=AK.origParms.chain)&&(Y=AK.batchOps.response)){if(AH.dependency&&Y.result&&(AJ=Y.result.response)){for(AI=0;AI<AJ.length;AI++){if((e=AJ[AI].ListMessagesInThreadResponse)&&e.chainedLMTMsg&&(e.chainedLMTId===AH.dependency[0])){return e;}}}}return null;}E.mix(AD,{_process:function(){},_preset:function(AH){var AI=(NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords)?"none":"inline";if(AA.lw){AI=AA.lw==="1"?"inline":"none";}var AJ=AH.fid,Y=AH.msgObj,e={fid:AJ,enableRetry:true,textToHtml:true,urlDetection:true,emailDetection:true,emailComposeUrl:"mailto:%e%",truncateAt:G,charsetHint:"",annotateOption:{annotateText:AI},qtAnnotate:{enable:true},bidiDetection:NeoConfig.bidi,midRequest:AH.request||{blockImages:H(E.common.persist.UserData.get("userUIPref.imageBlocking"),AJ,Y),restrictCSS:true,expandCIDReferences:true,enableWarnings:true,bidiDetection:NeoConfig.bidi,cachekey:"launch"}};if(Y&&Y.part&&Y.flags){D.set(AJ,Y,"launch",true,function(AK){AD._process(AK,{fid:AJ,key:e.midRequest,msg:Y});return AK;},e);}},isCertified:function(Y){var e=/images|all/;return E.Array.some(Y,function(AH){return AH.name==="allow"&&e.test(AH.value);});},getQueryParams:function(AH,Y){var e=X(AH.mid)||AH._param;return(Y&&e&&e[Y])||e;},getAttachmentUrl:function(AM,AI,e,AJ,AH){y("cleanup","getAttachmentUrl");var Y="/ya/download";if(AM==="INBOX"){AM="Inbox";}if(AH){AH=AH.replace(/\?/g,"x");AH=encodeURIComponent(AH);}var AK=new Date().getTime().toString(),AL;AI=encodeURIComponent(AI);AL=[NeoConfig.launch_protocol,location.hostname,Y,"?fid=",encodeURIComponent(AM),"&mid=",AI,"&pid=",e,"&tnef=",AJ,"&YY=",AK];if(AH){AL.push("&file_name=",AH);}AL.push("&appid=YahooMailNeo");return AL.join("");},getMultipleMessages:AF},true);AD.hook("get",{pre:w},AB.cacheCheck);AD.hook("get",{success:v},AB.cache);AD.hook("getMulti",{pre:B},AB.cacheCheck);AD.hook("getMulti",{success:z},AB.cache);AD.hook("list",{pre:a,success:Q});AD.hook("get",{pre:x},AB.gdmDelay);AD.hook("get",M,AB.unpark);if(NeoConfig.hasConvPerf){AD.hook("getMulti",{pre:x},AB.gdmDelay);AD.hook("getMulti",M,AB.unpark);}function x(e,Y,AI){if(NeoConfig.hasConvPerf){s.park(Y,AI);return;}if(i){Y.parkIdx=r.push(Y)-1;Y.resume=AI(AJ);}else{if(K){clearTimeout(K);}K=setTimeout(AH,30000);}Y.unparkIt=1;i=1;function AJ(){r[Y.parkIdx]=0;var AK=r.length;while(AK--){if(r[AK]){return;}}i=0;}function AH(){K=0;if(i){i=0;y("msgctrl","UnlockGdmQ");m();}}}function M(e,Y,AH,AI){if(NeoConfig.hasConvPerf){s.unpark(Y,AI);return;}if(AI!=="pre"&&Y.unparkIt){Y.unparkIt=0;setTimeout(m,0);}}function m(){if(!Y(1)){Y();}function Y(AJ){var AH,e,AI=r.length;while(AI--){if((AH=r[AI])&&(!AJ||AH.parms.msg)){r[AI]=0;if(AJ){while(AI--){if((e=r[AI])&&!e.parms.msg){r[AI]=0;}}}i=0;AH.resume(AH.parms,"pre");return 1;}}if(!AJ){i=0;r.length=0;}}}function B(AZ,AX,Ac){var AW,AS=0,AP=AZ.msgs,AN,e=AZ.fid,AO=AZ.prefetch,AV=AZ.ovparams,Ab=AZ.chain,AY,Y=[],AJ=[],AM=[],Ae=AV,AH=AX.custom,AR=E.common.persist.UserData.get("userUIPref.imageBlocking"),AQ=(AX.parkIdx!==undefined);function AK(Ak,Aj){var Ag,Ai=X(Ak.mid),Ah=Aj&&Aj.truncateAt,Af;Ag=!Aj||!Ai||((R.congruent(Aj,Ai,true,{truncateAt:1})));return(Ag&&(Af=D.get(e,Ak))&&Af.part&&((!Af.isTruncated||(Ah&&(Ai.truncateAt>Ah)))||(Af.isTruncated&&typeof Ah==="undefined"))&&Af);}function Aa(Af){var Ag=Af.mid,Ah=X(Ag),Ai=(NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords)?"none":"inline",Aj;if(AA.lw){Ai=AA.lw==="1"?"inline":"none";}Aj=Ah?R.merge({},Ah):{fid:e,prime:AZ.cachekey,enableRetry:true,textToHtml:true,urlDetection:true,emailDetection:true,qtAnnotate:{enable:true},emailComposeUrl:"mailto:%e%",truncateAt:G,charsetHint:"",annotateOption:{annotateText:Ai},bidiDetection:NeoConfig.bidi};if(Af.charset){Aj.charsetHint=Af.charset;}if(NeoConfig.mentos_enabled){Aj.MessageHeaders=["Authentication-Results","X-Rocket-Track"];}if(AV){R.merge(Aj,AV,true);}if(!A.isNumber(Aj.truncateAt)){delete Aj.truncateAt;}delete Aj.midRequest;return Aj;}function AI(Af,Ai){var Ag=Af.mid,Ak=X(Ag),Ah=Ak&&Ak.midRequest,Aj=Ah?R.merge({},Ah):{blockImages:H(AR,(e==="$(fid)"?AZ.ofid:e),Af),restrictCSS:true,expandCIDReferences:true,enableWarnings:true,bidiDetection:NeoConfig.bidi};
if(AV){R.merge(Aj,AV.midRequest||{},true);}Aj.mid=Ag;Aj.cachekey=Af.cachekey||AZ.cachekey;if(!Aj.cachekey){Aj.cachekey=Ai?"PrimeOther":"Other";}return Aj;}function AT(Af){var Ah=X(Af.mid),Ag=(Ah&&Ah.midRequest.cachekey)||"Neighbors";if(!AE[Ag]){AE[Ag]=0;}AE[Ag]++;return Ag;}if(AO){}if(!(AZ&&AZ.fid&&(AZ.msgs||(AZ.message&&AZ.message.length)||(AZ.chain&&AZ.chain.dependency)))){Ac("failure");var AU=E.JSON.stringify(AZ||{});y("GDM","BadParams:multi");R.netError("GDMBadParams:multi:"+AU);R.assert(!NeoConfig.isInternal,"badparam-get",1,function(){O("GDM Bad param sent:\n\n"+AU);});return d(AZ,S.request);}AX.cbk&&(AX.cbk.respProps={wasCached:true});function Ad(){O("GDM Multi primeMsg bad param:\n\n"+E.JSON.stringify(AO||{}));}for(AW=0;AP&&AW<AP.length;AW++){var AL;AN=AP[AW];if(AN){R.assert(!NeoConfig.isInternal||AN.mid,"badparam-get",1,Ad);if(Ae&&Ae.no_scroll_to_msg){delete Ae.no_scroll_to_msg;}if(AN.mid&&!AK(AN,Ae)){!AQ&&V++;if((AY&&R.congruent(AY,Aa(AN),true))||(AY=Aa(AN))){if(AS<C){Y.push(AI(AN,false));}else{AM.push(AI(AN,false).mid);}AS++;}}else{if((AL=AK(AN,Ae))){U=AT(AN);F[AN.mid]|=1;AJ.push(AL);}}}}if(Y.length<=0&&AJ.length>0){Ac("success");return AJ;}if(AY){if(AX.cbk&&AX.cbk.respProps){AX.cbk.respProps.wasCached=false;}R.assert(Y.length);AY.message=Y;AY.skippedMessage=AM;AY.cachedMsgs=AJ;AH.rparams=R.merge({},AY);for(AW=0;AW<Y.length;AW++){delete Y[AW].cachekey;}}if(Ab&&AY){AY.chain=Ab;}return AY&&Y.length?AY:Ac("nomsgs");}function w(Ad,Aa,Ah){var AY,AZ,AS=0,AW=Ad.fid,AL=Ad.msg,AN=!Ad.dontCache&&Ad.prefetch,AX=Ad.ovparams,Ag=Ad.chain,Af=Ag&&Ag.parameter&&Ag.parameter[0].destination,Ac,Y=[],AU,Ab=!!Ad.noCache,AM,e=Aa.custom,AH=null,AQ,AP=E.common.persist.UserData.get("userUIPref.imageBlocking"),AO=(Aa.parkIdx!==undefined);function AJ(Ao,An){var Ak,Am=X(Ao.mid),Al=An&&An.truncateAt,Aj;Ak=!An||!Am||((R.congruent(An,Am,true,{truncateAt:1})));E.log((Ak&&(Aj=D.get(AW,Ao))&&Aj.part&&((!Aj.isTruncated||(Al&&(Am.truncateAt>Al)))||(Aj.isTruncated&&typeof Al==="undefined"))&&Aj),Ao.mid);return(Ak&&(Aj=D.get(AW,Ao))&&Aj.part&&((!Aj.isTruncated||(Al&&(Am.truncateAt>Al)))||(Aj.isTruncated&&typeof Al==="undefined"))&&Aj);}function Ae(Aj){var Ak=Aj.mid,Al=X(Ak),Am=(NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords)?"none":"inline",An;if(AA.lw){Am=AA.lw==="1"?"inline":"none";}An=Al?R.merge({},Al):{fid:AW,prime:Ad.cachekey,enableRetry:true,textToHtml:true,urlDetection:true,emailDetection:true,qtAnnotate:{enable:true},emailComposeUrl:"mailto:%e%",truncateAt:G,charsetHint:"",annotateOption:{annotateText:Am},bidiDetection:NeoConfig.bidi};if(Aj.charset){An.charsetHint=Aj.charset;}if(NeoConfig.mentos_enabled){An.MessageHeaders=["Authentication-Results","X-Rocket-Track"];}if(AX){R.merge(An,AX,true);}if(!A.isNumber(An.truncateAt)){delete An.truncateAt;}delete An.midRequest;return An;}function AI(Aj,Am){var Ak=Aj.mid,Ao=X(Ak),Al=Ao&&Ao.midRequest,An=Al?R.merge({},Al):{blockImages:H(AP,(AW==="$(fid)"?Ad.ofid:AW),Aj),restrictCSS:true,expandCIDReferences:true,enableWarnings:true,bidiDetection:NeoConfig.bidi};if(AX){R.merge(An,AX.midRequest||{},true);}An.mid=Ak;An.cachekey=Aj.cachekey||Ad.cachekey;if(!An.cachekey){An.cachekey=Am?"PrimeOther":"Other";}return An;}function AT(Aj){var Al=X(Aj.mid),Ak=(Al&&Al.midRequest.cachekey)||"Neighbors";if(!AE[Ak]){AE[Ak]=0;}AE[Ak]++;return Ak;}if(AL&&AN){AZ=E.clone(Ad);AZ.msg=null;Ad.prefetch=null;AN=null;setTimeout(function(){AD.get(AZ,{suppressCodes:["*"]});},0);}if(Af&&Af.match(/\.mid$/)){AH=Z(Aa);if(AH){AM=AH.chainedLMTMsg;AW=AM.sourceFolderInfo.fid;if(AN){AN=[AM];}else{AL=Ad.msg=AM;}}if(!AH){AM={};if(AN){AN=[{mid:l}];}else{AL=Ad.msg={};AL.mid=l;}}}if(!(Ad&&Ad.fid&&((Ad.msg&&Ad.msg.mid)||Ad.prefetch||(Ad.message&&Ad.message.length)||(Ad.chain&&Ad.chain.dependency)))){Ah("failure");var AK=(Aa.cbk&&Aa.cbk.errorPosition)||0,AR=E.clone(Ad||{}),AV;E.mix(AR,{errorPos:AK,conv:NeoConfig.hasConvView});AV=E.JSON.stringify(AR);y("GDM","BadParams:singl");R.netError("GDMBadParams:singl:"+AV);R.assert(!NeoConfig.isInternal,"badparam-get",1,function(){O("GDM Bad param sent:\n\n"+AV);});return d(Ad,S.request);}if(AL){c=p();AU=!Ab&&AJ(AL,AX);if(AU){if(AO){q--;V--;}U=AT(AL);F[AU.mid]|=1;R.traceMsg(["CachedMessage: ","MID => ",AU.mid," | ","Cache => ",U," | ","Algorithm => ",NeoConfig.preCacheModule||"unknown"].join(""));Aa.cbk&&(Aa.cbk.respProps={wasCached:true});Ah("success");return AU;}else{!AO&&++q;Aa.cbk&&(Aa.cbk.respProps={wasCached:false});if(Ad.cacheOnly){Ah("failure");return d(AL,S.notfound);}!AO&&V++;Ac=Ae(AL);Y=[AI(AL,true)];}Aa.cbk&&(Aa.cbk.urlParams={debugmid:AL.mid||"",cachekey:Ad.cachekey||""});}function Ai(){O("GDM Prefetch bad param:\n\n"+E.JSON.stringify(AN||{}));}for(AY=0;AN&&AY<AN.length;AY++){AQ=AN[AY];if(AQ){R.assert(!NeoConfig.isInternal||AQ.mid,"badparam-get",1,Ai);if(AQ.mid&&!AJ(AQ,AX)){!AO&&V++;if((Ac&&R.congruent(Ac,Ae(AQ),true))||(Ac=Ae(AQ))){if(AS<10){Y.push(AI(AQ,false));}else{break;}AS++;}}}}if(Ac){R.assert(Y.length);Ac.message=Y;e.rparams=R.merge({},Ac);for(AY=0;AY<Y.length;AY++){delete Y[AY].cachekey;}}if(Ag&&Ac){Ac.chain=Ag;}return Ac&&Y.length?Ac:Ah("nomsgs");}function z(Ae,Ab){var Aa,AW,AX,AN,AS,AI,AO,Y,AJ,AV=Ab.origParms,e=AV.fid,AR,AT=!AV.dontCache,AH=Ae.message||Ae,AY=Ae.code,AM,Af,AQ,AZ,AK=[],Ac=Ab.custom.rparams,AL=Ac&&Ac.skippedMessage,Ad=Ac&&Ac.message;function AU(Ag){var Aj,An,Al,Am,Ai=AH||[],Ah=Ag.mid,Ak=D.isSearchMid(Ah,e);for(Aj=0;Aj<Ai.length;Aj++){An=Ai[Aj];Am=(An.sourceFolderInfo&&An.sourceFolderInfo.fid)||e;if(Ah===An.mid||(Ak&&L(Ah)===L(An.mid))){break;}if(Ah===l){R.assert(Ai.length===1);AR=Ai[Aj];Ag.mid=Ai[Aj].mid;break;}if(D.hasMoved(Ah,An.mid,e,e)){if(!(Al=(Am!==e))){D.flush(e);}break;}}return(Aj===Ai.length)?null:{pos:Aj,key:Ag,fid:(Ak&&e)||Am,msg:An,moved:Al};}function AP(Al){var Ai=Al.search(/<script[^>]*>/i),An,Ah,Ak,Aj,Ag={};if(Ai>=0){An=Al.length;Ah=Math.max(Al.search(/<\/script>/i),An);Ak=Ai!==0||Ah!==An?Al.substring(Ai,Ah):Al;Aj=/\bYAHOO\.Shortcuts\.mailCategories\s*=\s*(.*);/.exec(Ak);
if(Aj&&Aj[1]){try{Ag.categories=E.JSON.parse(Aj[1]);}catch(Am){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:2",Am,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:2");Ag.categories={};}}Aj=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(Ak);if(Aj&&Aj[1]){try{Ag.annotations=E.JSON.parse(Aj[1]);}catch(Am){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:3",Am,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:3");Ag.annotations=null;}}return Ag;}return null;}for(Aa=0;Aa<AV.msgs.length;Aa++){if(AL&&AL.length){if(AL.indexOf(AV.msgs[Aa].mid)<0){AK.push(AV.msgs[Aa]);}}else{AK.push(AV.msgs[Aa]);}}if(Ad&&(AH||AY)){delete Ac.message;for(Aa=0;Aa<Ad.length;Aa++){AN=true;AM=AO=null;AS=AU(Ad[Aa]);if(AS){AM=AS.msg;if(AS.moved){D.remove(e,Ad[Aa]);D.set(AS.fid,AM,"move");AO=S.moved;}AQ=E.clone(Ac);AQ.midRequest=Ad[Aa];if(AT){if(!AV.forceCache&&(AI=D.get(AS.fid,AM))){if(AI.part&&R.congruent(X(AM.mid),AQ,true)){AM=AI;AN=false;}else{if(AI.flags){AM.flags=AI.flags;}}}if(AN){D.set(AS.fid,AM,Ab.reason,true,function(Ag){AD._process(Ag,AS);return Ag;},AQ);F[AM.mid]&&P();F[AM.mid]=0;t++;AM=D.get(AS.fid,AM);if(AM.extend){for(AW in AM.extend){delete AM.extend[AW];}}else{AM.extend={};}if(AM.body&&AM.body.display){AM.extend.shortcuts=AP(AM.body.display);}}}else{AM._param=AQ;AD._process(AM,AS);D.extend(AM);}}else{AO=S.wserror;}if(AO===S.wserror){Y=f(Ad[Aa],AY,e);AJ=Y?Y.code:"NotFound";Af="GDM_Code_"+AJ+"_"+(AV.cachekey||"");AZ=Ad[Aa].mid;E.use("common-utils-error",function(Ak){var Ag=N(AV.cachekey,Y),Ah,Aj=[Ag,Ag+"_"+Af,"E_getdisplaymessage"],Ai=new Date().getTime();if(Ae.folder&&Ae.folder.folderInfo){if(AR&&D.isSearchMid(AR.mid,Ae.folder.folderInfo.fid)){Aj.push(Ag+"_"+Af+":fid:search");}else{if(Ae.folder.isSystem){Aj.push(Ag+"_"+Af+":fid:"+Ae.folder.folderInfo.name);}else{Aj.push(Ag+"_"+Af+":fid:custom");}}}else{Aj.push(Ag+"_"+Af+":fid:missing");}Ak.Array.each(Aj,function(Al){y("mailnet",Al);});Ah=(NeoConfig.mailEnv==="prod")?NeoConfig.hostName.split(".")[3]:"";o.stat((b(AV.cachekey,Y)?"client_error":"ue_client_error"),"api=>GetDisplayMessage,tae=>4,code=>"+AJ+",colo=>"+Ah);y("msgctrl",Af);Ae.yid=k;Ae.isGetMulti=1;Ae.ua=navigator.userAgent;Ae.conv=NeoConfig.hasConvView?1:0;Ae.pp=NeoConfig.previewPanePref?1:0;Ae.stats=Aj;Ae.tid=Ai;Ae.build=NeoConfig.buildNumber;Ae.errorPos=(Ab.cbk&&Ab.cbk.errorPosition)||299;Ae.chained=(AZ==="$(mid)")?1:0;if(Y){delete Ae.responseText;}R.netError("DEBUG_TAE:4:"+Af+" "+Ak.JSON.stringify(Ae));if(NeoConfig.sessionTracer){J.Sessions.log(Ai);}});}for(AX=0;AX<AK.length;AX++){if(AM&&(AK[AX].mid===AM.mid)){AK[AX]=AM;}else{if(Ac.cachedMsgs[AX]){if(AK[AX].mid===Ac.cachedMsgs[AX].mid){AK[AX]=Ac.cachedMsgs[AX];}}else{if(AK[AX].mid===AZ){AK[AX].msgPermDeleted=I(Y);}}}}}}else{for(Aa=0;Aa<Ae.length;Aa++){if(AK[Aa].mid===Ae[Aa].mid){AK[Aa]=Ae[Aa];}}}return AK;}function v(Ad,Aa,Ae){var AZ,AW,AN,AS,AJ,AO,Y,AK,AV=Aa.origParms,e=AV.fid,AR=AV.msg,AT=!AV.dontCache,AI=Ad.message,AX=Ad.code,AM,Af,AQ,AY,Ab=Aa.custom.rparams,AL,Ac=Ab&&Ab.message,AH=null;function AU(Ag){var Aj,An,Al,Am,Ai=AI||[],Ah=Ag.mid,Ak=D.isSearchMid(Ah,e);for(Aj=0;Aj<Ai.length;Aj++){An=Ai[Aj];Am=(An.sourceFolderInfo&&An.sourceFolderInfo.fid)||e;if(Ah===An.mid||(Ak&&L(Ah)===L(An.mid))){break;}if(Ah===l){R.assert(Ai.length===1);AR=Ai[Aj];Ag.mid=Ai[Aj].mid;break;}if(D.hasMoved(Ah,An.mid,e,e)){if(!(Al=(Am!==e))){D.flush(e);}break;}}return(Aj===Ai.length)?null:{pos:Aj,key:Ag,fid:(Ak&&e)||Am,msg:An,moved:Al};}function AP(Al){var Ai=Al.search(/<script[^>]*>/i),An,Ah,Ak,Aj,Ag={};if(Ai>=0){An=Al.length;Ah=Math.max(Al.search(/<\/script>/i),An);Ak=Ai!==0||Ah!==An?Al.substring(Ai,Ah):Al;Aj=/\bYAHOO\.Shortcuts\.mailCategories\s*=\s*(.*);/.exec(Ak);if(Aj&&Aj[1]){try{Ag.categories=E.JSON.parse(Aj[1]);}catch(Am){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:4",Am,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:4");Ag.categories={};}}Aj=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(Ak);if(Aj&&Aj[1]){try{Ag.annotations=E.JSON.parse(Aj[1]);}catch(Am){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:5",Am,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:5");Ag.annotations=null;}}return Ag;}return null;}if(Ac&&(AI||AX)){delete Ab.message;if(!AR){if((AH=Z(Aa))){if(AH.chainedLMTMsg){AR=AH.chainedLMTMsg;}}}for(AZ=0;AZ<Ac.length;AZ++){AN=true;AM=AO=null;AS=AU(Ac[AZ]);if(AS){AM=AS.msg;if(AS.moved){AM.moved=true;}AQ=E.clone(Ab);AQ.midRequest=Ac[AZ];if(AQ.fid==="$(fid)"){AQ.fid=Aa.resp.folder.folderInfo.fid;}if(AS.fid==="$(fid)"){AS.fid=Aa.resp.folder.folderInfo.fid;}if(AT){if(!AV.forceCache&&(AJ=D.get(AS.fid,AM))){if(AJ.part&&R.congruent(X(AM.mid),AQ,true)){AM=AJ;AN=false;}else{if(AJ.flags){AM.flags=AJ.flags;}}}if(AN){D.set(AS.fid,AM,Aa.reason,true,function(Ag){AD._process(Ag,AS);return Ag;},AQ);F[AM.mid]&&P();F[AM.mid]=0;t++;AM=D.get(AS.fid,AM);if(AM.extend){for(AW in AM.extend){delete AM.extend[AW];}}else{AM.extend={};}if(AM.body&&AM.body.display){AM.extend.shortcuts=AP(AM.body.display);}}}else{AM._param=AQ;AD._process(AM,AS);D.extend(AM);}}else{AO=S.wserror;}if(AO===S.wserror){AM={debug_mid:Ac[AZ].mid||""};Y=f(Ac[AZ],AX,e);AK=Y?Y.code:"NotFound";Af="GDM_Code_"+AK+"_"+(AV.cachekey||"");AY=Ac[AZ].mid;E.use("common-utils-error",function(Al){var Ag=N(AV.cachekey,Y),Ah=Ag+"_"+Af+"_MRD",Ak=[Ag,Ag+"_"+Af,"E_getdisplaymessage"],Aj=new Date().getTime(),Ai=false;if(AA.umid&&AA.action){AA.umid=AA.umid.replace(/ /g,"+");if(AR&&AA.action==="showLetter"&&AA.umid===AR.mid){y("mailnet",Ah);y("mailnet",Ah+":src:"+(AA.src||"unknown"));if((A.isUndefined(AA.referer)||A.isUndefined(AA.src))||(AA.referer==="unknown")&&(AA.src==="unknown")){y("mailnet",Ah+":blockable");
AM.isBlockableMRD=Ai=true;}Ad.requestSrc="MRD:"+(AA.src||"unknown")+":"+(AA.referer||"unknown");}}if(Ad.folder&&Ad.folder.folderInfo){if(AR&&D.isSearchMid(AR.mid,Ad.folder.folderInfo.fid)){Ak.push(Ag+"_"+Af+":fid:search");}else{if(Ad.folder.isSystem){Ak.push(Ag+"_"+Af+":fid:"+Ad.folder.folderInfo.name);}else{Ak.push(Ag+"_"+Af+":fid:custom");}}}else{Ak.push(Ag+"_"+Af+":fid:missing");}!Ai&&Al.Array.each(Ak,function(Am){y("mailnet",Am);});o.stat((b(AV.cachekey,Y)?"client_error":"ue_client_error"),"api=>GetDisplayMessage,tae=>4,code=>"+AK);y("msgctrl",Af);Ad.yid=k;Ad.isGetMulti=0;Ad.ua=navigator.userAgent;Ad.conv=NeoConfig.hasConvView?1:0;Ad.pp=NeoConfig.previewPanePref?1:0;Ad.stats=Ak;Ad.tid=Aj;Ad.build=NeoConfig.buildNumber;Ad.chained=(AY==="$(mid)")?1:0;Ad.errorPos=(Aa.cbk&&Aa.cbk.errorPosition)||299;if(Y){delete Ad.responseText;}R.netError("DEBUG_TAE:4:"+Af+" "+Al.JSON.stringify(Ad));if(NeoConfig.sessionTracer){J.Sessions.log(Aj);}});}if(AR&&(Ac[AZ].mid===AR.mid)){AL={err:AO,msg:AM};}}}else{if(AV.chain&&!AR){AR=Ad;}}if(Aa.resp&&Aa.resp.callPerf&&Aa.cbk){Aa.cbk.respProps=Aa.cbk.respProps||{};Aa.cbk.respProps.callPerf=Aa.resp.callPerf;}if(AL){if(AL.err){Ae("failure");return d(AL.msg,AO,Y);}else{F[AL.msg.mid]|=1;return AL.msg;}}else{if(!AR){Ae("noprime");}}}function f(e,AL,AK){var AJ,AH,Y=e.mid,AI=(AL&&AL.length)||0;if(Y==="$(mid)"&&AI===1){return AL[0];}for(AH=0;AH<AI;AH++){AJ=AL[AH];if((Y===AJ.mid||(D.isSearchMid(Y,AK)&&L(Y)===L(AJ.mid)))&&AJ.code!=="WARN"){return AJ;}}}function b(Y,e){return(Y!=="Prime"||I(e));}function N(Y,e){return b(Y,e)?"TAE4":"UE_ALERT_TAE4";}function I(Y){return(Y&&Y.code&&Y.code.indexOf("MessageIdsDeleted")!==-1);}function a(AI,AJ,AH){var Y=AI.startInfo,e=A.isNumber;if(NeoConfig.hasConv||NeoConfig.grid||NeoConfig.vertPane){AI.responseFields={"messages":{"all":true}};}if(e(Y)&&Y<0){AH("failure");return d(AI,S.request);}if(AJ.cbk.stopwatch){AJ.cbk.stopwatch.getListBegin=new Date();}}function Q(AL,AP,AK){if(AP.cbk.stopwatch){AP.cbk.stopwatch.getListEnd=new Date();}var Y=AL.folder,AH=Y.folderInfo.fid,AO=AL.messageInfo,AQ,AN,AJ,AM=AO?AO.length:0,e,AI;for(AI=0;AI<AM;AI++){e=AO[AI];if(e&&e.errorflag==="true"){AN=1;break;}}if(AN){AK("failure");y("msgctrl","E_ListCorrupt_BadMsgInfo");return d(AP.parms,S.baddata);}if(AP.parms){AJ=(AL.startInfo+AP.parms.numInfo>=Y.total)?AL.startInfo+AO.length<Y.total:AO.length<AP.parms.numInfo;if(AJ){Y.total=AL.startInfo+AO.length;y("msgctrl","E_ListCorrupt_Total");y("msgctrl","E_ListCorrupt_Total_"+(Y.isSystem?"System":"User"));if(!j){j=1;y("msgctrl","E_ListCorrupt_onePerSession");}E.use("common-utils-error",function(){R.error.report("MsgCtrl_E_ListCorrupt_Total: yid: "+k);});}}if(AP.parms&&AP.parms.maxMessagesToScanForContacts){AP.reason="ruefc";}if(AH==="%40C%40Chats"){AQ=[];E.Array.each(AO,function(AS){var AR=E.Array.some(AS.inboxservices||[],function(AT){if(AT.name==="src"){if(AT.value==="mmc"){Y.total--;}else{AQ.push(AS);}return true;}});if(!AR){Y.total--;}});AL.messageInfo=AO=AQ;}if(Y&&!AP.batch&&!(NeoConfig.infiniteScroll&&AL.startInfo)){W.Folders.set(Y,null,AP.reason);}D.syncHeaders(AH,AO);if(!NeoConfig.infiniteScroll||(AP.parms&&!AP.parms.autoCheckMail)){setTimeout(function(){g(AH,AL.messageInfo);},500);}else{}}function AF(AP,AQ,AM,AR){var AK,AH,AN,AL=AR||{},AJ,Y=[],e,AI=[],AS=[],AO=0;for(AJ=0;AJ<AP.length;AJ++){e=AM(AP[AJ])||AQ.failure("Valid fid was not found in getMultipleMessages.");if(!Y[e]){Y[e]=[];AI.push(e);}Y[e].push(AP[AJ]);}if(AQ){AQ.respProps={wasCached:true};}AK=W.batch();for(AJ=0;AJ<AI.length;AJ++){AK.Messages.getMulti({fid:AI[AJ],msgs:Y[AI[AJ]],cachekey:"Prime",ovparams:AL},function(AV,AU,AY,Aa){var AW,Ab=[],AT=[],AX,AZ;AS=AS.concat(AV);E.fire("MessageController:getMultipleMessagesSuccess",AS);AO++;if(AU&&AU.respProps&&AQ){AQ.respProps.wasCached=AQ.respProps.wasCached&&AU.respProps.wasCached;if(Aa&&Aa.resp&&Aa.resp.callPerf&&!AQ.respProps.callPerf){AQ.respProps.callPerf=Aa.resp.callPerf;}}AZ=AS.length;if(AO===AI.length){AW=[];for(AJ=0;AJ<AZ;AJ++){if(AS[AJ].data){for(AX=0;AX<AS[AJ].data.msg.length;AX++){AW[AS[AJ].data.msg[AX].mid]=AS[AJ].data.msg[AX];}}else{AW[AS[AJ].mid]=AS[AJ];}}for(AJ=0;AJ<AP.length;AJ++){AN=AW[AP[AJ].mid]||"";AH=AN.body||"";if(AH){Ab.push(AN);}else{AT.push(AN);}}if(AQ){AQ.success(Ab,AT);}}});}AK.execute({suppressCodes:["*"]});E.fire("MessageController:getMultipleMessages",AP);}function g(AH,e){var AM=NeoConfig.msgCacheUnread.split(","),AK=AM[0],AO=AM[1],AP=p()-c,AJ={"Trash":1,"%40B%40Bulk":1};if(AK>0&&AO>0&&AP<AO*60*1000){var AN=0,Y,AL=new Date().getTime()/1000-18000,AI=[];while(AK>0&&AN<e.length){Y=e[AN++];if(Y&&!Y.flags.isRead&&(AL<Y.receivedDate)&&!AJ[AH]&&(Y.flags.inAddressBook||(NeoConfig.prefetchMsgsCheckMail===1))){AI.push(Y);AK--;}else{break;}}if(AI.length>0){AD.get({fid:AH,msg:null,prefetch:AI,cachekey:"List"},{suppressCodes:["*"]});}}}function P(){for(var Y in F){if((F[Y]&3)===1){F[Y]|=2;h++;}}}function u(Y,AH,AI){var e=AH;while(AH>0){y("MsgCache",Y+"_"+(AH>10?10:AH));AH-=10;}AI&&u(Y+"_"+AI,e);}setInterval(function(){var Y,e=NeoConfig.preCacheAlgorithm||0;for(Y in AE){u("CacheHit",AE[Y],Y);AE[Y]=0;}u("CacheMiss",q,e);u("CacheRequest",V,e);u("MsgsFetched",t,e);P();u("MsgsUsed",h,e);q=t=V=h=0;},T);E.use("mail-controller-processbody");E.namespace("mail.test.controller");E.mail.test.controller.Messages={cacheMsg:g};},"1.0.0",{requires:["launch-utils","rocket-stats","ymma-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data"]});

YUI.add("mail-controller-folders",function(D){var o=D.mail,P=D.common.Utils,H=o.model.DataStore,l=D.common.persist.UserData,m=P.rocketstats.stat,B=D.Lang,W=H.Folders,U=o.Controller,A=B.trim,a,Q,n,M,J=0,T,G="%40S%40Search",h=/[@#$%&*?\/;\'\":\[\]\{\}<>|\\\~\n\r\f\t]+/,L={"%40B%40Bulk":strings.spam||"Spam","%40C%40Chats":strings.str_nav_conversations||"Conversations","Draft":strings.str_nav_drafts||"Drafts"},R={},d={passthru:{refresh:"ListFolders",empty:"EmptyFolder",get:"ListFolders"},batchable:{create:"CreateFolder",refresh:"ListFolders",rename:"RenameFolder",remove:"RemoveFolder",fetchExtMail:"FetchExternalMail"}},f=(l.get("externalAccounts")||{}).extAccount,i;a=U.extend("Folders",d);Q=a.Error;M=Q._reservedIdx;R[strings.str_folder_reserved_inbox]=R[strings.str_folder_reserved_conversations]=R[strings.str_folder_reserved_drafts]=R[strings.str_folder_reserved_sent]=R[strings.str_folder_reserved_spam]=R[strings.str_folder_reserved_trash]=R[strings.str_folder_reserved_search]=R[strings.str_folder_reserved_inbox_lower]=R[strings.str_folder_reserved_conversations_lower]=R[strings.str_folder_reserved_drafts_lower]=R[strings.str_folder_reserved_sent_lower]=R[strings.str_folder_reserved_spam_lower]=R[strings.str_folder_reserved_trash_lower]=R[strings.str_folder_reserved_search_lower]=R[strings.str_folder_reserved_inbox_upper]=R[strings.str_folder_reserved_conversations_upper]=R[strings.str_folder_reserved_drafts_upper]=R[strings.str_folder_reserved_sent_upper]=R[strings.str_folder_reserved_spam_upper]=R[strings.str_folder_reserved_trash_upper]=R[strings.str_folder_reserved_search_upper]=1;function j(r,q,Y){var p;if(Y&&Y.failure){if((p=Y.failure)!==undefined){p(a._error(r,q),Y.args);}}}function Z(q,Y){var p;if(Y&&Y.success){if((p=Y.success)!==undefined){p(q,Y.args);}}}function g(p){var q,Y;q=(B.isNumber(p)&&p)||NeoConfig.chkFolders;if(!q){q=NeoConfig.isCorpmail?NeoConfig.checkMailDelayCorp:NeoConfig.checkMailDelay;}q*=60000;Y={suppressCodes:["*"],backgroundLogs:["*"],failure:function(){g();}};if(T){T.cancel();}T=D.later(q,null,function(){D.fire("MailLog",{m:"About to run auto checkmail"});J++;a.refresh((NeoConfig.checkmailExt?{forced:false,accountId:""}:{}),Y);D.fire("nav:refreshCalendar");});D.fire("MailLog",{m:"Scheduling auto checkmail after "+(q/1000)+" seconds"});}function F(q){var p=q&&q.length,Y=a.Error,r;if(!p){r=Y.empty;}else{if(p>40){r=Y.oversize;}else{if(W.getByName(q)||R.hasOwnProperty(q.toLowerCase())||R.hasOwnProperty(q)){r=Y.exists;}else{if(h.test(q)){r=Y.baddata;}}}}return r;}function V(r,q){var s,u,v,p,t,Y=r&&(r.folder||[r]);for(s=0;Y&&s<Y.length;s++){u=Y[s];if(u&&(p=u.folderInfo)&&(v=p.fid)){p.fid=v=v.replace(/%2f/g,"%5c");t=L[v];if(t){p.name=t;}}else{if(q){q.push(u);}}}return(q.length===0)&&r;}function O(q,r,p){var Y;if(r.reason==="get"){Y=W.get(q);if(Y){p("success");return Y;}r.reason="refresh";q={bidiDetection:NeoConfig.bidi};}else{q={fid:q};}return q;}var C=(function(){var Y=NeoConfig.enableCheckMailChecks||3;var p=0;return function(s,r){var q;if(!s&&p<=Y&&r.hasDependentRequest("ListFolderThreads")){q="Dependent requests in queue, skipping auto checkmail ("+(p+1)+" times)";D.fire("MailLog",{m:"Y.mail.Controller.Folders::_skipAutoCheckMail",info:q});p++;return true;}if(p>0){if(p>=Y){q="Request queue not clearing up after "+p+" tries ... forcing auto check mail";D.fire("MailLog",{m:"Y.mail.Controller.Folders::_skipAutoCheckMail",info:q});}p=0;}return false;};}());function I(p,z,r){var u=(p&&p.forced)||(J>=NeoConfig.resetUnseenMsgsRefreshLimit)?true:false,w={resetMessengerUnseen:u},q,t,s,Y=[],AB,x,AA,v,y;if(u){J=0;}if(C(p.forced,U)){r("failure");return;}w.bidiDetection=NeoConfig.bidi;if(p&&typeof p.accountId==="string"){AB=z.cbk||{};v=p.accountId;y=function(AI){var AF,AG,AC,AD,AE=[],AH;if((AF=AI.fetchResults)&&(AC=AF.length)){for(AG=0;AG<AC;AG++){if((AD=AF[AG].status)!=="success"){AE.push({userName:Y[AG].userName,status:AD,server:Y[AG].address||Y[AG].server});}}if(AE.length){D.use("mail-error",function(AJ){AH=AJ.mail.Error;if(AH){AH.extFetchError(AE);}});}}};if(f&&f.length){for(s=0;s<f.length;s++){AA=f[s];if(A(AA.username)&&A(AA.server)&&(v===""||v===AA.address)){Y.push({protocol:AA.protocol,userName:AA.username,server:AA.server});}}if(Y.length){r();x=D.clone(AB);x.failure=null;x.success=y;t=U.batch().Folders;t.fetchExtMail({externalAccounts:Y},x);t.refresh(w,AB,z.reason);t.execute({suppressCodes:(AB&&AB.suppressCodes)||[]});}}}return w;}function b(s,u,t){var p=u.reason,q=u.origParms,Y=(u.api==="refresh"||p==="refresh");if(Y){s.folder.sort(function(x,v){var w=x.isSystem,r=v.isSystem;if(w&&!r){return -1;}else{if(!w&&r){return 1;}}return x.folderInfo.name.localeCompare(v.folderInfo.name);});a.set(s,null,p);g();}if(u.api==="get"){if(Y&&(!(s=W.get(q)))){t("failure");return a._error(q,a.Error.notfound);}else{return s;}}}function K(p,t){var q,Y=t.reason,s=t.origParms;q=Y.match(/\.([\w\W]+)/);q=(q&&q[1])||Y;if(/^create/.test(Y)){W.add(p,q);}else{if(/^remove/.test(Y)){W.remove(s.fid,q);}else{if(/^rename/.test(Y)){W.rename({folderInfo:s},p,q);}}}W.flush();}function S(s,Y,r){var t,q,p=P.wcopy(Y);s=P.sanitizeString(A(s));t=F(s);if(p){p.success=p.failure=null;}if(t){j(s,t,Y);}else{q=U.batch().Folders;q.create({name:s,bidiDetection:NeoConfig.bidi},function(x,u,v){var w=Y&&Y[v];if(w){setTimeout(function(){w(x,u);},0);}},"create"+(r?"."+r:""));q.refresh({});q.execute(p);}}function e(s,Y,r){var q=U.batch().Folders,p=P.wcopy(Y);if(p){p.success=p.failure=null;}q.remove({fid:s},Y,"remove"+(r?"."+r:""));q.refresh({});q.execute(p);}function c(t,Y,r){var s,q,p=P.wcopy(Y);t.name=(t&&t.name)?P.sanitizeString(A(t.name)):"";t.bidiDetection=NeoConfig.bidi;s=F(t.name);if(p){p.success=p.failure=null;}if(s){j(t.name,s,Y);}else{q=U.batch().Folders;q.rename(t,Y,"rename"+(r?"."+r:""));q.refresh({});q.execute(p);}}function X(q,Y,r){var p=[];q=V(q,p);if(!q){j(p,a.baddata,Y);}else{W.set(q,r);Z(q,Y);}}n={success:K};a.hook({create:n,remove:n,rename:n,empty:{pre:O,success:function(Y,p){P.assert(p.parms&&p.parms.fid);
if(NeoConfig.hasConv){D.mail.model.ConvStore.Conversations.remove(p.parms.fid,null,true);}else{H.Messages.remove(p.parms.fid,null,true);}}},get:{pre:O,success:b},refresh:{pre:I,success:b}});D.mix(a,{create:S,rename:c,remove:e,set:X,validateName:F,_skipAutoCheckMail:C});D.mix(Q,{empty:M++,oversize:M++,exists:M++});function N(q,z,w){var t,u=0,s=0,r,v=w==="remove",y=v&&!z,AB=w==="move"||w==="add",Y=(v&&-1)||(AB&&1)||0,p,AA,x=W.get(q);if(x){D.log("ds:folder handling message event, reason "+w+" orig unread = "+x.unread+" total  = "+x.total+" size = "+x.size);for(t=0;t<z.length;t++){p=z[t];r=p.flags&&p.flags.isRead;if(B.isNumber(r)){if(AB){u+=r?0:1;}else{if(v){u+=r?0:-1;}else{u+=r?-1:1;}}}if(AB||v){s+=((p.header&&p.header.size)||0);}}if(v){s=-s;}W.set(AA={folderInfo:{fid:q},unread:y?0:x.unread+u,total:y?0:x.total+(z.length*Y),size:y?0:x.size+s},"ds:msg:");P.assert(AA.unread>=0&&AA.total>=0,"neg-folder-cnt",1,function(){var AC=AA.unread>=0?"Total":"Unread";m("foldercnt",["Negative",AC,w].join("_"));D.use("common-utils-error",function(){P.netError(["NegFolderCount fid:",q,w].join(";"));});D.fire("MailLog",{m:"NegFolderCount fid:"+q,unread_count:AA.unread,total_count:AA.total,reason:w});});}}function k(p,t){var q,r,u,Y,s={};for(q=0;q<t.length;q++){E(s,t[q]);}if(p){r=W.get(p);}for(u in s){Y=W.get(u);if(!p||u!==p){if(!p||!(p==="Trash"&&(u==="Sent"||u==="Draft"))){if(r){r.total+=s[u].total;r.unread+=s[u].unread;}Y.total-=s[u].total;Y.unread-=s[u].unread;W.set(Y,"ds:conv:");}}}if(r){W.set(r,"ds:conv:");}}function E(p,r){var q,Y;if(r.msgCountsByFolder){for(Y=0;Y<r.msgCountsByFolder.length;Y++){q=r.msgCountsByFolder[Y].fid;p[q]=p[q]||{total:0,unread:0};p[q].total+=r.msgCountsByFolder[Y].total;p[q].unread+=r.msgCountsByFolder[Y].unread;}}}D.on("debug:cm",function(Y){D.fire("MailLog",{m:"About to trigger auto checkmail through debug menu"});g(Y);});D.on("ds:msg:change",function(s,u,Y,t,r){var p,q;if(s===G){for(p=0;p<Y.length;p++){if((q=(Y[p].sourceFolderInfo&&Y[p].sourceFolderInfo.fid))){N(q,[t[p]],r);}P.assert(q);}}else{N(s,t,r);}});D.on("ds:conv:change",function(q,u,p,t,Y){var r,s;if(q==="msg:add"){r=(Y[0]&&Y[0].length)?Y[0][0].fid:null;s=Y[0];if(r&&r==="Draft"){N(r,s,"add");}}});D.on("ds:msg:remove",function(v,t,p,Y,r){var q,s,u="remove";if(v===G){for(q=0;q<t.length;q++){s=(t[q].sourceFolderInfo&&t[q].sourceFolderInfo.fid)&&(r.reason!=="savedraft");if(s){N(s,[t[q]],u);}P.assert(s);}}else{N(v,t,u);}});D.on("ds:conv:remove",function(r,q,p,Y){if(NeoConfig.parallelRequests){k(Y,q);}});D.on("net:suspended",function(){if(T){T.cancel();}T=0;D.fire("MailLog",{m:"Network suspended, auto checkmail suspended"});});D.on("net:resumed",function(){D.fire("MailLog",{m:"Network resumed, restarting auto checkmail"});g();});D.on("compose:rte:active",function(){if(T){T.cancel();}T=0;D.fire("MailLog",{m:"Focus is on RTE, auto checkmail suspended"});});D.on("compose:rte:blur",function(){if(!T){D.fire("MailLog",{m:"Focus is NOT on RTE, restarting auto checkmail"});g();}});if(NeoConfig.checkmailExt&&f){i=10;}g(i);},"1.0.0",{requires:["rocket-stats","mail-model-datastore","mail-controller-base","common-persist-user-data"]});

YUI.add("mail-controller-processbody",function(D){D.namespace("mail.Controller");var A=D.common.Utils,C=D.common.Utils.rocketstats.stat,B=function(){strings=window.strings||{forwarded_msg_attached:"Note: Forwarded message is attached.",str_nav_left_untitled:"untitled"};var K={"jpg":1,"jpe":1,"pjpg":1,"pjpe":1,"pjpeg":1,"bmp":1,"jpeg":1,"png":1,"gif":1,"tiff":1,"x-png":1};function H(S,T){if(S){if((T&&T.fid==="%40C%40Chats")||(S.sourceFolderInfo&&S.sourceFolderInfo.fid==="%40C%40Chats")){O(S);(S.body||(S.body={}))&&(S.body.display||(S.body.display=""));S.conversationBody=S.part[0].text;}else{if(T&&T.fid==="%40B%40Bulk"){S=R(S);E(S,T);}else{E(S,T);}}}}function O(S){S.body=S.body||{stationery:"",inlineAttachments:[],isPlainText:0};S.imgAttachments=S.imgAttachments||[];S.nonImgAttachments=S.nonImgAttachments||[];S.attachments=S.attachments||[];S.isTruncated=false;S.yivPrefixNumber=[];S.hasForwardedMsg=false;}function N(S,T){S.attachments=S.attachments.concat(T.attachments||[]);S.imgAttachments=S.imgAttachments.concat(T.imgAttachments||[]);S.nonImgAttachments=S.nonImgAttachments.concat(T.nonImgAttachments||[]);S.isTruncated=T.isTruncated||S.isTruncated;S.body.inlineAttachments=S.body.inlineAttachments.concat((T.body&&T.body.inlineAttachments)||[]);if(T.body&&T.body.display){S.body.display=[S.body.display,T.body.display].join("");}S.yivPrefixNumber=S.yivPrefixNumber.concat(T.yivPrefixNumber||[]);}function F(S){if(S){return{from:A.escapeEmailObject(S.from),subject:A.escapeStringField(S.subject),to:A.escapeEmailObjectArray(S.to),cc:A.escapeEmailObjectArray(S.cc),bcc:A.escapeEmailObjectArray(S.bcc),replyto:A.escapeEmailObjectArray(S.replyto)};}}function E(W,U){W.cookedHeader=F(W.header);if(W.part){var T=0,V=W.part,S;O(W);while((S=V[T++])){Q(W,S,U);N(W,S);}}(W.body||(W.body={}))&&(W.body.display||(W.body.display=""));if(W.hasForwardedMsg){W.body.display=[strings.str_comp_reply_fwdHeader,"<br/><br/>",W.body.display].join("");}if(W.body&&W.body.display){I(W.body);}}function R(W){var T;if(W.part){var U=0,V=W.part,S;while((S=V[U])){if(S.type==="text"){T=D.Node.create('<div id="__testMsg">'+S.text+"</div>");T.all("a").removeAttribute("href");W.part[U].text=T.get("innerHTML");}U++;}}return W;}function Q(U,T,V){if(!T.size){T.size=T.size||0;}var S=T.isTruncated&&((T.disposition==="inline"||!T.disposition)&&!T.referencedInline&&(T.subtype==="plain"||T.subtype==="html"));T.isTruncated=S;switch(T.type){case"text":P(U,T,V);break;case"image":G(U,T,V);break;case"message":L(U,T,V);break;default:M(U,T,V);break;}}function J(T,S){if(!S.filename){S.filename=S.partId+".txt";}T.attachments.push(S);T.nonImgAttachments.push(S);}function P(T,S){if(typeof S.text==="string"||S.disposition==="attachment"||S.disposition==="inline"){if((S.disposition==="inline"||!S.disposition)&&!S.referencedInline&&(S.subtype==="plain"||S.subtype==="html")){if(typeof T.body.display==="undefined"){T.body.display=S.text;T.body.isPlainText=S.subtype==="plain";}else{T.body.display+="<br />"+S.text;}}else{J(T,S);}}}function G(U,T,V){var X=(T.subtype||"").toLowerCase(),S=(X in K)||0;if(!T.referencedInline){if(!S){M(U,T);}else{if((T.disposition==="inline"||(!T.disposition&&T.contentId))&&!U.isTruncated){if(V.key.blockImages!=="none"){U.hasBlockedImages=true;}else{var W=[NeoConfig.launch_protocol,location.hostname,"/ya/download","?mid=",encodeURIComponent(V.msg.mid),"&pid=",encodeURIComponent(T.partId),"&fid=",encodeURIComponent(V.fid),"&inline=1"].join("");if(NeoConfig.useTNServer&&T.thumbnailurl){U.body.display=[U.body.display,"<div id='part",T.partId,"'>","<img src='",T.thumbnailurl,"&httperr=1&h=600&w=600' ","onerror='bN=document.getElementById(\"part",T.partId,'");bN.innerHTML="<img src=\\"',W,'\\" />";\' />',"</div>"].join("");}else{U.body.display=[U.body.display,"<img src='",W,"' />"].join("");}C("processbody","inline_image_download");}}}}if(!T.filename){T.filename=strings.str_nav_left_untitled+T.partId+"."+T.subtype;}if(S){T.isDisplayable=true;U.imgAttachments.push(T);U.attachments.push(T);}}function L(V,T,W){var X=(T.subtype||"").toLowerCase(),U,S;if(X==="rfc822"){if(T.partId!=="TEXT"||V.part.length===2){V.attachments.push(T);V.nonImgAttachments.push(T);}if(T.disposition===""){V.hasForwardedMsg=true;}if((S=T.message)){if(!T.filename){U=S.header.subject.substring(0,240)||strings.str_comp_nosubject;T.filename=U+".eml";}E(S,W);N(V,S);}}}function M(Z,T){var W=(T.subtype||"").toLowerCase(),S=(T.type||"").toLowerCase(),b,U,X,V=0,Y=Z.attachments,a=Z.nonImgAttachments;if(S==="application"&&W==="ms-tnef"){b=T.attachments||[];if(b){U=b.length;for(V;V<U;V++){X=b[V];if(X&&X.name){X.filename=X.name;X.partId=T.partId;X.tnefId=X.id;}}a=Z.nonImgAttachments=a.concat(b);}}else{if(!T.filename){T.filename=strings.str_nav_left_untitled+T.partId;}Y.push(T);a.push(T);}}function I(S){var U=S.display,V='<div id="STATIONERY_STYLE">',X,W,T;if(/id="STATIONERY_STYLE/.test(U)){U=U.replace(/div\s*id="STATIONERY_STYLE"/,'div id="STATIONERY_STYLE"');X=U.indexOf(V);if(X>-1){W=U.indexOf("</div>",X);T=U.substring(X+V.length,W);U=U.substring(0,X)+U.substring(W+6);S.display=U;S.stationery=T;}}}D.mix(D.mail.Controller.Messages,{_process:function(T,S){T&&!T.body&&H(T,S);}},true);};new B();},"1.0.0",{requires:["common-utils","common-utils-stats"]});

YUI.add("mail-model-datastore",function(B){B.namespace("mail.model");var M="ds:folder:",F="ds:msg:",L="ds:conv:",Q="invalidarg",A="change",J="add",N="rename",G="remove",P="%40S%40Search",R=B.mail,I=B.Lang,K=B.common.Utils,E=function(){return{extend:{}};},H=50,C=R.model.DataStore={};function D(W,V){var U,T,S;if(I.isObject(W)){T=W.extend=W.extend||{};S=(V&&V.extend)||{};for(U in S){if(!T[U]){T[U]={};K.merge(T[U],S[U]);}}}}function O(T){try{B.fire.apply(B,T);}catch(S){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-datastore:1",S,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-datastore:1");B.use("common-utils-error",function(){K.error.report("datastore error for "+T[0],S,1,1,1);});}}B.mix(C,{Sessions:(function(){var c=[],Z=parseInt(NeoConfig.sessionTracerCount,10),d,b=B.JSON,T=B.Lang;function X(e){if(c.length<Z){c.push(e);}else{c.shift();c.push(e);}}function U(e,f){X({"type":e,"ts":new Date(),"data":f});}function V(e){U("request",e);}function W(e){U("response",e);}function S(e){U("step",e);}function a(){c=[];}function Y(i){var e=[],f=1,h={"request":">Req ","response":"<Res ","step":"<st>"},g;if(!d){B.use("comms-log4js",function(j){d=j.comms.log4js.getLogger("sessionLogger",1,"ajax",{maxCount:5});});}B.Array.each(c,function(k){if(T.isObject(k.data)){g=b.stringify(k.data);}else{g=k.data;}var j=[h[k.type],NeoConfig.windowId+" ",f+++" (",k.ts.toTimeString().substr(0,8),'/"tid":'+i+") ",g];e.push(j.join(""));});d.log(e.join("\n"));}return{addRequest:V,addResponse:W,step:S,log:Y,reset:a};})()});B.mix(C,{Folders:(function(){var a=[];function V(e){return(I.isString(e)?e:(e&&e.folderInfo&&e.folderInfo.fid));}function b(f){try{return I.isObject(f)&&V(f);}catch(g){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-datastore:2",g,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-datastore:2");}return false;}function Y(e){return(e&&e.folder&&I.isArray(e.folder));}function U(j,f,g){for(var h=0,e=a.length;h<e;h++){if((g&&j===a[h].folderInfo.name)||j===a[h].folderInfo.fid){return f?h:a[h];}}return f?-1:null;}function W(g){var l,j=!g||(I.isObject(g)&&K.isEmpty(g)),e,h,f=E(),k;if(j){e=[];for(h in a){e.push(K.wcopy(a[h],f));}l=e.length?e:null;}else{if(!(k=V(g))){B.error(M+"get:"+Q);}l=K.wcopy(U(k),f);}return l;}function X(e){return K.wcopy(U(e,false,true),E());}function T(w,t,j){var f,q,e,u,x=w.numberOfFolders,l,s=E(),n=[],k=[],r=a.length===0,g=!r&&[],v=!r&&[];function o(AA){for(var z=0,y=AA.length;z<y;z++){if(U(AA[z].folderInfo.fid,true)===-1){return true;}}}function m(y,i){K.assert(b(y));var AD=V(y),AB,AC={},AA,z;if(r&&i){return;}if(AD&&AD!==P){if(r){z=y;AB=K.merge({},y);a.push(AB);}else{AA=U(AD,true);if(AA===-1){if(i){return;}B.error(M+"set:"+Q);}AC=a[AA]||AC;z=j?y:K.diff(y,AC);if(z){AB=j?{}:K.wcopy(AC);K.merge(AB,z,true);!i&&a.splice(AA,1,AB);}}if(z){D(AB,AC);n.push(K.wcopy(AB,s));g&&g.push(AC);v&&v.push(z);}}else{k.push(y);}}if(!(b(w)||(u=Y(w)))){B.error(M+"set:"+Q);}if(u){f=w.folder;e=f.length;l=(!r&&x&&((x!==a.length)||o(w.folder)));if(l){for(q=0;q<e;q++){m(f[q],l);}if(n.length){O([M+A,g,n,v,t]);}S();r=true;n=[];k=[];g=v=false;}for(q=0;q<e;q++){m(f[q]);}}else{m(w);}var h=B.mail.Tabs&&B.mail.Tabs.getActiveTab();if(h&&h.widget&&h.widget.fid){var p=false;for(q=0;q<n.length;q++){if(n[q]&&n[q].folderInfo&&(n[q].folderInfo.fid===h.widget.fid)){p=true;}}}if(t==="refresh"){NeoGV.cancelViewBeacon=true;}if(n.length){O([M+A,g,n,v,t]);}return k;}function d(e,f){if(!V(e)){B.error(M+"add:"+Q);}a.push(K.merge({},e));O([M+J,e,f]);}function Z(j,h,i){var g=V(j),e=U(g,true),f=a[e];if(!g||!f){B.error(M+"rename:"+Q);}K.merge(h,f);a.splice(e,1,h);O([M+N,f,K.wcopy(h,E()),i]);}function c(f,g){var h=V(f),e=U(h,true);if(!h||e===-1){B.error(M+"remove:"+Q);}a.splice(e,1);O([M+G,I.isObject(f)?f:{folderInfo:{fid:h}},g]);}function S(){a.length=0;}return{get:W,getByName:X,set:T,remove:c,rename:Z,add:d,extend:D,flush:S};})()});B.mix(C,{Messages:(function(){var h={},c={},p={olist:[],max:H,sync:{}},w=null,k={},u={};function t(AA){var z;if(AA&&I.isString(AA)){z={mid:AA};}else{z=I.isObject(AA)&&AA.mid&&AA;}return z;}function W(AA,AF,AB){var AD,z,AC,AG,AH,AE=(I.isString(AF)||!AF)?AF:AF.mid;if(!AA||!AE){B.error(F+"get:"+Q);}AD=h[AA]||{};z=AD[AE];if(AB&&z&&z.part){AH=p.olist;for(AC=0;AC<AH.length;AC++){if(AH[AC].fid===AA&&AH[AC].mid===AE){AG=AH.splice(AC,1);AH.push(AG[0]);break;}}}if(!z&&l(AE)){AE=d(AE);for(AG in AD){if(d(AG)===AE){z=AD[AG];break;}}}return K.wcopy(z,E());}function y(){return h;}function Z(AD,AB){var AC,z,AA=(I.isString(AB)||!AB)?AB:AB.mid;if(!AD||!AA){B.error(F+"get:"+Q);}AC=h[AD]||{};return !!((z=AC[AA])&&z.part);}function q(z,AJ,AP,AF,AE,AA){var AN,AK=AF,AR=I.isArray(AJ),AH=AR?AJ:[AJ],AB=I.isArray(AA)?AA:[AA],AD=[],AL=[],AG=[],AQ=[],AO=E(),AC,AM;if(("Sent"===z&&"add"===AP&&I.isString(AJ))||NeoConfig.noCache===1){p.sync[z]=AM=true;}function AI(AW,AY){var AS,AU,AT,AV,AX;if((AS=t(AW))){AV=AS.mid;h[z]=h[z]||{};AU=h[z][AV]||{};AX=K.diff(AS,AU);if(AX){AT=AF?{}:K.wcopy(AU,AO);AT=K.merge(AT,AF?AS:AX,true);AK=AK&&(K.isEmpty(AU)||(AX.part&&!AU.part));if(AU.snippet){AT.snippet=AU.snippet;}if(w){if(AU.cid){AT.cid=AU.cid;}if(AU.sourceFolderInfo){AT.sourceFolderInfo=K.wcopy(AU.sourceFolderInfo);}if(!AU.header&&AT.header){AT.header.receivedDate=AU.receivedDate;}if(AU.inReplyTo){AT.inReplyTo=AU.inReplyTo;}if(AU.mimeMsgId){AT.mimeMsgId=AU.mimeMsgId;}}!AM&&b(z,AE?AE(AT):AT,AK,AY);D(AT,AU);AL.push(K.wcopy(AT,AO));AD.push(AU);AQ.push(AX);}}else{AG.push(AW);}}if(!z){B.error(F+"set:"+Q);}for(AN=0;AN<AH.length;AN++){AI(AH[AN],AB[AN]);}if(AL.length){AC=[F+(AK?J:A),z];AC=AC.concat(AK?[AL,AP]:[AD,AL,AQ,AP]);O(AC);}return AG;}function j(AG,AC){var AB,AF,AE,z=p.sync,AA,AD;if(z[AG]&&(AE=h[AG])&&AC){for(AB=0;AB<AC.length;AB++){AF=AE[AC[AB].mid];if(AF){if(!AF.flags){AE[AC[AB].mid]=a(AG,AC[AB]);}else{AF.flags=AC[AB].flags;}}}z[AG]=0;}AA=u[AG];if(AA){for(AB=0;AB<AC.length;AB++){AD=AA[d(AC[AB].mid)];
if(AD){K.merge(AC[AB],AD,true);}}}}function T(AC,z){var AB,AA;AA=h[AC]=h[AC]||{};AB=AA[z.mid];if(AB){if(!AB.flags){AA[z.mid]=a(AC,z);}else{if(!AB.header){AA[z.mid]=z;}else{if(z.cid){AB.cid=z.cid;}if(z.receivedDate){AB.header.receivedDate=z.receivedDate;}if(z.snippet){AB.snippet=z.snippet;}AB.flags=z.flags;}}}else{AA[z.mid]=z;}}function x(AC,z){var AB,AA;AA=h[AC]=h[AC]||{};AB=AA[z.mid];if(AB){if(AB.header){if(z.cid){AB.cid=z.cid;}}}}function Y(AF,AB,AC){var AE,AA,AD,z=p.olist;AE=h[AF];if(AE&&AE[AB]){AD=AE[AB].part;if(!AC||!AD){delete AE[AB];for(AA=0;AA<z.length;AA++){if(z[AA].fid===AF&&z[AA].mid===AB){z.splice(AA,1);break;}}}}}function m(AA,AG,AD){var z,AC,AB,AF,AE=0;for(z in AG){AC=AA[z]=AG[z];if(AD&&(z in AD)){AB=AD[z];if(typeof AB==="object"){AF={};AA[z]=B.Object(AF);AE|=m(AF,AC,AB);}else{if(AC!==AB){AE=1;AA[z]=AB;}}}}for(z in AD){if(!(z in AG)){AB=AD[z];if(typeof AB==="object"){AF={};AA[z]=B.Object(AF);AE|=m(AF,{},AB);}else{AE=1;AA[z]=AB;}}}return AE;}function s(AE,AI,AL,AG){var AD,AM,AA,z=B.clone(AL,1),AC=AL.flags,AF=0,AB=E(),AK=[],AJ=[],AH=[];if(AC&&AC.isSpam){delete z.flags.isRead;}if(!I.isArray(AI)){AI=[AI];}h[AE]=h[AE]||{};for(;AF<AI.length;AF++){AM={};if((typeof AI[AF]!=="string")&&m(AM,AD=h[AE][AI[AF].mid]||AI[AF],AL)){h[AE][AD.mid]=AM;AK.push(AD);AD.flags.isRead?AJ.push(z):AJ.push(AL);for(AA in AB){AM[AA]=AB[AA];}AH.push(K.wcopy(AM,AB));}}AK.length&&O([F+A,AE,AK,AH,AJ,AG]);}function f(AG,AP,AK,AI,AL,z){var AD,AC,AM,AO,AF,AB,AQ,AA=[],AE=[],AJ=E(),AN=[],AH=0;AD=h[AG]=h[AG]||{};while((AC=AK[AH])){AM=AI[AH++];AF={mid:AM,folderInfo:{fid:AP}};AB={};m(AB,k[AC]||{},AF);AO=d(AM);if(c[AO]){c[AO].fid=AP;}delete k[AC];AB.extend={};AA.push({});for(AQ in AJ){AB[AQ]=AJ[AQ];}AE.push(K.wcopy(AB,AJ));AN.push(AF);}O([F+A,AP,AA,AE,AN,AL,AG,z]);window.CollectGarbage&&window.CollectGarbage();}function i(AB,AJ,AC,AG,z){var AH,AE,AD,AF,AO,AA,AI,AL,AK=[],AN=p.olist,AM=!AJ||I.isArray(AJ)?AJ:[AJ];if(!AB){B.error(F+"remove:"+Q);}AH=h[AB];if(!AM){delete h[AB];AE=0;while(AE<AN.length){if(AN[AE].fid===AB){AN.splice(AE,1);}else{AE++;}}}else{for(AE=0;AE<AM.length;AE++){AA=t(AM[AE]);AL=AA.mid;if((AI=AH&&AH[AL])){delete AH[AL];}for(AD=0;AD<AN.length;AD++){if(AN[AD].fid===AB&&AN[AD].mid===AL){AN.splice(AD,1);break;}}if(AI&&AI.header&&(AF=AA.header)&&(AO=AF.size)){AI.header.size=AO;}AI=AI||AA;k[AL]=AI;AK.push(AI);}}O([F+G,AB,AK.length&&AK,AC,AG,z]);}function e(z){h={};p={olist:[],max:H,sync:{}};if(z){k={};}}function X(z){w=z;}function V(AD){var AC,AA,AB,z;for(AC in h){AA=h[AC];for(AB in AA){if((z=AA[AB].extend)){delete z[AD];}}}O([F+"flushExt",AD]);}function S(z){this.mid=z;}S.prototype={flags:{},fromConnection:{},folderInfo:{},sourceFolderInfo:{},inboxservices:{},header:{from:{email:"",name:""},to:[],subject:"",subjectDir:"",xapparentlyto:"",snippet:"",externalPopServer:"",receivedDate:"",size:0},cookedHeader:{from:{email:"",name:""},to:[],subject:""}};function a(AC,AG){function AE(AJ){return(AG.mid&&l(AG.mid,AC)&&AJ.replace(/\^_/g,""))||AJ;}function AA(AJ){var AK=AJ&&AJ[0];if(AK){return{email:AK.email||AK.address||"",name:AK.name||AK.displayname||""};}return AJ;}var z,AD=0;if(AG&&AG.mid){for(z in AG){AD++;}if(AD===1){return new S(AG.mid||"");}}AG=AG||{};var AF=AG.subject||"",AI=AG.from,AH=AG.toEmail,AB={mid:AG.mid||"",cid:AG.cid||"",flags:AG.flags||{},fromConnection:AG.fromConnection||{},folderInfo:AG.folderInfo||{},sourceFolderInfo:AG.sourceFolderInfo||{},inboxservices:AG.inboxservices||{},snippet:AG.snippet||"",header:{from:AI?AA(AI):{email:"",name:""},to:[],subject:AE(AF),subjectDir:(NeoConfig.bidi&AG.subjectDir)?AG.subjectDir:"",xapparentlyto:AG.xapparentlyto||"",snippet:AG.snippet||"",externalPopServer:AG.externalPopServer||"",receivedDate:AG.receivedDate||AG.date||"",size:AG.size||0}};AB.fid=g(AG)||AC,AH&&(AB.header.to[0]={name:AH,email:""});if(AG.mimeMsgId){AB.mimeMsgId=AG.mimeMsgId;}if(AG.inReplyTo){AB.inReplyTo=AG.inReplyTo;}AB.cookedHeader={from:AI?K.escapeEmailObject(AB.header.from):"",subject:AF?K.escapeStringField(AB.header.subject):"",to:AH?K.escapeEmailObjectArray(AB.header.to):[]};return AB;}function r(AB,AA){AA=AA||{};var AC=AA?AA.header||{}:{},z={mid:AA.mid||"",cid:AA.cid||"",flags:AA.flags||{},from:AC.from||"",fromConnection:AA.fromConnection||{},folderInfo:{fid:AB||"",name:""},sourceFolderInfo:AA.sourceFolderInfo||{},toEmail:(AC.to?AC.to.name||(AC.to[0]&&(AC.to[0].name||AC.to[0].email))||"":""),subject:AC.subject||"",xapparentlyto:AC.xapparentlyto||"",externalPopServer:AC.externalPopServer||"",snippet:AA.snippet||"",receivedDate:AC.receivedDate};if(AA.inReplyTo){z.inReplyTo=AA.inReplyTo;}if(AA.mimeMsgId){z.mimeMsgId=AA.mimeMsgId;}return z;}function d(z){K.assert(I.isString(z),"assertfail:Invalid mid");if(!I.isString(z)){B.fire("MailLog",{m:"Invalid mid during getPermMidPart: "+z});return z;}return z.substr(z.lastIndexOf("_"));}function l(z,AA){return((/^1_0_/).test(z))||(AA===P);}function U(z,AB,AA,AC){return !l(z,AA)&&!l(AB,AC)&&(z!==AB)&&(d(z)===d(AB));}function o(AD,z,AC){var AA,AB=h[AD];for(AA in AB){if(!AB[AA].flags){return 0;}AB[AA].flags[z]=AC;}return 1;}function v(AF,AC){var AA,AE,AD,AB,z=p.olist;AE=AF.folderInfo.fid;AB=h[AE];if(AB){delete h[AE];AD=AC.folderInfo.fid;h[AD]=AB;for(AA=0;AA<z.length;AA++){if(z[AA].fid===AE){z[AA].fid=AD;}}}}function n(AF,AC,AH,AD){var AB,AA,AG,z,AE;if(AD===F||AD===L){return;}for(AB=0;AH&&AB<AH.length;AB++){AG=AH[AB];AA=AC[AB];z=AA.folderInfo.fid;if(!(I.isUndefined(AG.total)&&I.isUndefined(AG.unread))){AE=(AG.unread===AA.total||AG.unread===0)?(AA.unread?0:1):undefined;if(!NeoConfig.hasConvView||AE!==undefined){o(z,"isRead",AE);p.sync[z]=AE===undefined;}}if(!(I.isUndefined(AG.unread)&&I.isUndefined(AG.total)&&I.isUndefined(AG.size))){O([F+"flush",z,AH,AD]);}}}function b(AC,AA,AD,AG){var AH,AE=AA.mid,z=d(AE),AI=p.olist,AB,AF;if(AD){if(AI.length>=p.max){AH=AI.shift();K.assert(h[AH.fid]);if(h[AH.fid]){if(AH.cid&&w&&w.hit(AH.fid,AH.cid)){AB=h[AH.fid][AH.mid];if(AB){h[AH.fid][AH.mid]=r(AH.fid,AB);}}else{delete h[AH.fid][AH.mid];}}}AI.push({fid:AC,mid:AA.mid});}if(AG&&AG.charsetHint&&(AF=AA.header)){u[AC]=u[AC]||{};
u[AC][z]=AF;}h[AC][AE]=AA;c[z]=AG;}function g(z){return z.fid||z.sourceFolderInfo&&z.sourceFolderInfo.fid||z.folderInfo&&z.folderInfo.fid;}B.on(M+N,v);B.on(M+A,n);return{get:W,getAll:y,set:q,move:f,update:s,remove:i,extend:D,flush:e,flushExt:V,toMessage:a,toMessageInfo:r,getPermMidPart:d,hasMoved:U,isSearchMid:l,isCached:Z,syncHeaders:j,syncConvHeader:T,syncConvInfo:x,removeConvMsg:Y,setConvStore:X,applyDiff:m,cacheSize:function(z){!isNaN(z)&&(z>0)&&(p.max=z);},getParam:function(z){return c[d(z)];}};})()});},"1.0.0",{requires:["common-utils","json-stringify"]});

YUI.add("mail-net-transport",function(B){B.namespace("mail.net");B.mail.net.Transport=function(){var a=B.common.net,G=a.SessionMgr,Z=B.common.Utils,b=Z.rocketstats,R=a.Error,Q=G.makeFaultObject,S,Y="/jsonrpc?appid=_APPID_&m=",I="/ws/mail/v2.0"+Y,J="/ws/mailPreferences/v1"+Y,e="GetDisplayMessage",V="ListMessagesInThread",L="?appid=_APPID_",U="/ws/v3/batch"+L,W={GetUserPreferences:J,SetUserPreferences:J},F=function(f){return(/formrpc/).test(f);};function P(f,l,j){var k,m=B.JSON.stringify,g="badparam_",h,i;if(j){i=d(l);}else{delete l.api;i={"method":f,"params":[l]};}k=m(i)||"";if(!(/method/.test(k))){h=k===""?"empty_":"nomethod_";}else{if(f==="GetDisplayMessage"||f==="MoveMessage"||f==="FlagMessage"){if(!k.match(/\"mid\"/)||k.match(/\"mid\":\"\"/)||k.match(/\"mid\":\[\]/)){h="nomid_";}}}if(h){h=g+h+f;b.stat("mailnet",h);Z.assert(0,g,1,function(){if(NeoConfig.isInternal){window.alert(["Bad param sent:",f,h,"Pl. contact yahoo-mail-dev-support@yahoo-inc.com"].join(" "));}return[h,k,"params",(l?m(Z.merge({},l)):l)].join(" ");});}return k;}function X(f,h){var g;if((f==="BatchExecute"||f==="BatchExecuteGDM")&&h.call){for(g=0;g<h.call.length;g++){if("ListMessagesInThread" in h.call[g]){return true;}}}return false;}function d(l){var f,h,j,g={},k={requests:[]};for(f=0;f<l.call.length;f++){h=l.call[f];j=E(h.id,h.api,h[h.api]);g[h.id]=j;if(!h.dependency){k.requests.push(j);}}for(f=0;f<l.call.length;f++){h=l.call[f];if(h.dependency){O(g[h.id],g[h.dependency[0]],h.filter);}}return k;}function E(h,g,f){return{id:h,uri:"/ws/mail/v2.0/jsonrpc",method:"POST",payloadType:"embedded",payload:{method:g,params:[f]}};}function O(h,f,g){if(g){f.filters=g;}f.requests=parent.requests||[];f.requests.push(h);}function D(h){function i(l){var k,j={};for(k in l){if(l[k]!==undefined){j[k]=l[k];}}return j;}var g=["&o=json"],f=G.formatQueryParams(i(h),true);if(f.length){g.push("&",f);}return g.join("");}function N(i,g){function h(){var q=n.result.response,u,t,s=[],r;for(r=0;r<q.length;r++){u=q[r];if(!u.success&&!u.not_requested){if(u.not_requested){}t=u.ErrorResponse||{};t.callback=B.mix(k.batchopcbk[r]||{},{suppressCodes:k.suppressCodes,service:"mail",serviceCredType:"strict",exceptCodes:k.exceptCodes,suppressLogs:k.suppressLogs,exceptLogs:k.exceptLogs},false);t.status=500;t.fault=Q(t.code||"Server.MalformedFault",t.string,{idx:r});if(t.fault){t.fault.id=u.id||"";}s.push(t);}}return s.length&&Q("BatchItemError",null,s);}var n=g.body||{},p,o=g.fault,j=F(i.request.url),m,l=g.status,f=g.responseText||"",k=g.callback;if(NeoConfig.hasConvV3&&!B.Object.isEmpty(n)){n=B.JSON.parse(g.responseText);}if(o){if(o.code===R.parse){if(f.match(/<code>Server.ServiceTemporarilyUnavailable<\/code>/)){o.code="Server.ServiceTemporarilyUnavailable";}else{m=g.allHeadersText;m=(m.indexOf("system.hostname")>-1)?"-mail":"-unk";o.code="Server."+(o.detail.respTxt===""?"NoResponse":((p=G.isHtml(g))?"HTMLResponse":"Malformed"))+m;o.subcode=p;}}}else{if(n.error||n.fault){n=n.error||n.fault;}if(l===500){o=Q(n.code||"Server.MalformedFault",n.message,n.detail||g);g.body=n;}else{if(l===200){if(j){g.body={result:n};}else{if(k.batchopcbk){o=h();}}}}g.fault=o;}}function C(l,m,r){var h={},g,o,n,f,p=false,j=false,k=I,q=(r&&r.appid)||"YahooMailNeo";m=m||{};if(!l){throw new Error("CascadeMethod");}if(m.call){for(n=0;n<m.call.length;n++){f=m.call[n];if(f&&f.SendMessage){if(f.SendMessage.headers){h.headers=f.SendMessage.headers;delete f.SendMessage.headers;}}if(f&&(f.api||f.id)){b.stat("mailnet","api:"+(f.api||f.id));}}}else{h.headers=m.headers;delete m.headers;if(l){b.stat("mailnet","api:"+l);}}if(NeoConfig.hasConvV3){j=X(l,m);}k=j?U:I;g=h.url=(W[l]||k).replace(/_APPID_/,q)+(j?"":l);if(l===e||l===V){g=h.url=g+"&prime="+((m.prime==="Prime")?"1":"0");delete m.prime;if((l===e)&&m.message){b.stat("mailnet",((NeoConfig.hasConv)?"dmr_conv":"dmr_msg")+m.message.length);}}else{if((l==="BatchExecute"||l==="BatchExecuteGDM")&&m.call){for(n=0;n<m.call.length;n++){f=(e in m.call[n])?e:(V in m.call[n])?V:null;if(f){if((f===e)&&(m.call[n][e].message)){b.stat("mailnet",((NeoConfig.hasConv)?"dmr_conv":"dmr_msg")+m.call[n][e].message.length);}if(!p){g=h.url=g+"&prime="+((m.call[n][f].prime==="Prime")?"1":"0");p=true;}delete m.call[n][f].prime;}}}}if(F(g)){o=D(m);if((g.length+o.length)>=2048){o=null;}else{h.url+=o;}}if(!o){h.post=function(i){return P(l==="BatchExecuteGDM"?"BatchExecute":l,i||m,j);};}h.callback=K(r,l,m);h.useV3=j;return h;}function T(h,f){var g=S.format[f.callback.responseType];if(g){g(h,f);}}function c(g){var f,i,h;h=g.status;if(h===200){i=g.responseHeaders["Content-Type"].split("boundary=")[1];f=Z.parseMultiPartResponse(g.responseText,i);g.responseText=M(f);g.multipart=1;}return g;}function M(f){var o,g,m={},k,l,h,j,n;o=f&&B.JSON.parse(f);h=o.length;m={error:null,result:{response:[]}};for(l=0;l<h;l++){n=o[l];k={};if(n.ErrorResponse){j=n.ErrorResponse;k.ErrorResponse=j;}else{j=n[n.key];k[n.key]=j.result||j.error;}k.id=n.id;k.success=n.success;k.not_requested=n.not_requested||false;m.result.response.push(k);}g=B.JSON.stringify(m);return g;}function K(g,f){if(!g){g={};}B.mix(g,{responseType:"json",method:f,service:"mail",serviceCredType:"strict",formatter:S.formatter,parseMultiPartResponse:S.parseMultiPartResponse,suppressCodes:[],exceptCodes:[],suppressLogs:[],exceptLogs:[],timeout:NeoConfig.mailwstimeout},false);return g;}function H(f){return S.queue?S.queue(f):f;}S={request:function(i,j,m,k,n){var f,g=C(i,j,m),h=g.headers||{},l;f=H(G.request(g.url,g.post,g.callback,g.post?"POST":"GET",null,null,g.useV3));if(n){f.blockingRequest=n;}h.Accept="application/json, multipart/form-data";for(l in h){f.setHeader(l,h[l]);}if(k){f.send();}},formatter:T,parseMultiPartResponse:c,format:{"json":N}};return S;}();var A=B.common.persist.NeoData.get("mailnetQueue");if(A||(typeof A==="undefined")){B.use("mail-net-queue",function(){});}if(NeoConfig.enable_etp&&NeoConfig.isInternal){B.use("mail-net-diag","mail-net-ETP");}else{B.use("mail-net-diag");}},"1.0.0",{requires:["common-net-sessionmgr","json-stringify","common-persist-neo-data"]});


YUI.add("mail-net-queue",function(D){var N=D.mail.net.Transport,P=D.common.Utils,H=P.log,F=[],Q=false,J=0,A=NeoConfig.parallelRequests||false,B=false,I="mailnet:queue",G="mailnet:dequeue",L=5,S={"GetDisplayMessage":1,"GetMessage":1};function K(U,T){if(T&&U==="BatchExecute"){return false;}return !S[U];}function M(T,W){W=W||{};var U=W.method,V=/prime=0/.test(T.request.url);if(!A){Q=Q||(W.service==="mail"&&K(U,V));}}function C(T,X){var V,U=X.service==="mail"?true:false,W=A?U:U&&K(X.method);if(A&&U){J--;H("total request is "+J);}X=X||{};H("request is complete");if(W){H("Setting _serverLocked to false in _onSessionComplete");Q=false;if(F.length>0){V=F.shift();D.fire(G,V,F.length);H({m:"Dequeuing "+V.url});if(A){if(J<L){J++;H("total request is "+J);if(J===L){H("Setting _serverLocked to true in _onSessionComplete");Q=true;}H({m:"Sending the request out of the browser, _onSessionComplete",totalReq:J,serverLocked:Q});if(F.length===0){B=false;}V.send();}}else{H({m:"Sending the request out of the browser, _onSessionComplete",totalReq:J,serverLocked:Q});V.send();}}}}function R(V,U,T,W){if(W&&J>0){B=true;H("queuing because of blocking request");}if((!A&&K(U)&&(Q||F.length>0))||(A&&(Q||B)&&T==="mail")){H({m:"Queued "+U,request:V.request});F.push(V);D.fire(I,V,F.length);}else{if(A&&(T==="mail")){J++;if(J===L){Q=true;}H({m:"Sending the request out of the browser",totalReq:J,cascadeMethod:U});}V.send();}}function O(W,U){var V,T;for(V=0,T=F.length;V<T;V++){if(W.id===F[V].id){H("Abort - removed from queue "+U);F.splice(V,1);H("Dequeuing on abort "+U);D.fire(G,W,F.length,true);return;}}if(W){H("wasn't in the queue, so call abort on netobj "+U);P.rocketstats.stat("mailnet","abort:"+U);W.abort();}}function E(U){function T(V){this.send=function(){R(V,this._callback.method,this._callback.service,this.blockingRequest);};this.abort=function(){O(V,this._callback.method);};}T.prototype=U;return new T(U);}D.on("net:start",M);D.on("net:complete",C);D.on("net:abort",C);D.mix(N,{queue:E},true);},"1.0.0",{requires:["mail-net-transport"]});

YUI.add("mail-net-diag",function(A){A.namespace("mail.net");A.mail.net.Diag=function(){var G=A.JSON,C=A.common.net.Diag;function B(H){return H&&H.service==="mail";}function E(H,I){return B(I)&&{log:[D(H,I),"Request :",G.stringify(H.request).substring(0,500)].join(" ")};}function F(I,H){var O=H.callback,N,M,L,J="request.time.total";try{if(B(O)&&H.responseHeaders){N=H.responseHeaders["X-Ywsc-Debug"];N=N&&N.length?G.parse(N):{};if(!N[J]){N[J]=H.responseHeaders["X-Response-Time"];}if((L=N[J])){C.addStat("mailws","RespTime_"+O.method,N[J]);}if(L&&(L>1000)){L='<span style="color:red">'+L+"</span>";}M={log:G.stringify(N),dbgui:["ws :",(L||"X")," ms"].join("")};}}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-diag:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-diag:1");}return M||"";}function D(H,Q){function J(S){var U;try{return(U=S.postdata)&&G.parse(U).params[0];}catch(T){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-diag:2",T,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-diag:2");}}if(B(Q)){var L,O=H.request,K,P,M,R,I,N="";if((M=Q.batchop)){I="<br/> ---";N=M.join(I);}else{if(N==="ListMessages"){N=((P=O.url.match(/startInfo=(\d)+/))&&P[0]);}else{if(N==="GetDisplayMessage"&&(R=((K=J(O))&&K.message))){for(L=0;R&&L<R.length;L++){N+=" "+R[L].mid;}}}}return N;}}C.addLogger("net:start",E);C.addLogger("net:end",F);}();},"1.0.0",{requires:["common-net-diag","json-stringify","json-parse"]});

YUI.add("mail-ui-messagepane-utils",function(G){G.namespace("mail.ui.MessagePaneUtils");var H=G.mail.ui.MessagePaneUtils,C=G.common.Utils;function F(I){if(I){if(I.hRenderedEvent){I.hRenderedEvent.detach();}delete I.hRenderedEvent;}}function B(K,L){var P,Q,I,N,R,J=[],O,T,S,M=[];if(K&&!NeoConfig.targetingOptOut&&NeoConfig.intl==="us"&&!NeoConfig.partnerType){if(K.extend&&K.extend.shortcuts){P=K.extend.shortcuts.categories;if(G.Lang.isArray(P)){R=P.length;for(N=0;N<R;N++){O=P[N][0];J.push(O);}}Q=K.extend.shortcuts.annotations;for(N in Q){I=Q[N];if(I&&I.text){if(I.capAbtScore>0.5){M.push(Q[N].text);}}}}J=J.join(",");if(L!=="Draft"&&L!=="%40C%40Chats"&&L!=="Sent"){if(K.header&&K.header.from&&K.header.from.email){S=K.header.from.email.split("@");T=S[1];}else{if(K.chainedLMTMsg&&K.chainedLMTMsg.from&&K.chainedLMTMsg.from.email){S=K.chainedLMTMsg.from.email.split("@");T=S[1];}else{if(K.msgs&&K.msgs[0]&&K.msgs[0].header&&K.msgs[0].header.from&&K.msgs[0].header.from.email){S=K.msgs[0].header.from.email.split("@");T=S[1];}else{if(K.from&&K.from.email){S=K.from.email.split("@");T=S[1];}}}}}}return{category:J,domain:T,terms:M};}function E(J,L,N,K){var I,M;if(!J||(J.mid!==K)){J=C.Stopwatch.get("MsgInPreview","MsgInPreviewAbort",1);J.title="MsgInPreview Stopwatch\n";J.mid=K;J.isConv=NeoConfig.hasConvView;if(J.hRenderedEvent){J.hRenderedEvent.detach();}if(J.hMsgReadAppEvent){J.hMsgReadAppEvent.detach();}if(L){I=G.mail.model.DataStore.Folders.get(N);M=G.mail.ui.common.StringUtils.getSystemFolderName(N,I.folderInfo.name);J.hRenderedEvent=L.once("renderComplete",function(){var O;F(J);J.stop();C.Stopwatch.get("MsgInPreview",0);G.use("rocket-stats",function(Q){var P=(L.get("vertical"))?"vertpreviewMessageRead":"previewMessageRead";Q.common.Utils.rocketstats.stat(NeoConfig.hasConvView?"convread":"messageread",P);});if(NeoConfig.low_bandwidth){O="msgread_reading_pane_low";}else{if(NeoConfig.isSSL){O="msgread_reading_pane_ssl";}else{O="msgread_reading_pane";}}if(L&&L.get("active")){L.fire("darlaEvent",{action:O,value:{siteAttr:B(G.mail.model.DataStore.Messages.get(N,K),N),foldername:M}});}});}}return J;}function A(K){if(G.contacts&&G.contacts.utils&&G.contacts.api){var J=G.contacts,L=J.utils,M=J.api,I=G.common.persist.UserData;if(!K||K===""){return 1;}if(I.isUsersEmailAddress(K)||L.isEmailKnown(K,true)){return 1;}if(!L.areContactsLoaded()){M.load();return 1;}return 0;}else{return 1;}}function D(J){var I=true;if(!J){return false;}G.Array.each(J,function(K){if(K&&K.disposition==="attachment"){return;}if(K&&K.type==="text"){if(K.subtype==="plain"){I=I&&true;}else{I=I&&false;}}});return I;}G.mix(H,{getAdSiteAttribsFromMesgObj:B,handleMsgInPreviewStopwatch:E,cleanUpStopwatch:F,isKnownEmailAddress:A,plainTextMessage:D});},"1.0.0",{requires:["common-utils-stats","mail-ui-messagepane-utils-shared"]});

YUI.add("mail-ui-messagepane-utils-shared",function(B){B.namespace("mail.ui.MessagePaneUtils");var C=B.mail.ui.MessagePaneUtils;function E(R){var N="",L,Q,P,M,K=R.toLowerCase(),O;if(K.indexOf("http://")===0||K.indexOf("https://")===0||K.indexOf("ftp://")===0){return"";}if(K.indexOf("mailto:")===0){R=R.substring(7);}L=R.indexOf("?");if(L>-1){R=R.substring(0,L);}if(R&&R.length){Q=/\s*([^@ ;,<>]+@[^@ ;,<>]+\.[^@^? ;,<>]+)*/ig;P=R.match(Q);for(O=0;O<P.length;O++){M=P[O].replace(/^\s+/,"");if(M.length){N+=(N.length)?(","+M):M;}}}return N;}function J(N){var K="";if(N&&N.length){var M=/^(http:\/\/opi.yahoo.com\/online\?u=[a-zA-Z0-9.@_]+)/i,L=N.match(M);K=L?L[L.length-1]:"";}return K;}function H(N){var L="",O="";var M=N&&N.all("tt");if(M&&!M.isEmpty()){O=M.get("innerHTML").join("");}else{O=N&&N.get("innerHTML");}if(O&&O.length){O=O.replace(/&amp;/gi,"&");var K=/^(http:\/\/mrd.mail.yahoo.com\/)(\w+)\?*(.*)/i;L=O.match(K)?O:false;}return L;}function A(M){var L={},S,K,N,R,O,Q,P;if(M.extend&&M.extend.shortcuts&&M.extend.shortcuts.annotations){R=M.extend.shortcuts.annotations;S=/(day\w+)|(date\w+)|(month\w+)|(time_only)/;for(Q in R){K=R[Q];if(K&&K.type&&K.type[0]){O=K.type[0].match(S);if(O){L[Q]=R[Q];}}}L.mid=M.mid;L.fid=M.fid;}else{if(M.annotation){R=M.annotation;S=/(day\w+)|(date\w+)|(month\w+)|(time_only)/;for(Q in R){N=R[Q];O=Q.match(S);if(O){for(P=0;P<N.length;P++){L[N[P].id]=N[P];}}}L.mid=M.messageid;L.fid=M.folderid;}}return L;}function I(L,N,O){var M=N||(L&&(L.one(".tripane.content")||L.one(".message.content"))),K=M&&M.all(".yshortcuts"),P;if(NeoConfig.livewordEventEnabled&&O&&(O.extend||O.annotation)){P=A(O);}if(K){K.each(function(R){var Q=R.get("innerHTML"),V=E(Q),W,U,Y,X,T;if(V&&V.length){W=R.get("parentNode");if(W.get("tagName")==="A"&&W.hasAttribute("ymailto")){}else{U=[];U.push('<a href="mailto:'+V+'" ');U.push('target="_blank" ymailto="mailto:'+V+'" rel="nofollow">');U.push('<span id="'+R.get("id")+'" class="yshortcuts">');U.push(Q);U.push("</span></a>");Y=B.Node.create(U.join(""));try{R.replace(Y);}catch(S){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-messagepane-shared:1",S,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-messagepane-shared:1");}}}else{if(P&&P[R.get("id")]){if(R.hasAttribute("data-action")&&R.get("data-action")==="calevent"){}else{R.setAttribute("data-action","calevent");R.setAttribute("mid",P.mid);R.setAttribute("fid",P.fid);R.setAttribute("title",strings.str_msg_addevent_tooltip);R.addClass("ycalshortcuts");}}else{X=J(Q);if(X){U=[];U.push('<span id="'+R.get("id")+'" class="yshortcuts">');U.push('<img src="'+X+'" alt="'+X+'"/>');U.push("</span>");Y=B.Node.create(U.join(""));R.replace(Y);}else{T=H(R);if(T){U=[];U.push('<a href="#" target="_blank" rel="nofollow">');U.push('<span id="'+R.get("id")+'" class="yshortcuts">');U.push(Q);U.push("</span></a>");Y=B.Node.create(U.join(""));Y.setAttribute("ymrd",T);R.replace(Y);}}}}});}}function G(L){var O=L.one(".message-header"),S=O.one("h3"),T=S.one(".subanchor"),Q=S.one("span.btn"),M,N=0,P=0,U=0,R,K;if(!T){return;}B.Lang.later(0,null,function(){if(Q){U=Q.get("offsetWidth");}if(S.get("parentNode").get("parentNode").hasClass("collapsed-header")){T.setStyles({width:"auto",maxWidth:"none"});N=T.get("offsetWidth");T.setStyle("maxWidth","70%");P=T.get("offsetWidth");M=O.one(".fromto");R=NeoConfig.isRTL?"right":"left";if(P){K={};K[R]=P+U+(N>P?40:61);K.visibility="inherit";M.setStyles(K);}}else{T.setStyles({width:"auto",maxWidth:S.get("offsetWidth")-U-40});P=T.get("offsetWidth");}if(P){T.setStyle("width",P<134?P+16:P*1.12);}});}function F(M){var K=M?B.one(M).one("body"):B.one("body");if(!K.one("#copyText")){var L=500;K.append('<input type = "text" value = "" style = "opacity: 0;  filter: alpha(opacity = 0); position:absolute; width:1px; height: 1px; left:'+L+'px;" id = "copyText">');}}function D(O,M,N){var K=M?B.one(M).one("body"):B.one("body"),L=K.one("#copyText");L._node.value=O;L.setY(K.get("scrollTop")+20);L.focus();L.select();setTimeout(function(){if(N){N.focus();}},200);}B.mix(C,{extractEmailAddress:E,extractOPILink:J,extractMRDLink:H,getDateAnnotations:A,convertShortcuts:I,resizeSubject:G,initializeCopyText:F,copyToClipboard:D});},"1.0.0");

YUI.add("mail-ui-common-string-utils",function(B){B.namespace("mail.ui.common.StringUtils");var A=B.mail.ui.common.StringUtils;B.mix(A,{getSystemFolderName:function(E,C,D){switch(E){case"Inbox":if(D){return strings.str_nav_email_from_ctcts;}return strings.str_nav_inbox;case"Draft":return strings.str_nav_drafts;case"Trash":return strings.str_nav_trash;case"Sent":return strings.str_nav_sent;case"%40B%40Bulk":return strings.str_nav_spam;case"%40C%40Chats":if(NeoConfig.hasConv){return strings.str_nav_IM;}return strings.str_nav_conversations;case"%40S%40Search":return strings.str_tabs_search;}return C?decodeURIComponent(C):"";},getTabName:function(C){switch(C){case"tabcalendar":return strings.str_tabs_calendar;case"tabcontacts":return strings.str_tabs_contacts;case"tabnotepad":return strings.str_tabs_notepad;default:return"";}}});},"1.0.0",{requires:["common-utils"]});

YUI.add("mail-ui-navkeys",function(B){B.namespace("mail.ui");var A={"input":1,"textarea":1,"select":1};B.mail.ui.navKeys={charCodes:[8,27,67,69,76,77,78,83,188,191],onKeyDown:function(L){L=L||{};var F=B.mail.ui.Workspace,O=L.keyCode,P=L.metaKey,C=L.ctrlKey,I=L.altKey,D=L.shiftKey,M=L.target,E=M&&M._node?M.get("tagName").toLowerCase():"",G=F.composeFindActive(),J=B.one("#custom-folders li:hover"),N=B.one("#system-folders li:hover"),H=B.UA.os==="windows",K=B.UA.os==="macintosh";if(!(E in A)&&(!G||O===8||O===188||O===191)){if(C&&D&&O===67){B.one("body").toggleClass("l-headercollapsed");}if(C&&D&&O===77){B.one("body").toggleClass("leftrailcollpased");}if(((H&&C&&D)||(K&&P&&D))&&((O===188)||(O===191))){B.use("common-ui-dialog-helper",function(V){var T=V.common.ui.DialogHelper,R=[],Q,S,U=[];if(NeoGV.sp){U.push("SpaceId:");U.push(NeoGV.sp);U.push(" ");R.push(U.join(" "));}for(S in NeoGV.ads){if(NeoGV.ads.hasOwnProperty(S)){Q=[];Q.push("Position:");Q.push(S);Q.push(" ");Q.push("BookingID:");Q.push(NeoGV.ads[S].bookId);R.push(Q.join(" "));}}if(NeoGV.keywords){R.push("Keywords: "+NeoGV.keywords);}T.alert({modal_classes:"lg",hd:"Ad Information",bd:"<pre>"+(R.length>0?R.join("\n"):"No items to display in this view")+"</pre>"});L.preventDefault();});}if(!P&&!C&&!I){switch(O){case 8:L.preventDefault();break;case 27:L.preventDefault();break;case 78:setTimeout(function(){var Q={};B.fire("newMessage",Q);},0);L.preventDefault();break;case 77:B.fire("checkmail:pressed",L.shiftKey);break;case 83:L.preventDefault();B.use("mail-ui-searchbar",function(Q){Q.mail.ui.SearchBar.focus();});break;case 67:if(J){L.currentTarget=J;B.fire("#custom-folders.li:keydown",L);}break;case 69:if(N){L.currentTarget=N;B.fire("#system-folders.li:keydown",L);}if(J&&NeoConfig.emptyFolders){L.currentTarget=J;B.fire("#custom-folders.li:keydown",L);}break;case 191:if(D){B.use("mail-ui-shortcuts-dialog",function(Q){Q.mail.ui.ShortcutsDialog.show();});}break;default:break;}}else{if((O===69)&&D&&((!K&&C)||(K&&P))){L.preventDefault();if(L.target.getAttribute("id")==="menu-move"){B.fire("msgsview:movetonewfolder");}else{B.fire("newfolder:pressed");}}else{if((O===76)&&D&&((!K&&C)||(K&&P))){B.fire("printLog");}}}}},onKeyPress:function(D){if(B.UA.os==="macintosh"&&B.UA.gecko&&D.charCode===63){var C=D.target&&D.target._node?D.target.get("tagName").toLowerCase():"";if(!(C in A)){B.use("mail-ui-shortcuts-dialog",function(E){E.mail.ui.ShortcutsDialog.show();});}}}};},"1.0.0",{requires:["mail-controller-folders"]});

YUI.add("mail-ui-searchbar",function(A){var B=function(){var H=this,J="input.yucs-search-input",I={event:"",isSet:false};function F(){return(NeoConfig&&NeoConfig.searchField)||A.one(J);}function K(){var L=F();if(L){L.focus();}}function D(L){var M=L||F().get("value");if(I.isSet){A.fire(I.event,{query:M});}else{A.fire("search:input",{newSearch:true,query:M});}}function C(L){if(!L.mode||L.mode==="default"){I.isSet=false;I.event="";}else{I.isSet=true;I.event=L.event||"omsearch:input";}}function G(){A.on("search:config",C);A.on("fireSearch",D);var M=F();var L=(NeoConfig.searchSuggestionsEntityMatch===1);A.Global.on("ucs:verticalSearchAction",function(O){var N;NeoConfig.currentQuery=O.query;var P;if(L&&A.mail.ui.EntitySearch&&A.mail.ui.EntitySearch.findExactMatch){P=A.mail.ui.EntitySearch.findExactMatch(O.query);}if(P&&A.Tictac.contactdetails){A.fire("searchSuggestion:start",{type:"entity",id:P.id});}else{D(O.query);}A.fire("mt:click",{action:"mail_search",spid:"search_results"});N=new A.EventTarget();N.publish("ucs:mailSearch",{broadcast:2,emitFacade:true});N.fire("ucs:mailSearch");});if(M){M.on("keydown",function(N){switch(N.keyCode){case 65:if(N.ctrlKey||N.metaKey){N.stopPropagation();}break;}});}if(NeoConfig.bidi&&M){M.on("focus",function(){if(!M.bidiTextEntry&&A.Plugin.BidiTextEntry){M.plug(A.Plugin.BidiTextEntry);}});}if(strings.str_cfg_tog_show_search_desc){A.use("mail-ui-searchdesc",function(N){N.mail.ui.SearchDesc.bindSearchDesc();});}}function E(){G();}A.mix(H,{render:E,getSearchField:F,focus:K});};A.namespace("mail.ui");A.mail.ui.SearchBar=new B();},"1.0.0",{requires:["common-utils","node-pluginhost","ac-entity-search"]});

YUI.add("ac-entity-search",function(D){var E=NeoConfig.searchSuggestionsEntities||[],B=(NeoConfig.searchSuggestionsEntityMatch===1);function A(M){var L=null,H=null,G=0,I=0,K=[],J=M.toLowerCase(),F=M.length;if(B&&M.length){for(L in E){if(E.hasOwnProperty(L)){H=E[L];G=H.matchNames.length;for(I=0;I<G;++I){if(H.matchNames[I].indexOf(J)===0){K.push({data:H,highlightLen:F});break;}}}}}return K;}function C(G){var M=G.toLowerCase(),F=null,I=0,L=0,N=false,K="",H=null,J=null;if(B&&G.length){for(F in E){if(E.hasOwnProperty(F)){H=E[F];L=H.matchNames.length;for(I=0;I<L;++I){K=H.matchNames[I];if(K===M){J=H;N=true;break;}}if(N){break;}}}}return J;}D.namespace("mail.ui");D.mail.ui.EntitySearch={findPrefixMatches:A,findExactMatch:C};},"1.0.0",{requires:[]});

YUI.add("_shared_module_message_prompt",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_message_prompt={base:"<h2>{{str_msg-view_click_above}}</h2>"};},"1.0.0");

YUI.add("minty_module_comm_modes",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_comm_modes={base:'<div class="comm-modes unselectable" unselectable="on"> <h2>{{str_msg-view_click_above}}</h2> <div id="msg-preview-media-modes" class="media-modes msg-preview"> <span class="btn left right" data-action="compose"><a class="email" href="{{global_url_base}}/app/minty/compose" title="{{str_msg-view_comm_modes_email_attr}}"><i>{{str_msg-view_comm_modes_email}}</i></a></span> {{has_im}} </div></div>',has_sms:'<span class="btn left right"><a class="sms" data-action="loadContent" href="{{global_url_base}}/app/minty/conversation/?type=sms" target="dock" title="{{str_msg-view_comm_modes_sms_attr}}"><i>{{str_msg-view_comm_modes_sms}}</i></a></span> ',has_im:'{{has_sms}} <span class="btn left right" data-action="new-conv"><a class="im" data-action="loadContent" href="{{global_url_base}}/app/minty/conversation/?type=im" target="dock" title="{{str_msg-view_comm_modes_im_attr}}"><i>{{str_msg-view_comm_modes_im}}</i></a></span> '};},"1.0.0");

YUI.add("minty_module_toolbar_inbox",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_toolbar_inbox={base:'<div class="switcher shaded hidden"> <span class="btn left {{has_im_else}}" id="main-btn-new"><a title="{{compose_str}}" href="{{global_url_base}}/minty/page/compose" data-action="compose" draggable="false">{{compose_str}}</a></span>{{has_im}}</div>',has_im_else:"right",has_im:'<span class="btn right menu" id="btn-new" data-action="menu"><a href="#" title="{{str_toolbar_comp_menu_toggle_attr}}" draggable="false"><b></b></a></span>'};},"1.0.0");

window.strings=strings;};
var strings= {"str_error_title":"{{str_branding_mail}}","str_error_wstoken":"Failed to get valid web service token - reloading Y! Mail.","str_error_ydod_error":"Unable to process request at this time -- error 999.","str_error_ydod_token_link":"While this error is usually temporary, if it continues, please <a href={linkURL} target=_blank>contact us.<\/a>","str_error_ydod_title":"Your request cannot be processed.","str_error_reload_user_change":"You are no longer signed in to {{str_branding}} as '{{username}}'.&#010; This application will now close.","str_error_relogin":"Sorry, your session has expired. To protect your account, you need to confirm your password periodically.","str_error_signin":"Sign In Again","str_error_Connect":"{{str_branding_mail}} was unable to connect. Please reload the page or verify that your network connection is active.","str_branding_mail":"Yahoo! Mail","str_branding":"Yahoo!","str_error_AccountVerificationRequired":"Account verification required","str_error_BadFrom":"Missing or malformed from address","str_error_BadMime":"Mime Error","str_error_BadRecipient":"Missing or malformed recipient","str_error_BadRequest":"Bad request.","str_error_CannotSendThisMessage":"Cannot send this message.","str_error_ComposeAttachFailed":"Attaching a file Failed","str_error_ComposeError":"Compose Failed","str_error_ComposeFailed":"Sorry, but we had a problem composing your message.","str_error_ComposeNavigateAway":"You were in the middle of composing a message. You will lose your changes if you press OK.","str_error_DailyLimitExceeded":"You have reached your message sending limit for the day.","str_error_DownloadError":"Error while downloading the files.","str_error_EmptyFolderFailed":"Failed to empty folder.","str_error_FarmNameNotFound":"Sorry, but there seems to be a problem with your account. We suggest you close this window and re-launch {{str_branding_mail}}.","str_error_FolderAlreadyExists":"A folder with this name already exists.","str_error_FolderCreateFailed":"Failed to create folder.","str_error_FolderFetchFailed":"Failed fetching \"Sent\" folder.","str_error_FolderIdDoesntExist":"It looks like this folder no longer exists.. Perhaps you already deleted or renamed it in another browser window?","str_error_FolderIdIsSystemFolder":"System folders cannot be renamed or removed.","str_error_FolderListFetchFailed":"Error fetching folder list.","str_error_FolderNameIllegalCharacter":"Illegal character in folder name, only letters, numbers, dashes and underscores allowed.","str_error_FolderRemoveFailed":"Error removing folder.","str_error_GetDisplayMessageFailed":"Sorry, but we were not able to retrieve your message.","str_error_GetMessageFailed":"Error fetching emails to flag.","str_error_GetMessageInvalidId":"Sorry, but it looks like this message is not actually in your folder. Perhaps you already deleted or moved this message? Please refresh your Inbox and try again.","str_error_HourlyLimitExceeded":"You have reached your message sending limit for the hour.","str_error_HumanVerificationFailed":"Human verification failed","str_error_HumanVerificationRequired":"Human verification required","str_error_LaunchTAE":"An error occurred when trying to connect to {{str_branding}}. This error may be temporary.","str_error_ListMessagesFailed":"Looks like we had a problem getting some new messages. This may be a temporary problem. Please reconnect and try again.","str_error_MailErrorTitle":"Temporary Error","str_error_MailUnexpectedResponse":"An unexpected problem has occurred. &#010;&#010;Performing your action again in a few moments will probably solve the problem. &#010;If it persists, we suggest you close this window and re-launch {{str_branding_mail}}.","str_error_MailboxBusy":"Sorry, there was a problem accessing your Mailbox. Please try again in 10 minutes.","str_error_MailboxOpenFailed":"Failed to open mailbox","str_error_MaxBCCAddressesExceeded":"Too many recipients for Bcc field.","str_error_MaxCCAddressesExceeded":"Too many recipients for Cc field.","str_error_MaxToAddressesExceeded":"Too many recipients for To field.","str_error_MaxTotalAddressesExceeded":"Too many recipients.","str_error_MessageDeleteFailed":"Failed to delete message","str_error_MessageFetchFailed":"Failed to fetch message","str_error_MessageIdsNotFound":"Cannot flag emails that do not exist in the specified folder.","str_error_MessageNotFound":"Failed to fetch message","str_error_MessageSaveFailed":"Failed to save message","str_error_MessageSelectionNotFound":"Cannot flag emails based on a selection that does not match any emails in the folder.","str_error_MessageToLarge":"The message you tried to send was too large.","str_error_MessageTooLargeForSomeRecipients":"The message you tried to send was too large for some recipients.","str_error_MetaDataMissingPath":"Sorry, but there seems to be a problem with your account.","str_error_MissingApplicationID":"Missing or bad application ID","str_error_MissingCredentials":"Missing credentials","str_error_MissingRecipients":"No recipient set.","str_error_MoveMessagesInvalidId":"Sorry, but we were unable to access your message. Perhaps you already deleted it or moved it somewhere else? Please refresh your folder.","str_error_NicknameExpansionFailed":"Please check all email addresses. Looks like one of them may be incorrectly formatted.","str_error_NoResponse":"The response was empty","str_error_NoSenderSpecified":"Cannot save a message with no sender specified.","str_error_Offline":"Your browser may be in Offline mode. Please make sure the Work Offline option under the browser's File menu is not checked and try again. If you continue to see this error, you're probably no longer connected to the Internet. Please reconnect and try again.","str_error_OfflineTitle":"Your browser may be in Offline mode.","str_error_Print":"Print Failed","str_error_ResetSpamFilterFailed":"The operation to reset the spam filter failed.","str_error_SaveMessageFailed":"Error saving message to the \"Sent\" folder.","str_error_SendMessageFailed":"Error sending message.","str_error_SendMessageFailedForSomeRecipients":"An error occurred when sending the message to some recipients.","str_error_ServerError":"Server Error.","str_error_ServiceUnavailable":"Service Temporarily Unavailable","str_error_SetUserDataFailed":"Error saving user data.","str_error_SpamReportingFailed":"Error reporting spam.","str_error_SpamTrainingFailed":"Error training spam filter.","str_error_Timeout":"Operation timed out. Please try again. If the problem persists, please check your network connection.","str_error_TooManyCallsBatched":"Cannot batch more than 10 calls together in one single request","str_error_TooManyFolders":"Sorry, you can only create up to 497 personal folders.","str_error_TooManyMessagesRequested":"Cannot request more message bodies than are allowed to be fetched in a single call.","str_error_UnexpectedTitle":"A connection failure has occurred","str_error_Unk":"{{str_branding_mail}} was unable to connect. Please reload the page or verify that your network connection is active.","str_error_Unk_title":"Network Error","str_error_UserDataFetchFailed":"Sorry, but we were not able to fetch your user information.","str_error_UserOverQuota":"Operation failed. Account over quota.","str_error_UserPreferenceFetchFailed":"Error fetching user preferences.","str_error_UserSuspended":"Account is suspended from sending.","str_error_UserTempSuspended":"To protect you, your account has been suspended for up to 48 hours.","str_error_ab_invalid_field_data":"Please enter valid contact details, current content is too long or invalid.","str_error_ab_size_exceeded":"Cannot add contact. There are too many contacts in this address book.","str_error_add_event_problem":"Sorry, there was a problem adding the event. Please try again.","str_error_btn_reconnect":"Reconnect","str_error_btn_relaunch":"Relaunch {{str_branding_messenger}}","str_branding_messenger":"Yahoo! Messenger","str_error_catastrophic_error":"Unfortunately, you cannot connect to {{str_branding_messenger}} at this time.","str_error_code":"Error code","str_error_disconnected_error":"You have been disconnected from {{str_cfg_branding_messenger}}.","str_error_download_message_viewing_error":"Sorry, there was a problem opening the message.","str_error_download_not_scannable":"The attachment you are trying to download cannot be virus scanned.","str_error_email_address":"Please enter a valid email address format: name@domain.com.","str_error_error_searching_messages":"There was an error while searching for emails.","str_error_extFetch":"External account retrieval failed. Please go to Options and verify your information for this account.","str_error_extFetch1":"Error receiving messages from {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch2":"Error receiving messages from {{error_extFetch_email2}} and {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch3":"Error receiving messages from {{error_extFetch_email3}}, {{error_extFetch_email2}} and {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch_badFolder":"We're sorry, but we're having trouble opening up your external account {{userName}}:{{server}} to retrieve your messages. Please check your settings in Settings and try again.","str_error_extFetch_badHost":"We're sorry, but it looks like there might be something wrong with the settings of the external account {{userName}}. Please check your {{server}} in Settings and try again.","str_error_extFetch_badLogin":"It looks like there might be something wrong with the settings of this external account {{userName}}. Please check your user ID and password for this account in Settings and try again.","str_error_extFetch_badMailbox":"We're sorry, but we're having trouble opening up your external account {{userName}}:{{server}} to retrieve your messages. Please check your settings in Settings and try again.","str_error_extFetch_badMessage":"We're sorry, but we're having trouble retrieving messages from your external account  {{userName}}:{{server}}.  Please check your settings in Settings and try again.","str_error_extFetch_badPassword":"It looks like there might be something wrong with the password settings of the external account {{userName}}. Please check your password for this account in Settings and try again.","str_error_extFetch_badPort":"It seems that there was an error communicating with the external POP server {{server}}. Please check your settings for {{userName}} in Settings and try again.","str_error_extFetch_badUserId":"It looks like there might be something wrong with the settings of this external account. Please check your user ID: {{userName}} for the account {{server}} in Settings and try again.","str_error_extFetch_busy":"We're sorry, but it looks like your external account {{userName}} is busy.  Please try again shortly.","str_error_extFetch_connectionLost":"It seems that there was an error communicating with the external POP server. Please check your settings in Settings and try again.","str_error_extFetch_connectionTimeout":"A timeout occurred when attempting to reach one of your external accounts. Please verify your external account settings.","str_error_extFetch_largeMsg":"It looks like there is a really big message in this external account: {{userName}}.  Please delete the message locally and try again.","str_error_extFetch_lastUnsupported":"It seems that there was an error communicating with the external POP server {{server}}. Please check your settings in Settings and try again.","str_error_extFetch_messageBlocked":"It looks like there is a message from a blocked sender in this external account: {{userName}}.  Please delete the message locally and try again.","str_error_extFetch_quota":"It looks like you have exceeded your mailbox quota for this external account: {{userName}}.  You should delete some messages by logging into that account.","str_error_extFetch_unknownError":"It seems that there was an error communicating with the external POP server {{server}}. Please check your settings for {{userName}} in Settings and try again.","str_error_first_message":"You have reached the first message in {{folder_name}}.","str_error_flash_unavailable_body":"Your browser is blocking Flash. You must have Flash 9.0 or higher installed and unblocked to run a mail application. You can download and install the latest Flash Player <a href=\"http:\/\/get.adobe.com\/flashplayer\/\" target=\"_blank target=\"_blank\"\">here<\/a>.","str_error_folder_name_is_reserved":"That folder name is reserved, please choose a different name.","str_error_generic":"Something unexpected just happened. Please contact {{str_branding}} Customer Care if the problem persists. Here's some technical info that might help us discover more about what is going on:","str_error_generic_cc":"Something unexpected just happened. Please contact {{str_branding}} Customer Care if the problem persists.","str_error_im":"Please enter a valid IM ID.","str_error_last_message":"You have reached the last message in {{folder_name}}.","str_error_loading_failed":"Loading failed.","str_error_loading_recent_messages":"Sorry, problem loading conversation history.","str_error_logged_out":"You are no longer signed in to {{str_branding_messenger}}.","str_error_logged_out_another":"You have been signed out because you signed in on a different computer or device.","str_error_messenger_load_failure":"Sorry, but {{str_branding_messenger}} is currently unavailable. Please try again later.","str_error_messenger_loading":"{{str_branding_messenger}} is currently loading.","str_error_msg_diff_folder":"The selected message is now in the {{foldername}} folder.","str_error_msg_diff_folder_link":"Click here to switch to the {{foldername}} folder.","str_error_msg_diff_folder_switch":"This message has been moved to <a href=\"#\" class=\"switchFolder\" sourceFolder=\"{{newFid}}\">{{foldername}}<\/a>.","str_error_msg_load":"We\u2019re sorry, but there appears to be a problem loading the message \"{{subject}}\".","str_error_msg_load_click_me":"Click here to try again.","str_error_msg_load_slow":"We\u2019re sorry, but your message is taking longer than normal to display.","str_error_no_body_returned":"Looks like we were unable to load your message.","str_error_phone_number":"Please enter a valid phone number format: ###-###-####.","str_error_recent_messages_empty":"You have no recent conversations with {{contact}}.","str_error_reconnected_message":"You have successfully signed in.","str_error_redirect_auth":"Authentication may be required to continue. Please refresh your browser and come back here to try again.","str_error_redirect_authtitle":"Authentication redirect. Please refresh","str_error_reload_account_migrated":"Due to routine server maintenance, {{str_branding_mail}} must now reload. We apologise for any inconvenience this may cause.","str_error_replace":"Please enter a valid error string here.","str_error_uploadNumFiles":"You have reached the 50 attachment limit for this message.","str_error_yid_collision_error":"This {{str_branding_messenger}} ID already belongs to someone else in your Contacts. Please try again.","str_error_yid_no_info_error":"Please enter some information for this contact.","str_ok":"OK","str_btn_close":"Close","str_btn_cancel":"Cancel","str_modal_tabdeactivate_title":"Confirm Application Switch","str_modal_tabdeactivate_body":"Switching away from this application will cause you to lose your data and\/or actions.  Proceed?","str_nav_conversations":"Conversations","str_nav_drafts":"Drafts","str_folder_reserved_inbox":"Inbox","str_folder_reserved_conversations":"Conversations","str_folder_reserved_drafts":"Drafts","str_folder_reserved_sent":"Sent","str_folder_reserved_spam":"Spam","str_folder_reserved_trash":"Trash","str_folder_reserved_search":"Search","str_folder_reserved_inbox_lower":"inbox","str_folder_reserved_conversations_lower":"conversations","str_folder_reserved_drafts_lower":"drafts","str_folder_reserved_sent_lower":"sent","str_folder_reserved_spam_lower":"spam","str_folder_reserved_trash_lower":"trash","str_folder_reserved_search_lower":"search","str_folder_reserved_inbox_upper":"INBOX","str_folder_reserved_conversations_upper":"CONVERSATIONS","str_folder_reserved_drafts_upper":"DRAFTS","str_folder_reserved_sent_upper":"SENT","str_folder_reserved_spam_upper":"SPAM","str_folder_reserved_trash_upper":"TRASH","str_folder_reserved_search_upper":"SEARCH","str_close":"Close","str_nav_email_from_ctcts":"Email from Contacts","str_nav_inbox":"Inbox","str_nav_trash":"Trash","str_nav_sent":"Sent","str_nav_spam":"Spam","str_nav_IM":"Instant messages","str_tabs_search":"Search","str_tabs_calendar":"Calendar","str_tabs_contacts":"Contacts","str_tabs_notepad":"Notepad","str_msg-view_btn_hidepreview":"Hide Preview","str_msg-view_btn_showpreview":"Show Preview","str_nav_left_checkmail_account_attr":"Check {{mailbox_pretty_name}} for new emails  [M]","str_nav_left_checking_mail":"Checking...","str_tabs_inbox":"Inbox","str_tabs_drafts":"Drafts","str_tabs_sent":"Sent","str_tabs_spam":"Spam","str_tabs_conversations":"CONVERSATIONS","str_tabs_trash":"Trash","str_nav_left_folders_collapsed_attr":"Click to show folders","str_nav_left_folders_expanded_attr":"Click to hide folders","str_nav_inbox_unread_attr":"{{inbox_unread_cnt}} unread emails","str_nav_draft_attr":"{{str_nav_drafts}} - 1 draft","str_nav_drafts_attr":"{{str_nav_drafts}} - {{inbox_unread_cnt}} drafts","str_nav_conv_attr":"1 conversation","str_nav_convs_attr":"{{conv_cnt}} conversations","str_email_cnt_one":"email","str_email_cnt_multi":"emails","str_nav_folder_email_cnt":"{{total_cnt}} {{email_str}}","str_nav_folder_unread_cnt":"{{unread_cnt}} unread","str_page_title_unread":"({{unread_cnt}} unread) - {{title}} - {{str_branding_mail}}","str_page_title":"{{title}} - {{str_branding_mail}}","str_nav_email_from_ctcts_attr":"Emails only from Contacts; {{email_ctcts_cnt}} emails","str_ctrl":"Ctrl","str_enter":"Enter","str_ctrl_shift":"Ctrl+Shift","str_ctrl_alt":"Ctrl+Alt","str_right_click":"right-click","str_nav_left_folders":"Folders","str_tog_loadRTLCss":false,"str_modal_pagination_change":"In order to change this setting, {{str_branding_mail}} will refresh when you click Save. Any mail messages you're currently writing will be saved as drafts.","str_tabs_compose_fresh":"New Message","str_msg-view_tab_no_subject":"Message","str_convs_callout_multitask":"Quickly get to your recent emails, drafts and searches.","str_tabs_learn_more":"Learn more","str_tabs_callout_title":"Shhhhhhh...","str_tabs_callout_intro":"Tabs are back!","str_tabs_callout_steps":"Turn them on here.","str_comp_reply_from":"From:","str_comp_reply_to":"To:","str_comp_reply_date":"Sent:","str_comp_reply_subject":"Subject:","str_comp_reply_cc":"Cc:","str_comp_reply_fwdHeader":"----- Forwarded Message -----","str_comp_reply_origHeader":"----- Original Message -----","str_comp_reply_short":"On {{date_data}}, {{from_data}} wrote:","str_delete_conv_attr":"Delete selected conversations  [Delete]","str_delete":"Delete","str_move_conv_attr":"Move selected conversations to a folder  [D]","str_move":"Move","str_actions_conv_attr":"More actions for selected conversations","str_more":"More","str_previous_attr":"View next email up [Ctrl+].","str_next_attr":"View next email down [Ctrl+].","str_srch_back":"Back to Search results","str_srch_result":"Search results","str_spam_attr":"Move selected emails to Spam folder","str_spam":"Spam","str_menu_spam_toggle_attr":"More Spam Options","str_spam_conv_attr":"Move selected conversations to Spam folder","str_reply_attr":"Reply to sender [R]","str_reply_all_attr":"Reply to all  [A]","str_forward_attr":"Forward this email \u00a0[F]","str_collapse_all_attr":"Collapse message cards","str_collapse_all":"Collapse message cards","str_reply_to_conv_attr":"Reply to conversation  [A]","str_forward_conv_attr":"Forward this conversation  [F]","str_uh_searchmail":"Search Mail","str_tog_sendFeedbackEnabled":true,"str_modal_mail_preveiw":"Please Give Us Your Feedback","str_modal_mail_preveiw_reason":"Thank you for trying the latest version of {{str_branding_mail}}. Your feedback will help us make it better for you. Please tell us why you are switching. Check all that apply:","str_modal_mail_preveiw_reason_reliability":"Reliability or stability concerns","str_modal_mail_preveiw_reason_features":"Missing features","str_modal_mail_preveiw_reason_other":"Other","str_modal_mail_preveiw_reason_speed":"Speed or load time","str_modal_mail_preveiw_reason_readiness":"Not ready to switch","str_modal_mail_preveiw_feedback":"Additional feedback:","str_modal_mail_preveiw_feedback_contact":"It's OK to contact me about my feedback.","str_btn_continue_attr":"Continue","str_btn_continue":"Continue","str_menu_help":"Help","str_menu_privacy_policy":"Privacy","str_menu_tos":"Terms","str_menu_themes":"Themes","str_menu_options":"Settings","str_menu_calendar_options":"Calendar Options","str_menu_mail_plus":"Mail Plus","str_menu_adfree_mail":"Ad-free Mail","str_menu_switch_full_mail":"Show Full Features","str_uh_send_feedback_attr":"Send feedback to {{str_branding_mail}}","str_uh_send_feedback":"Send Feedback","str_ovi_uh_support_ovi_terms":"Nokia Terms","str_menu_about_our_ads":"About our Ads","str_msg_list_loading_ims":"Loading instant messages...","str_msg_list_loading_conversation":"Loading conversations...","str_msg_list_loading":"Loading email...","str_inf_scroll_one_new_msg":"1 new message!","str_inf_scroll_new_msgs":"{{msg_count}} new messages!","str_msg_list_info-replied":"Replied","str_msg_list_info-forwarded":"Forwarded","str_msg_list_info-unread":"Unread","str_msg_list_info-certified":"Certified","str_msg_list_info_verified_attr":"This is a verified message from {{str_branding}}","str_msg_list_checkbox_label":"Message {{messagenumber}}","str_mas_to_srch_attr":"Search for messages to this recipient","str_mas_frm_srch_attr":"Search for messages from this sender","str_tog_dateformat_messagelist_timeonly_l10n":"{H}:{mm}","str_tog_dateformat_header_long_l10n":"{E}, {d} {MMM} {yyyy} at {H}:{mm}","str_msg-view_no_subject":"[No Subject]","str_comp_nosubject":"No Subject","str_msg_list_message_preview_attr":"Double-click to open this message in a new tab","str_msg_list_message_full_attr":"Click to open this message in a new tab","str_msg_selected":"{{num_selected_msgs}} selected","str_msg_list_sorting":"Sorting email...","str_menu_sort_by_sender":"Sender","str_menu_sort_by_recipient":"Recipient","str_menu_sort_subject":"Subject","str_menu_sort_date":"Date","str_menu_sort_unread":"Unread","str_menu_sort_attach":"Attachments","str_menu_sort_flagged":"Starred","str_menu_sort_conv":"Show as Conversations","str_menu_cbox_all":"All","str_menu_cbox_none":"None","str_menu_cbox_unread":"Unread","str_menu_cbox_read":"Read","str_menu_cbox_flagged":"Starred","str_menu_cbox_unflagged":"Unstarred","str_msg_list_select_all_msgs_attr":"Select or deselect all messages [{{str_ctrl}}+A]","str_msg_list_first":"First Page","str_msg_list_previous":"Previous Page","str_msg_list_page_info_noclick":"Page {{current}} of {{total}}","str_msg_list_next":"Next Page","str_msg_list_last":"Last Page","str_msg_list_flagged_attr":"Click to unstar this email","str_msg_list_flag_attr":"Click to mark as important","str_msg_list_flagged":"This email is starred.","str_msg_list_not_flagged":"This email is not starred.","str_msg_list_has_attachments":"This message has attachments.","str_msg_list_checkbox_attr":"Select this email","str_delete_single_email_attr":"Delete this message  [Delete]","str_mas_sbjct_srch_attr":"Search for messages with this subject","str_msg_list_loading_error":"There appears to be a problem loading the message list.","str_msg_list_retry":"Click to retry","str_retry":"Retry","str_toolbar_first":"Go to the first page","str_toolbar_next":"Go to the next page.","str_msg_list_next_up":"NEXT PAGE","str_load_more":"Load More","str_msg_list_sort_by":"SORT BY {{sorted_by}}","str_themes_callout_description":"Go here to change your Theme at any time.","str_search_discovery":"Looking for something? Try searching for it!","str_me":"Me","str_tog_showFirstAsFriendlyName":true,"str_draft_label":"Draft","str_msg_list_attachments":"Attachments","str_msg_list_attachments_attr":"This email has {{msg_num_attachments}} attachments.","str_msg_list_attachments_size":"Size","str_msg_list_column_attachment_attr":"Click to sort by emails with attachments","str_msg_list_column_date_attr":"Click to sort by date","str_msg_list_column_flag_attr":"Click to sort by starred messages","str_msg_list_column_fldr_attr":"Click to sort by Folder name","str_msg_list_column_from_attr":"Click to sort by sender","str_msg_list_column_info_attr":"Click to sort by unread messages","str_msg_list_column_mailbox_attr":"Click to sort by mailbox; click again to reverse sort.","str_msg_list_column_participant_attr":"Click to sort by participant","str_msg_list_column_size_attr":"Order emails by attachment size (largest-smallest); click again to reverse order.","str_msg_list_column_subject_attr":"Click to sort by subject","str_msg_list_column_to_attr":"Order emails by recipient (A-Z); click again to reverse order.","str_msg_list_convflag_attr":"Click to mark as important","str_msg_list_convflagged":"This conversation is starred","str_msg_list_convflagged_attr":"Click to unstar this conversation","str_msg_list_date":"DATE","str_msg_list_datetime":"DATE \/ TIME","str_msg_list_emptyfolder":"There are no messages in your {{foldername}} folder","str_msg_list_flag":"Star this email","str_msg_list_folder_name":"FOLDER","str_msg_list_from":"FROM","str_msg_list_header":"Email Messages","str_msg_list_list":"CALENDAR \/ LIST","str_msg_list_load_next_messages":"Load next 500 messages","str_msg_list_load_next_messages_attr":"Control how your messages are displayed in the Viewing Email section of Settings","str_msg_list_location":"LOCATION","str_msg_list_mailboxes":"Mailboxes","str_msg_list_not_convflagged":"This conversation is not starred","str_msg_list_page_info":"Page {{current}} of {{total}}. Click for more options.","str_msg_list_participant":"PARTICIPANT","str_msg_list_sort_by_attr":"Click to select sorting method","str_msg_list_subject":"SUBJECT","str_msg_list_time":"TIME","str_msg_list_title":"TITLE","str_msg_list_to":"TO","str_msg_list_type":"TYPE","str_thread_nopreview":"Snippet unavailable","str_delete_single_conv_attr":"Delete this conversation  [Delete]","str_convs_callout_description":"Messages and replies are grouped together with the most recent message at the bottom.","str_convs_settings_link":"Turn conversations on or off in <a class=\"settings\" href=\"#\">{{str_convs_settings_str}}<\/a>","str_convs_settings_str":"settings.","str_tabs_compose":"New Email","str_comp_title_saveasdraftfailmultiple":"Problem Saving Drafts","str_comp_saveasdraftfailmultiple":"Sorry, one or more of your drafts failed to save.  Continue?","str_msg_welcome":"Select a message to view","str_msg-view_click_above":"Choose your favourite way to communicate.","str_conv_deleted_error":"This conversation has either been moved to the Spam folder or has been permanently deleted","str_msg_deleted_error":"This message has either been moved to the Spam folder or has been permanently deleted","str_comp_loading_error_perm":"Sorry, we're having problems loading this message.  Please <a href=\"{{str_cfg_url_yahoo_mail_help_tae45}}\" target=\"_blank\">view our help site<\/a> to learn how to contact us to report this error.<p>Error code: {{msg_fail_tae_code}}<\/p>","str_comp_multi_retry":"Sorry, we're still having problems loading this message. This is probably a temporary issue due to a connection problem or an email with large attachments.  Check your connection and try again, or come back again shortly.<p>If you're still seeing this error, visit <a href=\"{{str_cfg_url_yahoo_mail_help}}\" target=\"_blank\">Help<\/a> for troubleshooting instructions or to contact us.<\/p><p>Error code: {{msg_fail_tae_code}}<\/p>","str_comp_loading_error":"We\u2019re sorry, but there appears to be a problem loading the email \"{{msg_subject}}\".","str_try_again":"Try Again","str_comp_loading_msg":"Loading email, please wait...","str_comp_loading_conv":"Loading conversation, please wait...","str_comp_slow_loading":"Loading is taking longer than usual.","str_comp_label_to_fresh":"To","str_hdr_more_recipients":"and {{num_more_recipients}} More...","str_draft":"DRAFT","str_msg_view_heading_blocked_images":"This message contains blocked images.","str_msg_view_btn_show_images_attr":"Show Images","str_msg_view_btn_show_images":"Show Images","str_msg_view_btn_options_attr":"Modify Spam Options","str_msg_view_btn_options":"Change this setting","str_qtd_expand":"Show message history","str_msg_view_msg_truncated":"This message has been truncated.","str_msg_view_btn_view_full":"Show Full Message","str_reply":"Reply","str_reply_all":"Reply to All","str_forward":"Forward","str_reply_options":"<a href=\"#\" data-action=\"reply_sender\">Reply<\/a>, <a href=\"#\" data-action=\"reply_all\">Reply All<\/a> or <a href=\"#\" data-action=\"forward\">Forward<\/a>","str_btn_lozenge_attr":"{{msg_to_address}}","str_supercollapsed_show":"{{collapsed_msg_count}} more messages","str_previous_conv_left":"Previous Conversation [left arrow]","str_next_conv_right":"Next Conversation [right arrow]","str_msg-view_message_header":"Message header","str_rte_attachments_attach_files":"Looking to attach photos & documents?","str_rte_attachments_drag_files":"Drag multiple files into this viewing pane.","str_btn_retry_file_attr":"Retry file upload","str_btn_remove_file_attr":"Remove this attachment","str_rte_attachments_error_mult":"{{num_error_files}} files cannot be sent.","str_rte_attachments_error_single":"1 file cannot be sent.","str_comp_av_norton_attr":"Go to the Norton AntiVirus site","str_comp_attach_singular":"Attach file","str_comp_attach_menu_title_fresh":"Attachment Options","str_comp_attach":"Attach Files","str_rte_attachments_basic_message":"Trouble uploading?","str_rte_attachments_basic_link_text":"Try our Basic Uploader","str_rte_underline_attr":"Underline","str_rte_right_to_left":"Right to left","str_rte_left_to_right":"Left to right","str_rte_check_spelling_attr_fresh":"Check Spelling","str_toolbar_spelling_menu_toggle_attr_fresh":"Language Options","str_comp_font_menu_attr_fresh":"Font","str_rte_bold_attr":"Bold","str_rte_italic_attr_fresh":"Italic","str_rte_color_attr_fresh":"Text Colour","str_rte_link_attr_fresh":"Insert Link","str_comp_emoticons":"Emoticons","str_rte_richtext":"Switch to Rich Text","str_rte_plaintext":"Switch to Plain Text","str_comp_click_replyall":"Click to Reply All","str_comp_attach_removeall":"Remove All","str_rte_attachments_num_files":"{{file_attach_num_files}} Files","str_rte_attachments_sizes":"({{transferred_size}} of {{total_size}})","str_comp_send_attr":"Send this email [{{str_ctrl}}+Enter] | Send this message and keep existing draft [{{str_menu_accel_shift_click}}]","str_comp_send":"Send","str_menu_accel_shift_click":"Shift+click","str_msg-view_comm_modes_email_attr":"Compose an email","str_msg-view_comm_modes_email":"Email","str_msg-view_comm_modes_sms_attr":"Compose an SMS","str_msg-view_comm_modes_sms":"SMS","str_msg-view_comm_modes_im_attr":"Compose an instant message","str_msg-view_comm_modes_im":"Instant Message","str_msg_addevent_tooltip":"Add an event on this date","str_not_spam_attr":"Remove spam classification and move back to Inbox","str_not_spam":"Not Spam","str_cfg_sc_keycode_reply_to_all":"65","str_cfg_sc_keycode_message_forward":"70","str_cfg_sc_keycode_movemenu_display":"68","str_cfg_sc_keycode_mark_as_read":"75","str_cfg_sc_keycode_flag_selected_messages":"76","str_cfg_sc_keycode_reply_to_sender":"82","str_cfg_sc_keycode_print":"80","str_cfg_sc_keycode_toggle_preview_pane":"86","str_cfg_sc_keycode_close_tab":"220","str_tog_use_num_accel":true,"str_view_conv_attr":"More view options","str_view":"View","str_random1_section1":"Preview your Mail!","str_random1_section2":"Enjoy reading through emails without leaving your Inbox.","str_random1_action":"Pick a Preview pane","str_folder_empty":"There are no emails in your {{folder_name}} folder.","str_menu_reply_im":"Reply via Instant Message","str_menu_accel_shift_i":"Shift+I","str_actions":"Actions","str_toolbar_reply_menu_toggle_attr":"Choose from different ways to reply","str_toolbar_reply_menu_toggle":"Reply","str_action_edit_draft_attr":"Open selected email in a tab to edit  [{{str_enter}}]","str_action_edit_draft":"Edit Draft","str_msg-view_btn_togglepreview_attr":"Switch View","str_msg_view_photo_attachment_attr":"View {{filename}}","str_photos":"Photos","str_msg_view_btn_download_all":"Download All","str_msg_view_attachment_attr":"Virus scan and download {{filename}}","str_msg_view_heading_attachments":"Attachments","str_msg_hdr_btn_more_attr":"See the additional recipients","str_msg_hdr_btn_more_to":"{{has_more_to}} More...","str_previous_left":"Previous Message [left arrow]","str_next_right":"Next Message [right arrow]","str_btn_from_lozenge_attr":"{{msg_from_address}}","str_msg-view_message_body":"Message Body","str_msg_view_markasunread_attr":"Click to mark as unread","str_msg_view_markasread_attr":"Click to mark as read","str_nav_left_untitled":"Untitled","str_toolbar_comp_menu_toggle_attr":"Start a new IM","str_move_attr":"Move selected emails to a folder [D]","str_delete_email_attr":"Delete selected emails  [Delete]","str_actions_email_attr":"More actions for selected emails","str_msg-view_hd_modal":"Switch View","str_show_message_view_options":"Show Message View Options","str_nav_folder_addfolder_attr":"Add a new folder [{{str_ctrl_shift}}+E]","str_nav_left_addfolder":"Add folder","str_galaxy_friends_invited":"Added","str_galaxy_friends_inviteFailed":"Invite friends failed","str_galaxy_friends_added":"Confirmed!","str_galaxy_friends_acceptInviteFailed":"Confirm failed","str_galaxy_vitality_shortTimeAgo":"a short time ago","str_galaxy_profile_status_addAppError":"It seems that you have already linked your account, or this service is temporarily unavailable.","str_galaxy_status_loading":"Loading...","str_base_lang":"en-gb"};
Neo.mix(strings, {"str_cfg_adfree_price":"&#163;29.99","str_cfg_base_intl":"uk","str_cfg_beacon_cg_upsel_no":"2145321915","str_cfg_beacon_def_mig_no":"2145321920","str_cfg_bucketPercentSSL":"25","str_cfg_captcha_maxlength":"10","str_cfg_dm_feed_path":"\/d\/search\/p\/yahoo\/mail_js\/v4\/","str_cfg_dm_proxy_prefix":"\/dm","str_cfg_dm_source_tag":"","str_cfg_fr_code":"ush-mailn","str_cfg_intl":"uk","str_cfg_lrec_min_req_win_width":"1360","str_cfg_overview_page_url_trap":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com","str_cfg_partner":"yahoo","str_cfg_regex_yahoo_link":"","str_cfg_tog_MP_upsell":true,"str_cfg_tog_aboutOurAdsEnabled":true,"str_cfg_tog_accnt_user_color":false,"str_cfg_tog_ad_positions_disable":"","str_cfg_tog_ads_mip4_nonsocial_show_l10n":true,"str_cfg_tog_ads_mip4_show_l10n":true,"str_cfg_tog_ads_mip5_show_l10n":false,"str_cfg_tog_ads_mip6_show_l10n":true,"str_cfg_tog_always_show_sky":false,"str_cfg_tog_birthday_eCard_url_toggle_l10n":false,"str_cfg_tog_button_context":false,"str_cfg_tog_calendarEnabled":true,"str_cfg_tog_certified_icon":true,"str_cfg_tog_check_active_compose":false,"str_cfg_tog_composeSMSEnabled":false,"str_cfg_tog_compose_enable_nickname":false,"str_cfg_tog_config_enable_statusomatique_l10n":false,"str_cfg_tog_config_useAdServedNews_l10n":false,"str_cfg_tog_contact_field":"name,email,nickname,yahooid,phone,otherid,guid","str_cfg_tog_contact_sortfields":"first","str_cfg_tog_cue_import_contact":true,"str_cfg_tog_cue_mail_on_mobile":true,"str_cfg_tog_cue_pulse_profile_page":true,"str_cfg_tog_disableBuddyAdd":false,"str_cfg_tog_disableCopyrightLink":false,"str_cfg_tog_disable_livewords":false,"str_cfg_tog_dm_source_tag":"yahoo_mail_mailbox_search","str_cfg_tog_dm_tall_source_tag":"yahoo_mail_mailbox_tall_search","str_cfg_tog_edit_draft_from_search":false,"str_cfg_tog_empty_folders":false,"str_cfg_tog_enableFacebook":true,"str_cfg_tog_enableMultilang":false,"str_cfg_tog_enableSSLBucket":false,"str_cfg_tog_enableTwitter":true,"str_cfg_tog_enableUh2":true,"str_cfg_tog_enable_steroids":false,"str_cfg_tog_enable_updates":true,"str_cfg_tog_enable_wsky":true,"str_cfg_tog_exlink_alert_page":false,"str_cfg_tog_expandPersonalFolders":false,"str_cfg_tog_ext_accnt_expand":false,"str_cfg_tog_faviconName":"favicon-yhoo.ico","str_cfg_tog_faviconNameFresh":"favicon-fresh-107777.ico","str_cfg_tog_faviconNameFresh_HD":"favicon-fresh-hd-107777.ico","str_cfg_tog_faviconName_HD":"favicon-yhoo-hd.ico","str_cfg_tog_featureCue_endDate_l10n":"04\/22\/2010","str_cfg_tog_featureCue_startDate_l10n":"03\/19\/2010","str_cfg_tog_flag_spam_on_move":false,"str_cfg_tog_full_ssl":true,"str_cfg_tog_hasGoMobileLink":true,"str_cfg_tog_hasIM":true,"str_cfg_tog_hasSMS":false,"str_cfg_tog_hasUnlimitedStorage":true,"str_cfg_tog_has_adfree_mail":false,"str_cfg_tog_help_community":true,"str_cfg_tog_hide_RECAd":true,"str_cfg_tog_hide_tocc_info":false,"str_cfg_tog_hkr_siu":false,"str_cfg_tog_insert_signature_bottom":false,"str_cfg_tog_mailBlogEnabled":true,"str_cfg_tog_mailSearchEnabled":true,"str_cfg_tog_mailUpgradeEnabled":true,"str_cfg_tog_monster_ad_empty_l10n":true,"str_cfg_tog_monster_ad_send_l10n":true,"str_cfg_tog_msgListColorIndic":false,"str_cfg_tog_newsModuleEnabled":true,"str_cfg_tog_news_body_enabled_l10n":true,"str_cfg_tog_news_header_enabled_l10n":true,"str_cfg_tog_notepadEnabled":true,"str_cfg_tog_old_imageblock":false,"str_cfg_tog_open_by_dblclick":false,"str_cfg_tog_optout_return_to_original":false,"str_cfg_tog_preserve_msglist_scroll":false,"str_cfg_tog_rec_pos_on_empty_folder":false,"str_cfg_tog_renderExternalAccounts":false,"str_cfg_tog_replace_sender_icon":false,"str_cfg_tog_search_expand_date":false,"str_cfg_tog_sendconfirm_keep_draft":false,"str_cfg_tog_set_spam_read_flag":true,"str_cfg_tog_showMobilizer":true,"str_cfg_tog_showMyYahooMenu":true,"str_cfg_tog_showStationaryEnabled":true,"str_cfg_tog_showThemeOption":true,"str_cfg_tog_showTos":true,"str_cfg_tog_showUsageMeter":false,"str_cfg_tog_show_contact_name":false,"str_cfg_tog_show_dk":false,"str_cfg_tog_show_mp_in_product_link":true,"str_cfg_tog_show_search_desc":false,"str_cfg_tog_simple_add_contact_dialog":false,"str_cfg_tog_sky_pos_fixed":true,"str_cfg_tog_snippet_highlight":true,"str_cfg_tog_themeOverrideEnabled":false,"str_cfg_tog_theme_cancel":false,"str_cfg_tog_timed_alert_dialog":false,"str_cfg_tog_toolbarTrapPageEnabled":false,"str_cfg_tog_trendingNowEnabled":false,"str_cfg_tog_trendingNowEnabledUH":false,"str_cfg_tog_uhShowReturnToOriginal":false,"str_cfg_tog_ulm_locale_l10n":"en-GB","str_cfg_tog_unescape_ncr":false,"str_cfg_tog_use_accountbased_signature ":false,"str_cfg_tog_use_ctc_details_link":false,"str_cfg_tog_use_default_fromname":true,"str_cfg_tog_use_reedit":false,"str_cfg_tog_use_roundtrip":true,"str_cfg_tog_weather_default_temp_units_l10n":"C","str_cfg_tog_weather_detailedForecast_toggle_l10n":true,"str_cfg_tog_weather_weatherURL_toggle_l10n":true,"str_cfg_tog_ybox_enabled":false,"str_cfg_tog_ycw_turn_on_fb":true,"str_cfg_tog_ycw_turn_on_tw":true,"str_cfg_url_TAEHelpPages":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/taes\/","str_cfg_url_abhost":"uk.address.yahoo.com","str_cfg_url_abhost_api":"api.address.yahoo.com","str_cfg_url_about_adchoices":"http:\/\/info.yahoo.com\/privacy\/us\/yahoo\/relevantads.html","str_cfg_url_about_adchoices_icn":"https:\/\/s.yimg.com\/hl\/a\/optimized\/adchoice_1.png","str_cfg_url_about_our_ads":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/relevantads.html","str_cfg_url_account":"http:\/\/edit.yahoo.com\/config\/eval_profile?.done=http:\/\/uk.mail.yahoo.com\/","str_cfg_url_activex_link":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/yahoo\/mail\/yahoomail\/settings\/settings-28.html","str_cfg_url_ad_opt_out":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/yahoo\/opt_out\/targeting\/details.html","str_cfg_url_address":"http:\/\/uk.address.yahoo.com","str_cfg_url_adfree_manage":"http:\/\/billing.yahoo.com","str_cfg_url_adfree_payment":"https:\/\/wallet.secure.yahoo.com\/ec\/place_order","str_cfg_url_adfree_payment_params":"?.params=eJxdi0sKAjEQBU_T.3zWLgTvITHp0TD5GTtCbj9PHRHcNFX16Nb5bg7nJ9mTJaWjAN6mSdkYADMrg6WtV8hYyR5nxnFh6cwYLg59GSkVlxlIyjwEk6RYWP8H8wk.yvxOTva3ViHJ17C7r6NIn7_QbrW8cANoRTfl&.psig=TjIZyowWVajsrncqX19HWA--&.intl=uk&.lang=","str_cfg_url_adfree_payments_faq":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale=en_GB&id=SLN15967&actp=productlink","str_cfg_url_antispam":"","str_cfg_url_arc_help":"http:\/\/arc.help.yahoo.com\/arc\/","str_cfg_url_attbrowseatoz":"http:\/\/elportal.att.net\/s\/s.dll?ep=10111&ch=wd&_lid=135&_lnm=home.channelNav.att.webdirectory","str_cfg_url_attcom":"http:\/\/att.com\/","str_cfg_url_attmyaccount":"http:\/\/att.yahoo.com\/myaccount","str_cfg_url_attnet":"http:\/\/elportal.att.net\/","str_cfg_url_attspanish":"http:\/\/www.att.net ","str_cfg_url_attsupport":"http:\/\/www.att.com\/esupport\/","str_cfg_url_birthday_eCard_url":"http:\/\/www.yahoo.americangreetings.com\/ecards\/yahoomail.pd?source=yahoo209","str_cfg_url_bizmail":"http:\/\/smallbusiness.yahoo.com","str_cfg_url_bk_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/context\/migrationv2.html","str_cfg_url_calendar":"http:\/\/uk.calendar.yahoo.com","str_cfg_url_captcha":"http:\/\/www.captcha.net","str_cfg_url_captcha_need_help_URL":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/context\/context-14.html","str_cfg_url_china_eol_new_domain_reg":"http:\/\/help.cn.yahoo.com\/answerpage_3983.html","str_cfg_url_clear_cache_cookie":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/yahoo\/mail\/ymail\/settings\/settings-15.html","str_cfg_url_cn_eol_help":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale=en_US&id=SLN14752","str_cfg_url_cn_eol_ymail_acct_reg":"https:\/\/edit.yahoo.com\/registration?.intl=us&new=1&.done=http:\/\/mail.yahoo.com&.src=ym","str_cfg_url_cn_eol_ymail_acct_reg_instruction":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale=en_US&id=SLN14756","str_cfg_url_communications_terms_of_service":"http:\/\/info.yahoo.com\/legal\/uk\/yahoo\/mail\/atos.html","str_cfg_url_contact_customer_care":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/technical.html","str_cfg_url_contacts":"http:\/\/pulse.yahoo.com\/y\/connections","str_cfg_url_copyright":"http:\/\/info.yahoo.com\/legal\/uk\/yahoo\/ip_copyright.html","str_cfg_url_darla_third_party_beacon_uri_l10n":"","str_cfg_url_disclosure_link1_url_l10n":"http:\/\/profiles.yahoo.com","str_cfg_url_dm_static_content_mail_search_tip":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos#d_11","str_cfg_url_download_firefox":"http:\/\/downloads.yahoo.com\/uk\/firefox\/","str_cfg_url_download_internetexplorer":"http:\/\/downloads.yahoo.com\/uk\/internetexplorer\/","str_cfg_url_download_safari":"http:\/\/www.apple.com\/uk\/safari\/download\/","str_cfg_url_emptymfmc_learn_url":"http:\/\/uk.overview.mail.yahoo.com\/connectmore","str_cfg_url_exlink_alert_page":"","str_cfg_url_featureCue_contactImport_URL":"http:\/\/uk.address.yahoo.com\/?VPC=contact_import_landing","str_cfg_url_featureCue_learnMoreLink":"http:\/\/uk.features.mail.yahoo.com\/howitworks","str_cfg_url_feedback":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=YAHOOMAIL-UK&.done=http:\/\/uk.mail.yahoo.com","str_cfg_url_feedback_bug":"php\/qa.php?isFresh=1&bug=1","str_cfg_url_feedback_confidential":"https:\/\/backyard.yahoo.com\/globalcomms\/Confidential.html","str_cfg_url_feedback_link_mongo_l10n":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=CLASSICMAIL-UK&.done=http:\/\/uk.mail.yahoo.com","str_cfg_url_feedback_product_info":"http:\/\/backyard.yahoo.com\/tools\/b\/news\/news_article.php?sid=11714","str_cfg_url_feedback_uh3":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=MFYMAIL&.done=http:\/\/mail.yahoo.com","str_cfg_url_feedback_ymoderator":"http:\/\/allhands.corp.yahoo.com\/qna\/ymail","str_cfg_url_finance":"http:\/\/finance.yahoo.com","str_cfg_url_footer_guideline":"","str_cfg_url_geo_image":"\/geo\/","str_cfg_url_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/","str_cfg_url_help_browser":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/yahoo\/mail\/yahoomail\/settings\/settings-09.html","str_cfg_url_help_community":"http:\/\/help.yahoo.com\/communities\/index?page=forums&y=PROD_MAIL","str_cfg_url_help_connections":"http:\/\/help.yahoo.com\/l\/uk\/yahoo\/mail\/yahoomail\/connections\/upcomcon-01.html","str_cfg_url_help_features":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/migrating\/","str_cfg_url_help_javascript":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/yahoo\/help\/faq\/browsers\/browsers-63474.html","str_cfg_url_help_tutorials":"http:\/\/help.yahoo.com\/tutorials\/cg\/mail\/cg_receive2.html","str_cfg_url_import_contacts_help":"\t\n \nhttp:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos#d_3","str_cfg_url_mail":"http:\/\/uk.mail.yahoo.com","str_cfg_url_mail_bg_img_trap":"http:\/\/mail.yimg.com\/nq\/ued\/assets\/img\/trap3\/en-UK\/mail-bg-v3.png","str_cfg_url_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/","str_cfg_url_mail_terms":"https:\/\/account.nokia.com\/acct\/public\/serviceSpecificTerms?serviceId=Ovimail&tlang=en&country=US","str_cfg_url_mail_yahoo":"uk.mail.yahoo.com","str_cfg_url_mailplus":"http:\/\/uk.overview.mail.yahoo.com\/enhancements\/mailplus","str_cfg_url_maps":"http:\/\/maps.ovi.com\/","str_cfg_url_messenger":"http:\/\/uk.messenger.yahoo.com","str_cfg_url_messenger_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/chat\/","str_cfg_url_migration_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/migration\/mltamunsup.html","str_cfg_url_mininux_tosUrl":"http:\/\/info.yahoo.com\/legal\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/utos\/utos-173.html","str_cfg_url_mobilizer":"http:\/\/uk.mobile.yahoo.com\/yahoo","str_cfg_url_more":"http:\/\/help.yahoo.com\/l\/us\/yahoo\/smallbusiness\/bizmail\/general\/general-48.html","str_cfg_url_mts_customer_care":"http:\/\/www.selfcare.mtsindia.in\/","str_cfg_url_mts_games_ondemand":"http:\/\/games.mtsindia.in\/","str_cfg_url_mts_tv":"http:\/\/www.mtsindia.in\/mblaze\/mtstv.html","str_cfg_url_mts_web_chat":"http:\/\/chat.mtsindia.in\/MTSINDIAChat\/MTSINDIA-Chat.htm","str_cfg_url_mts_yahoo":"http:\/\/in.my.yahoo.com\/mtsindia","str_cfg_url_music":"http:\/\/musicstore.nokia.com\/","str_cfg_url_myyahoo":"http:\/\/uk.my.yahoo.com\/","str_cfg_url_new_features":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos","str_cfg_url_news":"http:\/\/news.yahoo.com","str_cfg_url_news_mailblogURL_l10n":"http:\/\/blog1.mail.ird.yahoo.com\/uk\/rss.php","str_cfg_url_norton_security":"http:\/\/buy.norton.com\/estore\/mf\/landingProductFeatures","str_cfg_url_notepad":"http:\/\/uk.notepad.yahoo.com","str_cfg_url_notifications_connect_url_l10n":"http:\/\/uk.overview.mail.yahoo.com\/connectmore\/updates","str_cfg_url_notifications_connections_cg_url_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/connections\/mltamssgcontct.html","str_cfg_url_notifications_connections_mg_url_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/classic\/connections\/mltamssgcontct.html","str_cfg_url_ob_nav":"https:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/features\/folders?.lang={{str_base_lang}}","str_cfg_url_openmail":"http:\/\/uk.features.mail.yahoo.com\/whatsinside","str_cfg_url_options_learn_more":"http:\/\/help.yahoo.com\/l\/uk\/yahoo\/mail\/yahoomail\/manage\/manage-69.html","str_cfg_url_overview":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com","str_cfg_url_ovi":"http:\/\/www.nokia.com\/","str_cfg_url_ovi_terms":"https:\/\/account.nokia.com\/acct\/public\/termsAndConditions?tlang=en&country=US","str_cfg_url_privacy_beta_faq":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymailfaq\/details.html","str_cfg_url_privacy_policy":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/details.html","str_cfg_url_privacy_policy_trap":"http:\/\/info.yahoo.com\/privacy\/uk\/yahoo\/mail\/ymail\/details.html","str_cfg_url_profiles":"http:\/\/profiles.yahoo.com","str_cfg_url_redirect_cn_to_alibaba":"http:\/\/migration.cn.yahoo.com\/","str_cfg_url_replace_sender_icon":"","str_cfg_url_search":"http:\/\/{{str_cfg_base_intl}}.search.yahoo.com\/search","str_cfg_url_sendfeedback":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=YAHOOMAIL-UK","str_cfg_url_shortcuts_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/basics\/basics-65.html","str_cfg_url_signout":"http:\/\/login.yahoo.com\/config\/login?logout=1&.intl={{str_cfg_base_intl}}&.direct=2&.done=http:\/\/{{str_cfg_base_intl}}.yahoo.com","str_cfg_url_sort_email_help":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale={{tog_ulm_locale_l10n}}&id=SLN3535&impressions=true","str_cfg_url_sports":"http:\/\/sports.yahoo.com","str_cfg_url_store":"http:\/\/store.ovi.com\/","str_cfg_url_sync_contacts_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/newcontacts\/sync\/","str_cfg_url_tos":"http:\/\/info.yahoo.com\/legal\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/atos.html","str_cfg_url_tos_reject_redirect":"","str_cfg_url_ulm_helpurl_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/help\/ulm\/","str_cfg_url_updates_closing":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/context\/mltaycweol.html","str_cfg_url_upsell":"http:\/\/uk.overview.mail.yahoo.com\/enhancements\/mailplus","str_cfg_url_vitality_flickr_learnMore_url_l10n":"http:\/\/www.flickr.com\/help\/sharing\/#737966","str_cfg_url_weather_weatherURL_l10n":"http:\/\/www.weather.com","str_cfg_url_yahoo":"http:\/\/www.yahoo.co.uk","str_cfg_url_yahoo_base":"yahoo.com","str_cfg_url_yahoo_login":"https:\/\/login.yahoo.com\/config\/login?.intl=uk","str_cfg_url_yahoo_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/context\/migrationv2.html","str_cfg_url_yahoo_mail_help_tae45":"http:\/\/help.yahoo.com\/kb\/index?page=content&id=SLN6628&locale=en_GB","str_cfg_url_yahoo_relogin":"https:\/\/login.yahoo.com\/config\/login_verify2?.intl={{str_cfg_base_intl}}&.done=","str_cfg_url_yahoo_url":"yahoo.co.uk","str_cfg_url_ymail_blog":"http:\/\/ymailuk.com","str_cfg_url_ymail_logo_img_trap":"https:\/\/s.yimg.com\/rz\/uh\/logo\/newpurple\/optimized\/UH3-mailV4.png","str_cfg_wsky_ad_pos":"WSKY","str_cfg_wsky_min_req_win_width":"1440","str_cfg_yahoo_mail_url_trap":"http:\/\/{{str_cfg_base_intl}}.mail.yahoo.com"});
