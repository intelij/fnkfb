<!DOCTYPE html>
<!-- saved from url=(0055)https://uk-mg42.mail.yahoo.com/neo/tictacSecureXDM?tp=s -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript">
(function(){

function getUrlParamValue(key) {
    var result = window.location.href.match(new RegExp(key+'=([^#&]*)', 'i'));
    return result ? decodeURIComponent(result[1]) : '';
}

// Construct the topUrl with parent protocol.
var topUrl = (getUrlParamValue('tp')=='s' ? 'https://':'http://') + location.hostname;

function addListener (obj, event, handler) {
    if (obj.addEventListener) {
        obj.addEventListener(event, handler, false);
    } else {
        obj.attachEvent("on" + event, handler);
    }
}

function createXHR(){
    if (typeof XMLHttpRequest != "undefined"){
        return new XMLHttpRequest();
    } else if (typeof ActiveXObject != "undefined"){
        if (typeof arguments.callee.activeXString != "string"){
            var versions = ["MSXML2.XMLHttp.6.0", "MSXML2.XMLHttp.3.0",
                            "MSXML2.XMLHttp"],
                i, len;
            for (i=0,len=versions.length; i < len; i++){
                try {
                    var xhr = new ActiveXObject(versions[i]);
                    arguments.callee.activeXString = versions[i];
                    return xhr;
                } catch (ex){}
            }
        }
        return new ActiveXObject(arguments.callee.activeXString);
    } else {
        throw new Error("No XHR object available.");
    }
}

function ajax(cfg) {
    var xhr = createXHR();
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4){
            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304){
                cfg.success(xhr.status, xhr.responseText);
            } else {
                cfg.failure(xhr.status, xhr.responseText);
            }
        }
    };
    xhr.open(
        cfg.method || 'GET',
        cfg.url,
        cfg.async || true
    );
    if (cfg.method.toUpperCase() == 'POST') {
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    }
    xhr.send(cfg.message || null);
}

function dropboxSetToken(wssid, ssoToken) {
    var response = {
            method: 'dropboxSetTokenResponse',
            params: {
                status: null,
                message:null
            }
        };

    wssid = wssid ? ('&wssid='+wssid) : '';
    ajax({
        url: '/neo/tictac?cmd=dropboxSetToken'+wssid,
        method: 'POST',
        message: 'ssoToken='+ssoToken,
        success: function(status, msg){
            response.params.status = status;
            try{
                response.params.message = msg ? JSON.parse(msg) : {};
            }catch(ex){}
            top.postMessage(JSON.stringify(response), topUrl);   
        },
        failure: function(status, msg) {
            response.params.status = status;
            try{
                response.params.message = msg ? JSON.parse(msg) : {};
            }catch(ex){}
            top.postMessage(JSON.stringify(response), topUrl);   
        }  
    });
}

function dropboxGetToken(wssid) {
    var response = {
            method: 'dropboxGetTokenResponse',
            params: {}
        };

    wssid = wssid ? ('&wssid='+wssid) : '';
    ajax({
        url: '/neo/tictac?cmd=dropboxGetToken'+wssid,
        method: 'GET',
        message: null,
        success: function(status, msg) {
            response.params.status = status;
            try{
            response.params.message = msg ? JSON.parse(msg) : {};
            }catch(ex){}
            top.postMessage(JSON.stringify(response), topUrl);   
        },
        failure: function(status, msg) {
            response.params.status = status;
            try{
                response.params.message = msg ? JSON.parse(msg) : {};
            }catch(ex){}
            top.postMessage(JSON.stringify(response), topUrl);   
        }
    });
}

// Listen to message event from neo.
addListener(window, 'message', function(evt) {
    if (evt.source == top && evt.origin == topUrl) {
        var data = JSON.parse(evt.data)
            wssid = data.params && data.params.wssid ? data.params.wssid : '';
        switch (data.method) {
            case 'dropboxSetToken':
                dropboxSetToken(wssid, data.params.ssoToken);
                break;
            case 'dropboxGetToken':
                dropboxGetToken(wssid);
                break;
        }
    }
});

addListener(window, 'load', function(evt) {
    var response = {
        method: 'XDMReady',
        params: {}
    };
    top.postMessage(JSON.stringify(response), topUrl);   
});

})();</script></head><body>
<!-- nc67.n42.mail.ir2.yahoo.com compressed/chunked Tue Apr 15 09:31:50 UTC 2014 -->
</body></html>