YUI.add("_shared_module_rte_well_content_attachments_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_attachments_fresh={base:'<div role="tabpanel" class="attachments-pane gwell rte-pane-fresh shaded" > <div role="toolbar"> <form method="post" enctype="multipart/form-data" class="attachment-button-form" target="" action=""> <span class="icon icon-attachment s-tp attachment-button-attach" title="{{str_comp_attach_singular}}"> <input type="file" id="attachment-button-input" name="uploadfile" class="attachment-button-file" tabindex="0"/> </span> <span id="upload_file_selection" class="hidden" title="{{str_comp_attach_singular}}"> <span id="uploader-v2"></span> </span> <span id="attach-btn-menu" class="hidden icon icon-chevron-down s-tp attach-btn-menu" title="{{str_comp_attach_menu_title_fresh}}" data-action="menu"></span> </form> <span class="btn left right menu attachment-button-disabled hidden"> <a role="button" href="#" tabindex="-1" >{{str_comp_attach}}</a> </span> <span role="alert" class="switch-to-basic-link hidden"> {{str_rte_attachments_basic_message}} <a role="button" href="#">{{str_rte_attachments_basic_link_text}}</a>. </span> </div></div>'};},"1.0.0");YUI.add("_shared_module_rte_well_content_format_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_format_fresh={base:'<div role="tabpanel" class="rte-pane-fresh format-pane gwell shaded"> <div role="toolbar" class="format-inner"> <span id="btn-fontnamesize" class="icon icon-choose-font s-tp" data-action="menu" role="button" title="{{str_comp_font_menu_attr_fresh}}"></span> <span data-action="bold" class="icon icon-bold s-tp" role="button" title="{{str_rte_bold_attr}}"></span> <span data-action="italic" role="button" class="icon icon-italic s-tp" title="{{str_rte_italic_attr_fresh}}"></span> {{is_underline}} <span id="btn-forecolor" data-action="menu" role="button" aria-haspopup="true" class="icon icon-text-highlight s-tp" title="{{str_rte_color_attr_fresh}}"></span> <span id="btn-insertunordered" data-action="menu" role="button" class="icon icon-list-bullets"></span> <span id="btn-indent" data-action="menu" role="button" class="icon icon-indent"></span> <span id="btn-text-align" data-action="menu" role="button" aria-haspopup="true" class="icon icon-align-left"></span> {{bidi}} <span data-action="insertlink" role="button" class="icon icon-link s-tp" title="{{str_rte_link_attr_fresh}}"></span> <span id="emoticon" data-action="menu" role="button" aria-haspopup="true" class="icon icon-emoticons s-tp" title="{{str_comp_emoticons}}"></span> <span class="om-buttons"></span> {{spellCheckEnabled}} <span id="switchtext-plain" class="switchtext btn-isPlain last icon icon-chevron-double-right s-tp" role="button" title="{{str_rte_richtext}}" target="plain-text"></span> <span id="switchtext-rich" class="switchtext btn-isRich last hidden icon icon-chevron-double-left s-tp" role="button" title="{{str_rte_plaintext}}" target="rich-text"></span> </div> </div> ',is_underline:'<span data-action="underline" role="button" class="icon icon-underline s-tp" title="{{str_rte_underline_attr}}"></span> ',is_rtl:'<span id="btn-rtl" data-action="bidi" value="rtl" role="button" class="icon icon-rtl s-tp" title="{{str_rte_right_to_left}}"></span> <span id="btn-ltr" data-action="bidi" value="ltr" role="button" class="icon icon-ltr s-tp" title="{{str_rte_left_to_right}}"></span> ',is_rtl_else:'<span id="btn-ltr" data-action="bidi" value="ltr" role="button" class="icon icon-ltr s-tp" title="{{str_rte_left_to_right}}"></span> <span id="btn-rtl" data-action="bidi" value="rtl" role="button" class="icon icon-rtl s-tp" title="{{str_rte_right_to_left}}"></span> ',bidi:"{{is_rtl}} {{is_rtl_else}} ",spellCheckEnabled:'<span id="btn-spellchk" data-action="spellcheck" role="button" class="icon icon-check-spelling s-tp" title="{{str_rte_check_spelling_attr_fresh}}"></span> <span id="btn-spell-langs" data-action="menu" role="button" aria-haspopup="true" title="{{str_toolbar_spelling_menu_toggle_attr_fresh}}" class="icon icon-chevron-down s-tp"></span> '};},"1.0.0");YUI.add("_shared_module_rte_well_fresh_conv",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_fresh_conv={base:'<div class="rte-well-container">{{show_attachment_icon}}{{show_formatter_well}}</div>',show_attachment_icon:"{{_shared_module_rte_well_content_attachments_fresh}}",show_formatter_well:"{{_shared_module_rte_well_content_format_fresh}}"};},"1.0.0",{requires:["_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_content_format_fresh"]});YUI.add("_shared_module_compose_fresh_conv",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_fresh_conv={base:'<div class="compose"><div class = "composeshim hidden"></div><table role="presentation" border="0" style="margin:0;width:100%;border-spacing:0; border-collapse:collapse;table-layout:fixed"> <tbody role="presentation"> <tr role="presentation"> <td role="presentation"> {{_shared_module_compose_message_header_fresh}} </td> </tr> <tr role="presentation"> <td role="presentation"> <div class="compose-message {{page_well_is_open}}">{{_shared_module_compose_message_body}}</div> </td> </tr> <tr role="presentation"> <td role="presentation" style="padding-bottom:5"> {{_shared_module_rte_well_content_attachments_well_fresh}} </td> </tr> <tr role="presentation"> <td role="presentation" class="footer-separator"> <div class="bottomNotification"> <span class="s-loader"></span> <span class="notification">{{str_comp_sending}}</span> </div> <div class="bottomToolbar"> {{show_autocompose_well}} <span class="btn default" data-action="send" role="button"> <a href="#" title="{{str_comp_send_attr}}">{{str_comp_send}}</a> </span> {{_shared_module_rte_well_fresh_conv}} <span class="save-draft-msg hidden" data-action="savedraft">{{lastsaved}}</span> <span id="enhancr-spinner" class="hidden"></span> </div> </td> </tr> </tbody></table></div>',page_well_is_open:"rich-text ",show_autocompose_well:'<span class="autocompose-well"> <span class="btn left btn-secondary" title="Autocompose" data-action="randomize"> <i class="icon {{icon}}" style="color: {{icon_color}}"></i> Autocompose </span><span class="btn right btn-secondary" data-action="menu"><i class="icon icon-chevron-down"></i></span> </span> ',lastsaved:"{{str_comp_autosave}}"};},"1.0.0",{requires:["_shared_module_compose_message_header_fresh","_shared_module_compose_message_body","_shared_module_rte_well_content_attachments_well_fresh","_shared_module_rte_well_fresh_conv"]});YUI.add("_shared_module_toolbar_compose_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_toolbar_compose_fresh={base:'<div id="pagetoolbar" class="{{msgliststate}}"> <a class="btn" href="#" data-action="send" title="{{str_comp_send_attr}}">{{str_comp_send}}</a> <a class="btn btn-cancel-compose" href="#" data-action="cancelcompose" title="{{str_comp_cancel_attr}}">{{str_comp_cancel}}</a> <a class="btn savedraft {{isDirty}}" href="#" data-action="savedraft" title="{{str_comp_savedraft_attr}}">{{str_comp_savedraft}}</a></div>',isDirty:"disabled"};},"1.0.0");YUI.add("_shared_module_compose_loading",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_compose_loading={base:'<div id="loadingpane" class="cm-loadingpane"> {{start}} {{slow}} {{error}} {{populate}}</div>',start:"<h2>{{str_comp_loading}}</h2> ",slow:'<h2>{{str_comp_loadslow}} <span class="btn left right small"><a href="#" class="retryOrigin">{{str_comp_loadretry}}</a></span></h2> ',can_retry:'<span class="btn left right small"><a href="#" class="retryOrigin">{{str_comp_loadretry}}</a></span> ',error:"<h2>{{str_comp_loaderr}} {{can_retry}} </h2> ",populate:"<h2>{{str_comp_loadpopulate}}</h2> "};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_spellcheck",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_spellcheck={base:'<div id="menu-spellcheck" class="optionMenu"> <ul> {{word_suggestions}} </ul> <ul> <li><a href="#" data-action="spellcheck-ignore" title="{{str_comp_ignore_attr}}"><span>{{str_comp_ignore}}</span></a></li> <li><a href="#" data-action="spellcheck-ignore-all" title="{{str_comp_ignore_all_attr}}"><span>{{str_comp_ignore_all}}</span></a></li> </ul></div>',word_suggestions:'<li><a href="#" data-action="spellcheck-replace"><span>{{word_suggestion}}</span></a></li> '};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_modal_cancel_compose",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_modal_cancel_compose={base:'<div id="modal-cancel-compose" class="modal lg"> <h2 class="modal-hd"> {{str_comp_close}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="modal-bd"> <span>{{str_comp_close_confirm}}</span> </div> <div class="modal-ft"> {{url}} </div></div>',url:'<span class="btn left right default"><a href="{{url_minty_drafts}}">{{str_comp_savetodrafts}}</a></span><span class="btn left right"><a href="{{url_minty_inbox}}">{{str_comp_abandon}}</a></span><span class="btn left right"><a href="modal-cancel-compose.mu#">{{str_comp_keepwriting}}</a></span> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_rte_well_content_emoticons_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_emoticons_fresh={base:'<div role="tabpanel" class="emoticons-pane optionMenu" id="menu-emoticon"> <ul role="toolbar"> <li role="button" data-value="emoticon_1*{{str_emoticon_happy}}" data-action="emoticon" class="emoticon_1" title="{{str_emoticon_happy}}" tabindex="0"><a></a></li> <li role="button" data-value="emoticon_2*{{str_emoticon_sad}}" data-action="emoticon" class="emoticon_2" title="{{str_emoticon_sad}}"><a></a></li> <li role="button" data-value="emoticon_3*{{str_emoticon_winking}}" data-action="emoticon" class="emoticon_3" title="{{str_emoticon_winking}}"><a></a></li> <li role="button" data-value="emoticon_4*{{str_emoticon_confused}}" data-action="emoticon" class="emoticon_4" title="{{str_emoticon_confused}}"><a></a></li> <li role="button" data-value="emoticon_5*{{str_emoticon_lovestruck}}" data-action="emoticon" class="emoticon_5" title="{{str_emoticon_lovestruck}}"><a></a></li> <li role="button" data-value="emoticon_6*{{str_emoticon_blushing}}" data-action="emoticon" class="emoticon_6" title="{{str_emoticon_blushing}}"><a></a></li> <li role="button" data-value="emoticon_7*{{str_emoticon_tongue}}" data-action="emoticon" class="emoticon_7" title="{{str_emoticon_tongue}}"><a></a></li> <li role="button" data-value="emoticon_8*{{str_emoticon_kiss}}" data-action="emoticon" class="emoticon_8" title="{{str_emoticon_kiss}}"><a></a></li> <li role="button" data-value="emoticon_9*{{str_emoticon_broken_heart}}" data-action="emoticon" class="emoticon_9" title="{{str_emoticon_broken_heart}}"><a></a></li> <li role="button" data-value="emoticon_10*{{str_emoticon_sigh}}" data-action="emoticon" class="emoticon_10" title="{{str_emoticon_sigh}}"><a></a></li> <li role="button" data-value="emoticon_11*{{str_emoticon_wits_end}}" data-action="emoticon" class="emoticon_11" title="{{str_emoticon_wits_end}}"><a></a></li> <li role="button" data-value="emoticon_12*{{str_emoticon_surprise}}" data-action="emoticon" class="emoticon_12" title="{{str_emoticon_surprise}}"><a></a></li> <li role="button" data-value="emoticon_13*{{str_emoticon_angry}}" data-action="emoticon" class="emoticon_13" title="{{str_emoticon_angry}}"><a></a></li> <li role="button" data-value="emoticon_14*{{str_emoticon_cool}}" data-action="emoticon" class="emoticon_14" title="{{str_emoticon_cool}}"><a></a></li> <li role="button" data-value="emoticon_15*{{str_emoticon_devil}}" data-action="emoticon" class="emoticon_15" title="{{str_emoticon_devil}}"><a></a></li> <li role="button" data-value="emoticon_16*{{str_emoticon_crying}}" data-action="emoticon" class="emoticon_16" title="{{str_emoticon_crying}}"><a></a></li> <li role="button" data-value="emoticon_17*{{str_emoticon_straight_face}}" data-action="emoticon" class="emoticon_17" title="{{str_emoticon_straight_face}}"><a></a></li> <li role="button" data-value="emoticon_18*{{str_emoticon_raised_eyebrows}}" data-action="emoticon" class="emoticon_18" title="{{str_emoticon_raised_eyebrows}}"><a></a></li> <li role="button" data-value="emoticon_19*{{str_emoticon_angel}}" data-action="emoticon" class="emoticon_19" title="{{str_emoticon_angel}}"><a></a></li> <li role="button" data-value="emoticon_20*{{str_emoticon_nerd}}" data-action="emoticon" class="emoticon_20" title="{{str_emoticon_nerd}}"><a></a></li> <li role="button" data-value="emoticon_21*{{str_emoticon_phbbbbt}}" data-action="emoticon" class="emoticon_21" title="{{str_emoticon_phbbbbt}}"><a></a></li> <li role="button" data-value="emoticon_22*{{str_emoticon_wave}}" data-action="emoticon" class="emoticon_22" title="{{str_emoticon_wave}}"><a></a></li> <li role="button" data-value="emoticon_23*{{str_emoticon_rolling_eyes}}" data-action="emoticon" class="emoticon_23" title="{{str_emoticon_rolling_eyes}}"><a></a></li> <li role="button" data-value="emoticon_24*{{str_emoticon_sick}}" data-action="emoticon" class="emoticon_24" title="{{str_emoticon_sick}}"><a></a></li> <li role="button" data-value="emoticon_25*{{str_emoticon_shh}}" data-action="emoticon" class="emoticon_25" title="{{str_emoticon_shh}}"><a></a></li> <li role="button" data-value="emoticon_26*{{str_emoticon_party}}" data-action="emoticon" class="emoticon_26" title="{{str_emoticon_party}}"><a></a></li> <li role="button" data-value="emoticon_27*{{str_emoticon_yawn}}" data-action="emoticon" class="emoticon_27" title="{{str_emoticon_yawn}}"><a></a></li> <li role="button" data-value="emoticon_28*{{str_emoticon_thinking}}" data-action="emoticon" class="emoticon_28" title="{{str_emoticon_thinking}}"><a></a></li> <li role="button" data-value="emoticon_29*{{str_emoticon_laughing}}" data-action="emoticon" class="emoticon_29" title="{{str_emoticon_laughing}}"><a></a></li> <li role="button" data-value="emoticon_30*{{str_emoticon_rofl}}" data-action="emoticon" class="emoticon_30" title="{{str_emoticon_rofl}}"><a></a></li> <li role="button" data-value="emoticon_31*{{str_emoticon_big_grin}}" data-action="emoticon" class="emoticon_31" title="{{str_emoticon_big_grin}}"><a></a></li> <li role="button" data-value="emoticon_32*{{str_emoticon_cowboy}}" data-action="emoticon" class="emoticon_32" title="{{str_emoticon_cowboy}}"><a></a></li> <li role="button" data-value="emoticon_33*{{str_emoticon_wasnt_me}}" data-action="emoticon" class="emoticon_33" title="{{str_emoticon_wasnt_me}}"><a></a></li> <li role="button" data-value="emoticon_34*{{str_emoticon_batting_eyelashes}}" data-action="emoticon" class="emoticon_34" title="{{str_emoticon_batting_eyelashes}}"><a></a></li> <li role="button" data-value="emoticon_35*{{str_emoticon_big_hug}}" data-action="emoticon" class="emoticon_35" title="{{str_emoticon_big_hug}}"><a></a></li> <li role="button" data-value="emoticon_36*{{str_emoticon_smug}}" data-action="emoticon" class="emoticon_36" title="{{str_emoticon_smug}}"><a></a></li> <li role="button" data-value="emoticon_37*{{str_emoticon_worried}}" data-action="emoticon" class="emoticon_37" title="{{str_emoticon_worried}}"><a></a></li> <li role="button" data-value="emoticon_38*{{str_emoticon_whew}}" data-action="emoticon" class="emoticon_38" title="{{str_emoticon_whew}}"><a></a></li> <li role="button" data-value="emoticon_39*{{str_emoticon_talk_to_the_hand}}" data-action="emoticon" class="emoticon_39" title="{{str_emoticon_talk_to_the_hand}}"><a></a></li> <li role="button" data-value="emoticon_40*{{str_emoticon_sleepy}}" data-action="emoticon" class="emoticon_40" title="{{str_emoticon_sleepy}}"><a></a></li> <li role="button" data-value="emoticon_41*{{str_emoticon_loser}}" data-action="emoticon" class="emoticon_41" title="{{str_emoticon_loser}}"><a></a></li> <li role="button" data-value="emoticon_42*{{str_emoticon_not_talking}}" data-action="emoticon" class="emoticon_42" title="{{str_emoticon_not_talking}}"><a></a></li> <li role="button" data-value="emoticon_43*{{str_emoticon_on_the_phone}}" data-action="emoticon" class="emoticon_43" title="{{str_emoticon_on_the_phone}}"><a></a></li> <li role="button" data-value="emoticon_44*{{str_emoticon_daydreaming}}" data-action="emoticon" class="emoticon_44" title="{{str_emoticon_daydreaming}}"><a></a></li> <li role="button" data-value="emoticon_45*{{str_emoticon_clown}}" data-action="emoticon" class="emoticon_45" title="{{str_emoticon_clown}}"><a></a></li> <li role="button" data-value="emoticon_46*{{str_emoticon_silly}}" data-action="emoticon" class="emoticon_46" title="{{str_emoticon_silly}}"><a></a></li> <li role="button" data-value="emoticon_47*{{str_emoticon_drooling}}" data-action="emoticon" class="emoticon_47" title="{{str_emoticon_drooling}}"><a></a></li> <li role="button" data-value="emoticon_48*{{str_emoticon_doh}}" data-action="emoticon" class="emoticon_48" title="{{str_emoticon_doh}}"><a></a></li> <li role="button" data-value="emoticon_49*{{str_emoticon_applause}}" data-action="emoticon" class="emoticon_49" title="{{str_emoticon_applause}}"><a></a></li> <li role="button" data-value="emoticon_50*{{str_emoticon_nail_biting}}" data-action="emoticon" class="emoticon_50" title="{{str_emoticon_nail_biting}}"><a></a></li> <li role="button" data-value="emoticon_51*{{str_emoticon_hypnotized}}" data-action="emoticon" class="emoticon_51" title="{{str_emoticon_hypnotized}}"><a></a></li> <li role="button" data-value="emoticon_52*{{str_emoticon_liar}}" data-action="emoticon" class="emoticon_52" title="{{str_emoticon_liar}}"><a></a></li> <li role="button" data-value="emoticon_53*{{str_emoticon_waiting}}" data-action="emoticon" class="emoticon_53" title="{{str_emoticon_waiting}}"><a></a></li> <li role="button" data-value="emoticon_54*{{str_emoticon_call_me}}" data-action="emoticon" class="emoticon_54" title="{{str_emoticon_call_me}}"><a></a></li> <li role="button" data-value="emoticon_57*{{str_emoticon_cheer}}" data-action="emoticon" class="emoticon_57" title="{{str_emoticon_cheer}}"><a></a></li> <li role="button" data-value="emoticon_58*{{str_emoticon_dizzy}}" data-action="emoticon" class="emoticon_58" title="{{str_emoticon_dizzy}}"><a></a></li> <li role="button" data-value="emoticon_59*{{str_emoticon_cook}}" data-action="emoticon" class="emoticon_59" title="{{str_emoticon_cook}}"><a></a></li> <li role="button" data-value="emoticon_60*{{str_emoticon_eat}}" data-action="emoticon" class="emoticon_60" title="{{str_emoticon_eat}}"><a></a></li> <li role="button" data-value="emoticon_61*{{str_emoticon_give_up}}" data-action="emoticon" class="emoticon_61" title="{{str_emoticon_give_up}}"><a></a></li> <li role="button" data-value="emoticon_62*{{str_emoticon_cold}}" data-action="emoticon" class="emoticon_62" title="{{str_emoticon_cold}}"><a></a></li> <li role="button" data-value="emoticon_63*{{str_emoticon_hot}}" data-action="emoticon" class="emoticon_63" title="{{str_emoticon_hot}}"><a></a></li> <li role="button" data-value="emoticon_64*{{str_emoticon_music}}" data-action="emoticon" class="emoticon_64" title="{{str_emoticon_music}}"><a></a></li> <li role="button" data-value="emoticon_65*{{str_emoticon_puke}}" data-action="emoticon" class="emoticon_65" title="{{str_emoticon_puke}}"><a></a></li> <li role="button" data-value="emoticon_66*{{str_emoticon_sing}}" data-action="emoticon" class="emoticon_66" title="{{str_emoticon_sing}}"><a></a></li> <li role="button" data-value="emoticon_67*{{str_emoticon_catch}}" data-action="emoticon" class="emoticon_67" title="{{str_emoticon_catch}}"><a></a></li> <li role="button" data-value="emoticon_68*{{str_emoticon_exercise}}" data-action="emoticon" class="emoticon_68" title="{{str_emoticon_exercise}}"><a></a></li> <li role="button" data-value="emoticon_69*{{str_emoticon_high_five}}" data-action="emoticon" class="emoticon_69" title="{{str_emoticon_high_five}}"><a></a></li> <li role="button" data-value="emoticon_70*{{str_emoticon_play_game}}" data-action="emoticon" class="emoticon_70" title="{{str_emoticon_play_game}}"><a></a></li> <li role="button" data-value="emoticon_71*{{str_emoticon_search_me}}" data-action="emoticon" class="emoticon_71" title="{{str_emoticon_search_me}}"><a></a></li> <li role="button" data-value="emoticon_72*{{str_emoticon_spooky}}" data-action="emoticon" class="emoticon_72" title="{{str_emoticon_spooky}}"><a></a></li> <li role="button" data-value="emoticon_73*{{str_emoticon_studying}}" data-action="emoticon" class="emoticon_73" title="{{str_emoticon_studying}}"><a></a></li> <li role="button" data-value="emoticon_74*{{str_emoticon_tv}}" data-action="emoticon" class="emoticon_74" title="{{str_emoticon_tv}}"><a></a></li> <li role="button" data-value="emoticon_75*{{str_emoticon_gift}}" data-action="emoticon" class="emoticon_75" title="{{str_emoticon_gift}}"><a></a></li> <li role="button" data-value="emoticon_76*{{str_emoticon_unlucky}}" data-action="emoticon" class="emoticon_76" title="{{str_emoticon_unlucky}}"><a></a></li> <li role="button" data-value="emoticon_77*{{str_emoticon_down_on_luck}}" data-action="emoticon" class="emoticon_77" title="{{str_emoticon_down_on_luck}}"><a></a></li> <li role="button" data-value="emoticon_78*{{str_emoticon_fight}}" data-action="emoticon" class="emoticon_78" title="{{str_emoticon_fight}}"><a></a></li> </ul></div>'};
},"1.0.0");YUI.add("_shared_module_rte_well_content_fontnamesize_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_fontnamesize_fresh={base:'<div id="menu-fontnamesize" class="optionMenu rte-menu multicol"> <div id="menu-fontname" class="menu-group column"> <ul> {{intl_fonts}} <li data-action="fontname" data-value="{{str_rte_font_arial_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_arial_attr}};">{{str_rte_font_modern}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_verdana_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_verdana_attr}};">{{str_rte_font_modernwide}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_times_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_times_attr}};">{{str_rte_font_classic}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_bookman_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_bookman_attr}};">{{str_rte_font_classicwide}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_courier_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_courier_attr}};">{{str_rte_font_courier}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_garamond_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_garamond_attr}};">{{str_rte_font_garamond}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_lucida_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_lucida_attr}};">{{str_rte_font_lucida}}</span></a></li> </ul> </div> <div id="menu-fontsize" class="menu-group column"> <ul class="varht"> <li data-action="fontsize" data-value="1"><i class="icon"></i><a href="#"><span style="font-size:10px;">{{str_rte_font_size_small}}</span></a></li> <li data-action="fontsize" data-value="2"><i class="icon"></i><a href="#"><span style="font-size:13px;">{{str_rte_font_size_medium}}</span></a></li> <li data-action="fontsize" data-value="4"><i class="icon"></i><a href="#"><span style="font-size:18px;">{{str_rte_font_size_large}}</span></a></li> <li data-action="fontsize" data-value="6"><i class="icon"></i><a href="#"><span style="font-size:24px;" class="varht">{{str_rte_font_size_xlarge}}</span></a></li> </ul> </div></div> ',intl_fonts:'<li data-action="fontname" data-value="{{font_value}}"><i class="icon"></i><a href="#"><span style="font-family: {{font_value}};">{{font_name}}</span></a></li> '};},"1.0.0");YUI.add("_shared_module_rte_well_tabs_compose_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_tabs_compose_fresh={base:'<div class="rte"> <ul role="tablist" aria-describedby="tablist-instr"> </ul></div>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_list",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_list={base:'<div id="menu-list" class="optionMenu rte-menu"> <ul> <li data-action="insertunorderedlist"><a href="#" title="{{str_rte_bullet_list_attr}}"><i class="icon icon-list-bullets" title="{{str_rte_bullet_list_attr}}"></i></a></li> <li data-action="insertnumberedlist"><a href="#" title="{{str_rte_numbered_list_attr}}"><i class="icon icon-list-numbers" title="{{str_rte_numbered_list_attr}}"></i></a></li> </ul></div>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_text_align",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_text_align={base:'<div id="menu-text-align" class="optionMenu rte-menu"> <ul> <li data-action="align-l"><a href="#"><i class="icon icon-align-left" title="{{str_rte_align_l}}"></i></a></li> <li data-action="align-c"><a href="#"><i class="icon icon-align-center" title="{{str_rte_align_c}}"></i></a></li> <li data-action="align-r"><a href="#"><i class="icon icon-align-right" title="{{str_rte_align_r}}"></i></a></li> </ul></div>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_compose_menu_indent",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_compose_menu_indent={base:'<div id="menu-indent" class="optionMenu rte-menu"> <ul> <li data-action="indent"><a href="#" title="{{str_rte_indentation_more_attr}}"><i class="icon icon-indent" title="{{str_rte_indentation_more_attr}}"></i></a></li> <li data-action="outdent"><a href="#" title="{{str_rte_indentation_less_attr}}"><i class="icon icon-outdent" title="{{str_rte_indentation_less_attr}}"></i></a></li> </ul></div>'};},"1.0.0");YUI.add("mail-ui-rte-formatter",function(C){var L=C.ui.Templates,O=C.Node.create,I=C.common,D=I.Utils,S=D.substitute,Q,M,F=[10,13,0,18,0,24,0],U="hidden",a={"align-l":"justifyleft","align-c":"justifycenter","align-r":"justifyright",inserthrule:"inserthorizontalrule",insertlink:"createlink",setfontstyle:"fontname",setfontsize:"fontsize",insertnumberedlist:"insertorderedlist",color:"notyet",hilitecolor:"notyet"};function R(Y){var b=this;Y=Y||{};R.superclass.constructor.call(b,Y);b.formatTmpl=Y.formatTmpl||L._shared_module_rte_well_content_format_fresh;b.baseNode=null;b.editor=Y.editor;b.globalPathImage=Y.globalPathImage||null;b.fontColorMenu=null;b.fontSizeMenu=null;b.fontNameMenu=null;b.selectedFCValue="#000000";b.selectedFC=null;b.selectedFBValue="#FFFFFF";b.selectedFB=null;b.selectedFSIndex=-1;b.selectedFS=null;b.selectedFNIndex=-1;b.selectedFN=null;b.formatButtons=null;b.fontFamilyOptions=null;b.formatters=Y.formatters||{spellCheckEnabled:function(){if(M){return S(b.formatTmpl.spellCheckEnabled,{HiddenClassName:""},b.formatters,null,strings,L);}else{return S(b.formatTmpl.spellCheckEnabled,{HiddenClassName:" hidden"},b.formatters,null,strings,L);}},is_rtl:function(){var c;if(Q){c=strings.str_tog_loadRTLCss?b.formatTmpl.is_rtl:b.formatTmpl.is_rtl_else;return S(c,{},b.formatters,null,strings,L);}else{return"";}},bidi:function(){if(Q){return S(b.formatTmpl.bidi,{},b.formatters,null,strings,L);}else{return"";}}};b.handles=[];Q=Y.isBidi;M=Y.isSpellCheckEnabled;}function B(d,b,Y){var f=this,e;f.baseNode=d;if(!d.one("div.format-pane")){var c=S(f.formatTmpl.base,null,f.formatters,null,strings,L);if(b){Y.insert(c,b);}else{f.baseNode.appendChild(c);}}e=d.one("div.format-pane");f.formatButtons=e.all('span[role="button"]');f.fontFamilyOptions=e.all("span.showFontStyle select option");}function V(){var g=this,b,c=["bold","italic","underline"],f,Y=g.handles,e=g.baseNode.one("div.attachments-well");e&&e.addClass(U);f=g.baseNode.one("div.format-pane");b=f.all("select");Y.push(C.on("change",function(h){g._invokeAction(h.currentTarget.get("parentNode"),h.currentTarget.get("value"));},b));var d=f.all('span[role="button"]');if(C.UA.ie===8){d.setAttribute("unselectable","on");}Y.push(C.on("mousedown",function(j){var i=j.currentTarget,h=i.getAttribute("data-action"),k="cmps_wl_";if(h==="menu"){k+=i.get("id");}else{k+=h;}C.fire("mt:click",{action:k,append:{t1:"cmpsTb"}});j.preventDefault();g._invokeAction(j.currentTarget,"");},d));d.each(function(j){var k,h=c.length,l=j.getAttribute("data-action");if(l){for(k=0;k<h;k++){if(c[k]===l){j.addClass("btnpress");}}}});g.editor.on("nodeChange",function(h){g.updateRTToolbar(h);});}function H(b,c,e){var d=this,Y;C.use("editor-lists",function(f){d.editor.plug(f.Plugin.EditorLists);Y=b.getAttribute("data-action");if(!Y){return;}if(Y==="color"||Y==="hilitecolor"){}else{if(Y==="menu"){d._showMenus(b);}else{if((Y==="bold")||(Y==="italic")||(Y==="underline")){b.toggleClass("pressed");}else{if(Y&&Y==="bidi"){if(!e){c=b.getAttribute("value");}}}d._invokeDataAction(Y,c);}}});}function A(Y,f){var g=this,d=a[Y],e,b,c;if(d){Y=d;}if(Y==="notyet"){return;}else{if(Y==="forecolor"){g.selectedFCValue=f;}else{if(Y==="backcolor"){g.selectedFBValue=f;}else{if(Y==="fontname"){g.selectedFNIndex=f;}else{if(Y==="fontsize"){g.selectedFSIndex=f;}else{if(Y==="emoticon"){C.later(10,g,function(){c=f.indexOf("*");e=f.slice(0,c);e=e.replace(/emoticon_(\d+)/,g.globalPathImage+"/emoticons/emo$1.gif");b=f.slice(c);b=b.replace(/"/,"&quot;").replace(/</,"&lt").replace(/>/,"&gt;").replace(/&/,"&amp;");f='<img src="'+e+'" alt="'+b+'">';Y="insertandfocus";g.editor.invokeCommand(Y,f);g.fire("formatter:action",{act:Y,val:f});},null,null);return;}}}}}}g.editor.invokeCommand(Y,f);g.fire("formatter:action",{act:Y,val:f});}function K(b){var i=this,f,d,k,n,l,c,j,h,g,o,p,Y,m=false,e=null;l=b.get("id");if(b.menu){if(l==="btn-fontnamesize"){i.selectFontNameInMenu(i.fontNameMenu,i.selectedFNIndex);i.selectFontSizeInMenu(i.fontSizeMenu,i.selectedFSIndex);}if(l==="btn-forecolor"){i.selectFontColorInMenu(i.fontColorMenu,"both");}return;}switch(l){case"btn-text-align":e={x:-2,menuUpY:0,menuDownY:0};f=L._shared_module_offscreen_bin_compose_menu_text_align.base;break;case"btn-indent":e={x:-2,menuUpY:0,menuDownY:0};f=L._shared_module_offscreen_bin_compose_menu_indent.base;break;case"btn-fontnamesize":Y=S(L._shared_module_rte_well_content_fontnamesize_fresh.base,null,{intl_fonts:function(){function r(v,t){var u=L._shared_module_rte_well_content_fontnamesize_fresh;return S(u.intl_fonts,{},{font_value:function(){return v;},font_name:function(){return t;}},null,strings,L);}var q="";if(strings.str_cfg_intl_fonts){var s=C.JSON.parse(strings.str_cfg_intl_fonts);C.Array.each(s,function(t){q+=r(t.value,t.name);});}return q;}},null,strings);break;case"btn-insertunordered":e={x:-2,menuUpY:0,menuDownY:0};f=L._shared_module_offscreen_bin_compose_menu_list.base;break;case"emoticon":f=L._shared_module_rte_well_content_emoticons_fresh.base;break;case"btn-forecolor":case"btn-backcolor":j=[["000000","808080","ffffff"],["9d1811","cd232c","d36a53"],["a46016","dd902f","e4ac64"],["ac9e19","fdef2b","fdf869"],["5b8828","8fca40","add773"],["4c76a2","70aced","7dbef1"],["440062","652191","845aa7"],["9c005c","cb008e","d264aa"]];h=j[0].length;g=j.length;f=["<div id='menu-color-picker' class='optionMenu colorPickerMenu'>"];d=["<div class='groupie'><span class='swatchTitle'>{{groupie_title}}</span>"];for(o=0;o<g;o++){d.push("<ul data-action='{{swatchaction}}'>");for(p=0;p<h;p++){k=j[o][p];if(k==="ffffff"){n=";' class='white' ";}else{if(k==="000000"){n=";' class='black' ";}else{n=";' ";}}d.push("<li style='background-color:#",k,n,"data-value='#",j[o][p],"'><a href='#'></a></li>");}d.push("</ul>");}d.push("</div>");d=d.join("");f.push(S(d,{swatchaction:"forecolor",groupie_title:strings.str_rte_forecolor_title},null,null,strings));f.push(S(d,{swatchaction:"backcolor",groupie_title:strings.str_rte_backcolor_title},null,null,strings));f.push("</div>");f=f.join("");
break;default:break;}if(f){Y=S(f,null,null,null,strings);}if(Y){c=i._showRTEMenu(Y,b,m,e,function(q){i.handles.push(q.on("menuSelected",function(r){i._invokeDataAction(r.dataAction,r.dataValue);}));});}}function Z(i,e,g,d,b){var f=this,c=O(i),Y=c.get("id"),h=["comms-ui-menu-base"];C.one("body").appendChild(c);if(Y==="menu-color-picker"){f.fontColorMenu=c;}if(Y==="menu-fontnamesize"){f.fontNameSizeMenu=c;f.fontSizeMenu=c.one("#menu-fontsize");f.fontNameMenu=c.one("#menu-fontname");}if(Y==="menu-emoticon"){h.push("emoticon_css");}C.use(h,function(k){e.plug(k.Plugin.Menu,{"menu":c,"overlap":g,"offset":d||null,"dontFocus":true});if(e.get("id")==="btn-forecolor"){f.selectFontColorInMenu(f.fontColorMenu,null,null);}if(Y==="menu-fontnamesize"){f.selectFontSizeInMenu(f.fontSizeMenu,f.selectedFSIndex);f.selectFontNameInMenu(f.fontNameMenu,f.selectedFNIndex);}f.handles.push(c.on("menu:state",function(l){if(l.state==="show"){k.fire("ToolTips:hideTooltips");e.removeClass("s-tp");e.addClass("pressed");}else{if(l.state==="hide"){e.removeClass("pressed");e.addClass("s-tp");}}}));e.menu.show();function j(l){switch(l.keyCode){case 13:case 32:l.currentTarget.simulate("mousedown");break;default:break;}}f.handles.push(c.delegate("keydown",j,"li"));f.handles.push(c.delegate("mousedown",function(q){q.halt();var p=q.target,o=q.currentTarget,m=p.ancestor(function(s){return s.getAttribute("data-action");},true),n=m?m.getAttribute("data-action"):o.getAttribute("data-action")||0,l=p.ancestor(function(s){return s.getAttribute("data-value");},true),r=l?l.getAttribute("data-value"):"";c.fire("menuSelected",{dataAction:n,dataValue:r,item:l});e.menu&&e.menu.hide();},"li"));b(c);});return c;}function P(f,Y,d){var h=this;var e,c,g,b;e=c=false;if(Y==="fore"){e=true;h.selectedFCValue=d;}else{if(Y==="back"){c=true;h.selectedFBValue=d;}else{e=c=true;h.selectedFCValue=h.selectedFCValue||"#000000";h.selectedFBValue=h.selectedFBValue||"#ffffff";}}if(f){if(e&&h.selectedFC){h.selectedFC.removeClass("icon").removeClass("icon-checkmark");}if(c&&h.selectedFB){h.selectedFB.removeClass("icon").removeClass("icon-checkmark");}g=f.all("div.groupie");if(e){b=g.item(0).all("li");h.selectedFC=null;b.each(function(i){if(i.getAttribute("data-value").toLowerCase().indexOf(h.selectedFCValue.toLowerCase())===0){h.selectedFC=i.one("a");}});if(h.selectedFC){h.selectedFC.addClass("icon").addClass("icon-checkmark");}}if(c){b=g.item(1).all("li");h.selectedFB=null;b.each(function(i){if(i.getAttribute("data-value").toLowerCase().indexOf(h.selectedFBValue.toLowerCase())===0){h.selectedFB=i.one("a");}});if(h.selectedFB){h.selectedFB.addClass("icon").addClass("icon-checkmark");}}}}function T(e,Y){var f=this,c,d,b;if(e){if(f.selectedFN!==null){f.selectedFN.removeClass("checked");f.selectedFN.one("i.icon").removeClass("icon-checkmark");}if(!Y){b=f.editor.getDefaultFontInfo(false);Y=b.fontFamily||"";}c=e.all("li[data-value]");c.each(function(g){d=g.getAttribute("data-value");if(d.toLowerCase().indexOf(Y.toLowerCase())>=0){f.selectedFN=g;}});if(f.selectedFN){f.selectedFN.addClass("checked");f.selectedFN.one("i.icon").addClass("icon-checkmark");}}}function E(c,Y){var d=this,b;Y=Y||"";if(c){if(d.selectedFS!==null){d.selectedFS.removeClass("checked");d.selectedFS.one("i.icon").removeClass("icon-checkmark");}if(isNaN(Y)){b=d.editor.getDefaultFontInfo(false);Y=b.fontSize||"";}d.selectedFS=c.one('li[data-value="'+Y+'"]');if(d.selectedFS){d.selectedFS.addClass("checked");d.selectedFS.one("i.icon").addClass("icon-checkmark");}}}function J(Y){var b=this;b.baseNode.one("div.format-pane").all('span[role="button"]').each(function(c){if(!c.hasClass("last")){c.setStyle("display",Y?"":"none");}else{if(Y){c.get("id")==="switchtext-plain"?c.addClass("hidden"):c.removeClass("hidden");}else{c.get("id")==="switchtext-plain"?c.removeClass("hidden"):c.addClass("hidden");}}});}function N(Y){if(Y.length===4){return Y[0]+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3];}return Y;}function X(c){if(!this.editor.get("isRich")){return;}var d=this,b,Y;if(!0){b=c.commands;d.formatButtons.removeClass("pressed");d.formatButtons.each(function(g){var f=g.getAttribute("data-action"),e=g.hasClass("btnpress");if(f&&b[f]&&e){g.addClass("pressed");}});if(c.fontColor){d.selectedFCValue=N(c.fontColor);d.selectFontColorInMenu(d.fontColorMenu,"fore",d.selectedFCValue);}d.selectedFBValue=c.backgroundColor?N(c.backgroundColor):"#ffffff";d.selectFontColorInMenu(d.fontColorMenu,"back",d.selectedFBValue);if(c.fontFamily){d.selectedFNIndex=c.fontFamily;d.selectFontNameInMenu(d.fontNameMenu,d.selectedFNIndex);}if(c.fontSize.indexOf("pt")!==-1){Y=c.fontSize.replace("pt","");d.selectedFSIndex=d._fontSizeMatch(Y);d.selectFontSizeInMenu(d.fontSizeMenu,d.selectedFSIndex);}else{Y=parseInt(c.fontSize.replace("px",""),10);if(!isNaN(Y)){d.selectedFSIndex=d._fontSizeMatch(Y);d.selectFontSizeInMenu(d.fontSizeMenu,d.selectedFSIndex);}else{if(C.UA.webkit){Y=d._fontSizeMatchWebkit(c.fontSize);if(!isNaN(Y)){d.selectedFSIndex=Y-1;}d.selectFontSizeInMenu(d.fontSizeMenu,d.selectedFSIndex);}}}}}function W(e){var f=10000,c,b=e,d,Y=F.length;if(b>7){for(d=0;d<Y;d++){c=Math.abs(e-F[d]);if(c<f){f=c;b=d;}}b++;}return b;}function G(Y){switch(Y){case"-webkit-xxx-large":return 7;case"xx-large":return 6;case"x-large":return 5;case"large":return 4;case"medium":return 3;case"small":return 2;case"x-small":return 1;}return Y;}C.extend(R,C.mail.ui.BaseWidget);C.namespace("mail.ui").RTEFormatter=R;C.mix(C.mail.ui.RTEFormatter.prototype,{NAME:"RTEFormatter",renderUI:B,bindUI:V,_invokeAction:H,_invokeDataAction:A,_showMenus:K,_showRTEMenu:Z,selectFontColorInMenu:P,selectFontSizeInMenu:E,selectFontNameInMenu:T,_switchEditMode:J,updateRTToolbar:X,_fontSizeMatch:W,_fontSizeMatchWebkit:G});},"1.0.0",{requires:[]});YUI.add("tictac-att-filter",function(e){var t=10*1024,a={};function s(){if(!c()){return false}if(NeoConfig.isInternal||NeoConfig.farm==="f9323"){return true}return true}if(s()){a=e.Array.hash(["pdf","xls","doc","ppt"])}function n(e,t,a){switch(e){case"xlsx":case"excel":case"msexcel":case"x-dos_ms_excel":case"x-excel":case"x-ms-excel":case"x-msexcel":case"x-xls":case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"vnd.openxmlformats-officedocument.spreadsheetml.template":case"vnd.ms-excel.sheet.macroEnabled.12":case"vnd.ms-excel.template.macroEnabled.12":return"xls";case"pptx":case"vnd.ms-powerpoint":case"vnd.openxmlformats-officedocument.presentationml.presentation":case"vnd.openxmlformats-officedocument.presentationml.template":case"vnd.openxmlformats-officedocument.presentationml.slideshow":return"ppt";case"docx":case"dot":case"microsoft_word":case"mswor2c sc2":case"msword":case"rtf":case"vnd.framemaker":case"vnd.ms-word":case"vnd.msword":case"winword":case"word":case"x-dot":case"x-fm":case"x-framemaker":case"x-maker":case"x-msw6":case"x-msword":case"x-rtf":case"x-soffice":case"text/richtext":case"text/rtf":case"text/vnd.graphviz":case"zz-winassoc-dot":case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.ms-word.document.macroEnabled.12":return"doc";case"x-zip-compressed":case"x-compressed":case"zip":return"zip";case"pdf":case"acrobat":case"x-pdf":case"vnd.pdf":case"text/pdf":case"text/x-pdf":return"pdf";default:if(!a){return n(t,t,true)}return t?t:"file"}return"file"}function r(e,t){var a,s=e.split(".");if(s.length>1){a=s[s.length-1]}return n(t,a)}function c(){return e.UA.chrome>=15||e.UA.gecko>=6||e.UA.safari>0||e.UA.ie>=9}e.namespace("Tictac.att").filter={map:n,attachment:function(t,s){var n=this,c={},i=3e3,o=3e3;if(!n.filter(t)){return}c.disposition=t.disposition;c.size=t.size;c.filename=t.filename;c.pid=t.partId;c.type=t.type;c.tnefId=t.tnefId;c.downloadable=true;c.getAttachmentUrl=t.downloadUrl;c.textExtractionUrl=t.textExtractionUrl;if(e.Tictac.base.utils.getVal(e,"Tictac.dropbox")){c.shareable=true}c.filetype=r(t.filename,t.subtype);if(t.hasOwnProperty("thumbnailurl")&&t.thumbnailurl!==null){c.thumbnail=t.thumbnailurl;c.fullsize=c.thumbnail+"&w="+i+"&h="+o;c.viewable=true}if(c.filetype in a){c.viewable=true;c.isDoc=true}if(s){for(var f in s){if(s.hasOwnProperty(f)){c[f]=s[f]}}}return c},attachments:function(t,a){var s=this,n,r=[];e.each(t,function(e){n=s.attachment(e,a);if(n){r.push(n)}});return r},filter:function(e){e.disposition=e.type==="image"&&e.referencedInline===true?"inline":e.disposition;return e.type!=="image"||e.type==="image"&&e.referencedInline===true&&e.size>=t||e.type==="image"&&!e.referencedInline?e:undefined}}},"1.0.0",{requires:["cookie"]});YUI.add("tictac-attach-stats",function(a){function g(a,b){var c="UploaderService";a=a.toLowerCase(),b&&b.message?(b.message=b.message.toLowerCase(),a==="form_tt_server_response"?f(c,"form_tt_"+b.message):f(c,a+"_"+b.message)):f(c,a),!window.console||!window.console.log,e.stat(a,b)}var b={html5_tt_onfileselect:13,html5_tt_attachment_uploadcancelled:14,html5_tt_credentialsetfailedcallback:15,html5_tt_credentialsetsuccessful:16,html5_tt_credentialsetsuccessful_retry:17,html5_tt_credentialsetfailed:18,html5_tt_failure_uploaderror_io:19,html5_tt_no_cred:20,html5_tt_retry:21,html5_tt_success:22,html5_tt_failure:23,form_tt_onfileselect:24,form_tt_attachment_uploadcancelled:25,form_tt_attachuploadiframeerror:26,form_tt_abandon:27,form_tt_server_response:28,controller_uploaderror:29,view_upload_success:30,view_upload_failure:31,html_tt_credfetchsuccessdata:32,controller_uploadretrysuccess:33,toggleformactivated:34,download_error_json:35,download_error_general:36,download_success_error:37,download_success_errors:38,download_success_nourl:39,download_success_success:40,download_success_warning:41,download_success:42,controller_db_upload_start:43,controller_db_upload_success:44,controller_db_upload_failure:45,html5_tt_db_upload_try_failure:46,dropbox_saveto:56,enhancr_autolink_count:94,enhancr_card_added:95,enhancr_card_removed:96,enhancr_card_call_success:97,enhancr_card_call_fail:98,enhancr_fwd_or_reply:99},c={action:17,bucket:28,message:20,count:29,size:30},d={name:"attach",appId:"1000934436956",isSampled:Math.floor(Math.random()*100+0)===0,actionEnums:b,customFieldEnums:c},e=new a.Tictac.base.Ywa(d),f=a.common.Utils.rocketstats.intlStat;a.namespace("Tictac.attach").Stats={makeStatConf:function(){return{stat:g}}},a.namespace("Tictac.attach.Stats").stat=g,a.namespace("tictac.attach.Stats").stat=g},"1.0.0",{requires:["tictac-base-ywa"]});YUI.add("tictac-attach-utils",function(a){var b=a.Array.hash(["uploadFileSizeError","uploadNoFileError","uploadAVCannotClean","uploadAVHasVirus","uploadInternalError","uploadMailboxError","uploadPartialFileError","uploadAuthError"]),c=a.Array.hash(["uploadAVInternalError","uploadAVError","uploadAVServerDown","uploadAVCleaned"]),d=a.Array.hash(["uploadAVNoVirus","uploadAVNotScannable"]),e=a.merge(b,d);a.namespace("Tictac.attach").Utils={configure:function(b,c){var d=!0;return a.each(c,function(c,e){a.Object.owns(b,e)||(d=!1)}),d?(a.mix(b,c,!0),!0):!1},trackClick:function(b,c){var d={action:b};c&&(d.append=c),a.fire("mt:click",d)},isSvrResponseRecognized:function(a){return!!e[a]},isSvrResponseWarning:function(a){return!!c[a]},isSvrResponseSuccess:function(a){return!!d[a]}},a.namespace("tictac.attach").Utils=a.Tictac.attach.Utils},"2.0",{requires:["node","json"]});YUI.add("tictac-attach-enhancr-autolink",function(a){function d(){return window.getSelection().getRangeAt(0)}function e(a){switch(a.get("nodeType")){case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.COMMENT_NODE:return a.get("length");default:return a.get("childNodes").size()}}function f(a){var b=a.get?a.get("nodeType"):a.nodeType;return b===Node.TEXT_NODE}function g(a,b){var c;return e(a)===0||a.get("childNodes").isEmpty()?null:(c=a.get("childNodes").item(b))!==null?c:(c=a.get("childNodes").item(b-1))!==null?c:null}function h(a,b){var c=b(a,"a",!0);if(c)return c;if(!f(a)){c=a.one("a");if(c)return c}return null}function i(b,c,d,e){var f=document.createRange(),g=e;return f.setStart(b.getDOMNode(),c),f.setEnd(b.getDOMNode(),d),window.getSelection().removeAllRanges(),window.getSelection().addRange(f),e.indexOf("http")!==0&&(e="http://"+e),e=e.replace('"',"%22").replace("'","%27"),a.UA.ie&&a.UA.ie<11?(f.deleteContents(),f.insertNode(a.Node.create('<a href="'+e+'">'+g+"</a>").getDOMNode())):document.execCommand("createlink",!1,e),f}function j(b,c){var d,e=a.Node(b.endContainer);return d=b.endOffset-1,a.UA.gecko&&(d=b.endOffset),e=g(e,d)||e,!a.UA.ie&&f(e)&&(e=e.previous()),c(e,"a",!0)}function k(k,m,n){function y(a,b,c){return a.ancestor(b,!!c,function(a){return a===n})}var o,p,q,r,s,t,u,v,w=d(),x=function(b){while(b&&a.Lang.trim(b.get("text"))==="")b=b.get("previousSibling"),b&&f(b)&&(m=e(b));return b};(p=g(k,m))!==null&&(k=p,m=0),k=x(k)||k,o=h(k,y);if(o)return f(k)&&w.endOffset===w.endContainer.length&&(w.setStartAfter(o.getDOMNode()),w.collapse(!0),window.getSelection().addRange(w)),o;if(!f(k))return null;q=/[^\s]+[\s]*$/.exec(k.substringData(0,m));if(!q)return null;r=q.index,s=q[0],c.test(s)?t=c.source:t="^www\\."+b.source;if(!(new RegExp(t,"i")).test(s))return null;while(!(new RegExp(t+"$","i")).test(k.substringData(r,m-r)))m--;return u=k.substringData(r,m-r),v=i(k,r,m,u),a.Tictac.attach.Stats.stat("enhancr_autolink_count"),a.Tictac.attach.Utils.trackClick("enhancr_autolink_count"),o=j(v,y),l(o),o}function l(a){var b=document.createRange();b.setStartAfter(a.getDOMNode()),b.collapse(!0),window.getSelection().removeAllRanges(),window.getSelection().addRange(b)}var b=/([a-z0-9-]+\.)+([a-z]{2,4})(\/+[a-z0-9_.\:\;@-]*)*(\?[\&\%\|\+a-z0-9_=,\.\:\;-]*)?([\&\%\|\+&a-z0-9_=,\:\;\.-]*)([\!\#\/\&\%\|\+a-z0-9_=,\:\;\.-]*)}*/,c=/^(https?\:\/\/)[^\s]+/;a.Node.DOM_EVENTS.paste=1,a.Node.DOM_EVENTS.key.eventDef.KEY_MAP.space=32,a.Node.DOM_EVENTS.key.eventDef.KEY_MAP.enter=13,a.Node.prototype.substringData=function(){var a=this.getDOMNode();return a.substringData.apply(a,arguments)};var m=function(){this.triggers=this.constructor.TRIGGERS,m.superclass.constructor.apply(this,arguments)};a.extend(m,a.Plugin.Base,{_linkify:function(b){var c=d(),e;this.get("linkingEnabled")&&(e=k(a.Node(c.startContainer),c.startOffset,this.container),e&&this._onLinkDetected(e,b))},_onKey:function(a){var b=this.triggers,c=a.keyCode===13?b.ENTER:b.SPACE;this._linkify(c)},_onPaste:function(){function c(){b._linkify(b.triggers.PASTE)}var b=this;b.pasteTimer=a.later(0,this,c)},_onLinkDetected:function(b,c){a.later(15,this,function(){this.editor.fire("link",{node:b,trigger:c})})},_afterEditorReady:function(){var b=this.listeners;this.editor=this.get("host"),this.container=this.editor.frame.get("container"),this.editor.publish("link",{emitFacade:!0}),this.editor.getInstance().EditorSelection.CURSOR='<br class="yui-cursor">',a.UA.ie>=9&&document.execCommand("AutoUrlDetect",!1,!1),b.push(this.container.on("key",a.bind(this._onKey,this),"press:space,enter")),b.push(this.container.on("paste",a.bind(this._onPaste,this)))},initializer:function(){var b=this,c=b.get("host");b.listeners=[];if(c.get("isReady")){b._afterEditorReady();return}b.listeners.push(c.after("ready",a.bind(function(){b._afterEditorReady()})))},destructor:function(){var b=this;a.each(b.listeners,function(a){a.detach()}),b.pasteTimer&&b.pasteTimer.cancel()}},{NAME:"autolink",NS:"autolink",ATTRS:{host:{value:!1},linkingEnabled:{value:!0,validator:function(b){return a.Lang.isBoolean(b)}}}}),a.namespace("Tictac.attach.enhancr").AutolinkPlugin=m,m.TRIGGERS={PASTE:"paste",ENTER:"enter",SPACE:"space"}},"1.0.0",{requires:["tictac-attach-stats","tictac-attach-utils","base","plugin","event-custom","event-key","node-base"]});/**
 * Wrapper around Y.io.
 *
 * @module tictac-base
 * @submodule tictac-base-mail-io
 */YUI.add("tictac-base-mail-io",function(a){function f(b,g,h){function k(a,b){var d,e=b.getResponseHeader("Content-Type");e.indexOf("application/json")!==-1&&(d=c.parseJSON(b.responseText)),i(a,b,d)}function l(h,i){var k=c.parseJSON(i.responseText),l,m,n;if(k&&k.error&&k.error.code==="Client.ClientRedirect.SessionIdReissue"){k.error.wssid?n=k.error.wssid:(l=k.error.detail.url,m=l.match(d),n=m&&m.length>1?m[1]:e.getWssid()),NeoConfig.wssid=n,e.setWssid(n),b=b.replace(d,"&wssid="+n),f(b,g);return}if(k&&k.error&&(k.error.code==="Client.ExpiredCredentials"||k.error.code==="Client.MissingCredentials")){a.once("net:reloginSuccessful",function(){f(b,g)}),a.common.net.Error.simpleRelogin();return}j(h,i)}var i=g.on.success,j=g.on.failure;g.on.success=k,g.on.failure=l,a.io(b+(h?"":"&rand="+(new Date).getTime()),g)}var b=a.Tictac,c=b.base.utils,d=/[\&|\?]wssid=([^\&\#]+)/,e=a.common.net.SessionMgr;a.namespace("Tictac.base").mailIO={send:f}},"1.0.0",{requires:["tictac-base-utils","io","common-net-sessionmgr"]});YUI.add("tictac-attach-enhancr-net",function(a){function f(b,f){var g=window.location.protocol+"//"+window.location.host+"/ws/comms/hlfs/",h=window.location.href.indexOf("enhancrbeta")!==-1,i;h&&(g=g.replace(/hlfs/,"hlfs-beta")),i=[g,"?url="+encodeURIComponent(b),"&docproc=linkinfo","&proxyType=http","&clientid=mailc"].join(""),a.Tictac.base.mailIO.send(i,{timeout:e,method:"GET",on:{success:function(a,b,e){var g=e,h,i,j;h=c(g,"docproc"),i=c(h,"linkinfo"),j=c(g,"urldomain"),i?f.success(i,j):(d("Did not receive a linkinfo object."),f.fail())},failure:f.fail}})}var b=a.Tictac.base.utils,c=b.getVal,d=b.log,e=7e3;a.namespace("Tictac.attach.enhancr").Net={getLinkEnhancements:f}},"1.0.0",{requires:["tictac-base-utils","tictac-base-mail-io"]});YUI.add("tictac-attach-rollups",function(a){a.namespace("Tictac.attach.rollups"),a.Tictac.attach.rollups.dragdrop=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h="function",i=this.escapeExpression;return f+="<div id='uploader-droparea' class='tictac-attach-droparea'><div>",(g=c.drag_here)?g=g.call(b,{hash:{},data:e}):(g=b.drag_here,g=typeof g===h?g.apply(b):g),f+=i(g)+"</div></div>",f}),a.Tictac.attach.rollups.enhanced_card_media=a.Handlebars.template(function(a,b,c,d,e){function m(a,b){var d="",e;return d+='<tr><td colspan="3" style="background-color: #000000;"><div class="link-enhancr-image-wrapper" align="center"><img alt="image" src="',(e=c.image)?e=e.call(a,{hash:{},data:b}):(e=a.image,e=typeof e===i?e.apply(a):e),d+=j(e)+'" class="link-enhancr-thumbnail-image" width="',(e=c.imageWidth)?e=e.call(a,{hash:{},data:b}):(e=a.imageWidth,e=typeof e===i?e.apply(a):e),d+=j(e)+'" style="cursor: text !important; display: block; margin: auto; width: ',(e=c.imageWidth)?e=e.call(a,{hash:{},data:b}):(e=a.imageWidth,e=typeof e===i?e.apply(a):e),d+=j(e)+'px;"></div></td></tr>',d}function n(a,b){return'<tr><td colspan="3" style="height: 10px;"><div style="height: 10px;"></div></td></tr>'}function o(a,b){return"border-top: none;"}function p(a,b){return"14px 30px 20px 20px"}function q(a,b){return"11px 30px 20px 15px"}function r(a,b){return"padding-right: 40px;"}function s(a,b){return"margin-bottom: 5px; font-size: 21px; line-height: 24px; font-weight: normal;"}function t(a,b){return"font-size: 13px; line-height: 18px;"}function u(a,b){var d="",e;return d+='<span style="font-size: 13px; line-height: 18px; color: #5f5f5f" class="link-enhancr-card-description">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===i?e.apply(a):e),d+=j(e)+"</span>",d}function v(a,b){var d="",e;return d+='<img alt="icon" src="',(e=c.faviconUrl)?e=e.call(a,{hash:{},data:b}):(e=a.faviconUrl,e=typeof e===i?e.apply(a):e),d+=j(e)+'" class="link-enhancr-favicon" width="15" height="15"style="vertical-align: middle; margin-right: 4px !important;">',d}function w(a,b){var d="",e;return d+='<span class="link-enhancr-video-width" title="',(e=c.videoWidth)?e=e.call(a,{hash:{},data:b}):(e=a.videoWidth,e=typeof e===i?e.apply(a):e),d+=j(e)+'"></span><span class="link-enhancr-video-height" title="',(e=c.videoHeight)?e=e.call(a,{hash:{},data:b}):(e=a.videoHeight,e=typeof e===i?e.apply(a):e),d+=j(e)+'"></span><span class="link-enhancr-video-src" title="',(e=c.videoSrc)?e=e.call(a,{hash:{},data:b}):(e=a.videoSrc,e=typeof e===i?e.apply(a):e),d+=j(e)+'"></span>',d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h,i="function",j=this.escapeExpression,k=this,l=c.blockHelperMissing;f+='<div style="width:',(g=c.cardWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+'px;" contenteditable="false" id="',(g=c.cardId)?g=g.call(b,{hash:{},data:e}):(g=b.cardId,g=typeof g===i?g.apply(b):g),f+=j(g)+'" class="link-enhancr-attachment"><table cellspacing="0" cellpadding="0" style="width:',(g=c.cardWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+'px; margin:5px 0; display: block;"><tbody style="background-color: #e5e5e5;">',g=c["if"].call(b,b.hasImage,{hash:{},inverse:k.program(3,n,e),fn:k.program(1,m,e),data:e});if(g||g===0)f+=g;f+='<tr><td style="width: 10px;"><div style="width: 10px;"></div></td><td style="width: ',(g=c.cardTextPartWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardTextPartWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+'px; vertical-align: top; position: relative; "><div class="link-enhancr-text-part" style="border: 1px solid #c6c6cb; ',h={hash:{},inverse:k.noop,fn:k.program(5,o,e),data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;f+=' background-color: white;"><div style="word-wrap: break-word; padding: ',g=c["if"].call(b,b.useBigCard,{hash:{},inverse:k.program(9,q,e),fn:k.program(7,p,e),data:e});if(g||g===0)f+=g;f+="; ",h={hash:{},inverse:k.program(11,r,e),fn:k.noop,data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='"><span class="icon icon-close link-enhancr-delete" style="top: 10px"></span><h1 style="margin: 0; ',g=c["if"].call(b,b.useBigCard,{hash:{},inverse:k.program(15,t,e),fn:k.program(13,s,e),data:e});if(g||g===0)f+=g;f+=' color: #000000;">',(g=c.title)?g=g.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),f+=j(g)+"</h1>",h={hash:{},inverse:k.noop,fn:k.program(17,u,e),data:e},(g=c.hasDescription)?g=g.call(b,h):(g=b.hasDescription,g=typeof g===i?g.apply(b):g),c.hasDescription||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='<div style="margin-top:5px;"><a href="',(g=c.cardUrl)?g=g.call(b,{hash:{},data:e}):(g=b.cardUrl,g=typeof g===i?g.apply(b):g),f+=j(g)+'" class="link-enhancr-card-url" style="color: black; text-decoration: none !important;cursor:pointer !important;" target="_blank"><span style="display: inline-block; line-height: 9px;">',h={hash:{},inverse:k.noop,fn:k.program(19,v,e),data:e},(g=c.hasFavicon)?g=g.call(b,h):(g=b.hasFavicon,g=typeof g===i?g.apply(b):g),c.hasFavicon||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='<span style="vertical-align:middle; font-size: 11px; line-height: 13px; color: #5f5f5f;">',(g=c.viewOnMarkup)?g=g.call(b,{hash:{},data:e}):(g=b.viewOnMarkup,g=typeof g===i?g.apply(b):g);if(g||g===0)f+=g;f+="</span></span></a>",h={hash:{},inverse:k.noop,fn:k.program(21,w,e),data:e},(g=c.hasVideoData)?g=g.call(b,h):(g=b.hasVideoData,g=typeof g===i?g.apply(b):g),c.hasVideoData||(g=l.call(b,g,h));if(g||g===0)f+=g;return f+='</div></div></div></td><td style="width: 10px;"><div style="width: 10px;"></div></td></tr><tr><td colspan="3" style="height: 10px;"><div style="height: 10px;"></div></td></tr></tbody></table></div>',f}),a.Tictac.attach.rollups.attachment_well=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="attachments-well hidden compose-ignore" contenteditable="false"></div>'}),a.Tictac.attach.rollups.enhanced_card_article=a.Handlebars.template(function(a,b,c,d,e){function m(a,b){var d;return(d=c.imageSize)?d=d.call(a,{hash:{},data:b}):(d=a.imageSize,d=typeof d===i?d.apply(a):d),j(d)}function n(a,b){return"auto"}function o(a,b){return'<tr style="height: 10px;"><td colspan="3"><div style="height: 10px;"></div></td></tr>'}function p(a,b){var d="",e;return d+='<td style="vertical-align: middle; width: ',(e=c.imageSize)?e=e.call(a,{hash:{},data:b}):(e=a.imageSize,e=typeof e===i?e.apply(a):e),d+=j(e)+"px; height: ",(e=c.imageSize)?e=e.call(a,{hash:{},data:b}):(e=a.imageSize,e=typeof e===i?e.apply(a):e),d+=j(e)+'px; background-color: #000000;"><div style="width: ',(e=c.imageSize)?e=e.call(a,{hash:{},data:b}):(e=a.imageSize,e=typeof e===i?e.apply(a):e),d+=j(e)+'px;" align="center"><img alt="image" src="',(e=c.image)?e=e.call(a,{hash:{},data:b}):(e=a.image,e=typeof e===i?e.apply(a):e),d+=j(e)+'" class="link-enhancr-thumbnail-image" width="',(e=c.imageWidth)?e=e.call(a,{hash:{},data:b}):(e=a.imageWidth,e=typeof e===i?e.apply(a):e),d+=j(e)+'" style="cursor: text !important; display: block; margin: auto;"></div></td>',d}function q(a,b){return'<td style="width: 10px;"><div style="width: 10px;"></div></td>'}function r(a,b){var d="",e;return d+="height: ",(e=c.cardTextPartHeight)?e=e.call(a,{hash:{},data:b}):(e=a.cardTextPartHeight,e=typeof e===i?e.apply(a):e),d+=j(e)+"px; border-left: none;",d}function s(a,b){return"16px 30px 20px 20px"}function t(a,b){return"11px 30px 20px 15px"}function u(a,b){return"padding-right: 40px;"}function v(a,b){return"margin-bottom: 5px; font-size: 21px; line-height: 24px; font-weight: normal;"}function w(a,b){return"font-size: 13px; line-height: 18px;"}function x(a,b){var d="",e;return d+='<span style="font-size: 13px; line-height: 18px; color: #5f5f5f;" class="link-enhancr-card-description">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===i?e.apply(a):e),d+=j(e)+"</span>",d}function y(a,b){return"9"}function z(a,b){return"7"}function A(a,b){var d="",e;return d+='<img alt="icon" src="',(e=c.faviconUrl)?e=e.call(a,{hash:{},data:b}):(e=a.faviconUrl,e=typeof e===i?e.apply(a):e),d+=j(e)+'" class="link-enhancr-favicon" width="15" height="15" style="vertical-align: middle; margin-right: 4px !important;">',d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h,i="function",j=this.escapeExpression,k=this,l=c.blockHelperMissing;f+='<div style="width:',(g=c.cardWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+'px;" contenteditable="false" id="',(g=c.cardId)?g=g.call(b,{hash:{},data:e}):(g=b.cardId,g=typeof g===i?g.apply(b):g),f+=j(g)+'" class="link-enhancr-attachment"><table cellspacing="0" cellpadding="0" style="background-color: #e5e5e5; width:',(g=c.cardWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+"px; height:",g=c["if"].call(b,b.hasImage,{hash:{},inverse:k.program(3,n,e),fn:k.program(1,m,e),data:e});if(g||g===0)f+=g;f+='; position: relative; margin:5px 0; display: block;">',h={hash:{},inverse:k.program(5,o,e),fn:k.noop,data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;f+="<tr>",g=c["if"].call(b,b.hasImage,{hash:{},inverse:k.program(9,q,e),fn:k.program(7,p,e),data:e});if(g||g===0)f+=g;f+='<td style="width: 100%; vertical-align: middle;"><div class="link-enhancr-text-part" style="line-height:16.5px; border: 1px solid #c6c6cb; background-color: white; ',h={hash:{},inverse:k.noop,fn:k.program(11,r,e),data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;f+=" width: ",(g=c.cardTextPartWidth)?g=g.call(b,{hash:{},data:e}):(g=b.cardTextPartWidth,g=typeof g===i?g.apply(b):g),f+=j(g)+'px;"><div style="word-wrap: break-word; padding: ',g=c["if"].call(b,b.useBigCard,{hash:{},inverse:k.program(15,t,e),fn:k.program(13,s,e),data:e});if(g||g===0)f+=g;f+="; ",h={hash:{},inverse:k.program(17,u,e),fn:k.noop,data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='"><span class="icon icon-close link-enhancr-delete"></span><h1 style="margin: 0; ',g=c["if"].call(b,b.useBigCard,{hash:{},inverse:k.program(21,w,e),fn:k.program(19,v,e),data:e});if(g||g===0)f+=g;f+=' color: #000000">',(g=c.title)?g=g.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),f+=j(g)+"</h1>",h={hash:{},inverse:k.noop,fn:k.program(23,x,e),data:e},(g=c.hasDescription)?g=g.call(b,h):(g=b.hasDescription,g=typeof g===i?g.apply(b):g),c.hasDescription||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='<div style="margin-top:',g=c["if"].call(b,b.hasFavicon,{hash:{},inverse:k.program(27,z,e),fn:k.program(25,y,e),data:e});if(g||g===0)f+=g;f+='px !important;"><a href="',(g=c.cardUrl)?g=g.call(b,{hash:{},data:e}):(g=b.cardUrl,g=typeof g===i?g.apply(b):g),f+=j(g)+'" class="link-enhancr-card-url" style="color: black; text-decoration: none !important;cursor:pointer !important;" target="_blank"><span style="display: inline-block; line-height: 9px;">',h={hash:{},inverse:k.noop,fn:k.program(29,A,e),data:e},(g=c.hasFavicon)?g=g.call(b,h):(g=b.hasFavicon,g=typeof g===i?g.apply(b):g),c.hasFavicon||(g=l.call(b,g,h));if(g||g===0)f+=g;f+='<span style="vertical-align:middle; font-size: 11px; line-height: 13px; color: #5f5f5f">',(g=c.viewOnMarkup)?g=g.call(b,{hash:{},data:e}):(g=b.viewOnMarkup,g=typeof g===i?g.apply(b):g);if(g||g===0)f+=g;f+='</span></span></a></div></div></div></td><td style="width: 10px;"><div style="width: 10px;"></div></td></tr>',h={hash:{},inverse:k.program(5,o,e),fn:k.noop,data:e},(g=c.hasImage)?g=g.call(b,h):(g=b.hasImage,g=typeof g===i?g.apply(b):g),c.hasImage||(g=l.call(b,g,h));if(g||g===0)f+=g;return f+="</table></div>",f})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-attach-enhancr-card",function(a){function j(a,b,c,d){var e,f,g=this;e=a,f="enhancrCard_"+h,h++,g.parentNode=b.cardParentNode,g.evtHandlers=[],g.url=a,g.tmStart=(new Date).getTime(),g.getType=function(){return d.cardType},p({scope:this,cardId:f,url:e,useBigCard:d.useBigCard,managerFn:c,isEnter:d.isEnter,aTagNode:d.aTagNode,cardInfo:b.cardInfo,urlDomain:b.urlDomain})}function k(a,b,c){var d,e,f,g={},h=function(a,c,d){var e={};return a.type==="image"?(c<=200&&d<=200&&(a.useBigCard=!1),e.landscapeSize=a.useBigCard?{width:575,height:Infinity}:{width:200,height:200},e.portraitSize=a.useBigCard?{width:Infinity,height:475}:{width:200,height:200},a.useBigCard||(a.imageSize=200,a.cardTextPartHeight=178,a.cardWidth=380,a.cardTextPartWidth=a.hasImage?170:360)):b.type==="article"?(c<=145&&d<=145&&(a.useBigCard=!1),a.cardTextPartWidth=a.useBigCard?a.hasImage?330:555:a.hasImage?420:555,e.landscapeSize=a.useBigCard?{width:235,height:235}:{width:145,height:145},e.portraitSize=a.useBigCard?{width:235,height:235}:{width:145,height:145},a.cardTextPartHeight=a.useBigCard?213:123,a.imageSize=a.useBigCard?235:145):(c<=250&&(a.useBigCard=!1),e.landscapeSize=a.useBigCard?{width:350,height:Infinity}:{width:250,height:Infinity},e.portraitSize=a.useBigCard?{width:Infinity,height:350}:{width:Infinity,height:250},a.cardWidth=a.useBigCard?350:250,a.cardTextPartWidth=a.useBigCard?330:230),e},i=function(a,b){var c,d;return a=parseInt(a,10),b=parseInt(b,10),d=a>=b?g.landscapeSize:g.portraitSize,a>d.width||b>d.height?(c=Math.max(a/d.width,b/d.height),a=Math.round(a/c)):a<d.width&&b<d.height&&(c=Math.min(d.width/a,d.height/b),a=Math.round(a*c)),a};a.imageHeight&&a.imageWidth?(g=h(b,a.imageWidth,a.imageHeight),b.imageWidth=i(a.imageWidth,a.imageHeight),b.type==="image"&&b.useBigCard&&(b.cardWidth=b.imageWidth,b.cardTextPartWidth=b.cardWidth-20),b.imageDetails="before:"+a.imageWidth+"x"+a.imageHeight,b.imageType=a.imageWidth>a.imageHeight?"landscape":"portrait",o(b),c(b)):(f=new Image,f.onload=function(){d=f.width,e=f.height,g=h(b,d,e),b.imageWidth=i(d,e),b.imageType=d>e?"landscape":"portrait",o(b),b.type==="image"&&b.useBigCard&&(b.cardWidth=b.imageWidth,b.cardTextPartWidth=b.cardWidth-20),b.imageDetails="after:"+d+"x"+e,c(b)},f.onerror=function(){b.hasImage=!1,c(b)},f.onabort=f.onerror,f.src=a.url)}function l(a,b){switch(a){case"article":return e.enhanced_card_article;case"image":return b?e.enhanced_card_media:e.enhanced_card_article;case"video":return e.enhanced_card_media;default:return null}}function m(b,c){var d=this,e=l(b.type,b.useBigCard),f=e(b),h=a.Node.create(f),j,k,m=c.isEnter,n,o,p=c.removeFn,q=c.execCommand,r,s,t,u,v;if(d.getType()===i.HLFS){k=c.parentNode,n=c.getLastCardNode(k,c.aTagNode),s=k===n;if(!m||!o)if(!n.next()||n.next().get("tagName").toUpperCase()!=="P")j=n.get("id"),r='<p id="'+j+'"> &nbsp;</p>',t=a.Node.create(r),n.insert(t,"after");n.insert(h,"after")}else v=a.Node.create("<div></div>"),v.append(h),q("insertHTML",v.get("innerHTML"));u=h.one(".link-enhancr-delete"),d.evtHandlers.push(u.once("click",function(a){a.stopPropagation(),p(d)})),d._cardNode=h,g("enhancr_card_added",{count:d.age(),message:b.imageDetails})}function n(a,b){var c;return a&&a.length>b&&(a=a.substring(0,b),a.charAt(b)!==" "&&(c=a.lastIndexOf(" "),a=a.substring(0,c)),a+="..."),a}function o(a){var b,c,d=a.title,e=a.description;switch(a.type){case"video":b=a.useBigCard?75:70,c=a.useBigCard?110:55;break;case"image":a.useBigCard?(b=a.imageType==="landscape"?95:55,c=a.imageType==="landscape"?130:115):(b=45,c=25);break;case"article":b=65,c=a.useBigCard?153:95;break;default:}b&&d&&(a.title=n(d,b)),c&&e&&(a.description=n(e,c))}function p(b){var d=b.scope,e=b.cardInfo,f=b.url,g=b.urlDomain?b.urlDomain:"",h=b.cardId,i=e.image,j=e.video,l=e.type,n,p,q={parentNode:d.parentNode,removeFn:b.managerFn.remove,getLastCardNode:b.managerFn.getLastCardNode,execCommand:b.managerFn.execCommand,isEnter:b.isEnter,aTagNode:b.aTagNode},r=a.Tictac.attach.strings.str_enhancr_card_view_on.replace("{{link}}",'<span style="color: #196AD4">'+a.Escape.html(g)+"</span>"),s={cardId:h,title:e.title,cardUrl:f,hasImage:!!i.url,image:i.url,useBigCard:b.useBigCard,hasDescription:!!e.description,description:e.description,cardWidth:575,cardTextPartWidth:555,viewOnMarkup:r,hasFavicon:!!c(e,"favicon.url"),faviconUrl:c(e,"favicon.url"),hasVideoData:!1,type:l};l==="video"&&j.html&&(n=a.Node.create(j.html),s.videoWidth=n.get("width"),s.videoHeight=n.get("height"),s.videoSrc=n.get("src"),s.hasVideoData=!0),s.hasImage?(p={url:i.url,imageWidth:i.width,imageHeight:i.height},k(p,s,function(a){m.apply(d,[a,q])})):(o(s),m.apply(d,[s,q]))}function q(a){var b=a.type,c=a.image.url;return b==="image"||b==="video"?!!c:b==="article"?a.title||a.description:!1}function r(a,b){var c=a.ancestor(function(a){return a.getStyle("display")==="block"||a.get("id")===b.get("id")},!0);return c.get("id")===b.get("id")&&d("Should not get the RTE container. There is a Problem."),c.get("className").indexOf("yahoo_quoted")>=0&&(c=a),c}function s(a,b){var c=a.ancestor(".link-enhancr-attachment",!1,function(a){return a===b});return!!c}function u(a,b,c){function h(){var a=(new Date).getTime()-e;return Math.round(a/50)*50}var e=(new Date).getTime();f.getLinkEnhancements(a,{success:function(a,d){var e=q(a),f={cardInfo:a,urlDomain:d};e&&b(f),g("enhancr_card_call_success",{count:h()}),c(e)},fail:function(){d("Getting Link Info Failed"),g("enhancr_card_call_fail",{count:h()}),c(!1)}})}var b=a.Tictac.base.utils,c=b.getVal,d=b.log,e=a.Tictac.attach.rollups,f=a.Tictac.attach.enhancr.Net,g=a.Tictac.attach.Stats.stat,h=0,i={DROPBOX:"dropbox",FLICKR:"flickr",HLFS:"platform-card"};a.mix(j.prototype,{deleteCard:function(){var b=this;b._cardNode&&b._cardNode.remove(!0),a.each(b.evtHandlers,function(a){a.detach()})},age:function(){var a=(new Date).getTime()-this.tmStart;return Math.round(a/50)*50}}),a.augment(j.prototype,a.EventTarget);var t=function(){t.superclass.constructor.apply(this,arguments)};a.extend(t,a.Plugin.Base,{initializer:function(){function z(a,b,d){var f,g=!1,h={remove:v,getLastCardNode:x,execCommand:function(a,b){var c,d=e.getInstance(),f=e.frame.get("container"),g=f.get("children"),h=g.item(g.size()-1),i=h.hasClass("yahoo_quoted"),j,k=f.getHTML().length;e.focus(),c=new d.EditorSelection,i||(f=r(c.anchorNode.ancestor(),f),g=f.get("children"),h=g.item(g.size()-1)),c.selectNode(h,!0,k),e.execCommand("insertParagraph"),e.execCommand("insertLineBreak"),c=new d.EditorSelection,c.selectNode(h,!0,k),e.execCommand(a,b),g=f.get("children"),j=g.item(g.size()-2-(i?1:0)),j&&j.hasClass(".link-enhancr-attachment")?j.setAttribute("contentEditable",!1):f.all(".link-enhancr-attachment").setAttribute("contentEditable",!1)}};return n++,m&&(m=!1,g=!0),d.useBigCard=g,f=new j(a,b,h,d),c.push(f),f}var b=this,c=[],e=b.get("host"),f=e.frame.get("container"),h=e.get("toolbarNode"),k=h.one("#enhancr-spinner"),l=new a.comms.ui.Envelope(k),m=!0,n=0,o=[],p=[],q={},t={},v=function(b){var d=a.Array.indexOf(c,b);b.deleteCard(),c.splice(d,1),delete q[b.url],n--,m=!c.length,g("enhancr_card_removed")},w=function(){a.each(c,function(a){a._cardNode.ancestor()||v(a)},this)},x=function(b,c){var d=c.ancestor(function(a){return a.get("id")===f.get("id")||a.ancestor()&&a.ancestor().getStyle("display")==="block"},!0),e=null,g,h=function(b){return a.Lang.trim(b),b.indexOf("http")!==0&&(b="http://"+b),b},i=function(a){var b=a.all("a"),c,d,f,g,i;a.get("tagName").toUpperCase()==="A"&&b.push(a),c=b.size();for(d=c-1;d>=0;d--){f=b.item(d),g=f.get("id"),i=h(f.getAttribute("href"));if(!!q[i]&&!!q[i][g])return e=q[i][g],!0}return!1},j=function(a){var b=a.previous(function(a){return i(a)});return!b};return j(c)&&d.previous(function(a){return i(a)}),e&&(g=e._cardNode,g&&g.next()&&(b=g.next())),b},y=function(){var c="div[class*='link-enhancr-attachment'][id*='enhancrCard_']",d=f.all(c);d.size()&&b._set("hadCardsInOriginal",!0),a.each(d,function(a){var b="span[class*='link-enhancr-delete'][class*='icon'][class*='icon-close']",c=a.one(b),d=a.one("a");m=!1,c&&c.setAttribute("class","icon icon-close link-enhancr-delete"),a.setAttribute("contenteditable",!1),d&&d.setAttribute("contenteditable",!1)})};o.push(e.once("renderComplete",y)),o.push(f.on("paste",function(b){var c=r(b.target,f),d,e,g=function(a){return document.createTreeWalker(a.getDOMNode(),NodeFilter.SHOW_TEXT)};p.push(a.later(0,this,function(){f.all('div[class$="link-enhancr-attachment"]').setAttribute("contenteditable",!1),a.each(f.all('div[class$="link-enhancr-attachment"]'),function(a){a.all("br").remove(!0)})})),d=c.next(),d||(d=c.cloneNode(!0),e=g(d).firstChild(),e&&(e.parentNode.innerHTML="&nbsp;"),c.ancestor().append(d))})),o.push(f.on("click",function(a){var b=a.target,c;b.hasClass("link-enhancr-delete")&&(c=b.ancestor('div[class$="link-enhancr-attachment"]',!1,function(a){return a===f}),c&&c.remove(!0),f.all("div.link-enhancr-attachment").size()===0&&(m=!0))})),b.loadingSpinner=l,o.push(b.on("destroy",function(){a.each(c,function(a){a.deleteCard()}),c=[],m=!0,n=0,a.each(p,function(a){a.cancel()}),a.each(o,function(a){a.detach()})})),o.push(e.on("cardify",function(a,b){var c={isEnter:!1,aTagNode:null,cardType:b},d=a.details[0].length,e;for(;d;)e=--d,z(a[e].cardInfo.url,a[e],c)})),o.push(e.on("link",function(c){if(b.get("disabled"))return;var e=c.node,g=r(e,f),j=a.Lang.trim(e.getAttribute("href")),k=c.trigger===a.Tictac.attach.enhancr.AutolinkPlugin.TRIGGERS.ENTER,o=e.get("id")?e.get("id"):e.generateID(),p=h.one("#enhancr-spinner"),v=h.one(".save-draft-msg"),x=0,y=function(b){var c=a.mix(b,{cardParentNode:g}),d;d=z(j,c,{isEnter:k,aTagNode:e,cardType:i.HLFS}),t[o]=d,q[j]=t},A=function(a){x>0&&x--,p&&x===0&&(p.addClass("hidden"),l.stop(),v.show()),a||(n--,m=!n,delete q[j])};w();if(q[j]||s(e,f))return;q[j]=!0,x++,p&&p.hasClass("hidden")&&(v.hide(),l.start(),p.removeClass("hidden")),d(j),u(j,y,A)})),b._getCardList=function(){return c}},destructor:function(){this.fire("destroy")},destroySpinner:function(){this.loadingSpinner&&this.loadingSpinner.destroy()}},{NAME:"cards",NS:"cards",ATTRS:{host:{value:!1},hadCardsInOriginal:{readOnly:!0,value:!1,validator:function(b){return a.Lang.isBoolean(b)}},disabled:{value:!1,validator:function(b){return a.Lang.isBoolean(b)},getter:function(){var b=a.Tictac.base.mailpreferences.get("enhancrLinkPreviewEnabled")||"1";return b==="-1"?!0:!1}}}}),a.namespace("Tictac.attach.enhancr").CardPlugin=t,a.namespace("Tictac.attach.enhancr").Card=j,j.Types=i},"1.0.0",{requires:["tictac-attach-enhancr-net","tictac-attach-stats","tictac-base-mailpreferences","tictac-base-utils","array-extras","escape","querystring-stringify-simple","base","tictac-attach-rollups","event-custom","comms-ui-envelope"]});/**
 * HTML5Uploader initialization data from Neo
 * Move this to Neo once HTML5Uploader is more stable. Putting this in tictac
 * for faster development iteration because we won't have to modify Neo code.
 */YUI.add("tictac-attach-neo",function(a){function b(){return NeoConfig.attachmentServer.indexOf("-attach")!==-1&&NeoConfig.attachmentServer.indexOf("cnh")===-1&&NeoConfig.attachmentServer.indexOf("cnb")===-1}function c(){var a;return a=b()?"https://":NeoConfig.launch_protocol,a+=NeoConfig.attachmentServer+"/",NeoConfig.isFullSSL&&!NeoConfig.isAttachSSL?a+=window.location.host:a+=[strings.str_cfg_base_intl,".",NeoConfig.farm,".mail.yahoo.",NeoConfig.intl==="jp"?"co.jp":"com"].join(""),a+="/ya/upload_with_cred?output=xml",a}a.namespace("Tictac.attach").Neo={neoConfig:NeoConfig,makeHTML5UploaderConf:function(){var b={UPLOAD_URL_BASE:c(),LAUNCH_PROTOCOL:location.protocol+"//",stat:a.common.Utils.rocketstats.intlStat,uploader:{multipleFiles:!0,simLimit:1}};return b},makeControllerConf:function(){var b={stat:a.common.Utils.rocketstats.intlStat};return b},alert:function(b,c,d){var e=a.ui.Templates,f=a.common.Utils.substitute;a.use("common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_ok",function(a){a.common.ui.DialogHelper.custom({hd:b,bd:c,ft:f(e._shared_module_offscreen_bin_modal_btn_ok.base,0,0,0,strings,e)},{ok:{handler:d},cancel:{handler:d}})})},dialog:function(b,c,d){a.use("common-ui-dialog-helper",function(a){a.common.ui.DialogHelper.confirm({hd:b,bd:c},d)})}},a.namespace("tictac.attach").Neo=a.Tictac.attach.Neo},"1.0.0",{requires:[]});/**
 * Attachment data model used during email composition.
 *
 * This module encapsulates single attachment behavior
 *//*jshint maxstatements:1000 */YUI.add("tictac-attach-model-attachment",function(a){function f(b,f){var h=this,i=["fid","mid","partId","tnef","disposition","displayable"],j=/[\w\W]+\\([^\\]+)$/;h.id=b,c(f.filename,"filename required"),h.rawFilename=(f.filename||"").replace(j,"$1"),h.filename=a.Escape.html(h.rawFilename),h.thumbnail=f.thumbnail||"",h.size=f.size||0,h.mimetype=f.type&&f.subtype?f.type+"/"+f.subtype:"",h.type=f.type||"",h.referencedInline=f.referencedInline||!1,h.diskfilename=f.diskfilename||"",h.uploadState=f.uploadState||"queued",h.hasProgress=!!f.hasProgress,h.retryCount=0,h.uploadStartTime=0,c(g(h.uploadState),"illegal upload state:"+h.uploadState),h.reason=f.reason||"",h.progress=f.progress||0,f.original&&(c(e.keys(f.original).length===i.length,"Attachment original didn't include all members"),d.each(i,function(a){c(e.owns(f.original,a),"Attachment original missing key: "+a)}),h.original=f.original),f.dropbox&&(typeof f.dropbox.alf=="undefined"&&(f.dropbox.alf=!1),h.dropbox=f.dropbox)}function g(a){return!!b[a]}var b=a.Array.hash(["queued","started","failed","success"]),c=a.Tictac.base.utils.verify,d=a.Array,e=a.Object;f.prototype={setUploadState:function(a,b){var d=this;b=b||"",c(g(a),"illegal upload state: "+a),d.uploadState=a,d.reason=b},isUploadValid:function(){var a=this;return a.uploadState==="success"},isVirusFree:function(){var a=this;return a.reason!=="uploadAVCannotClean"&&a.reason!=="uploadAVHasVirus"},isDropbox:function(){return!!this.dropbox},isUploadDone:function(){var a=this;return a.uploadState==="success"||a.uploadState==="failed"},isInline:function(){return this.isImage()&&(this.referencedInline===!0||this.disposition==="inline"||this.original&&this.original.disposition==="inline")},setMimeType:function(a){var b=this,c;a=a||"",a.toLowerCase(),c=a.split("/"),b.mimetype=a,b.type=a.split("/")[0]},isImage:function(){return this.type==="image"},updateMid:function(a){var b=this;b.original&&b.original.fid==="Draft"&&(b.original.mid=a)}},a.namespace("Tictac.attach.model"),a.Tictac.attach.model.Attachment=f,a.namespace("tictac.attach.model").Attachment=f},"1.0.0",{requires:["tictac-base-utils","tictac-attach-utils","escape"]});/**
 * Attachments data model used during email composition.
 *
 * This module encapsulates the collection of attachments and aggregate
 * properties.
 *
 */YUI.add("tictac-attach-model-attachments",function(a){function h(){var a=this;return a.map={},a.quotaViolation={},a.evts=[a.publish("added"),a.publish("updated"),a.publish("deleted"),a.publish("emptied"),a.publish("failures"),a.publish("quota",{emitFacade:!0}),a.publish("commit")],a}var b=a.Tictac.attach.model.Attachment,c=a.Tictac.base.utils.verify,d=a.Tictac.base.utils.log,e=a.Tictac.attach.Utils.isSvrResponseWarning,f=0,g={MAX_BYTES:26214400,MAX_COUNT:25};h.prototype={cleanup:function(){a.each(this.evts,function(a){a.detachAll()})},checkId:function(a){return this.map.hasOwnProperty(a)},sizeInBytes:function(b){return a.Array.reduce(a.Object.values(this.map),0,function(a,c){return!b&&c.isDropbox()?a:a+c.size})},count:function(b){return b=b||function(a){return!a.isDropbox()},a.Array.reduce(a.Object.values(this.map),0,function(a,c){return a+(b(c)?1:0)})},numFailures:function(){return a.Array.reduce(a.Object.values(this.map),0,function(a,b){return a+(b.uploadState==="failed"?1:0)})},numFailuresAndWarnings:function(){return a.Array.reduce(a.Object.values(this.map),0,function(a,b){return a+(b.uploadState==="failed"||e(b.reason)?1:0)})},areSendable:function(){return!a.Array.some(a.Object.values(this.map),function(a){return a.uploadState!=="success"})},areAnyUploading:function(){return a.Array.some(a.Object.values(this.map),function(a){return a.uploadState==="started"||a.uploadState==="queued"})},areAnyInfected:function(){return a.Array.some(a.Object.values(this.map),function(a){return!a.isVirusFree()})},areAllWarningOrSuccess:function(){return a.Array.every(a.Object.values(this.map),function(a){return a.uploadState==="success"||e(a.reason)})},areAllUploadsDone:function(){return!a.Array.some(a.Object.values(this.map),function(a){return!a.isUploadDone()})},precheckQuota:function(a,b,c){var d=this,e={};return d.sizeInBytes()+b>g.MAX_BYTES&&(e.size=!0),d.count()+a>g.MAX_COUNT&&(e.count=!0),!e.count&&!e.size?!1:(c||d.fireQuotaViolation(e),!0)},willFit:function(a){return!this.precheckQuota(0,a,!0)},add:function(a,c){var d=this,e,g;return f+=1,e="ATT_"+f,g=new b(e,a),d.map[e]=g,d.fire("added",g,c),c||d.fire("commit"),d.checkQuota(),e},get:function(a){var b=this;if(b.checkId(a))return b.map[a];throw["Bad attachment id (",a,"), deleted?"].join("")},getAll:function(b,c){var d=a.Object.values(this.map);return b||(d=a.Array.filter(d,function(a){return!a.isDropbox()})),c&&(d=a.Array.filter(d,function(a){return!a.isInline()})),d.sort(function(a,b){var c=parseInt(a.id.substr(4),10),d=parseInt(b.id.substr(4),10);return c-d})},order:function(b){var d=this.getAll(),e;return c(this.checkId(b),"id not valid in order: "+b),a.Array.some(d,function(a,c){return a.id!==b?!1:(e=c,!0)}),e},del:function(a,b){var c=this,d=c.get(a);delete c.map[a],c.fire("deleted",d),b||c.fire("commit"),c.count()||c.fire("emptied"),c.checkQuota(),c.fire("failures",c.numFailuresAndWarnings())},commit:function(){this.fire("commit")},delDownToQuota:function(){var a=this,b=a.getAll(),c;for(c=b.length-1;c>=0;c-=1){if(!a.isQuotaViolated())return;a.del(b[c].id)}},isQuotaViolated:function(){var a=this;return a.quotaViolation.size||a.quotaViolation.count},setUploadState:function(a,b){var c=this,e;if(!c.checkId(a)){d("aborting setUploadState on "+a);return}e=c.get(a),e.setUploadState(b.state,b.reason),c.fire("updated",e),b.squelchCommit||c.fire("commit"),c.checkQuota(),b.state!=="started"&&c.fire("failures",c.numFailuresAndWarnings())},set:function(b,d,e){var f=this,g=f.get(b);c(a.Object.owns(g,d),"Invalid field:"+d),g[d]=e,f.fire("updated",g)},findDropbox:function(b){var c=this,d=null,e=c.getAll(!0);return a.Array.some(e,function(a){return a.isDropbox()&&a.dropbox.link===b.link?(d=a,!0):!1}),d},fireQuotaViolation:function(a){this.fire("quota",{violation:a})},updateMid:function(b){a.each(this.map,function(a){a.updateMid(b)})}},a.mix(h.prototype,{checkQuota:function(){var a=this,b={};a.sizeInBytes()>g.MAX_BYTES&&(b.size=!0),a.count()>g.MAX_COUNT&&(b.count=!0);if(a.quotaViolation.size===b.size&&a.quotaViolation.count===b.count)return;a.quotaViolation=b,a.fireQuotaViolation(b)}}),a.namespace("Tictac.attach.model").Attachments=h,a.namespace("Tictac.attach.model.Attachments").conf=g,a.namespace("tictac.attach.model").Attachments=h,a.namespace("tictac.attach.model.Attachments").conf=g,a.augment(h,a.EventTarget,!0,null,{prefix:"attachments"})},"1.0.0",{requires:["array-extras","event-custom","tictac-base-utils","tictac-attach-model-attachment","tictac-attach-utils","tictac-att-filter"]});YUI.add("tictac-att-rollups",function(a){a.namespace("Tictac.att.rollups");a.Tictac.att.rollups.tray=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c=this,n="function",p=e.blockHelperMissing,f=this.escapeExpression;function h(a,t){return"bidi"}function d(a,t){return"att-collapsed"}function m(a,t){return"hidden"}function v(a,t){return"att-compose"}function u(a,t){var s="",i,l;s+='        <li class="tictac-att-header-count ';l={hash:{},inverse:c.noop,fn:c.program(5,m,t),data:t};if(i=e.is_single){i=i.call(a,l)}else{i=a.is_single;i=typeof i===n?i.apply(a):i}if(!e.is_single){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='">';if(i=e.tray_count){i=i.call(a,{hash:{},data:t})}else{i=a.tray_count;i=typeof i===n?i.apply(a):i}s+=f(i)+"</li>        ";l={hash:{},inverse:c.noop,fn:c.program(10,y,t),data:t};if(i=e.has_viewable){i=i.call(a,l)}else{i=a.has_viewable;i=typeof i===n?i.apply(a):i}if(!e.has_viewable){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="                ";i=e.unless.call(a,a.is_single,{hash:{},inverse:c.noop,fn:c.program(13,g,t),data:t});if(i||i===0){s+=i}s+="    ";return s}function y(a,t){var s="",i;s+="            ";i=e.unless.call(a,a.is_single,{hash:{},inverse:c.noop,fn:c.program(11,_,t),data:t});if(i||i===0){s+=i}s+="        ";return s}function _(a,t){return'                <li class="tictac-att-header-view"><a href="#">View all</a></li>            '}function g(a,t){return'            <li class="tictac-att-header-save-comp"><a href="#"><span class="tictac-att-header-save-message">Download all</span><i class="icon icon-chevron-down"></i></a></li>        '}function b(a,t){var s="",i;s+='        <li class="tictac-att-header-count">';if(i=e.tray_count){i=i.call(a,{hash:{},data:t})}else{i=a.tray_count;i=typeof i===n?i.apply(a):i}s+=f(i)+'</li>        <li class="tictac-att-header-size" data-hidden="true" data-display="error">';if(i=e.tray_size){i=i.call(a,{hash:{},data:t})}else{i=a.tray_size;i=typeof i===n?i.apply(a):i}if(i||i===0){s+=i}s+='</li>        <li class="tictac-att-header-remove-all" data-display="error"><a href="#">Remove all</a></li>    ';return s}function w(a,t){var s="",i,l;s+='      <li tabindex="0" class="tictac-att-viewer tictac-att-thumb ';l={hash:{},inverse:c.noop,fn:c.program(18,x,t),data:t};if(i=e.has_thumbnail){i=i.call(a,l)}else{i=a.has_thumbnail;i=typeof i===n?i.apply(a):i}if(!e.has_thumbnail){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=" ";l={hash:{},inverse:c.noop,fn:c.program(20,T,t),data:t};if(i=e.has_error){i=i.call(a,l)}else{i=a.has_error;i=typeof i===n?i.apply(a):i}if(!e.has_error){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=" ";l={hash:{},inverse:c.noop,fn:c.program(22,R,t),data:t};if(i=e.has_remove){i=i.call(a,l)}else{i=a.has_remove;i=typeof i===n?i.apply(a):i}if(!e.has_remove){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=" ";l={hash:{},inverse:c.noop,fn:c.program(22,R,t),data:t};if(i=e.has_cancel){i=i.call(a,l)}else{i=a.has_cancel;i=typeof i===n?i.apply(a):i}if(!e.has_cancel){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='" ';l={hash:{},inverse:c.noop,fn:c.program(24,k,t),data:t};if(i=e.has_thumbnail){i=i.call(a,l)}else{i=a.has_thumbnail;i=typeof i===n?i.apply(a):i}if(!e.has_thumbnail){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=' data-id="';if(i=e.aid){i=i.call(a,{hash:{},data:t})}else{i=a.aid;i=typeof i===n?i.apply(a):i}s+=f(i)+'" data-type="';if(i=e.filetype){i=i.call(a,{hash:{},data:t})}else{i=a.filetype;i=typeof i===n?i.apply(a):i}s+=f(i)+'" title="';if(i=e.filename){i=i.call(a,{hash:{},data:t})}else{i=a.filename;i=typeof i===n?i.apply(a):i}s+=f(i)+" (";if(i=e.filesize){i=i.call(a,{hash:{},data:t})}else{i=a.filesize;i=typeof i===n?i.apply(a):i}s+=f(i)+')">    ';l={hash:{},inverse:c.noop,fn:c.program(29,H,t),data:t};if(i=e.has_save_options){i=i.call(a,l)}else{i=a.has_save_options;i=typeof i===n?i.apply(a):i}if(!e.has_save_options){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";l={hash:{},inverse:c.noop,fn:c.program(31,L,t),data:t};if(i=e.is_dropbox){i=i.call(a,l)}else{i=a.is_dropbox;i=typeof i===n?i.apply(a):i}if(!e.is_dropbox){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";l={hash:{},inverse:c.noop,fn:c.program(33,D,t),data:t};if(i=e.has_error){i=i.call(a,l)}else{i=a.has_error;i=typeof i===n?i.apply(a):i}if(!e.has_error){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    "+'    <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove"></div></li>      ';return s}function x(a,t){return"has-thumb"}function T(a,t){var s;if(s=e.error_class){s=s.call(a,{hash:{},data:t})}else{s=a.error_class;s=typeof s===n?s.apply(a):s}return f(s)}function R(a,t){return"att-removable"}function k(a,t){var s="",i,l;s+='style="background-image: ';l={hash:{},inverse:c.program(25,S,t),fn:c.noop,data:t};if(i=e.is_ssl){i=i.call(a,l)}else{i=a.is_ssl;i=typeof i===n?i.apply(a):i}if(!e.is_ssl){i=p.call(a,i,l)}if(i||i===0){s+=i}l={hash:{},inverse:c.noop,fn:c.program(27,I,t),data:t};if(i=e.is_ssl){i=i.call(a,l)}else{i=a.is_ssl;i=typeof i===n?i.apply(a):i}if(!e.is_ssl){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='" ';return s}function S(a,t){return"url(http://l.yimg.com/tq/shared/603/img/default-at.png);"}function I(a,t){return"url(https://s.yimg.com/tq/shared/603/img/default-at.png);"}function H(a,t){return'        <div class="tictac-att-att-type">            <a href="#" class="tictac-att-ss-download-icon tictac-att-thumb-save-options" title="Save to"></a>        </div>    '}function L(a,t){return'        <div class="tictac-att-thumb-db"></div>    '}function D(a,t){var s="",i;s+='        <div class="tictac-att-thumb-error-state s-tp" title="';if(i=e.error_message){i=i.call(a,{hash:{},data:t})}else{i=a.error_message;i=typeof i===n?i.apply(a):i}s+=f(i)+'"></div>    ';return s}function z(a,t){var s="",i,l;s+='      <li tabindex="0" class="tictac-att-other ';l={hash:{},inverse:c.noop,fn:c.program(20,T,t),data:t};if(i=e.has_error){i=i.call(a,l)}else{i=a.has_error;i=typeof i===n?i.apply(a):i}if(!e.has_error){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=" ";l={hash:{},inverse:c.noop,fn:c.program(22,R,t),data:t};if(i=e.has_remove){i=i.call(a,l)}else{i=a.has_remove;i=typeof i===n?i.apply(a):i}if(!e.has_remove){i=p.call(a,i,l)}if(i||i===0){s+=i}s+=" ";l={hash:{},inverse:c.noop,fn:c.program(22,R,t),data:t};if(i=e.has_cancel){i=i.call(a,l)}else{i=a.has_cancel;i=typeof i===n?i.apply(a):i}if(!e.has_cancel){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='" data-id="';if(i=e.aid){i=i.call(a,{hash:{},data:t})}else{i=a.aid;i=typeof i===n?i.apply(a):i}s+=f(i)+'" data-type="';if(i=e.filetype){i=i.call(a,{hash:{},data:t})}else{i=a.filetype;i=typeof i===n?i.apply(a):i}s+=f(i)+'" title="';if(i=e.filename){i=i.call(a,{hash:{},data:t})}else{i=a.filename;i=typeof i===n?i.apply(a):i}s+=f(i)+" (";if(i=e.filesize){i=i.call(a,{hash:{},data:t})}else{i=a.filesize;i=typeof i===n?i.apply(a):i}s+=f(i)+')">';l={hash:{},inverse:c.noop,fn:c.program(36,M,t),data:t};if(i=e.has_error){i=i.call(a,l)}else{i=a.has_error;i=typeof i===n?i.apply(a):i}if(!e.has_error){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='<div class="tictac-att-other-filename ';l={hash:{},inverse:c.noop,fn:c.program(38,E,t),data:t};if(i=e.has_view){i=i.call(a,l)}else{i=a.has_view;i=typeof i===n?i.apply(a):i}if(!e.has_view){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='"><div class="tictac-filename-without-type">';if(i=e.filename_without_extension){i=i.call(a,{hash:{},data:t})}else{i=a.filename_without_extension;i=typeof i===n?i.apply(a):i}s+=f(i)+"</div><div>";if(i=e.file_extension){i=i.call(a,{hash:{},data:t})}else{i=a.file_extension;i=typeof i===n?i.apply(a):i}s+=f(i)+'</div></div><div class="tictac-att-other-save-btn">    ';l={hash:{},inverse:c.noop,fn:c.program(40,A,t),data:t};if(i=e.has_save_options){i=i.call(a,l)}else{i=a.has_save_options;i=typeof i===n?i.apply(a):i}if(!e.has_save_options){i=p.call(a,i,l)}if(i||i===0){s+=i}l={hash:{},inverse:c.noop,fn:c.program(42,q,t),data:t};if(i=e.has_remove){i=i.call(a,l)}else{i=a.has_remove;i=typeof i===n?i.apply(a):i}if(!e.has_remove){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";l={hash:{},inverse:c.noop,fn:c.program(44,N,t),data:t};if(i=e.has_view){i=i.call(a,l)}else{i=a.has_view;i=typeof i===n?i.apply(a):i}if(!e.has_view){i=p.call(a,i,l)}if(i||i===0){s+=i}s+='</div><a href="#" class="tictac-att-cancel-file-uploading tictac-att-remove hidden" data-action="remove"></a></li>      ';return s}function M(a,t){var s="",i;s+='<div class="tictac-att-thumb-error-state s-tp" title="';if(i=e.error_message){i=i.call(a,{hash:{},data:t})}else{i=a.error_message;i=typeof i===n?i.apply(a):i}s+=f(i)+'"></div>';return s}function E(a,t){return"tictac-att-viewer tictac-att-other-view"}function A(a,t){return'<a href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options"></i></a>    '}function q(a,t){return'<a href="#" class="tictac-att-remove" data-action="remove">Remove</a>'}function N(a,t){return'        <a href="#" data-action="view-att" class="tictac-att-viewer">View</a>    '}l+='<div class="tictac-att white ';r={hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===n?o.apply(t):o}if(!e.isRTL){o=p.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i};if(o=e.is_collapsed){o=o.call(t,r)}else{o=t.is_collapsed;o=typeof o===n?o.apply(t):o}if(!e.is_collapsed){o=p.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:c.noop,fn:c.program(5,m,i),data:i};if(o=e.is_hidden){o=o.call(t,r)}else{o=t.is_hidden;o=typeof o===n?o.apply(t):o}if(!e.is_hidden){o=p.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:c.noop,fn:c.program(7,v,i),data:i};if(o=e.is_compose){o=o.call(t,r)}else{o=t.is_compose;o=typeof o===n?o.apply(t):o}if(!e.is_compose){o=p.call(t,o,r)}if(o||o===0){l+=o}l+='">  <a tabindex="-1" target="_blank" href="http://buy.norton.com/specialoffers?VENDORID=YAHOO" class="tictac-att-norton-logo"></a>  <ul class="tictac-att-header cf">    <li class="tictac-att-header-spinner"></li>    <li class="tictac-att-header-error"></li>    ';r={hash:{},inverse:c.noop,fn:c.program(9,u,i),data:i};if(o=e.is_read){o=o.call(t,r)}else{o=t.is_read;o=typeof o===n?o.apply(t):o}if(!e.is_read){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:c.noop,fn:c.program(15,b,i),data:i};if(o=e.is_compose){o=o.call(t,r)}else{o=t.is_compose;o=typeof o===n?o.apply(t):o}if(!e.is_compose){o=p.call(t,o,r)}if(o||o===0){l+=o}l+='  </ul>  <div class="tictac-att-thumb-cover">    <div class="tictac-att-scroll-left"><div></div></div>    <div class="tictac-att-scroll-right"><div></div></div>    <ul class="tictac-att-thumb-flow cf">      ';r={hash:{},inverse:c.noop,fn:c.program(17,w,i),data:i};if(o=e.photos){o=o.call(t,r)}else{o=t.photos;o=typeof o===n?o.apply(t):o}if(!e.photos){o=p.call(t,o,r)}if(o||o===0){l+=o}l+='    </ul>  </div>  <div class="tictac-att-files-cover"><ul class="tictac-att-thumb-flow">      ';r={hash:{},inverse:c.noop,fn:c.program(35,z,i),data:i};if(o=e.files){o=o.call(t,r)}else{o=t.files;o=typeof o===n?o.apply(t):o}if(!e.files){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="    </ul>    </div></div>";return l});a.Tictac.att.rollups.overlay=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c="function",n=this.escapeExpression,p=this,f=e.blockHelperMissing;function h(a,t){var s="",i;s+='    <li class="tictac-att-filemeta disabled" data-action="none">      <a href="#">        <span class="';if(i=e.error_class){i=i.call(a,{hash:{},data:t})}else{i=a.error_class;i=typeof i===c?i.apply(a):i}s+=n(i)+'">';if(i=e.error_message){i=i.call(a,{hash:{},data:t})}else{i=a.error_message;i=typeof i===c?i.apply(a):i}s+=n(i)+"</span>      </a>    </li>    ";return s}function d(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="remove"><a href="#">Cancel</a></li>    '}function m(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="view"><a href="#">View</a></li>    '}function v(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="download"><a href="#">Save to my computer</a></li>    '}function u(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox"><a href="#">Save to Dropbox</a></li>    '}function y(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_flickr"><a href="#">Save to Flickr</a></li>    '}function _(a,t){var s="",i;s+='    <li class="tictac-att-attachment-menu-action"        data-action="edit"><a href="#">';if(i=e.str_tictac_att_edit_file){i=i.call(a,{hash:{},data:t})}else{i=a.str_tictac_att_edit_file;i=typeof i===c?i.apply(a):i}s+=n(i)+"</a></li>    ";return s}function g(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="remove"><a href="#">Remove</a></li>    '}function b(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="retry"><a href="#">Retry</a></li>    '}l+='<div class="tictac-att-attachment-menu">  <ul class="tictac-att-attachment-menu-filemeta">    ';r={hash:{},inverse:p.noop,fn:p.program(1,h,i),data:i};if(o=e.has_error){o=o.call(t,r)}else{o=t.has_error;o=typeof o===c?o.apply(t):o}if(!e.has_error){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='    <li class="tictac-att-filemeta disabled" data-action="none">      <a href="#">        <span>&lrm;';if(o=e.filename){o=o.call(t,{hash:{},data:i})}else{o=t.filename;o=typeof o===c?o.apply(t):o}l+=n(o)+" (";if(o=e.filesize){o=o.call(t,{hash:{},data:i})}else{o=t.filesize;o=typeof o===c?o.apply(t):o}if(o||o===0){l+=o}l+=')</span>      </a>    </li>  </ul>  <ul class="tictac-att-attachment-menu-fileaction">    ';r={hash:{},inverse:p.noop,fn:p.program(3,d,i),data:i};if(o=e.has_cancel){o=o.call(t,r)}else{o=t.has_cancel;o=typeof o===c?o.apply(t):o}if(!e.has_cancel){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(5,m,i),data:i};if(o=e.has_view){o=o.call(t,r)}else{o=t.has_view;o=typeof o===c?o.apply(t):o}if(!e.has_view){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(7,v,i),data:i};if(o=e.save_to_computer){o=o.call(t,r)}else{o=t.save_to_computer;o=typeof o===c?o.apply(t):o}if(!e.save_to_computer){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(9,u,i),data:i};if(o=e.save_to_dropbox){o=o.call(t,r)}else{o=t.save_to_dropbox;o=typeof o===c?o.apply(t):o}if(!e.save_to_dropbox){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(11,y,i),data:i};if(o=e.save_to_flickr){o=o.call(t,r)}else{o=t.save_to_flickr;o=typeof o===c?o.apply(t):o}if(!e.save_to_flickr){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(13,_,i),data:i};if(o=e.has_edit){o=o.call(t,r)}else{o=t.has_edit;o=typeof o===c?o.apply(t):o}if(!e.has_edit){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(15,g,i),data:i};if(o=e.has_remove){o=o.call(t,r)}else{o=t.has_remove;o=typeof o===c?o.apply(t):o}if(!e.has_remove){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(17,b,i),data:i};if(o=e.has_retry){o=o.call(t,r)}else{o=t.has_retry;o=typeof o===c?o.apply(t):o}if(!e.has_retry){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="  </ul></div>";return l});a.Tictac.att.rollups.error=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r="function",c=this.escapeExpression,n=this;function p(a,t){return'<a href="#" class="tictac-att-error-dismiss">Dismiss</a>'}l+='<span class="';if(o=e.error_class){o=o.call(t,{hash:{},data:i})}else{o=t.error_class;o=typeof o===r?o.apply(t):o}l+=c(o)+'">';if(o=e.error_message){o=o.call(t,{hash:{},data:i})}else{o=t.error_message;o=typeof o===r?o.apply(t):o}l+=c(o)+" ";o=e["if"].call(t,t.show_dismiss,{hash:{},inverse:n.noop,fn:n.program(1,p,i),data:i});if(o||o===0){l+=o}l+="</span>";return l});a.Tictac.att.rollups.fileattachment=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c="function",n=this.escapeExpression,p=this,f=e.blockHelperMissing;function h(a,t){var s;if(s=e.error_class){s=s.call(a,{hash:{},data:t})}else{s=a.error_class;s=typeof s===c?s.apply(a):s}return n(s)}function d(a,t){return"att-removable"}function m(a,t){var s="",i;s+='<div class="tictac-att-thumb-error-state s-tp" title="';if(i=e.error_message){i=i.call(a,{hash:{},data:t})}else{i=a.error_message;i=typeof i===c?i.apply(a):i}s+=n(i)+'"></div>';return s}function v(a,t){return"tictac-att-viewer tictac-att-other-view"}function u(a,t){return'<a href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options"></i></a>    '}function y(a,t){return'<a href="#" class="tictac-att-remove" data-action="remove">Remove</a>'}function _(a,t){return'        <a href="#" data-action="view-att" class="tictac-att-viewer">View</a>    '}l+='<li tabindex="0" class="tictac-att-other ';r={hash:{},inverse:p.noop,fn:p.program(1,h,i),data:i};if(o=e.has_error){o=o.call(t,r)}else{o=t.has_error;o=typeof o===c?o.apply(t):o}if(!e.has_error){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:p.noop,fn:p.program(3,d,i),data:i};if(o=e.has_remove){o=o.call(t,r)}else{o=t.has_remove;o=typeof o===c?o.apply(t):o}if(!e.has_remove){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:p.noop,fn:p.program(3,d,i),data:i};if(o=e.has_cancel){o=o.call(t,r)}else{o=t.has_cancel;o=typeof o===c?o.apply(t):o}if(!e.has_cancel){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='" data-id="';if(o=e.aid){o=o.call(t,{hash:{},data:i})}else{o=t.aid;o=typeof o===c?o.apply(t):o}l+=n(o)+'" data-type="';if(o=e.filetype){o=o.call(t,{hash:{},data:i})}else{o=t.filetype;o=typeof o===c?o.apply(t):o}l+=n(o)+'" title="';if(o=e.filename){o=o.call(t,{hash:{},data:i})}else{o=t.filename;o=typeof o===c?o.apply(t):o}l+=n(o)+" (";if(o=e.filesize){o=o.call(t,{hash:{},data:i})}else{o=t.filesize;o=typeof o===c?o.apply(t):o}l+=n(o)+')">';r={hash:{},inverse:p.noop,fn:p.program(5,m,i),data:i};if(o=e.has_error){o=o.call(t,r)}else{o=t.has_error;o=typeof o===c?o.apply(t):o}if(!e.has_error){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='<div class="tictac-att-other-filename ';r={hash:{},inverse:p.noop,fn:p.program(7,v,i),data:i};if(o=e.has_view){o=o.call(t,r)}else{o=t.has_view;o=typeof o===c?o.apply(t):o}if(!e.has_view){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='"><div class="tictac-filename-without-type">';if(o=e.filename_without_extension){o=o.call(t,{hash:{},data:i})}else{o=t.filename_without_extension;o=typeof o===c?o.apply(t):o}l+=n(o)+"</div><div>";if(o=e.file_extension){o=o.call(t,{hash:{},data:i})}else{o=t.file_extension;o=typeof o===c?o.apply(t):o}l+=n(o)+'</div></div><div class="tictac-att-other-save-btn">    ';r={hash:{},inverse:p.noop,fn:p.program(9,u,i),data:i};if(o=e.has_save_options){o=o.call(t,r)}else{o=t.has_save_options;o=typeof o===c?o.apply(t):o}if(!e.has_save_options){o=f.call(t,o,r)}if(o||o===0){l+=o}r={hash:{},inverse:p.noop,fn:p.program(11,y,i),data:i};if(o=e.has_remove){o=o.call(t,r)}else{o=t.has_remove;o=typeof o===c?o.apply(t):o}if(!e.has_remove){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(13,_,i),data:i};if(o=e.has_view){o=o.call(t,r)}else{o=t.has_view;o=typeof o===c?o.apply(t):o}if(!e.has_view){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='</div><a href="#" class="tictac-att-cancel-file-uploading tictac-att-remove hidden" data-action="remove"></a></li>';return l});a.Tictac.att.rollups.attachment=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c="function",n=this.escapeExpression,p=this,f=e.blockHelperMissing;function h(a,t){return"has-thumb"}function d(a,t){var s;if(s=e.error_class){s=s.call(a,{hash:{},data:t})}else{s=a.error_class;s=typeof s===c?s.apply(a):s}return n(s)}function m(a,t){return"att-removable"}function v(a,t){var s="",i,l;s+='style="background-image: ';l={hash:{},inverse:p.program(8,u,t),fn:p.noop,data:t};if(i=e.is_ssl){i=i.call(a,l)}else{i=a.is_ssl;i=typeof i===c?i.apply(a):i}if(!e.is_ssl){i=f.call(a,i,l)}if(i||i===0){s+=i}l={hash:{},inverse:p.noop,fn:p.program(10,y,t),data:t};if(i=e.is_ssl){i=i.call(a,l)}else{i=a.is_ssl;i=typeof i===c?i.apply(a):i}if(!e.is_ssl){i=f.call(a,i,l)}if(i||i===0){s+=i}s+='" ';return s}function u(a,t){return"url(http://l.yimg.com/tq/shared/603/img/default-at.png);"}function y(a,t){return"url(https://s.yimg.com/tq/shared/603/img/default-at.png);"}function _(a,t){return'        <div class="tictac-att-att-type">            <a href="#" class="tictac-att-ss-download-icon tictac-att-thumb-save-options" title="Save to"></a>        </div>    '}function g(a,t){return'        <div class="tictac-att-thumb-db"></div>    '}function b(a,t){var s="",i;s+='        <div class="tictac-att-thumb-error-state s-tp" title="';if(i=e.error_message){i=i.call(a,{hash:{},data:t})}else{i=a.error_message;i=typeof i===c?i.apply(a):i}s+=n(i)+'"></div>    ';return s}l+='<li tabindex="0" class="tictac-att-viewer tictac-att-thumb ';r={hash:{},inverse:p.noop,fn:p.program(1,h,i),data:i};if(o=e.has_thumbnail){o=o.call(t,r)}else{o=t.has_thumbnail;o=typeof o===c?o.apply(t):o}if(!e.has_thumbnail){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:p.noop,fn:p.program(3,d,i),data:i};if(o=e.has_error){o=o.call(t,r)}else{o=t.has_error;o=typeof o===c?o.apply(t):o}if(!e.has_error){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:p.noop,fn:p.program(5,m,i),data:i};if(o=e.has_remove){o=o.call(t,r)}else{o=t.has_remove;o=typeof o===c?o.apply(t):o}if(!e.has_remove){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=" ";r={hash:{},inverse:p.noop,fn:p.program(5,m,i),data:i};if(o=e.has_cancel){o=o.call(t,r)}else{o=t.has_cancel;o=typeof o===c?o.apply(t):o}if(!e.has_cancel){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='" ';r={hash:{},inverse:p.noop,fn:p.program(7,v,i),data:i};if(o=e.has_thumbnail){o=o.call(t,r)}else{o=t.has_thumbnail;o=typeof o===c?o.apply(t):o}if(!e.has_thumbnail){o=f.call(t,o,r)}if(o||o===0){l+=o}l+=' data-id="';if(o=e.aid){o=o.call(t,{hash:{},data:i})}else{o=t.aid;o=typeof o===c?o.apply(t):o}l+=n(o)+'" data-type="';if(o=e.filetype){o=o.call(t,{hash:{},data:i})}else{o=t.filetype;o=typeof o===c?o.apply(t):o}l+=n(o)+'" title="';if(o=e.filename){o=o.call(t,{hash:{},data:i})}else{o=t.filename;o=typeof o===c?o.apply(t):o}l+=n(o)+" (";if(o=e.filesize){o=o.call(t,{hash:{},data:i})}else{o=t.filesize;o=typeof o===c?o.apply(t):o}l+=n(o)+')">    ';r={hash:{},inverse:p.noop,fn:p.program(12,_,i),data:i};if(o=e.has_save_options){o=o.call(t,r)}else{o=t.has_save_options;o=typeof o===c?o.apply(t):o}if(!e.has_save_options){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(14,g,i),data:i};if(o=e.is_dropbox){o=o.call(t,r)}else{o=t.is_dropbox;o=typeof o===c?o.apply(t):o}if(!e.is_dropbox){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:p.noop,fn:p.program(16,b,i),data:i};if(o=e.has_error){o=o.call(t,r)}else{o=t.has_error;o=typeof o===c?o.apply(t):o}if(!e.has_error){o=f.call(t,o,r)}if(o||o===0){l+=o}l+="    "+'    <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove"></div></li>';return l});a.Tictac.att.rollups.docview=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r="function",c=this.escapeExpression;l+='<div class="tictac-att-ss-docview-wrapper" style="position: relative; width: 600px; height: 600px; float: left; border: 1px solid #efefef">    <div id="tictac-att-ss-docview-doc-';if(o=e.docid){o=o.call(t,{hash:{},data:i})}else{o=t.docid;o=typeof o===r?o.apply(t):o}l+=c(o)+'" style="width: 600px; height: 600px;"></div></div>';return l});a.Tictac.att.rollups.downloadmenu=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c=this,n="function",p=e.blockHelperMissing,f=this.escapeExpression;function h(a,t){var s="",i,l;s+="    ";l={hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t};if(i=e.save_to_computer){i=i.call(a,l)}else{i=a.save_to_computer;i=typeof i===n?i.apply(a):i}if(!e.save_to_computer){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";l={hash:{},inverse:c.noop,fn:c.program(4,m,t),data:t};if(i=e.save_to_dropbox){i=i.call(a,l)}else{i=a.save_to_dropbox;i=typeof i===n?i.apply(a):i}if(!e.save_to_dropbox){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";return s}function d(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="download_all"><a href="#">Save all to my computer</a></li>    '}function m(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox_all"><a href="#">Save all to Dropbox</a></li>    '}function v(a,t){var s="",i,l;s+="    ";l={hash:{},inverse:c.noop,fn:c.program(7,u,t),data:t};if(i=e.save_to_computer){i=i.call(a,l)}else{i=a.save_to_computer;i=typeof i===n?i.apply(a):i}if(!e.save_to_computer){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";l={hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t};if(i=e.save_to_dropbox){i=i.call(a,l)}else{i=a.save_to_dropbox;i=typeof i===n?i.apply(a):i}if(!e.save_to_dropbox){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";return s}function u(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="download"><a href="#">Save to my computer</a></li>    '}function y(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox"><a href="#">Save to Dropbox</a></li>    '}function _(a,t){var s="",i,l;s+="    ";l={hash:{},inverse:c.noop,fn:c.program(12,g,t),data:t};if(i=e.menuItems){i=i.call(a,l)}else{i=a.menuItems;i=typeof i===n?i.apply(a):i}if(!e.menuItems){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";return s}function g(a,t){var s="",i;s+='    <li class="tictac-att-attachment-menu-action" data-action="';if(i=e.actionAll){i=i.call(a,{hash:{},data:t})}else{i=a.actionAll;i=typeof i===n?i.apply(a):i}s+=f(i)+'"><a href="#">';if(i=e.strMenuAll){i=i.call(a,{hash:{},data:t})}else{i=a.strMenuAll;i=typeof i===n?i.apply(a):i}s+=f(i)+"</a></li>    ";return s}function b(a,t){var s="",i,l;s+="    ";l={hash:{},inverse:c.noop,fn:c.program(15,w,t),data:t};if(i=e.menuItems){i=i.call(a,l)}else{i=a.menuItems;i=typeof i===n?i.apply(a):i}if(!e.menuItems){i=p.call(a,i,l)}if(i||i===0){s+=i}s+="    ";return s}function w(a,t){var s="",i;s+='    <li class="tictac-att-attachment-menu-action" data-action="';if(i=e.action){i=i.call(a,{hash:{},data:t})}else{i=a.action;i=typeof i===n?i.apply(a):i}s+=f(i)+'"><a href="#">';if(i=e.strMenu){i=i.call(a,{hash:{},data:t})}else{i=a.strMenu;i=typeof i===n?i.apply(a):i}s+=f(i)+"</a></li>    ";return s}l+='<ul class="tictac-att-attachment-menu-fileaction">    ';r={hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i};if(o=e.multiple_files){o=o.call(t,r)}else{o=t.multiple_files;o=typeof o===n?o.apply(t):o}if(!e.multiple_files){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:c.program(6,v,i),fn:c.noop,data:i};if(o=e.multiple_files){o=o.call(t,r)}else{o=t.multiple_files;o=typeof o===n?o.apply(t):o}if(!e.multiple_files){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="            ";r={hash:{},inverse:c.noop,fn:c.program(11,_,i),data:i};if(o=e.multiple_files){o=o.call(t,r)}else{o=t.multiple_files;o=typeof o===n?o.apply(t):o}if(!e.multiple_files){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:c.program(14,b,i),fn:c.noop,data:i};if(o=e.multiple_files){o=o.call(t,r)}else{o=t.multiple_files;o=typeof o===n?o.apply(t):o}if(!e.multiple_files){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="</ul>";return l});a.Tictac.att.rollups.slideshow=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c="function",n=this.escapeExpression,p=this,f=e.blockHelperMissing;function h(a,t){return"bidi"}function d(a,t){return'            <span class="tictac-att-ss-topbar-download tictac-att-ss-download-icon linkSpan" title="Save to">            </span>            <span class="tictac-att-ss-topbar-scanning">Scanning an attachment...</span>            <span class="tictac-att-ss-topbar-error">An error occurred while downloading.</span>            '}function m(a,t){var s="",i;s+="            ";i=e["if"].call(a,a.isDoc,{hash:{},inverse:p.program(8,u,t),fn:p.program(6,v,t),data:t});if(i||i===0){s+=i}s+="        ";return s}function v(a,t){var s="",i;s+='            <li class="tictac-att-ss-document" data-id="';if(i=e.aid){i=i.call(a,{hash:{},data:t})}else{i=a.aid;i=typeof i===c?i.apply(a):i}s+=n(i)+'" style="">            </li>            ';return s}function u(a,t){var s="",i;s+='            <li class="tictac-att-ss-image" data-id="';if(i=e.aid){i=i.call(a,{hash:{},data:t})}else{i=a.aid;i=typeof i===c?i.apply(a):i}s+=n(i)+'" style="">                </span>            </li>            ';return s}function y(a,t){return"hidden"}function _(a,t){return"Next"}function g(a,t){return"Previous"}function b(a,t){return"has-thumb"}function w(a,t){var s="",i;s+="style=\"background-image: url('";if(i=e.thumbnailurl){i=i.call(a,{hash:{},data:t})}else{i=a.thumbnailurl;i=typeof i===c?i.apply(a):i}s+=n(i)+"')\" ";return s}l+=' <div class="tictac-att-slideshow ';r={hash:{},inverse:p.noop,fn:p.program(1,h,i),data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===c?o.apply(t):o}if(!e.isRTL){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='">    <div class="tictac-att-ss-topbar cf">        <div class="tictac-att-ss-topbar-left">            <span class="tictac-att-ss-topbar-filename"></span>            '+"            "+"            ";r={hash:{},inverse:p.program(3,d,i),fn:p.noop,data:i};if(o=e.disableDownload){o=o.call(t,r)}else{o=t.disableDownload;o=typeof o===c?o.apply(t):o}if(!e.disableDownload){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='            <div class="tictac-att-ss-docview-toolbar">                <span class="tictac-att-ss-docview-zoom-out tictac-att-ss-ctrl-group linkSpan" title="Zoom Out"></span>                <span class="tictac-att-ss-docview-zoom-in linkSpan" title="Zoom In"></span>                <span class="tictac-att-ss-docview-page-prev tictac-att-ss-ctrl-group linkSpan" title="Previous"></span>                <span class="tictac-att-ss-docview-page-current"></span>                <span class="tictac-att-ss-docview-page-next linkSpan" title="Next"></span>            </div>        </div>        <div class="tictac-att-ss-topbar-right">            <span class="tictac-att-ss-close linkSpan" title="Close"></span>        </div>    </div>    <ul class="tictac-att-slideshow-thumbs">        ';r={hash:{},inverse:p.noop,fn:p.program(5,m,i),data:i};if(o=e.attachments){o=o.call(t,r)}else{o=t.attachments;o=typeof o===c?o.apply(t):o}if(!e.attachments){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='    </ul>    <div class="tictac-att-ss-state">        <span class="tictac-att-ss-state-loading">        </span>        <span class="tictac-att-ss-state-loading-message">';if(o=e.message){o=o.call(t,{hash:{},data:i})}else{o=t.message;o=typeof o===c?o.apply(t):o}l+=n(o)+'</span>        <div class="tictac-att-ss-state-error">            <span class="tictac-att-ss-state-error-msg">Sorry, we are unable to display this attachment.</span>            <span class="tictac-att-ss-state-error-retry">Try again.</span>        </div>    </div>    <div class="tictac-att-ss-controls ';r={hash:{},inverse:p.noop,fn:p.program(10,y,i),data:i};if(o=e.is_single){o=o.call(t,r)}else{o=t.is_single;o=typeof o===c?o.apply(t):o}if(!e.is_single){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='">        <span class="tictac-att-ss-controls-prev" title="';r={hash:{},inverse:p.noop,fn:p.program(12,_,i),data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===c?o.apply(t):o}if(!e.isRTL){o=f.call(t,o,r)}if(o||o===0){l+=o}r={hash:{},inverse:p.program(14,g,i),fn:p.noop,data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===c?o.apply(t):o}if(!e.isRTL){o=f.call(t,o,r)}if(o||o===0){l+=o
}l+='">            <span class="tictac-att-ss-controls-prev-icon">                <span></span>            </span>        </span>        <span class="tictac-att-ss-controls-next" title="';r={hash:{},inverse:p.noop,fn:p.program(14,g,i),data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===c?o.apply(t):o}if(!e.isRTL){o=f.call(t,o,r)}if(o||o===0){l+=o}r={hash:{},inverse:p.program(12,_,i),fn:p.noop,data:i};if(o=e.isRTL){o=o.call(t,r)}else{o=t.isRTL;o=typeof o===c?o.apply(t):o}if(!e.isRTL){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='">            <span class="tictac-att-ss-controls-next-icon">                <span></span>            </span>        </span>    </div>    <div class="tictac-att-ss-footer ';r={hash:{},inverse:p.noop,fn:p.program(10,y,i),data:i};if(o=e.is_hidden){o=o.call(t,r)}else{o=t.is_hidden;o=typeof o===c?o.apply(t):o}if(!e.is_hidden){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='">        <div class="tictac-att-ss-photo ';r={hash:{},inverse:p.noop,fn:p.program(16,b,i),data:i};if(o=e.has_thumbnail){o=o.call(t,r)}else{o=t.has_thumbnail;o=typeof o===c?o.apply(t):o}if(!e.has_thumbnail){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='" ';r={hash:{},inverse:p.noop,fn:p.program(18,w,i),data:i};if(o=e.has_thumbnail){o=o.call(t,r)}else{o=t.has_thumbnail;o=typeof o===c?o.apply(t):o}if(!e.has_thumbnail){o=f.call(t,o,r)}if(o||o===0){l+=o}l+='>        </div>        <div class="tictac-att-ss-from-folder-date">            <div class="tictac-att-ss-from">                <p>';if(o=e.fromName){o=o.call(t,{hash:{},data:i})}else{o=t.fromName;o=typeof o===c?o.apply(t):o}l+=n(o)+'</p>            </div>            <div class="tictac-att-ss-folderdate second-line">                <p>';if(o=e.folderDate){o=o.call(t,{hash:{},data:i})}else{o=t.folderDate;o=typeof o===c?o.apply(t):o}l+=n(o)+"</p>            </div>"+'        </div>        <div class="tictac-att-ss-subject-snippet">            <div class="tictac-att-ss-subject">                <p>';if(o=e.subject){o=o.call(t,{hash:{},data:i})}else{o=t.subject;o=typeof o===c?o.apply(t):o}l+=n(o)+'</p>            </div>            <div class="tictac-att-ss-snippet second-line">                <p>';if(o=e.snippet){o=o.call(t,{hash:{},data:i})}else{o=t.snippet;o=typeof o===c?o.apply(t):o}l+=n(o)+"</p>            </div>        </div>    </div></div>";return l});a.Tictac.att.rollups.slideshowmenu=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};var l="",o,r,c=this,n="function",p=e.blockHelperMissing;function f(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="download:single">        <a href="#">Save to my computer</a></li>    '}function h(a,t){return'    <li class="tictac-att-attachment-menu-action"        data-action="dropbox:single">        <a href="#">Save to Dropbox</a></li>    '}l+='<ul class="tictac-att-attachment-menu-fileaction">    ';r={hash:{},inverse:c.noop,fn:c.program(1,f,i),data:i};if(o=e.save_to_computer){o=o.call(t,r)}else{o=t.save_to_computer;o=typeof o===n?o.apply(t):o}if(!e.save_to_computer){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="    ";r={hash:{},inverse:c.noop,fn:c.program(3,h,i),data:i};if(o=e.save_to_dropbox){o=o.call(t,r)}else{o=t.save_to_dropbox;o=typeof o===n?o.apply(t):o}if(!e.save_to_dropbox){o=p.call(t,o,r)}if(o||o===0){l+=o}l+="</ul>";return l});a.Tictac.att.rollups.dragdrop=a.Handlebars.template(function(a,t,e,s,i){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);i=i||{};return"<div id='uploader-droparea' class='tictac-att-compose-droparea'><div>Drag and drop attachments here</div></div>"})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-att-strings",function(t){t.namespace("Tictac.att").strings={str_generating_message:"Generating preview...",str_jump_page_hint:"Enter page number",str_tictac_att_attachment_plural:"{{num}} Attachments",str_tictac_att_attachment_singular:"1 Attachment",str_tictac_att_attachments:"Attachments",str_tictac_att_compose_generic_error:"An error occurred while uploading this file.",str_tictac_att_compose_generic_warning:"A warning occurred while uploading this file.",str_tictac_att_compose_header_size:"{{size}} of {{max_size}}",str_tictac_att_compose_named_virus_cleaned:"Norton AntiVirus found and cleaned a virus [{{virus_name}}]. This file can be sent.",str_tictac_att_compose_named_virus_not_cleaned:"Norton AntiVirus found a virus [{{virus_name}}] that could not be cleaned. This file will not be sent.",str_tictac_att_compose_no_send_plural:"{{num}} errors occurred while uploading.",str_tictac_att_compose_no_send_singular:"An error occurred while uploading.",str_tictac_att_compose_password_protected:"Norton AntiVirus was unable to scan this file. This file may be password protected. It will be sent.",str_tictac_att_compose_virus_cleaned:"Norton AntiVirus found and cleaned a virus. This file can be sent.",str_tictac_att_compose_virus_not_cleaned:"Norton AntiVirus found a virus that could not be cleaned. This file will not be sent.",str_tictac_att_compose_warning_plural:"{{num}} warnings occurred while uploading.",str_tictac_att_compose_warning_singular:"A warning occurred while uploading.",str_tictac_att_download_done_plural:"Scanning is complete and your files are ready for download.",str_tictac_att_download_done_singular:"Scanning is complete and your file is ready for download.",str_tictac_att_download_password_protection:"Norton AntiVirus was unable to scan this file. This file may be password protected. It was downloaded.",str_tictac_att_download_retry_network_error:"A network error occurred during download. Please check your connection and try again.",str_tictac_att_download_title:"Download",str_tictac_att_download_virus_detected_cleaned:"Norton AntiVirus detected and cleaned a virus. This file was downloaded.",str_tictac_att_download_virus_named_detected_cleaned:"Norton AntiVirus detected and cleaned a virus [{{virus_name}}]. This file was downloaded.",str_tictac_att_download_virus_named_not_downloadable:"Norton AntiVirus detected a virus [{{virus_name}}]. This file was not downloaded.",str_tictac_att_download_virus_not_downloadable:"Norton AntiVirus detected a virus. This file was not downloaded.",str_tictac_att_download_virus_scan_incomplete:"An error occurred during virus scanning. Please try again.",str_tictac_att_file_download_fail_plural:"{{num}} errors occurred while downloading.",str_tictac_att_file_download_fail_singular:"An error occurred while downloading.",str_tictac_att_file_download_success_plural:"{{num}} files were downloaded.",str_tictac_att_file_download_success_singular:"A file was downloaded.",str_tictac_att_file_remove_all:"Remove all",str_tictac_att_header_save_all:"Download all",str_tictac_att_header_save_all_to_computer:"Save all to my computer",str_tictac_att_header_save_single:"Download attachment",str_tictac_att_norton_no_trans:"Norton AntiVirus",str_tictac_att_password_error:"Sorry, we are unable to display password-protected documents.",str_tictac_att_scanning_attachments:"Scanning attachments...",str_tictac_att_size_bytes:"{{size}}B",str_tictac_att_size_gb:"{{size}}GB",str_tictac_att_size_kb:"{{size}}KB",str_tictac_att_size_mb:"{{size}}MB",str_tictac_att_slideshow_count:"{{pos}} of {{total}}",str_tictac_att_spinner_savingToCloud_plural:"Saving to Dropbox...",str_tictac_att_spinner_savingToCloud_singular:"Saving to Dropbox...",str_tictac_att_spinner_scanning_plural:"Scanning {{num}} attachments...",str_tictac_att_spinner_scanning_singular:"Scanning an attachment...",str_tictac_att_spinner_uploading_plural:"Adding attachments...",str_tictac_att_spinner_uploading_singular:"Adding an attachment...",str_tictac_att_state_error:"Sorry, we are unable to display this attachment.",last:null}},"1.0.0");YUI.add("tictac-att-slider",function(e){function i(i){var t=this,l="marginLeft",r="tictac-att-overflow-left",n="tictac-att-overflow-right",s="tictac-att-scroll-left",a;t._events=[];t.sliderConfig={container:null,node:null,scrollMargin:0,imgWidth:72,imgMargin:10,slideCount:3,clickTime:250,slideTime:150};for(a in i){if(i.hasOwnProperty(a)){t.sliderConfig[a]=i[a]}}if(e.Tictac.base.isRTL){l="marginRight";r="tictac-att-overflow-right";n="tictac-att-overflow-left";s="tictac-att-scroll-right"}t.checkOverflow=function(e){var i=t.sliderConfig.container,s=t.sliderConfig.node,a=t.sliderConfig.scrollMargin,o,c,f,g;if(!s.getDOMNode()){return}f=+s.getStyle("width").split("px")[0];o=+i.getStyle("width").split("px")[0];g=Math.round(+s.getStyle(l).split("px")[0]);c=-1*(f-o+t.sliderConfig.scrollMargin);if(!e&&c>0&&g<a){s.setStyle(l,a+"px");return t.checkOverflow(true)}else if(!e&&g<c&&f+a>o){s.setStyle(l,c+"px");return t.checkOverflow(true)}if(g<t.sliderConfig.scrollMargin){i.addClass(r)}else{i.removeClass(r)}if(f+2*t.sliderConfig.scrollMargin>o&&g>c){i.addClass(n)}else{i.removeClass(n)}};function o(){var e=t.sliderConfig.container,i=t.sliderConfig.node,r="right",n=false,a=false,o=null;function c(r){var s=-1,c,f,g;if(r==="left"){s=1}c=t.sliderConfig.slideCount*(t.sliderConfig.imgWidth+t.sliderConfig.imgMargin);f=+i.getStyle(l).split("px")[0];f+=c*s;g=-1*(+i.getStyle("width").split("px")[0]-+e.getStyle("width").split("px")[0]+t.sliderConfig.scrollMargin);if(f>t.sliderConfig.scrollMargin){f=t.sliderConfig.scrollMargin}else if(f<g){f=g}if(f===g||f===t.sliderConfig.scrollMargin){clearInterval(o);a=false;n=false}return f}t._events[t._events.length]=e.all(".tictac-att-scroll-left, .tictac-att-scroll-right").on("mousedown",function(e){var i=e.target,f;if(i.hasClass(s)||i.ancestor("div").hasClass(s)){r="left"}else{r="right"}n=true;a=false;f={duration:t.sliderConfig.slideTime/1e3};setTimeout(function(){var e;if(n){a=true;o=setInterval(function(){if(!a){clearInterval(o)}e=c(r);f[l]={delay:0,easing:"linear",value:e+"px"};t.sliderConfig.node.transition(f,function(){t.checkOverflow()})},t.sliderConfig.slideTime-50)}},200)});t._events[t._events.length]=e.all(".tictac-att-scroll-left, .tictac-att-scroll-right").on("mouseup",function(){var e,i;n=false;i={duration:t.sliderConfig.clickTime/1e3};if(!a){e=c(r);i[l]={delay:0,easing:"ease-in-out",value:e+"px"};t.sliderConfig.node.transition(i,function(){t.checkOverflow()})}else{a=false;clearInterval(o);o=null}})}o();t.checkOverflow();t.update=function(e){var i;for(i in e){if(e.hasOwnProperty(i)){t.sliderConfig[i]=e[i]}}};t.destroy=function(){e.Array.each(t._events,function(e){e.detach()})}}e.namespace("Tictac.att").Slider=i},"1.0.0",{requires:["tictac-base"]});YUI.add("tictac-att-attachment-menu",function(e){var t="tictac-att-";function n(){n.superclass.constructor.apply(this,arguments)}n.NAME="attachment-menu";n.ATTRS={attachments:{validator:e.Lang.isObject,value:null}};function i(e){return"."+t+n.NAME+(e?"-"+e:"")}e.extend(n,e.Widget,{bindUI:function(){var t=this,n=t.get("contentBox"),o=n&&n.ancestor("#msg-preview",true),u=false;function a(e){u=true;if(t.fadeMenuTimeout){clearTimeout(t.fadeMenuTimeout);t.fadeMenuTimeout=null}if(t.hoverInTimeout){clearTimeout(t.hoverInTimeout)}t.hoverInTimeout=setTimeout(function(){if(u){t._show(e)}},500)}function c(e){u=false;t.fadeMenuTimeout=setTimeout(function(){t.hide(e);t.fadeMenuTimeout=null},500)}function m(e){t.hide(e)}if(n){if(n.delegate){n.delegate("hover",a,c,".tictac-att-thumb",t)}t.evtHandles.push(e.delegate("mouseenter",a,e.one("body"),i(),t));t.evtHandles.push(e.delegate("mouseleave",c,e.one("body"),i(),t));if(o){o.on("scroll",m)}}},destructor:function(){var t=this,n=t.get("contentBox");if(n&&n.detach){n.detach("hover",t._show,t);n.detach("hover",t.hide,t)}e.Array.each(t.evtHandles,function(e){e.detach()})},hide:function(e){var t=this,n=e.relatedTarget;if(t._menu&&t._menu.node&&!t._menu.node.contains(n)){t._uiRemoveMenu()}},initializer:function(){this.evtHandles=[]},isVisible:function(){var e=this;return e._isVisible||false},allowSimClick:function(){this._menu.node._node.click()},_getAttachmentObject:function(e){var t=this.get("attachments"),n=null;if(t&&t.get){n=t.get(e)}return n},_getMenuContent:function(t){var n="";if(t&&t.getFileName){n=e.Tictac.att.rollups.overlay(t.getObject())}return n},_show:function(e){var t=e.currentTarget,n=this,i,o,u;if(t&&t.test("li")){i=t.getAttribute("data-id");o=n._getAttachmentObject(i);if(o){u=n._getMenuContent(o);n._attachmentObj=o;n._node=t;n._uiShowMenu(t,u);t.addClass("att-active");n._activeNode=t}}},_uiRemoveMenu:function(){var t=this,n=e.common.ui.MenuHelper;if(t._menu&&t._menu.node){t._menu.context.unplug(n);t._menu.node.remove();t._menu.context=t._menu.node=null;if(t._activeNode){t._activeNode.removeClass("att-active")}}},_uiShowMenu:function(t,n){var i=this,o=e.common.ui.MenuHelper;if(t&&n){i._uiRemoveMenu();i._menu={};i._menu.context=t;i._menu.node=e.Node.create(n);e.one("body").append(i._menu.node);o.create(t,{menu:i._menu.node},function(){i._menu.node.on("menuSelected",function(e){i.fire("item-selected",{action:e.dataAction,attachment:i._attachmentObj,node:i._activeNode})})})}},_menu:null});e.namespace("Tictac.att").AttachmentMenu=n},"1.0.0",{requires:["common-ui-menu-helper","event-hover","node-base","widget"]});YUI.add("tictac-att-attachmentview",function(t){var n={showError:function(n,i){var r=this,s;s=t.Tictac.att.attError(n,i&&i>1?{num:i}:null);r.notify(s.message,{fmt:s.cssClass,autoDismiss:false})},hideError:function(t){var n=this;n._showError(false);if(t!==undefined){t.halt();return false}return true},notify:function(n,i){var r=this,s=r._getErrorNode(),e=t.Tictac.att.rollups.error,a=s.getData("noticeId");i=i||{};i.fmt=i.fmt||"has-info";i.autoDismiss=t.Object.owns(i,"autoDismiss")?i.autoDismiss:true;t.Tictac.base.utils.log("Download notify: "+n);s.setContent(e({error_message:n,error_class:i.fmt,show_dismiss:!i.autoDismiss}));a=(a||1)+1;s.setData("noticeId",a);r._stopSpinning();r._showError(true);if(i.autoDismiss){t.later(4e3,r,function(t){if(s.getData("noticeId")===a&&t===n){r.hideError()}},n)}},_getSpinnerMsg:function(n,i){var r=t.Tictac.att.strings,s;s=i[n]===1?"_singular":"_plural";return t.Tictac.base.utils.subs(r["str_tictac_att_spinner_"+n+s],"num",i[n])},_updateSpinner:function(){var n=this,i=n._getArray(),r;r=t.Array.reduce(i,{savingToCloud:0,uploading:0,scanning:0},function(n,i){t.each(n,function(t,r){if(i.get(r)){n[r]=t+1}});return n});if(t.some(["savingToCloud","uploading","scanning"],function(t){if(!r[t]){return false}n.hideError();n._startSpinning();n._spinner.setContent(n._getSpinnerMsg(t,r));return true})){return}n._spinner.setContent("");n._stopSpinning(true)},_updateStatus:function(n,i,r){var s=this,e=s._getCollection();t.Array.each(n,function(t){var n=e.get(t);if(!e){return}n.set(i,r)});s._updateSpinner()},setStatus:function(t,n){this._updateStatus(t,n,true)},clearStatus:function(t,n){this._updateStatus(t,n,false)}};t.namespace("Tictac.att").AttachmentView=n});YUI.add("tictac-att-attachment-tray",function(t){var e=t.Tictac.base.isRTL;function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="attachment-tray";a.ATTRS={attachments:{validator:t.Lang.isObject,value:null},slideDuration:{value:.25},thumbSize:{value:150},thumbMargin:{value:10},defaultHeight:{value:"136px"},count:{value:0},imageCount:{value:0},size:{value:0},isRead:{value:false},isCompose:{value:false},hidden:{value:false},composeMaxSize:{value:25*1024*1024},composeMaxCount:{value:50},instanceId:{value:"tray"}};a.getPrettySize=function(e,a){var i=t.Tictac.base.utils.getPrettySize(e,a);return t.Tictac.base.utils.subs(t.Tictac.att.strings[i.label],"size",i.value)};t.extend(a,t.Widget,{renderUI:function(){var e=this,a=e.get("contentBox"),i=e.get("attachments").getImageArray(),n;a.append(t.Tictac.att.rollups.tray(e._getBaseMarkup()));if(i.length){n=a.all(".tictac-att-thumb-cover ul.tictac-att-thumb-flow li");t.each(i,function(t,e){var a=new Image;a.onload=function(){n.item(e).setStyle("backgroundImage",'url("'+t.thumbnail+'")')};a.src=t.thumbnail})}e._tray=a.one(".tictac-att");e._spinner=e._tray.one(".tictac-att-header-spinner");e._resizeThumbList()},bindUI:function(){var e=this,a=e.get("boundingBox"),i=t.Tictac.att.rollups,n=t.common.ui.MenuHelper,c,r,s=t.Node.create('<div class="tictac-att-attachment-menu optionMenu"></div>'),o=t.Node.create('<div class="tictac-att-attachment-menu optionMenu"></div>'),u;t.one("body").append(s);t.one("body").append(o);e._menuNodeSaveTo=s;e._menuNodeSaveAllTo=o;e._events=e._events||[];e._events.push(a.delegate("click",function(t){var a=t.currentTarget.ancestor(".tictac-att-thumb")||t.currentTarget.ancestor(".tictac-att-other")||t.currentTarget.ancestor(".tictac-att").one(".tictac-att-other")||t.currentTarget.ancestor(".tictac-att").one(".tictac-att-thumb"),r=a.getData("id"),o=e.get("attachments").get(r);u=o.getObject();u.menuItems=e._getRegisteredSaveMenus(o);s.setHTML(i.downloadmenu(u));n.create(t.currentTarget,{menu:s},function(){c=s.on("menuSelected",function(t){e.fire("menu-item-selected",{action:t.dataAction,attachment:o,node:a})})});t.halt();return false},".tictac-att-thumb-save-options"));e._events.push(a.delegate("click",function(t){var a=t.currentTarget.ancestor(".tictac-att-thumb")||t.currentTarget.ancestor(".tictac-att-other")||t.currentTarget.ancestor(".tictac-att").one(".tictac-att-other")||t.currentTarget.ancestor(".tictac-att").one(".tictac-att-thumb"),i=a.getData("id"),n=e.get("attachments").get(i);e.fire("menu-item-selected",{action:"download",attachment:n,node:a});t.halt()},'a[data-action="save-att"]'));e._events.push(a.delegate("click",function(a){var c=t.Tictac.base.utils;function s(){var s=c.getVal(t,"Tictac.dropbox.controller");o.setHTML(i.downloadmenu({save_to_computer:true,save_to_dropbox:!!s,multiple_files:true,menuItems:e._getRegisteredSaveMenus(e.get("attachments").getArray())}));n.create(a.currentTarget,{menu:o},function(){r=o.on("menuSelected",function(t){e.fire(t.dataAction)})})}if(a.target.hasClass("icon-chevron-down")){if(c.hasTictacModule("tictac-dropbox")){t.use("tictac-dropbox-controller",function(){s()})}else{s()}}else{e.fire("download_all")}a.halt();return false},".tictac-att-header-save-comp"));e._events.push(a.delegate("click",function(t){t.halt();var a=t.currentTarget.getData("action"),i=t.currentTarget.ancestor(".tictac-att-thumb")||t.currentTarget.ancestor(".tictac-att-other"),n=i.getData("id"),c=e.get("attachments").get(n);e.fire("menu-item-selected",{action:a,attachment:c,node:i});return false},".tictac-att-remove",e));e._events.push(a.delegate("click",e._removeAll,".tictac-att-header-remove-all",e));e._events.push(a.delegate("click",e._viewAll,".tictac-att-header-view",e));e._events.push(a.delegate("click",e.hideError,".tictac-att-error-dismiss",e));e._events.push(t.on("windowresize",function(){e._uiUpdateTray()}));e._events.push(a.delegate("click",function(){e.fire("norton")},".tictac-att-norton-logo"))},syncUI:function(){var e=this,a=e._tray.one(".tictac-att-thumb-cover"),i=a.one(".tictac-att-thumb-flow");e._slider=new t.Tictac.att.Slider({container:a,node:i,scrollMargin:0,imgWidth:150,imgMargin:10,slideCount:3});e._slider.checkOverflow()},destructor:function(){var e=this;if(e._attachmentMenu){e._attachmentMenu.destroy()}if(e._slider){e._slider.destroy()}if(e._menuNodeSaveTo){e._menuNodeSaveTo.remove(true)}if(e._menuNodeSaveAllTo){e._menuNodeSaveAllTo.remove(true)}t.Array.each(e._events,function(t){t.detach()})},initializer:function(){var t=this;t.set("count",t.get("attachments").getCount());t.set("viewableCount",t.get("attachments").getViewableArray().length);t.set("imageCount",t.get("attachments").getImageArray().length);t.set("size",t.get("attachments").getSize())},hide:function(){var t=this,e=t.get("boundingBox");e.addClass("hidden");t.set("hidden",true);t._uiUpdateTray()},show:function(t){var e=this,a=e.get("boundingBox");a.removeClass("hidden");e.set("hidden",false);if(t){a.scrollIntoView()}},_getRegisteredSaveMenus:function(e){if(!e.length){e=[e]}var a=[],i=t.Tictac.att.saveMenu;t.each(i,function(i){var n,c=e.length,r,s;if(i.types){for(n=0;n<c;n++){if(e[n].get&&e[n].get("filetype")){r=e[n].get("filetype");s=e[n].data?s=e[n].data.type:s=e[n].type}else if(e[n].filetype){r=e[n].filetype;s=e[n].type}if(t.Array.indexOf(i.types,r)!==-1||t.Array.indexOf(i.types,s)!==-1){a.push(i);return}}}else{a.push(i)}});return a},addAttachment:function(e){var a=this,i=a.get("attachments"),n=t.Tictac.att.rollups,c=e.getObject(),r;i.add(e);if(e.isImage()){r=a._tray.one(".tictac-att-thumb-cover .tictac-att-thumb-flow");c.has_thumbnail=true;a.set("imageCount",a.get("imageCount")+1)}else{r=a._tray.one(".tictac-att-files-cover .tictac-att-thumb-flow")}if(r){r.append(n.attachment(c))}a._uiUpdateTray()},removeAttachment:function(t){var e=this,a=e.get("attachments"),i;i=e._tray.one('.tictac-att-thumb-flow li[data-id="'+t+'"]');if(a.get(t).isImage()){e.set("imageCount",e.get("imageCount")-1)}i.remove();a.remove(t);e._uiUpdateTray()},_resizeThumbList:function(){var t=this,e;e=t._tray.one(".tictac-att-thumb-flow");if(e){e.setStyle("width",(t.get("thumbSize")+t.get("thumbMargin"))*t.get("imageCount")+"px")}if(t._slider){t._slider.checkOverflow()}},_getComposeSizeString:function(){var e=this,a=t.Tictac.base.utils,i=t.Tictac.att.strings.str_tictac_att_compose_header_size,n=t.Tictac.att.AttachmentTray,c=n.getPrettySize(e.get("size")),r=n.getPrettySize(e.get("composeMaxSize"));return a.subs(i,{size:c,max_size:r})},_getCountString:function(){var e,a=this.get("count"),i=t.Tictac.att.strings,n=t.Tictac.base.utils;if(a===1){e=i.str_tictac_att_attachment_singular}else{e=n.subs(i.str_tictac_att_attachment_plural,"num",a)}return e},_getViewableCountString:function(){var e,a=this.get("viewableCount"),i=t.Tictac.att.strings,n=t.Tictac.base.utils;if(a===1){e=i.str_tictac_att_attachment_singular}else{e=n.subs(i.str_tictac_att_attachment_plural,"num",a)}return e},_isRead:function(){return this.get("isRead")?true:false},_isCompose:function(){return this.get("isCompose")?true:false},_getBaseMarkup:function(){var a=this,i=t.Tictac.att.AttachmentTray,n=a.get("count"),c=a.get("attachments"),r;r={tray_count:a._getCountString(),tray_size:i.getPrettySize(a.get("size")),is_read:a._isRead(),is_compose:a._isCompose(),is_hidden:a.get("hidden"),isRTL:e,photos:c.getImageArray(),files:c.getFileArray(),is_single:n===1,has_viewable:c.getViewableArray().length>0,viewable_count:a._getViewableCountString()};return r},_uiUpdateTray:function(){var e=this,a=t.Tictac.att.strings,i=t.Tictac.att.AttachmentTray,n=e.get("attachments"),c=n.getCount(),r=e._tray.one(".tictac-att-header-remove-all a"),s=c===1?"":a.str_tictac_att_file_remove_all,o=e._tray.one(".tictac-att-header-count"),u,l,g;e.set("count",c);e.set("size",n.getSize());if(c===1){if(r){r.addClass("hidden")}o.addClass("hidden")}else{o.removeClass("hidden");if(r){r.removeClass("hidden");r.setHTML(s)}o.setHTML(e._getCountString())}e._resizeThumbList();u=e._tray.all(".tictac-att-header-size");if(u){if(e._isCompose()){u.setContent(e._getComposeSizeString())}else{u.setContent(i.getPrettySize(e.get("size")))}}l=e._tray.one(".tictac-att-header-att");if(l){l.setContent(e._getCountString())}g=e._tray.one(".tictac-att-header-save-message");if(g){g.setHTML(e.get("count")===1?a.str_tictac_att_header_save_single:a.str_tictac_att_header_save_all)}},_removeAll:function(t){this.fire("removeall");t.halt();return false},_viewAll:function(t){t.halt();return false},_getErrorNode:function(){return this._tray.one(".tictac-att-header-error")},_showError:function(t){if(t){this._tray.addClass("att-error")}else{this._tray.removeClass("att-error")}},_startSpinning:function(){this._tray.addClass("att-spinner")},_stopSpinning:function(t){this._tray.removeClass("att-spinner");if(t){this._uiUpdateTray()}},_getArray:function(){return this.get("attachments").getArray(null,true)},_getCollection:function(){return this.get("attachments")}});t.mix(a.prototype,t.Tictac.att.AttachmentView);t.namespace("Tictac.att").AttachmentTray=a},"1.0.0",{requires:["widget","event-hover","handlebars-base","tictac-att-rollups","tictac-att-strings","tictac-base-utils","tictac-att-attachments","tictac-att-slider","transition","tictac-att-attachment-menu","tictac-base-mailpreferences","tictac-att-attachmentview"]});YUI.add("tictac-att-attachments",function(t){var e=function(){var t=0;return function(){return++t}}();function a(){this.data={};this.count=0}a.prototype={add:function(t){this.data[t.getId()]=t;this.count++;return this},remove:function(t){if(this.data.hasOwnProperty(t)){delete this.data[t];this.count--;return true}return false},get:function(t){if(this.data.hasOwnProperty(t)){return this.data[t]}return false},getArray:function(t,e){var a=[];for(var i in this.data){if(this.data.hasOwnProperty(i)){if(e){a.push(this.data[i])}else{a.push(this.data[i].getObject(t))}}}return a},getFileArray:function(){var t=[],e;for(var a in this.data){if(this.data.hasOwnProperty(a)){e=this.data[a].getObject();if(!e.viewable){t.push(e);continue}if(!e.fullsize){t.push(e)}e.downloadInfo=this.data[a].getObject({simple:true})}}return t},getImageArray:function(t){return this.getViewableArray(t,true)},getViewableArray:function(t,e){var a=[],i,n=0,r=0;for(var s in this.data){if(this.data.hasOwnProperty(s)){i=this.data[s].getObject();if(!i.viewable){continue}if(e&&!i.fullsize){continue}i.downloadInfo=this.data[s].getObject({simple:true});a.push(i);if(t!==undefined&&t===this.data[s].getId()){n=r}r++}}if(t!==undefined){return{attachments:a,position:n}}return a},getSize:function(){var t=this,e=0,a;for(a in t.data){if(t.data.hasOwnProperty(a)){e+=t.data[a].getSize()}}return e},getCount:function(){return this.count}};var i=["jpg","jpeg","gif","png","bmp","tiff","tif","jif","jfif","jp2","jpx","j2k","j2c","pcd"];function n(t){var a=this;a.data={};a.update(t);if(!a.data.aid){a.data.aid=e()}n.superclass.constructor.apply(a,arguments)}n.NAME="attachment";n.ATTRS={cancelable:{validator:t.Lang.isBoolean,value:false},downloadable:{validator:t.Lang.isBoolean,value:false},dropbox:{validator:t.Lang.isBoolean,value:false},shareable:{validator:t.Lang.isBoolean,value:false},editable:{validator:t.Lang.isBoolean,value:false},removable:{validator:t.Lang.isBoolean,value:false},retryable:{validator:t.Lang.isBoolean,value:false},viewable:{validator:t.Lang.isBoolean,value:false,getter:function(t){return t||!!this.get("thumbnail")}},scanning:{validator:t.Lang.isBoolean,value:false},uploading:{validator:t.Lang.isBoolean,value:false},savingToCloud:{validator:t.Lang.isBoolean,value:false},filetype:{validator:t.Lang.isString,value:""},thumbnail:{validator:t.Lang.isString,value:""},error:{validator:t.Lang.isObject,value:null}};t.extend(n,t.Base,{getId:function(){return this.data.aid},setId:function(t){var e=this;e.data.aid=t;return e},update:function(t){var e=this,a;for(a in t){if(t.hasOwnProperty(a)){e.data[a]=t[a]}}return e},getFileName:function(){var t=this;if(t.data.hasOwnProperty("filename")){return t.data.filename}return""},getFilenameWithoutExtension:function(){var t=this;if(t.data.hasOwnProperty("filename")){var e=t.data.filename;return e.substr(0,e.lastIndexOf("."))||e}return""},getFileExtension:function(){var t=this;if(t.data.hasOwnProperty("filename")){var e=t.data.filename;return e.substr(e.lastIndexOf("."))||""}return""},isCancelable:function(){return this.get("cancelable")},isDownloadable:function(){return this.get("downloadable")},isDropbox:function(){return this.get("dropbox")},isShareable:function(){return this.get("shareable")},isEditable:function(){return this.get("editable")},isRemovable:function(){return this.get("removable")},isRetryable:function(){return this.get("retryable")},isViewable:function(){return this.get("viewable")},isImage:function(){var e=this,a=e.get("filetype"),n,r;if(a==="image"){return true}else{n=e.getFileName().toLowerCase();r=n.substring(n.lastIndexOf(".")+1);return t.Array.indexOf(i,r)>-1}},hasError:function(){var t=this.get("error");return!!(t&&t.message)},getNode:function(){var e=this;var a=".tictac-att-thumb-flow ";a+=".tictac-att-thumb";a+='[data-id="'+e.getId()+'"]';if(!e._node){e._node=t.one(a)}if(!e._node){a=".tictac-att-thumb-flow ";a+=".tictac-att-other";a+='[data-id="'+e.getId()+'"]';e._node=t.one(a)}return e._node},updateProperty:function(t,e){var a=this;if(!t){return}if(t==="error"&&e===null){e={}}a.set(t,e);a._renderItem()},_renderItem:function(){var e=this,a=e.getNode(),i,n,r=e.get("thumbnail"),s=r||e.isImage()?t.Tictac.att.rollups.attachment:t.Tictac.att.rollups.fileattachment;if(a){i=t.Node.create(s(e.getObject()));a.get("parentNode").insert(i,a);a.remove();e._node=null;if(r){n=new Image;n.onload=function(){i.setStyle("backgroundImage",'url("'+r+'")')};n.src=r}}},getObject:function(e){var a=this,i,n=a.get("error"),r=a.hasError(),s=a.isDropbox();if(e&&e.simple){i={mid:a.data.mid,fid:a.data.fid,pid:a.data.pid,aid:a.data.aid};if(a.data.tnefId!==undefined){i.tnefid=""+a.data.tnefId}return i}i=a.data;i.filename=t.Tictac.base.utils.deentitize(i.filename);i.filetype=a.get("filetype");i.thumbnail=a.get("thumbnail");if(a.get("thumbnail")){i.has_thumbnail=true;i.filetype="image";i.overlay=false}else{i.overlay=true}if(i.filetype){i.has_filetype=true}i.filesize=t.Tictac.att.AttachmentTray.getPrettySize(a.getSize());i.simplefilesize=t.Tictac.att.AttachmentTray.getPrettySize(a.getSize(),true);i.has_cancel=a.isCancelable();i.has_view=a.isViewable();i.has_edit=a.isEditable();i.has_remove=a.isRemovable();i.has_retry=a.isRetryable();i.save_to_computer=a.isDownloadable();i.save_to_dropbox=a.isShareable();i.is_ssl=window.location.protocol==="https:";i.filename_without_extension=t.Tictac.base.utils.deentitize(a.getFilenameWithoutExtension());i.file_extension=a.getFileExtension();i.has_save_options=a.isDownloadable()||a.isShareable()||!r;i.has_error=r;i.is_dropbox=s;if(r){i.error_message=n.message;i.error_class=n.cssClass;return t.merge(i,n.menuSettings)}return i},getSize:function(){var t=this;if(t.data.hasOwnProperty("size")){return t.data.size}return 0}});t.namespace("Tictac.att").Collection=a;t.namespace("Tictac.att").Attachment=n},"1.0.0",{requires:["base","tictac-att-attachment-tray","tictac-base-utils"]});YUI.add("tictac-att-progressbar",function(a){function r(){}r.prototype={render:function(r){var e=this;e.bar=a.Node.create('<span><span class="tt-progressbar-bar"></span></span>');e.rail=a.Node.create('<div class="tt-progressbar-rail"></div>');e.rail.append(e.bar);a.one(r).append(e.rail);e.width=e.rail.get("width");e.set(0)},set:function(r){r=parseFloat(r);if(a.Lang.isNumber(r)){this.bar.setStyle("width",Math.max(0,Math.min(100,r))+"%")}},cleanup:function(){var a=this;a.bar.remove(true);a.rail.remove(true);a.bar=null;a.rail=null}};a.namespace("Tictac.widget").Progressbar=r},"1.0.0",{requires:["node"]});