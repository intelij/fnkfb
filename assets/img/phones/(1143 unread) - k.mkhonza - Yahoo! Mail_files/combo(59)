if(!window.ucs){window.ucs={};window.ucs._sendBeacon=function(c,b){var a=new Image();a.height=0;a.width=0;a.src="https://geo.yahoo.com/t"+c;document.body.appendChild(a);};window.ucs.YObj=(function(){var a=document.getElementById("yucs");return(typeof window.Y!=="undefined"&&(a&&a.getAttribute("data-property")==="srp"))?window.Y:YUI();})();}YUI.add("gallery-jsonp",function(b){var a=b.Lang.isObject,c=b.Lang.isFunction;function d(){this._init.apply(this,arguments);}d._pattern=/\bcallback=(.*?)(?=&|$)/i;d._template="callback={callback}";d.prototype={_init:function(f,e){this.url=f;e=e||{};if(c(e)){e={on:{success:e}};}e.on=e.on||{};if(!e.on.success){e.on.success=this._getCallbackFromUrl(f);}this._config=b.merge({on:{},context:this,args:[],format:this._format},e);},_getCallbackFromUrl:function(i){var j=i.match(d._pattern),e,g,f,h;if(j){g=b.config.win;f=j[1].split(/\./).reverse();e=f.shift();for(h=f.length-1;h>=0;--h){g=g[f[h]];if(!a(g)){return null;}}if(a(g)&&c(g[e])){return b.bind(g[e],g);}}return null;},send:function(e){if(!this._config.on.success){return this;}var g=b.guid().replace(/-/g,"_"),h=this._config,i=h.format.call(this,this.url,"YUI.Env.JSONP."+g);function f(j){return(c(j))?function(k){delete YUI.Env.JSONP[g];j.apply(h.context,[k].concat(h.args));}:null;}YUI.Env.JSONP[g]=f(h.on.success);b.Get.script(i,{onFailure:f(h.on.failure),onTimeout:f(h.on.timeout||h.on.failure),timeout:h.timeout});return this;},_format:function(h,f){var e=d._template.replace(/\{callback\}/,f),g;if(d._pattern.test(h)){return h.replace(d._pattern,e);}else{g=h.slice(-1);if(g!=="&"&&g!=="?"){h+=(h.indexOf("?")>-1)?"&":"?";}return h+e;}}};b.JSONPRequest=d;b.jsonp=function(f,e){return new b.JSONPRequest(f,e).send();};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(c){c.namespace("ucs");if(c.ucs.MenuUtils){return;}var m="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",r="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",l='<span class="separator" role="presentation"></span>',g="click",p="a",h="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif",k=300,i,n;c.ucs.MenuUtils=function(t,s){var u=s&&s.panelSelector||j;this.menu=t;this.panel=this.menu.one(u);if(this.panel){this.init();}this.openDelay=(s&&typeof s.openDelay!="undefined")?(s.openDelay):(k);this.closeTimer=null;this.overPanel=false;this.overLink=false;};c.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.on("hover",c.bind(this._handleMenuEnter,this),c.bind(this._handleMouseOut,this),this);this.panel.on("hover",c.bind(this._handlePanelEnter,this),c.bind(this._handlePanelLeave,this),this);this.menu.delegate(g,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(p).set(h,"button");this.panel.all(p).set(h,"menuitemradio");this.panel.set(h,"menu");this.panel.all("div,ul,li").set(h,"presentation");if(!c.UA.ipad&&!c.UA.mobile){this.panel.set(a,-1);}this.focusmanager=this.panel.plug(c.Plugin.NodeFocusManager,{descendants:p,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(s){return s.get(o);}},circular:true});},_refreshAria:function(){this.focusmanager.focusManager.refresh();},_destructAria:function(){this.panel.unplug(c.Plugin.NodeFocusManager);this.panel.one(p).set(a,0);},_handleMenuClick:function(s){if(this.overLink&&this.panel.hasClass(f)){this._accessShowMenu(s);if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}}},_handleMenuEnter:function(s){s.halt();this.overLink=true;c.later(this.openDelay,this,this._handleMenuClick);},_handlePanelEnter:function(s){if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}this.overPanel=true;},_handlePanelLeave:function(s){this.overPanel=false;if(this.panelShown){this._handleMouseOut();}},_handleKeyup:function(s){if(27===s.keyCode){this.menu.one(p).focus();this._hideMenu();}else{if(40===s.keyCode&&!this.keyedup){this.panel.one(p).focus();this.keyedup=true;}}},_handleKeydown:function(s){if(!this.panel.hasClass(f)){s.stopPropagation();}if(40===s.keyCode){s.preventDefault();}},_handleDocumentClick:function(s){if(this.panel.contains(s.target)||s.target._node===this.panel._node||this.panel.hasClass(f)||s.target===this.menu.one(">a")||s.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(t){var s=this;this._hideAllMenus();this._showMenu(t);this.panel.focus();c.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=c.on("blur",function(v){var u=this;if(!this.skipBlur){this.timeout=setTimeout(function(){u._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=c.on("focus",function(u){if(this.timeout&&this.panel.hasChildNodes(u.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);},_showMenu:function(t){this.panel.removeClass(f);this._addIframeShim();var s=this.menu.one(b);if(s){s.removeClass(f);}},_position:function(){var s=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",s[0]);}this.panel.setStyle("top",s[1]+13);},_handleMouseOut:function(s){this.overLink=false;if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}if(!this.panel.hasClass(f)){this.closeTimer=c.later(500,this,this._handleLeave);}},_handleLeave:function(s){if(!this.overPanel&&!this.overLink){this._hideMenu();}},_hideMenu:function(){this.panel.addClass(f);this.overPanel=false;var s=this.menu.one(b);if(s){s.addClass(f);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var t=c.all("yucs-menu iframe"),s=c.one("#yucs-top-menu");this._hideMenu();if(s&&s.one("ul")){s.one("ul").addClass(f);c.one("#yucs-more").removeClass("yucs-menu-active");}t.addClass(f);},_addIframeShim:function(){var s=c.all("select"),u=(c.UA.ie<=6),t;if(!u||(s.size()===0)){return;}t=this.menu.one(b);if(!t){t=document.createElement(b);t=this.panel.get(o).insertBefore(t,this.panel);}t.className="yucs-shim";t.setStyle("position","absolute");t.setStyle("width",this.panel.getComputedStyle("width"));t.setStyle("height",this.panel.getComputedStyle("height"));t.setStyle("top",this.panel.getY()+"px");t.setStyle("border","0px none");if(!this.menu.hasClass("yucs-help")){t.setStyle("left",0);}t.frameBorder=0;},_addMenuGroups:function(v,A,z){var x=this.menu.one(j),s="",t=(x.get("children")._nodes.length)?true:false;for(var u=0,w=v.length;u<w;u++){var y=v[u].length;if(A==="bottom"){v[u][0].separatorTop=true;}else{if(u<(w-1)||t){v[u][y-1].separatorBottom=true;}}s+=this._addMenuGroup(v[u],z);}if(A==="bottom"){x.append(s);}else{x.prepend(s);}},_addMenuGroup:function(t,v){var w="";for(var u=0,s=t.length;u<s;u++){if(v){t[u].isDebugItem=true;t[u].menuClass="debug-item";}else{t[u].isDebugItem=false;t[u].menuClass="minty-item";}w+=this._addMenuItem(t[u]);}return w;},_addMenuItem:function(t){var s="";if(t.isActive){t.checkedAria='aria-checked="true"';}else{t.checkedAria="";
}if(t.isDisabled){t.disabledAria='aria-disabled="true"';}else{t.disabledAria="";}switch(t.actionType){case"link":s=c.substitute(m,t,this._processTemplateValue);break;case"customEvent":s=c.substitute(r,t,this._processTemplateValue);break;default:break;}if(s){if(t.isDebugItem){s=s.replace(/separator/,"separator debug-item");}else{s=s.replace(/separator/,"separator minty-item");}}return s;},_clearMenuItem:function(s){this.menu.one(j).all("."+s).each(function(t){t.remove(true);});},_processTemplateValue:function(t,u,v){c.log("key = "+t+" value = "+u+" meta_data = "+v);var w="";var s=(document.location.protocol==="https:")?e:q;switch(t){case"icon":if(u!==undefined){if(u==="available"){w='<img src="'+s+'" class="yucs-opi available"/>';}else{if(u==="offline"){w='<img src="'+s+'" class="yucs-opi offline"/>';}else{if(u==="invisible"){w='<img src="'+s+'" class="yucs-opi invisible"/>';}else{if(u==="busy"){w='<img src="'+s+'" class="yucs-opi busy"/>';}else{if(u==="idle"){w='<img src="'+s+'" class="yucs-opi idle"/>';}else{w='<img src="'+u+'" />';}}}}}}break;case"separatorTop":if(u){w=l;}break;case"separatorBottom":if(u){w=l;}break;case"actionData":if(u){w='data-mad="'+u+'"';}break;case"isDisabled":if(u){w="disabled";}break;case"isActive":if(u){w="sp active";}break;case"checkedAria":w=u;break;default:w=u;break;}return w;},_resetItemStatus:function(v){var u=v.ancestor(j).all(d),t=v.ancestor(j).all("li.disabled"),s;u.removeClass("sp active");t.removeClass("disabled");if(v.getAttribute("data-dis")){s=v.ancestor(d);s.addClass("disabled");}if(v.getAttribute("data-hs")){s=v.ancestor(d);s.addClass("sp active");}},_handleMenuItemClick:function(u){var s=u.target;}};},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]});(function(){var a=document.getElementById("yucs");if(!a){return;}ucs.YObj.use("node","ucs-menu-utils",function(c){var b=c.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(e){var d=new c.ucs.MenuUtils(e);});});})();(function(){var c=(function(){var d=document.getElementById("yucs").getAttribute("data-lang"),e;if(!d){return"en-US";}d=d.split("-");e=d.length;if(e==1){return d[0].toLowerCase();}else{if(e==2){d[0]=d[0].toLowerCase();d[1]=d[1].toUpperCase();}else{if(e>2){e=e-1;d[0]=d[0].toLowerCase();d[1]=d[1].charAt(0).toUpperCase()+d[1].slice(1);d[e]=d[e].toUpperCase();}}}return d.join("-");})();var a="lang/datatype-date-format_"+c;var b="datatype-date";(function(){var f=document.getElementById("yucs"),e=f&&f.getAttribute("data-property")==="srp",d=ucs.YObj;if(e){if(YUI&&YUI.version.split(".")[1]<4){a="lang/datatype-date-format";b="lang/datatype-date";}else{if(YUI&&YUI.version.split(".")[1]<5){YUI().use("datatype-date",function(g){});d.use("lang/datatype-data-format_"+c,function(g){});}else{d.use(b,function(g){});d.use(a,function(g){});}}}})();YUI.add("ucs-timestamp-library",function(d){d.namespace("ucs.Timestamp");d.Intl.setLang("datatype-date-format",c);d.ucs.Timestamp={getTimeStamp:function(g){var p,u,w,v,y,q,i="AM",l,e=d.one("#yucs"),n=g.dateRef||new Date(),o=g.date,s=g.locale?g.locale:e.getAttribute("data-lang"),k=o.getTime(),x=o.getDate(),m=n.getDate(),z=n.getTime(),j=z-k,r=m-x,h=true,f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];s=d.Lang.isString(s)?s:"en-us";h=/^en-us$/i.test(s);j=parseInt(j/1000,10);u=o.getMonth();y=o.getHours();q=o.getMinutes();l=z-((n.getHours()*60*60*1000)+(n.getMinutes()*60*1000)+(n.getSeconds()*1000)+n.getMilliseconds());if(q<10){q="0"+q;}if(y>=12){i="PM";}if(y>12){y-=12;}if(g.type&&g.type==="short"&&d.DataType&&d.DataType.Date){if(r===0){p=y+":"+q+" "+i;}else{p=d.DataType.Date.format(o,{format:"%x",locale:c}).replace(/\b0(?=\d)/g,"");}}else{if(!h){p=f[u]+" "+x+"&nbsp;&nbsp;"+y+":"+q+" "+i;}else{if(r===0){if(j<60){if(j>1){p=j+" secs ago";}else{p=j+" sec ago";}}else{if(j<3600){j=Math.ceil(j/60,10);if(j<2){p=j+" min ago";}else{p=j+" mins ago";}}else{if(j<86400){j=Math.ceil(j/3600);if(j>1){p=j+" hours ago";}else{p=j+" hour ago";}}}}}else{if(((l-k)<86400000)&&r!==0){p="Yesterday "+y+":"+q+" "+i;}else{p=f[u]+" "+x+"&nbsp;&nbsp;"+y+":"+q+" "+i;}}}}return p;}};},"1.0",{requires:["node",a,b]});})();YUI.add("ucs-menu-nav",function(d){d.namespace("ucs.MenuNav");var f="yucs",a="yucs-activate",t="yucs-menu",h="yucs-dock",m="yucs-menu_anchor",n="yucs-submenu-toggle",u="yucs-hide",g="yui3-menu-hidden",k="yui3-menu-label",l="yui3-menu-label-menuvisible",c="yui3-menu-label-active",o="yui3-menuitem-active",q="yucs-search",i="yucs-profile_inner",j="ucs:menuNavShow",r=5,s=500,b=0,p=500,e=350;d.ucs.MenuNav=function(A){var x,z=null,v=null,w=null,y=this;this.container=A;this.containerId=this.container.getAttribute("id");this.submenu=this.container.one("."+t);this.menuLabel=this.container.one("."+k);this.headerNode=d.one("#"+f);this.showMenuYlt=this.submenu.getAttribute("data-yltmenushown");v=function(C){d.log("MenuNav: overriding setXY on #"+y.submenu.getAttribute("id"));var B=document.getElementById("yucs");if(B&&B.getAttribute("data-property")!=="srp"){C[1]=d.one("#"+f).get("region").bottom-3;}y._adjustPositionBeforeDisplay(C);};this.submenu.setXY=v;w=this.container.one("a."+k+", ."+k+" a");if(w&&w.getAttribute("href").indexOf("#")!==0){w.setAttribute("href","#"+this.submenu.getAttribute("id"));}x={mouseOutHideDelay:e,submenuHideDelay:p,subMenuShowDelay:b};this.container.plug(d.Plugin.NodeMenuNav,x);this._initEventHandlers();this._unHide();this.container.removeClass(a);};d.ucs.MenuNav.prototype={_unHide:function(){var v=this.container.all("."+u);if(v){v.removeClass(u);}},_broadcast:function(){d.augment(d.ucs.MenuNav,d.EventTarget,null,null,{});this.publish(j,{broadcast:2,emitFacade:true});},_initEventHandlers:function(){var v=this.headerNode.getAttribute("data-property");if("mail"===v&&this.container._plugins&&this.container._plugins.menuNav&&this.container._plugins.menuNav.prototype&&this.container._plugins.menuNav.prototype._onDocFocus){this.container._plugins.menuNav.prototype._onDocFocus=function(){};}this.container._plugins.menuNav.prototype._hideMenu=function(z,x){if(!x){return;}var y=this,A=z.previous(),w;A.removeClass(l);if(x){y._focusItem(A);y._setActiveItem(A);}w=z.one("."+o);if(w){w.removeClass(o);}z.setStyles({left:"",top:""});z.addClass("yui3-menu-hidden");if(y.get("useARIA")){z.set("aria-hidden",true);}};this._isOverMenu=false;this.container.on("hover",d.bind(this._handleMenuEnter,this),d.bind(this._handleMenuLeave,this));d.Global.on("ucs:mailPreviewShown",this._close,this);this.container.delegate("click",this._close,"."+t+" li a",this);},_handleMenuLeave:function(z){var x=function(){if(false===this._isOverMenu){this._close();}};if(!z||!z.stopPropagation){return;}z.stopPropagation();this._isOverMenu=false;var y=this.menuLabel,w=(z.target.hasClass("yui3-menu-label")||y.contains(z.target)),v=y.get("region").bottom;if((!w&&z.pageY>this.submenu.get("region").top)||z.pageY<=v-8){this._close();}else{d.later(s,this,x);}},_handleMenuEnter:function(v){this._isOverMenu=true;},_closeOtherMenus:function(x,v){var w=x.one(".yucs-menu");if(x.getAttribute("id")!==this.containerId&&false===this._isHidden(w)){this._close("",x,w);}},_close:function(x,y,w,v){var z=function(A){A.handledMouseOut=true;A.handledMouseOver=false;};y=typeof y==="undefined"?this.container:y;w=typeof w==="undefined"?this.submenu:w;v=typeof v==="undefined"?this.menuLabel:v;w.addClass(g);v.removeClass(l).removeClass(c);w.all(".yui3-menuitem").each(function(A){z(A);A.removeClass("."+o);});z(v);z(y);z(w);},_isHidden:function(v){return v.hasClass(g)||v.hasClass(u);},_adjustPositionBeforeDisplay:function(y){var w=this.container.one("."+m)||this.container,v;this.submenu.setY(y[1]);v=function(){this.submenu.setStyles({"width":"auto","height":"auto"});var D=w.getX(),z=d.one("#"+f),G=z.getX(),H=z.get("offsetWidth"),B=this.submenu.get("offsetWidth"),A=Math.round(G+H-B-r),E=this.container.one("."+h),F=E&&E.get("offsetWidth"),C;if(D<A){A=D;this.container.setStyle("borderTopLeftRadius","0px");}if((this.submenu.getAttribute("id")===i)&&(d.one("#"+q)&&d.one("#"+q).getStyle("direction")==="rtl")){A=D-(B/2);}if((this.submenu.getAttribute("id")==="yucs-prop_nav")&&(d.one("#"+q)&&d.one("#"+q).getStyle("direction")==="rtl")){this.submenu.setX(D-(B*5));}this.submenu.setX(A);if(E){C=(w.get("offsetWidth")/2)-(F/2);E.setX(D+C);}this._sendBeacon(this.showMenuYlt);d.Global.fire(j,{"menuid":this.containerId});d.one("#"+f).all(".yucs-menu_nav").each(this._closeOtherMenus,this);};if(d.one("#"+q)&&d.one("#"+q).getStyle("direction")!=="rtl"){if(document.compatMode!=="CSS1Compat"){this.submenu.setStyle("left","0px");}else{this.submenu.setStyle("left","-10000px");}}else{var x=document.getElementById("yucs");if(x&&x.getAttribute("data-property")!=="srp"){this.submenu.setStyle("left","0px");}else{this.submenu.setStyle("left","-10000px");}}d.later(10,this,v);},_sendBeacon:function(v){var w;if(!v){d.log("MenuNav: no ylt data in _sendBeacon for #"+this.submenu.getAttribute("id"));return;}w=new Image();w.height=0;w.width=0;w.src="https://geo.yahoo.com/t"+v;}};},"1.0",{requires:["node","event","event-custom","node-menunav","event-hover"]});(function(){ucs.YObj.use("ucs-menu-nav",function(b){var c=b.one("#yucs"),a=c&&c.all(".yucs-menu_nav.yucs-activate")||false;if(a){a.each(function(f,d){var e=new b.ucs.MenuNav(f);});}});}());YUI.add("ucs-logodebug",function(c){c.namespace("ucs");var a=document.getElementById("imageCheck"),b=document.getElementById("yucs-logo-ani");if((a&&a.offsetWidth!==1&&a.readyState=="complete")||(a&&a.offsetWidth!==1&&a.readyState==undefined)){b.style.visibility="visible";b.style.position="relative";b.style.clip="auto";}c.ucs.LogoDebug=function(d){d.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};c.ucs.LogoDebug.prototype={_handleClick:function(d){if(d.altKey){d.halt();this.fire("ucs:logoDebug");}}};c.Global.on("ucs:themeChange",function(d){c.later(11,this,function(f){if(c.one("#animator")){c.one("#animator").setStyle("display","none");}if(c.one("#yucs-logo-ani")){c.one("#yucs-logo-ani").setStyle("clip","auto");c.one("#yucs-logo-ani").setStyle("visibility","visible");if(c.one(".lt #yucs-logo-ani")){c.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important");}else{c.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0%");}}});});c.Global.on("ucs:playLogo",function(d){if(typeof Aniden!="undefined"&&Aniden.play){Aniden.play();}});c.augment(c.ucs.LogoDebug,c.EventTarget);},"1.0",{requires:["node"]});(function(){ucs.YObj.use("node","ucs-logodebug",function(c){var b=c.one("#yucs-logo");if(b){var a=new c.ucs.LogoDebug(b);}});})();(function(){ucs.YObj.use("node","event-custom",function(b){var a=b.one("#yuhead-me-signout")||b.one("#yucs .yucs-signout");if(a){a.on("click",function(c){b.Global.fire("ucs:signout");});}});})();YUI.add("ucs-simple-menu",function(f){f.namespace("ucs.MoreMenu");var d="yucs-menu-active",e="role",a="tabIndex",b=">li>a",c="parentNode";f.ucs.MoreMenu=function(g){f.ucs.MoreMenu.superclass.constructor.call(this,g);g.removeClass("yucs-more-activate");this.ylt=g.getAttribute("data-ylt");this.topBar=f.one("#yucs-top-bar");this._init();};f.extend(f.ucs.MoreMenu,f.ucs.MenuUtils,{_init:function(){this._position();this._initAriaTopbar();this._initEvents();},_initEvents:function(){this.menu.detach("hover");this.panel.detach("hover");f.one("#yucs-more-link").on("click",this._handleMenuClick,this);f.Global.on("ucs:menuNavShow",this._hideMenu,this);},_handleMenuClick:function(g){g.halt();if(this.panel.hasClass("yucs-hide")){this._showMenu(g);this.menu.removeClass("yucs-has-focus");this.menu.one("a").blur();this.documentClickHandle=f.one("body").on("click",this._handleDocumentClick,this);this.documentMouseDownHandle=f.one("body").on("mousedown",this._handleDocumentClick,this);}else{this._hideMenu();}},_position:function(){var g=this.menu.get("region").height;g=g-2;f.one("#yucs-top-menu").setStyle("top",g+"px");},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt);},_showMenu:function(g){if(this.panel.hasClass("yucs-hide")){this._sendBeacon();this.menu.addClass(d);f.ucs.MoreMenu.superclass._showMenu.apply(this,arguments);}},_hideMenu:function(g){f.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments);this.menu.removeClass(d);},_handleKeyup:function(g){if(27===g.keyCode||9===g.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===g.keyCode&&!this.keyedup){if(this.panel.one("a")){this._handleMenuClick(g);this.panel.one("a").focus();}this.keyedup=true;}}},_initAriaTopbar:function(){if(!this.topBar){return;}this.toolbar=f.one("#yucs-top-list");this.toolbar.set(e,"toolbar");this.toolbar.all(">li").set(e,"presentation");this.toolbar.delegate("mouseenter",function(g){g.currentTarget.removeClass("yucs-has-focus");},">li");this.fm=this.toolbar.plug(f.Plugin.NodeFocusManager,{descendants:b,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(g){return g.get(c);}},circular:true});this.panel.focusManager.get("descendants").after("keydown",function(g){if(9===g.keyCode){this.panel.focusManager.focus(0);this._hideMenu();}},this);this.toolbar.focusManager.get("descendants").after("keyup",function(g){if(9===g.keyCode){this.toolbar.focusManager.focus(0);}if(27===g.keyCode){this.menu.one("a").focus();this._hideMenu();}},this);}});},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]});(function(){ucs.YObj.use("node","ucs-simple-menu",function(b){var c=b.one("#yucs-more.yucs-more-activate"),a;if(c){a=new b.ucs.MoreMenu(c);}});})();if(window.ucs&&window.ucs.YObj){(function(a){a.YObj.add("ucs-meta",function(g){g.namespace("ucs");if(g.ucs.Meta){g.log("Y.ucs.Meta is already defined.","debug","ucs-meta");return;}var c=null,f=null,d=null,e={},b=function(h){if(g.version>="3.5.1"){return h.getData();}else{return{authstate:h.getAttribute("data-authState"),cobrand:h.getAttribute("data-cobrand"),crumb:h.getAttribute("data-crumb"),device:h.getAttribute("data-device"),firstname:h.getAttribute("data-firstname"),flight:h.getAttribute("data-flight"),forcecobrand:h.getAttribute("data-forcecobrand"),guid:h.getAttribute("data-guid"),host:h.getAttribute("data-host"),https:h.getAttribute("data-https"),languagetag:h.getAttribute("data-languagetag"),property:h.getAttribute("data-property"),protocol:h.getAttribute("data-protocol"),shortfirstname:h.getAttribute("data-shortfirstname"),shortuserid:h.getAttribute("data-shortuserid"),status:h.getAttribute("data-status"),spaceid:h.getAttribute("data-spaceid"),userid:h.getAttribute("data-userid")};}};g.ucs.Meta=function(h){c=this;c.components={meta:h};c.data=b(h);};g.ucs.Meta.prototype={authState:function(){return g.Object.getValue(c.data,"authstate");},cobrand:function(){return g.Object.getValue(c.data,"cobrand");},crumb:function(){return g.Object.getValue(c.data,"crumb");},device:function(){return g.Object.getValue(c.data,"device");},firstname:function(){return g.Object.getValue(c.data,"firstname");},flight:function(){return g.Object.getValue(c.data,"flight");},forcecobrand:function(){return g.Object.getValue(c.data,"forcecobrand");},guid:function(){return g.Object.getValue(c.data,"guid");},host:function(){return g.Object.getValue(c.data,"host");},https:function(){return g.Object.getValue(c.data,"https");},languagetag:function(){return g.Object.getValue(c.data,"languagetag");},property:function(){return g.Object.getValue(c.data,"property");},protocol:function(){return g.Object.getValue(c.data,"protocol");},shortfirstname:function(){return g.Object.getValue(c.data,"shortfirstname");},shortuserid:function(){return g.Object.getValue(c.data,"shortuserid");},status:function(){return g.Object.getValue(c.data,"status");},spaceid:function(){return g.Object.getValue(c.data,"spaceid");},userid:function(){return g.Object.getValue(c.data,"userid");},toJSON:function(){return{authState:c.authState(),cobrand:c.cobrand(),crumb:c.crumb(),device:c.device(),firstname:c.firstname(),flight:c.flight(),forcecobrand:c.forcecobrand(),guid:c.guid(),host:c.host(),https:c.https(),languagetag:c.languagetag(),property:c.property(),protocol:c.protocol(),shortfirstname:c.shortfirstname(),shortuserid:c.shortuserid(),status:c.status(),spaceid:c.spaceid(),userid:c.userid()};}};},"0.0.1",{requires:["node"]});a.YObj.use("ucs-meta",function(b){if(!b.Lang.isObject(a.Meta)||!(a.Meta instanceof b.ucs.Meta)){a.Meta=new b.ucs.Meta(b.one("#yucs-meta"));}});}(window.ucs));}YUI.add("ucs-navigation",function(a){var h="yucs",b=3,c=172800000,g=3600000,i="yucs_eyc_nav_prop",d=a.Object,e=a.Array,f=a.Lang;a.namespace("ucs");a.ucs.Navigation=function(j,k){this.navigation=j;this.eventHandlers=[];this.jsonp=k&&k.jsonp?k.jsonp:a.jsonp;this.cache=k&&k.cache?k.cache:(typeof a.CacheOffline!=="undefined"?new a.CacheOffline({expires:c}):null);this.init();};a.ucs.Navigation.prototype={init:function(){this.header=a.one("#"+h);this.property=this.header.getAttribute("data-property");this.locale=this.header.getAttribute("data-lang");this.hasFetched=false;this.fetchInProgress=false;this.numNavQueriesMade=0;try{if(this.locale.toLowerCase().indexOf("-us")===-1){this.navigation.one(".yucs-menu").addClass("yucs-nonus");}}catch(j){}this._initEventHandlers();},destroy:function(){for(var j=0;j<this.eventHandlers.length;j++){this.eventHandlers[j].detatch();}},_parseUrl:function(o,k){var m=/^(?:([^:\/?#]+):)?(?:\/\/(?:(?:(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?(?:((?:(?:[^?#\/]*\/)*)(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,l=m.exec(o),n={"source":0,"scheme":1,"user":2,"pass":3,"host":4,"port":5,"path":6,"query":7,"fragment":8},j;if(k){j=n[k.toLowerCase()];return l[j];}else{return l;}},_initEventHandlers:function(){var j=this.navigation.one("#yucs-nav_button");if(!j){return;}this.eventHandlers.push(j.on("click",this._loadNavigation,this));this.eventHandlers.push(j.on("mouseover",this._loadNavigation,this));this.eventHandlers.push(j.on("focus",this._loadNavigation,this));},_loadNavigation:function(){var k=!this.header.getAttribute("data-disableyql"),j=this.cache?this.cache.retrieve(this._getCacheKey()):null;if(this.hasFetched===false&&this._isValidCacheData(j)){this._handleNewItems(j.response);}else{if(this.hasFetched===false&&this.fetchInProgress===false&&k){this._updateFromWs();}}},_isValidCacheData:function(j){return j!==null&&typeof j==="object"&&j.response!==null&&typeof j.response==="object"&&d.keys(j.response).length>0&&!document.location.search.match("ucs.invalidnavcache=1");},_getCacheKey:function(){return i+"_"+this.locale;},_updateFromWs:function(){var j='select * from ucs.navigation where property="'+this.property+'" and lang="'+this.locale+'"',n=a.QueryString.stringify({q:j,format:"json"}),m="https:"===document.location.protocol?"https://":"http://",l=m+"ucs.query.yahoo.com/v1/public/yql?"+n;a.log("nav: fetching navigation from "+l);this.fetchInProgress=true;this.numNavQueriesMade++;try{this.jsonp.call(this,l,{on:{success:this._handleResponse,error:this._handleFailure,failure:this._handleFailure,timeout:this._handleFailure},context:this,timeout:2000});}catch(k){this._handleFailure(k);}},_handleResponse:function(k){var j;if(k&&k.query&&k.query.results===null&&k.query.count===0){this._handleEmptyResponse();}else{if(!k||!k.query||!k.query.results||!k.query.results.result||!k.query.results.result.eyc){this._handleFailure(k);}else{j=this._normalizeYqlResponse(k.query.results.result.eyc);if(!j||d.keys(j).length===0){this._handleEmptyResponse();}else{this._handleNewItems(j);this._cache(j);}}}},_handleNewItems:function(j){this._updateNavItems(j);this.hasFetched=true;this._finishedLoading();},_cache:function(k,j){if(this.cache&&k&&d.keys(k).length>0){if(typeof j==="number"&&j>0){this.cache.set("expires",j);}this.cache.add(this._getCacheKey(),k);}},_normalizeYqlResponse:function(l){var k={},j=this;if(l&&l.PropertyName){l=[l];}e.each(l,function(m){var n=m&&m.PropertyName?m.PropertyName.toLowerCase():null;if(n&&n!==j.property){k[n]=j._createItem(m.DisplayName,m.URL);}});return k;},_createItem:function(k,j){return{name:k,url:j};},_updateNavItems:function(o){var n={"news":"yucs-site_news","finance":"yucs-site_finance","sports":"yucs-site_sports","my":"yucs-site_my","omg":"yucs-site_omg","shine":"yucs-site_shine","frontpage":"yucs-site_home"},k=d.keys(n),m,l,j,p;if(!o){return;}for(m=0;m<k.length;m++){l=k[m];j=o[l];p=n[l];this._updateNavItem(j,"."+p);}},_updateNavItem:function(m,l){var k=this.navigation.one(l),n=k&&k.one("a"),j,o;if(!m&&k){a.log("nav: removing "+l+" from navigation");k.remove();}else{if(m&&n){o=m.url;if(this._parseUrl(m.url,"path")===""){o+="/";}j=n.getAttribute("href").match(/_ylt=[^&;\/]+/gi);if(j){o+=";"+j;}n.setAttribute("href",o);n.set("text",m.name);}else{a.log("nav: could not find node for "+l+" in navigation");}}},_handleFailure:function(k){var j=true;this._handleEmptyResponse(j);if(this.numNavQueriesMade<b){this.hasFetched=false;}},_handleEmptyResponse:function(j){var m,n,l,k;a.log("nav: empty or bad data returned from eyc.");n=this.navigation.one(".yucs-site_home");l=n&&n.one("a").get("text")||"";l=f.trim(l)||"Yahoo!";k="http://www.yahoo.com/";m={"frontpage":this._createItem(l,k)};this._handleNewItems(m);if(!j){this._cache(m,g);}this._finishedLoading();},_finishedLoading:function(){var l=this.navigation.one("#yucs-prop_nav"),j=l.one("> div.yui3-menu-content"),k;this.fetchInProgress=false;j.removeClass("yucs-yql_loading");k=j.get("offsetHeight")+10;l.setStyles({"height":k,"width":"auto"});}};},"1.0",{requires:["node","event","event-custom","querystring-stringify","gallery-jsonp","cache"]});(function(){ucs.YObj.use("node","ucs-navigation",function(c){var a=c.one("#yucs-nav"),b;if(a){b=new c.ucs.Navigation(a);}});}());if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}YUI.add("ucs-search",function(d){var p={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "};if(!ucs.Search){var h="value",m="click",u="suggest",c="touchstart",t="submit",s="innerHTML",a="tabindex",f="target",o=20,b=10,e=parseInt(d.one("#yucs").getStyle("paddingLeft"),b),j="yucs-qry",n="yucs-content-qry",v="#yucs-satray",i=d.one("#yucs-debug"),r="#yucs-btn-delete",q="https://s.yimg.com/kx/yucs/uh3/search/js/553/mini-assist-min.js",l="https://s.yimg.com/kx/yucs/uh3/search/js/442/tray-align-plugin-min.js",g="https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",k="https://s.yimg.com/kx/yucs/uh3/search/css/434/assist-min.css";ucs.Search=function(w){if(typeof w.getDOMNode==="function"){this.form=(w.getDOMNode().nodeName.toLowerCase()==="form")?w:w.one("form");}else{this.form=w.one("form");}this.searchWrapper=d.one("#yucs-search");this.searchFormClass=d.one(".yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.yucs=d.one("#yucs");this.loadedAssist=false;this.property=d.one("#yucs").getData("property");this.cleanBtn=d.one(r);this.languagetag=d.one("#yucs").getAttribute("data-lang");this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){var C=this.property;var A=navigator.userAgent.toLowerCase();if(d.one(".enable_form_focus")&&C!=="mail"){if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}else{document.getElementById("mnp-search_box").focus();}}}else{if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}}}this.searchWrapper.removeClass("yucs-search-activate");this._setTabIndex();this.is2Button=(this.buttons.size()===2);if(this.searchFormClass.getAttribute("data-webaction")){this.form.one("input").setAttribute("name","p");this.searchFormClass.setAttribute("action",this.searchFormClass.getAttribute("data-webaction"));d.one("#yucs-sprop_button").setAttribute("data-vsearch",d.one("#mnp-search_box").getAttribute("data-yltvsearch"));}if(this._hasPlaceholderSupport()&&!d.UA.ie){var z=document.getElementById("mnp-search_box");z.removeAttribute("data-sh");}if((C==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()&&!this.loadedAssist){this.loadedAssist=true;this._initAssist();}if((d.one("#yucs")&&d.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=d.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();var y=this.input.getAttribute("data-resize");if(!y||y==="enable"){this._initSizeControl();}this._initEventListeners();this.form.removeClass("yucs-activate");var x=document.URL,B=/[?&]p=([^&]+)/i,w=B.exec(x);if(w==null&&C==="help"){B=/[?&]question_box=([^&]+)/i;w=B.exec(x);}if(w!=null&&(C==="answers"||C==="help"||C==="shopping")){d.one(".yucs-search-input").setAttribute("value",decodeURIComponent(w[1].replace(/\+/g," ")));}if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}if(d.one("#search_hot_keyword_block")&&C!=="mail"){this._initHotKeyword();}else{if(d.one("#search_hot_keyword_block")&&C!=="mail"){d.one("#advanced-search").set("offsetWidth",d.one(".yucs-search-input").get("offsetWidth"));}}},html:function(w){return(w+"").replace(/[&<>"'\/`]/g,this._htmlReplacer);},_htmlReplacer:function(w){return p[w];},_initSizeControl:function(){this.oldYucsWidth=this.yucs.get("region").width;this.isRTL=/ar|he/gi.test(d.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftWrapper=d.one(".yucs-fl-left");this.rightWrapper=d.one(".yucs-fl-right");this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),b);this.IEOffset=0;if(d.UA.ie>0&&d.UA.ie<=7){this._calcIEOffset();}this._resizeSearchContainer(this.oldYucsWidth);d.on("windowresize",d.bind(this._handleWindowResize,this));},_hasPlaceholderSupport:function(){var w=document.createElement("input");return("placeholder" in w);},_initEventListeners:function(){var w=this.form.on(t,this._handleSubmit,this);this.input.on("keydown",this._handleInputKeypress,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);this.input.on("click",this._handleInputClick,this);if(this.stype){this._initSearchTypeMenu();}if(this.property==="mail"||this.is2Button){if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}if(d.UA.ie){w.detach();this.webSearchBtn.on(m,this._handleWebSearchClick,this);this.form.on(t,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});d.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);d.Global.on("ucs:mailSearch",this._trackMailSearch,this);d.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}if(this.cleanBtn){this.cleanBtn.on("click",this._resetSearchInput,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");
this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(C){var y=this.stype.one(".yucs-active"),x=this.stype.one(".yucs-inactive"),A,w,z,B;C.preventDefault();if(parseFloat(YUI.version,10)>3.1){x.toggleView();}else{if(x.getStyle("display")=="none"){x.setStyle("display","block");}else{x.setStyle("display","none");}}if(C.target.hasClass("yucs-active")||C.target.hasClass("yucs-inactive")){z=y.getData("yucs-stype");B=C.target.getData("yucs-stype");if(z!=B){A=y.get("text");w=C.target.get("text");y.set("text",w);y.setData("yucs-stype",B);x.set("text",A);x.setData("yucs-stype",z);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(w){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(w){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var w=d.all(".yucs-fl-left > div"),y=e,z,x;w.each(function(A){if(A.get("id")!=="yucs-search"){y+=A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}else{y+=parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}});return y;},_calcIEOffset:function(){var x=d.all(".yucs-search-buttons").pop(),w=x.intersect(this.searchWrapper);if(d.one("body").getAttribute("dir")==="rtl"){this.IEOffset=w.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),b)-w.right;}this.defaultWidth+=this.IEOffset;},_handleWindowResize:function(){var w=this.yucs.get("region").width;if(w!==this.oldYucsWidth){this._resizeSearchContainer(w);this.oldYucsWidth=w;}},_setInputWidth:function(){var w=d.one(".yucs-form-input"),x=parseInt(this.input.getStyle("paddingLeft"))+parseInt(this.input.getStyle("paddingRight"))+parseInt(this.input.getStyle("borderLeftWidth"))+parseInt(this.input.getStyle("borderRightWidth"));this.input.setStyle("width",(w.get("region").width-x)+"px");},_resizeSearchContainer:function(z){var y=this.searchWrapper.get("region").width,x=this.rightWrapper.get("region").width+e,w=z-(this.leftWrapperWidth+x+o)+this.IEOffset;if(w>this.defaultWidth){if(y===this.defaultWidth){return;}else{w=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",w+"px");if(this.IEOffset>0&&this.isRTL){d.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var w=this.input.get(h);w=d.Lang.trim(w);return w;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(w){if(w.keyCode==13){}if(this._inputIsEmpty()){this._resetSearchInput();this._setCaretStart();}if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()){this._setTabIndex();}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}this._showCleanBtn();},_handleInputClick:function(){if(this._inputIsDefaultTerm()){this._resetSearchInput();this._setCaretStart();}},_setCaretStart:function(){var y;if((y=window.document.selection)){if(y.type!="Control"){var w=this.input.get("value").length,x=y.createRange();x.move("character",-w);x.select();}}},_setTabIndex:function(){var w=(d.UA.ie>0&&d.UA.ie<=7);this.buttons.each(function(x){var y=x.getAttribute(a);if((w&&y===0)||(w&&y===65535)||(y&&!(w&&y===32768))){x.setAttribute(a,0);}else{x.setAttribute(a,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(f,"searchWin");}else{this.form.setAttribute(f,this.linkTarget);}},_initAssist:function(){var w=this.input.getAttribute("data-satype");switch(w){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(w){var x={searchbox:w,clid:"uh-yui3",align:true,shim:1,nresults:w.getAttribute("data-maxresults")||10};x.node=v;if(w.getAttribute("data-pubid")){x.pubid=w.getAttribute("data-pubid");}if(w.getAttribute("data-gosurl")){x.url=w.getAttribute("data-gosurl");}if(d.one("#yucs-sfilter")&&d.one("#yucsHead").hasClass("ua-ie")){x.tray={plugin:{align:"#yucs-input_wrap"}};}return x;},_initMiniAssist:function(y){var w=this,x={miniassist:{fullpath:q,requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:k,type:"css"},"tray-align-plugin":{fullpath:l,requires:["miniassist"]},"tray-shim-plugin":{fullpath:g,requires:["miniassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move","escape",function(A){if(ucs.YObj.config.fetchCSS===false){A.Get.css(k);}var G=new A.Node(y),E=w._buildAssistConfig(G);w.sa=new A.Search.MiniAssist(E);w.sa.assist._checkValue();w.sa.gossip.set("scrollSize",13);w.sa.gossip.set("linkStem",A.one(v).getAttribute("data-vsearch"));if(A.one("#search_hot_keyword_block")){var J="",F="",z=A.one("#yucs").getData("property"),B=A.one("#yucs").getAttribute("data-lang");if("sports"==z&&B=="zh-hant-tw"){J="tw.sports.yahoo.com";}else{if("ivy"==z&&B=="zh-hant-tw"){F="hq";}else{if("omg"==z&&B=="zh-hant-hk"){J="hk.ent.yahoo.com";}else{if("finance"==z&&B=="zh-hant-hk"){J="hk.finance.yahoo.com";}else{if("lifestyles"==z&&B=="zh-hant-hk"){J="hk.lifestyle.yahoo.com";}}}}}if(J!=""){w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr"),"vs":J});}else{if(F!=""){w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr"),"ilk":F});}else{w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr")});}}}else{w.sa.gossip.set("linkParams",{fr:A.one(v).getAttribute("data-vfr")});}w.sa.gossip.set("uhbParams",{uhb:A.one(v).getAttribute("data-vfr")});if(!w.is2Button){w.sa.gossip.set("hideEmptyTray",false);w.sa.gossip.set("linkParams",{});}if(w.property==="finance"&&w.languagetag!=="zh-hant-hk"){var I=A.one(E.node),C=I.getAttribute("data-vstext"),D=I.getAttribute("data-vert_fin_search"),H=A.one(v).getAttribute("data-searchNews");
w.sa.assist.on(u,function(L){if(L.query){var K=A.one("#"+n),M=w.sa.buildSearchUrl(G,L.query,D,{fr:H});if(w.property==="finance"){M=M.replace("?s=","?p=");}if(!K){if(document.getElementById("hspart")){M+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){M+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){M+="&type="+document.getElementById("yucs-hstype").value;}K=A.Node.create("<ul id='"+n+"'><li><a id='searchVertical' href='"+M+"'>"+C+"<q>"+A.Escape.html(L.query)+"</q></a></li></ul>");A.one(".sa-panel").append(K);}else{K.one("li").setContent("<a  id='searchVertical' href='"+M+"' text='"+L.query+"'>"+C+" <q>"+A.Escape.html(L.query)+"</q></a>");}}});}A.one(".yucs-search").on("submit",function(L){if(A.one("#"+j+" a.sa-active")){var K=A.one("#"+j+" a.sa-active").getAttribute("href");L.preventDefault();if(w.linkTarget==="_blank"||w.form.hasClass("yucs-search-fh")){window.open(K,"searchWin");}else{window.location.href=K;}}});});},_initRichAssist:function(y){var w=this,x={richassist:{fullpath:"https://s.yimg.com/lq/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(B){var z=new B.Node(y),A=w._buildAssistConfig(z);w.sa=new B.Search.RichAssist(A);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(w){w.preventDefault();this._toggleSearch();},_toggleSearch:function(){var w=this,x=function(y){w._handleBodyClick(y);};d.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(d.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){d.log("using touchstart in mobile browser","info","search");document.body.addEventListener(c,x,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(c,x,false);}}};}else{this.bodyClick=d.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=d.on("scroll",function(y){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(y){var x=y&&y.target||null,w;if(!x){return;}w=typeof x.ancestor==="function"?x:d.one(x);if(w&&!w.ancestor("#yucs")){this._toggleSearch();}},_handleWebSearchClick:function(w){this.isWebSearch=true;},_handleSubmit:function(x){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(x&&x.target){this.isWebSearch=d.one(x.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(f)!=="searchWin"){x.preventDefault();}var w=d.Node.create("<img />");w.once("load",this._handleImageLoad,this);w.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(d.bind(this._handleImageLoad,this),2000);w.set("src","https://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(w){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(f)!=="searchWin"){this.form.submit();}},_handleInputKeypress:function(w){if((w.keyCode===46||w.keyCode===8)&&this._inputIsDefaultTerm()){w.preventDefault();return;}else{if(w.keyCode!==9&&w.keyCode!==13){if(this._inputIsDefaultTerm()){this._setInputBlank();this.input.removeClass("yucs-search-hint-color");}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}}}},_handleInputBlur:function(w){if(this._inputIsEmpty()){this._resetSearchInput();}},_handleVertSearch:function(z){d.log("handleVertSearch");if(this.isWebSearch||d.one("#"+j+" a.sa-active")){this.isWebSearch=false;return;}z.preventDefault();if(this._inputIsEmpty()){return;}var y=z.target.getAttribute("data-vsearch"),w="1button",B,D=this.property,A=this.languagetag;if(this.is2Button){w="2button";}if(!y){y=this.vertSearchBtn.getAttribute("data-vsearch");}if(y&&D!=="mail"){B=y.split("?");if(B.length==1){B="";}else{y=B[0];B=B[1];}if(D==="finance"&&A!="zh-hant-hk"){y+="?uhb="+z.target.getAttribute("data-vfr")+"&fr="+d.one(v).getAttribute("data-searchNews")+"&type="+w+"&s="+encodeURIComponent(this.input.get(h));if(d.one("#searchAll")&&d.one("#searchAll").hasClass("sa-active")){y=d.one("#searchAll").getAttribute("href");}if(d.one("#searchVertical")&&d.one("#searchVertical").hasClass("sa-active")){y=d.one("#searchVertical").getAttribute("href");}}else{if(D==="groups"){y+="?query="+encodeURIComponent(this.input.get(h));}else{if(D==="help"){this.helpForm=d.one("#landingSearch");if(!this.helpForm){this.helpForm=d.one("#question_form");}var x=this;if(this.helpForm){this.vsu="";var C=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(E){x.vsu+=E.getAttribute("name")+"="+E.getAttribute("value")+"&";},x);y=this.helpForm.getAttribute("action");y+="?"+this.vsu+C+"="+encodeURIComponent(this.input.get(h));if(C!="question_box"){y+="&p="+encodeURIComponent(this.input.get(h));}}else{y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&query="+encodeURIComponent(this.input.get(h));}}else{if(A=="zh-hant-tw"&&(D=="omg"||D=="news"||D=="ivy")){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";if(D=="ivy"){y+="&ilk=hq";}}else{if(D=="sports"&&A=="zh-hant-tw"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8&vs=tw.sports.yahoo.com";}else{if(D=="omg"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.ent.yahoo.com&ei=UTF-8";
}else{if(D=="finance"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.finance.yahoo.com&ei=UTF-8";}else{if(D=="news"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";}else{if(D=="lifestyles"&&A=="zh-hant-hk"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.lifestyle.yahoo.com&ei=UTF-8";}else{if(D=="money"&&A=="zh-hant-tw"){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h))+"&vs=tw.money.yahoo.com&ei=UTF-8";}else{if(z.target.getAttribute("data-vfr")){y+="?fr="+z.target.getAttribute("data-vfr")+"&type="+w+"&p="+encodeURIComponent(this.input.get(h));}else{y+="?type="+w+"&p="+encodeURIComponent(this.input.get(h));}}}}}}}}}}}if(B){y+="&"+B;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(y,"searchWin");}else{if(window!=window.top){window.top.location.href=y;}else{window.location.href=y;}}}else{this._fireVertSearchEvent(z);}},_fireVertSearchEvent:function(x){var w=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":w});},_handleWebSearchEvent:function(w){if(w.query){this.input.set("value",w.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){if(this.searchHint){this.input.addClass("yucs-search-hint-color");}this._hideCleanBtn();this.input.set(h,this.searchHint);},_setSearchInput:function(w){this.input.set(h,w);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(s);},_initHotKeyword:function(){var x=this.yucs.getAttribute("data-lang").split("-").pop(),y=d.one("#search_hot_keyword_block");var z={"title":"熱門 : ","count":8,"max_charaters":30,"data":"","url":"http://global.tts.search.yahoo.com/pulse.php","fr":this.vertSearchBtn.getAttribute("data-vfr"),"format":"json","intl":x,"type":"metro","src":"metro","order":"rank","retry":1,"project_id":0,"tracking_id":0,"host":"a.analytics.yahoo.com","colo":"","fr_code":"","spaceid":y.getData("spaceid"),"bucketid":y.getData("bucketid")};if("zh-hant-tw"==this.languagetag&&("news"==this.property||"omg"==this.property||"sports"==this.property||"ivy"==this.property||"mail"==this.property||"money"==this.property)){z.project_id=1167069579;z.tracking_id=10001167069579;z.host="y3.analytics.yahoo.com";z.colo="VSCALE4";if(z.fr=="tw_uh3_news_vert_1"){z.fr_code="tw_uh3_news_tts_1";}else{if(z.fr=="tw_uh3_news_vert_2"){z.fr_code="tw_uh3_news_tts_2";}else{if(z.fr=="tw_uh3_omg_vert_1"){z.fr_code="tw_uh3_omg_tts_1";}else{if(z.fr=="tw_uh3_sports_vert_1"){z.fr_code="tw_uh3_sports_tts_1";}else{if(z.fr=="tw_uh3_screen_vert_1"){z.fr_code="tw_uh3_screen_tts_1";}else{if(z.fr=="tw_uh3_mail_vert_1"){z.fr_code="tw_uh3_mail_tts_1";}else{if(z.fr=="uh3_money_vert"){z.url="https://tw.search.yahoo.com/tts";z.type="webttstw";z.fr_code="uh3_money_tts";}}}}}}}if("omg"==this.property||"ivy"==this.property){z.type="uh3omg";}}else{if("zh-hant-hk"==this.languagetag&&("omg"==this.property||"lifestyles"==this.property||"finance"==this.property||"news"==this.property||"mail"==this.property)){z.project_id=21324579;z.tracking_id=100021324579;z.host="y3.analytics.yahoo.com";z.colo="ONO";if(z.fr=="hkomg"){z.fr_code="hk_uh3_ent_tts_1";}else{if(z.fr=="hk_uh3_news_vert_1"){z.fr_code="hk_uh3_news_tts_1";}else{if(z.fr=="hk_uh3_finance_vert_1"){z.fr_code="hk_uh3_finance_tts_1";}else{if(z.fr=="hk_uh3_lifestyle_vert_1"){z.fr_code="hk_uh3_lifestyle_tts_1";}else{if(z.fr=="hk_uh3_mail_vert_1"){z.fr_code="hk_uh3_mail_tts_1";}}}}}if("news"==this.property||"finance"==this.property||"mail"==this.property){z.type="shine";}else{if("omg"==this.property||"lifestyles"==this.property){z.type="entertainment";}}}}var w=z.url+"?fr="+z.fr_code+"&format="+z.format+"&count="+z.count+"&intl="+z.intl+"&type="+z.type+"&src="+z.src+"&order="+z.order+"&jsonp_cb=YAHOO.util.UHScriptNodeDataSource.callbacks";this._getHotKeyword(w,z);},_getHotKeyword:function(x,w){d.Get.script(x,function(){onSuccess:YAHOO.util.UHScriptNodeDataSource.callbacks;});YAHOO.util.UHScriptNodeDataSource.callbacks=function(z){if(z!=undefined&&z[0]!=undefined){var E=0,C=1;var y='<marquee scrollamount="2" scrolldelay="120" direction="up" height="18" behavior="slide" loop="1">'+'<ul id="search_hot_keyword_items" class="search_hot_keywork_items">'+'<li id="search_hot_keyword_title">'+w.title+"</li>";for(var G in z){if(undefined!=z[G].display_term){E+=z[G].display_term.length;if(E>w.max_charaters){break;}if(G<w.count){y+='<li class="search_hot_keyword_item">';if(d.UA.ie&&d.UA.ie<9){y+='<a href="'+z[G].link+'" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'">';}else{y+='<a href="#" onClick="setTimeout(function(){window.location.href=\''+z[G].link+'\';}, 2000)" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'" class="rapidnofollow">';}y+=z[G].display_term;y+="</a></li>";C++;}}}y+="</ul></marquee>";this.hotKeywordBlock=d.one("#search_hot_keyword_block");this.hotKeywordBlock.set("innerHTML",y);var I={ultkey1:"search hot keyword",A_pn:"search hot keyword pn",tim:"red"};var F={project_id:w.tracking_id,host:w.host,cf:{22:w.fr_code}};var D={compr_type:"deflate",debug:false,tracked_mods:{"search_hot_keyword_items":"search_hot_keyword_items"},keys:I,spaceid:w.spaceid,ywa:F,nofollow_class:["rapidnofollow","search_hot_keyword_items"]};if(typeof(YAHOO.i13n)=="undefined"){YAHOO.i13n={};}if(typeof(YAHOO.i13n.Rapid)=="undefined"){var A="https://s.yimg.com/ss/rapid-3.12.1.js",H="https://s.yimg.com/ss/rapidworker-1.1.js";d.Get.js([A,H],function(K){if(K){console.log("get rapid js error");}else{var J=new YAHOO.i13n.Rapid(D);}});}else{var B=new YAHOO.i13n.Rapid(D);
}}};},_hideCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","none");}},_showCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","inline-block");}},_setVertSearchBtnContent:function(w){this.vertSearchBtn.set(s,(w["text"])?w["text"]:w);},_setVertSearchBtnPathName:function(w){this.vertSearchBtn.setAttribute("data-vsearch",w);},_trackMailSearch:function(){d.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){d.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){d.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:window.ucs._sendBeacon};d.augment(ucs.Search,d.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});ucs.YObj.use("node","ucs-search",function(b){var a=b.all("#yucs-search.yucs-search-activate");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface.setVertSearchBtnPathName=function(g){ucs.UhSearchInterface._setVertSearchBtnPathName(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-profile-menu",function(d){var e="ucs:profileMenuShow",b="ucs:menuNavShow",a=d.Lang.trimRight,c;d.namespace("ucs.ProfileMenu");d.ucs.ProfileMenu=function(f){this.profile=f;this.name=this.profile.one(".yuhead-name");this.greeting=this.profile.one(".yuhead-name-greeting")||"";this.optimizedNameCache={};this.menuId=this.profile.getAttribute("id");this.init();};d.ucs.ProfileMenu.prototype={init:function(){this.publishEvents();this.initEventHandlers();this.optimizeNameLength();},optimizeNameLength:function(){var g=9,h="65px",f=this.name?this.name.get("text").length:0,i=this.greeting?this.greeting.get("text").length:0;if(this.name&&d.one(".ua-ie6, .ua-ie5")&&(f>g)){this.name.setStyle("width",h);this.name.get("parentNode").setStyle("width",h);}},publishEvents:function(){d.augment(d.ucs.ProfileMenu,d.EventTarget,null,null,{});this.publish(e,{broadcast:2,emitFacade:true});},initEventHandlers:function(){var f=this;d.Global.on(b,this.handleMenuNavShow,this);},handleMenuNavShow:function(f){if(f&&f.menuid===this.menuId){if(d.UA.ie===8){this.profile.one("#yucs-profile-cont").setStyle("maxHeight","100%");}this.fire(e);}}};},"1.0",{requires:["node","event","event-custom","event-resize"]});(function(){ucs.YObj.use("ucs-profile-menu",function(c){var b=c.one("#yucs-profile"),a;if(b){a=new c.ucs.ProfileMenu(b);}});}());YUI.add("ucs-usermenu",function(c){c.namespace("ucs.UserMenu");var n="ucs:userMenuShow",k="ucs:userMenuItemClick",s="yucs-hide",h="yui3-menu-hidden";var m='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",r='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",l='<span class="yucs-separator" role="presentation"></span>',g="click",p="a",i="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif";c.ucs.UserMenu=function(t){t.removeClass("yucs-um-activate");this.menuContainer=t.ancestor("div");this.previewPanel=c.one("#yucs-profile_inner");this.PANEL_OFFSET=30;this.PANEL_OFFSET_Y=3;this.headerNode=c.one("#yucs");this.profileNode=this.headerNode.one(".yucs-profile");c.ucs.UserMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-profile_inner",openDelay:0}]);this._initCustomEvents();};c.extend(c.ucs.UserMenu,c.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(n,{broadcast:2,emitFacade:true});this.publish(k,{broadcast:2,emitFacade:true});c.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{"location":"bottom","menuType":"minty-um-item"});this.menu.delegate(g,this._handleMenuItemClick,"li.minty-um-item a",this);},_showMenu:function(t){c.ucs.UserMenu.superclass._showMenu.apply(this,arguments);this.fire(n);this._setPosition();},_showMenuItems:function(){this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.separator").setStyle("display","block");},_setPosition:function(){this.avatarIcon=this.profileNode.one(".yucs-avatar");var x=this.previewPanel.one(".yucs-dock"),v=x&&x.get("offsetWidth"),w,t=this.headerNode.get("offsetHeight"),A=Math.round(this.avatarIcon.getX()),u=this.headerNode.get("offsetWidth"),z=this.previewPanel.get("offsetWidth"),y=this.headerNode.one(".yucs-mail_link");if(this.rtl){this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET));}else{if(!y&&(A+z>u)){this.previewPanel.setX(Math.round(this.headerNode.getX()+u-z-20));}else{this.previewPanel.setX(A);}}if(c.one("#search_hot_keyword_block")){this.panel.setY((this.headerNode.getY()+t)-this.PANEL_OFFSET_Y-30);}else{if(t>0){this.panel.setY((this.headerNode.getY()+t)-this.PANEL_OFFSET_Y);}else{this.panel.setY(this.avatarIcon.getY()+this.avatarIcon.get("offsetHeight")+3);}}if(x){w=(this.avatarIcon.get("offsetWidth")/2)-(v/2);x.setX(this.avatarIcon.getX()+w);}},_handleKeyup:function(t){if(27===t.keyCode||9===t.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===t.keyCode&&!this.keyedup){if(this.panel.one("a")){this._showMenu(t);this.panel.one("a").focus();}this.keyedup=true;}}},_handleUserMenuItems:function(y,x){c.log("user menu items received");var u="bottom",w="minty-user-item";if(!y.menuGroups||!y.menuGroups.length){return;}if(x&&x.location){u=x.location;}if(x&&x.menuType){w=x.menuType;}var v=y.menuGroups,t=this.menu.one(j);if(y.reset&&t){t.all("."+w).each(function(z){z.remove(true);});}if(v.length>0){this._addMenuGroups(v,u,false,w);}},_handleMenuItemClick:function(y){c.log("user menu item click");var x,v,t,u;x=y.target;x=x.ancestor("a",true);v=x.getAttribute("data-mad");t=x.getAttribute("data-customevt");u=x.ancestor("li").hasClass("disabled");if(u){y.halt();return;}if(t){y.preventDefault();}if(!u){var w={actionData:v};this.fire(k,w);}},_addMenuGroups:function(w,C,A,B){var y=this.menu.one(j),u,t="";u=(y.get("children")._nodes.length)?true:false;for(var v=0,x=w.length;v<x;v++){var z=w[v].length;if(C==="bottom"){w[v][0].separatorTop=true;}else{if(v<(x-1)||u){w[v][z-1].separatorBottom=true;}}t+=this._addMenuGroup(w[v],A,B);}if(C==="bottom"){y.append(t);}else{y.prepend(t);}if(t!=""){y.setStyle("width",(y.get("offsetWidth")+10)+"px");}},_addMenuGroup:function(u,x,w){var y="";for(var v=0,t=u.length;v<t;v++){if(u[v].actionData==="themes"){continue;}if(x){u[v].isDebugItem=true;u[v].menuClass=w+" debug-item";}else{u[v].isDebugItem=false;u[v].menuClass=w+" minty-item";}y+=this._addMenuItem(u[v],w);}return y;},_addMenuItem:function(v,u){var t="";if(v.isActive){v.checkedAria='aria-checked="true"';}else{v.checkedAria="";}if(v.isDisabled){v.disabledAria='aria-disabled="true"';}else{v.disabledAria="";}if(v.actionData&&v.actionData.match(/^om:/)){return t;}switch(v.actionType){case"link":t=c.substitute(m,v,this._processTemplateValue);break;case"customEvent":t=c.substitute(r,v,this._processTemplateValue);break;default:break;}if(t){if(v.isDebugItem){t=t.replace(/separator/,"separator debug-item "+u);}else{t=t.replace(/separator/,"separator minty-item "+u);}}return t;},_processTemplateValue:function(u,v,w){c.log("key = "+u+" value = "+v+" meta_data = "+w);var x="";var t=(document.location.protocol==="https:")?e:q;switch(u){case"icon":if(v!==undefined){if(v==="available"){x='<img src="'+t+'" class="yucs-opi available"/>';}else{if(v==="offline"){x='<img src="'+t+'" class="yucs-opi offline"/>';}else{if(v==="invisible"){x='<img src="'+t+'" class="yucs-opi invisible"/>';}else{if(v==="busy"){x='<img src="'+t+'" class="yucs-opi busy"/>';}else{if(v==="idle"){x='<img src="'+t+'" class="yucs-opi idle"/>';}else{x='<img src="'+v+'" />';}}}}}}break;case"separatorTop":if(v){x=l;}break;case"separatorBottom":if(v){x=l;}break;case"actionData":if(v){x='data-mad="'+v+'"';}break;case"isDisabled":if(v){x="disabled";}break;case"isActive":if(v){x="sp active";}break;case"checkedAria":x=v;break;default:x=v;break;}return x;}});c.augment(c.ucs.UserMenu,c.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]});(function(){ucs.YObj.use("node","ucs-usermenu",function(c){var a=c.one("#yucs-menu_link_profile.yucs-um-activate"),b;if(a){b=new c.ucs.UserMenu(a);}});})();YUI.add("jsonp-super-cached",function(b){b.namespace("jsonpsupercached");if(!YUI.Env.JsonpSuperCached){YUI.Env.JsonpSuperCached={};}if(!YUI.Env.JsonpSuperCached.services){YUI.Env.JsonpSuperCached.services={};}var a=YUI.Env.JsonpSuperCached.services;b.jsonpsupercached.getData=function(f){var c={};var d=f.url||"";var j=f.serviceName||"service";var m=f.callbackName||"callback";var i=f.broadcast||false;var j="_"+j+"_"+m;var g=f.onSuccess||function(){};c.timeout=f.timeout;c.onTimeout=f.onTimeout||null;c.onFailure=f.onFailure||null;var l=(d.indexOf("?")===-1)?"?":"&";var h=d+l+m+"=YUI.Env.JsonpSuperCached."+j;var k=f.args||[];var e=f.context||null;b.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||b.Get;if(!a[h]){a[h]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var n=a[h];if(n.dataAvailable){g(n.data);}else{n.callbacksQueue.push(g);if(!n.requestInProgress){YUI.Env.JsonpSuperCached[j]=function(r){n.data=r;n.dataAvailable=true;var s=n.callbacksQueue;for(var q=0,o=s.length;q<o;q++){var p=s.pop();p.apply(e,[r].concat(k));}};n.requestInProgress=true;b.jsonpsupercached.get.script(h,c);}}};},"0.0.1");YUI.add("ucs-avatar",function(b){var a="https://s.yimg.com/dh/ap/social/profile/profile_b32.png";b.namespace("ucs");b.ucs.Avatar=function(c){this.container=c;this.crumb=this.container.getAttribute("data-crumb");this.guid=this.container.getAttribute("data-guid");this.profile=this.container.getAttribute("data-prof");this.username=this.container.getAttribute("data-user");this.init();};b.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate");this.img=b.Node.create('<img width="28" height="28" alt="'+this.username+" "+this.profile+'">');this._fetchData();},_fetchData:function(){var c='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="32x32" and imgssl=1;',d="https://ucs.query.yahoo.com/v1/console/yql?"+b.QueryString.stringify({q:c,format:"json",crumb:this.crumb,_maxage:900});b.jsonpsupercached.getData({url:d,serviceName:"avatar",onSuccess:b.bind(this._buildMarkup,this)});},_buildMarkup:function(d){var c;if(!d.query||!d.query.results||d.query.results==="0"||!d.query.results.image||d.query.results.image.imageUrl.match(/profile_/)){c=a;}else{c=d.query.results.image.imageUrl;if(window.location.protocol=="https:"){c=c.replace(/^http:\/\/l\.yimg/,"https://s.yimg");c=c.replace(/^http:\/\/socialprofiles\.zenfs/,"https://socialprofiles.zenfs");}}this.img.on("load",function(f){this.img.addClass("yucs-avatar");this.container.setContent(this.img);},this);this.img.setAttribute("src",c);}};},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]});(function(){ucs.YObj.use("node","ucs-avatar",function(c){var b=c.one("#yucs").one("span.yucs-avatar.yucs-av-activate"),a;if(b){a=new c.ucs.Avatar(b);}});})();YUI.add("ucs-helpmenu",function(d){d.namespace("ucs.HelpMenu");var v="ucs:helpMenuShow",g="ucs:helpDebugMenuShow",n="ucs:helpMenuItemClick",m="ucs:helpDebugMenuItemClick",t="yucs-help_button",a="ucs:utilityMenuShow",r="ucs:utilityMenuItemClick",z="yucs-hide",j="yui3-menu-hidden";var q='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",y='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",p='<span class="yucs-separator" role="presentation"></span>',i="click",l="mouseover",w="focus",u="a",k="role",c="tabIndex",h="yucs-hide",b="iframe",o="ul",e="li",s="parentNode",x="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.HelpMenu=function(A){this.menu=A;this.shown=false;this.helpLink=d.one("#yucs-help_button");this.helpLink.setAttribute("data-mad","true");this._initCustomEvents();this.helpLink.on("keyup",this._handleKeyup,this);this.helpLink.on("keydown",this._handleKeydown,this);this._initAria();A.removeClass("yucs-hm-activate");};d.ucs.HelpMenu.prototype={_initCustomEvents:function(){this.publish(v,{broadcast:2,emitFacade:true});this.publish(g,{broadcast:2,emitFacade:true});this.publish(n,{broadcast:2,emitFacade:true});this.publish(m,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(r,{broadcast:2,emitFacade:true});d.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{"location":"top","menuType":"minty-utility-item"});d.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{"location":"bottom","menuType":"minty-help-item"});d.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{"location":"bottom","menuType":"minty-debug-item"});this.helpLink.on([i,l,w],this._toggleHelpMenu,this);this.menu.delegate(i,this._handleMenuItemClick,"li a",this);d.Global.on("ucs:mailPreviewShown",function(){this.keyedup=false;},this);if(d.one("#yucs-help_button").hasClass("yui3-menu-label-active")){this._showMenu();}},_toggleHelpMenu:function(A){this._showMenu(A);},_showMenu:function(A){if(d.one("#yucs").getAttribute("data-property")==="mail"){this.menu.all("li").addClass("yucs-hide");}if(A&&(A.ctrlKey||A.metaKey)&&A.shiftKey){this.fire(g);if(this.shown===false){d.later(4000,this,function(){this.fire(g);});}else{this._showDebugMenuItems();}}else{this.fire(v);this.fire(a);if(this.shown===false){d.later(4000,this,function(){this.fire(v);this.fire(a);});}else{this._showMenuItems();}}},_showDebugMenuItems:function(){this.shown=true;this.menu.all("li").addClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","none");this.menu.all("li.debug-item").removeClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.shown=true;this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","block");this.menu.all("li.debug-item").addClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","none");this._destructAria();this._initAria();},_handleHelpMenuItems:function(F,E){var B=E&&E.location||"top",D=E&&E.menuType||"minty-help-item",C,A;if(!F.menuGroups||!F.menuGroups.length){return;}C=F.menuGroups;A=this.menu.one(o);if(F.reset&&A){A.all("."+D).remove(true);}this._addMenuGroups(C,B,false,D);this._showMenuItems();},_handleHelpDebugMenuItems:function(B){var A;if(!B.menuGroups||!B.menuGroups.length){return;}A=B.menuGroups;itemList=this.menu.one(o);if(B.reset&&itemList){itemList.all(".minty-debug-item").remove(true);}this._addMenuGroups(A,"top",true,"minty-debug-item");this._showDebugMenuItems();},_handleMenuItemClick:function(G){var F,C,A,B;F=G.target;F=F.ancestor("a",true);C=F.getAttribute("data-mad");A=F.getAttribute("data-customevt");B=F.ancestor("li").hasClass("disabled");if(B){G.halt();return;}if(A){G.preventDefault();}if(!B){var E={actionData:C};var D=F.ancestor("li");if(D.hasClass("debug-item")){this.fire(m,E);}else{if(D.hasClass("minty-utility-item")){this.fire(r,E);}else{this.fire(n,E);}}}this.menu.addClass("yui3-menu-hidden");d.one("#yucs-help_button").removeClass("yui3-menu-label-menuvisible");},_addMenuGroups:function(D,J,H,I){var F=this.menu.one(o),A="",B,E=D.length,C,G;B=F.hasChildNodes();for(C=0;C<E;C++){G=D[C].length;if(J==="bottom"){if(C>0){D[C][0].separatorTop=true;}}else{if(C<(E-1)||B){D[C][G-1].separatorBottom=true;}}A+=this._addMenuGroup(D[C],H,I);}if(F.ancestor("div.yucs-yql_loading")){F.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading");}if(J==="bottom"){F.append(A);}else{F.prepend(A);}},_addMenuGroup:function(B,E,D){var F="",A=B.length,C;for(C=0;C<A;C++){if(E){B[C].isDebugItem=true;B[C].menuClass=D+" debug-item";}else{B[C].isDebugItem=false;B[C].menuClass=D+" minty-item";}F+=this._addMenuItem(B[C],D);}return F;},_addMenuItem:function(C,B){var A="";if(C.isActive){C.checkedAria='aria-checked="true"';}else{C.checkedAria="";}if(C.isDisabled){C.disabledAria='aria-disabled="true"';}else{C.disabledAria="";}switch(C.actionType){case"link":A=d.substitute(q,C,this._processTemplateValue);break;case"customEvent":A=d.substitute(y,C,this._processTemplateValue);break;default:break;}if(A){if(C.isDebugItem){A=A.replace(/separator/,"separator debug-item "+B);}else{A=A.replace(/separator/,"separator minty-item "+B);}}return A;},_processTemplateValue:function(B,C,D){var E="";var A=(document.location.protocol==="https:")?f:x;switch(B){case"icon":if(C!==undefined){if(C==="available"){E='<img src="'+A+'" class="yucs-opi available"/>';}else{if(C==="offline"){E='<img src="'+A+'" class="yucs-opi offline"/>';}else{if(C==="invisible"){E='<img src="'+A+'" class="yucs-opi invisible"/>';}else{if(C==="busy"){E='<img src="'+A+'" class="yucs-opi busy"/>';}else{if(C==="idle"){E='<img src="'+A+'" class="yucs-opi idle"/>';
}else{E='<img src="'+C+'" />';}}}}}}break;case"separatorTop":if(C){E=p;}break;case"separatorBottom":if(C){E=p;}break;case"actionData":if(C){E='data-mad="'+C+'"';}break;case"isDisabled":if(C){E="disabled";}break;case"isActive":if(C){E="sp active";}break;case"checkedAria":E=C;break;default:E=C;break;}return E;},_handleKeyup:function(A){if(27===A.keyCode||9===A.keyCode){this.helpLink.focus();d.Global.fire("ucs:mailPreviewShown");}else{if(40===A.keyCode&&!this.keyedup){if(this.panel.one("a")){this.panel.one("a").focus();}this.keyedup=true;}}},_initAria:function(){this.panel=d.one("#yuhead-help-panel");if(this.menu.one(u)){this.menu.one(u).set(k,"button");}this.panel.all(u).set(k,"menuitemradio");this.panel.set(k,"menu");this.panel.all("div,ul,li").set(k,"presentation");if(!d.UA.ipad&&!d.UA.mobile){this.panel.set(c,-1);}this.focusmanager=this.panel.plug(d.Plugin.NodeFocusManager,{descendants:u,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(A){return A.get(s);}},circular:true});},_destructAria:function(){this.panel.unplug(d.Plugin.NodeFocusManager);this.panel.one(u).set(c,0);}};d.augment(d.ucs.HelpMenu,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute","node-focusmanager"]});(function(){ucs.YObj.use("node","ucs-helpmenu",function(c){var b=c.one("#yucs").all(".yucs-hm-activate"),a;b.each(function(d){a=new c.ucs.HelpMenu(d);});});})();YUI.add("ucs-usermenu",function(c){c.namespace("ucs.UserMenu");var n="ucs:userMenuShow",k="ucs:userMenuItemClick",s="yucs-hide",h="yui3-menu-hidden";var m='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",r='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",l='<span class="yucs-separator" role="presentation"></span>',g="click",p="a",i="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif";c.ucs.UserMenu=function(t){this.menu=t;this.menuLink=c.one("#yucs-menu_link_profile");this._initCustomEvents();this.menuLink.on("keyup",this._handleKeyup,this);this.menuLink.on("keydown",this._handleKeydown,this);c.Global.on("ucs:mailPreviewShown",function(){this.keyedup=false;},this);this._initAria();};c.ucs.UserMenu.prototype={_initCustomEvents:function(){this.publish(n,{broadcast:2,emitFacade:true});this.publish(k,{broadcast:2,emitFacade:true});c.Global.on("ucs:profileMenuShow",this._showMenu,this);c.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{"location":"bottom","menuType":"minty-um-item"});this.menu.delegate(g,this._handleMenuItemClick,"li.minty-um-item a",this);},_showMenu:function(t){this.fire(n);this._showMenuItems();},_showMenuItems:function(){this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.separator").setStyle("display","block");},_handleUserMenuItems:function(y,x){var u="bottom",w="minty-user-item";if(!y.menuGroups||!y.menuGroups.length){return;}if(x&&x.location){u=x.location;}if(x&&x.menuType){w=x.menuType;}var v=y.menuGroups,t=this.menu.one(j);if(y.reset&&t){t.all("."+w).each(function(z){z.remove(true);});}if(v.length>0){this._addMenuGroups(v,u,false,w);}},_handleMenuItemClick:function(y){var x,v,t,u;x=y.target;x=x.ancestor("a",true);v=x.getAttribute("data-mad");t=x.getAttribute("data-customevt");u=x.ancestor("li").hasClass("disabled");if(u){y.halt();return;}if(t){y.preventDefault();}if(!u){var w={actionData:v};this.fire(k,w);}},_hideMenu:function(){},_addMenuGroups:function(w,C,A,B){var y=this.menu.one(j),u,t="";u=(y.get("children")._nodes.length)?true:false;for(var v=0,x=w.length;v<x;v++){var z=w[v].length;if(C==="bottom"){w[v][0].separatorTop=true;}else{if(v<(x-1)||u){w[v][z-1].separatorBottom=true;}}t+=this._addMenuGroup(w[v],A,B);}if(C==="bottom"){y.append(t);}else{y.prepend(t);}if(t!=""){y.setStyle("width",(y.get("offsetWidth")+10)+"px");}},_addMenuGroup:function(u,x,w){var y="";for(var v=0,t=u.length;v<t;v++){if(u[v].actionData==="themes"){continue;}if(x){u[v].isDebugItem=true;u[v].menuClass=w+" debug-item";}else{u[v].isDebugItem=false;u[v].menuClass=w+" minty-item";}y+=this._addMenuItem(u[v],w);}return y;},_addMenuItem:function(v,u){var t="";if(v.isActive){v.checkedAria='aria-checked="true"';}else{v.checkedAria="";}if(v.isDisabled){v.disabledAria='aria-disabled="true"';}else{v.disabledAria="";}if(v.actionData&&v.actionData.match(/^om:/)){return t;}switch(v.actionType){case"link":t=c.substitute(m,v,this._processTemplateValue);break;case"customEvent":t=c.substitute(r,v,this._processTemplateValue);break;default:break;}if(t){if(v.isDebugItem){t=t.replace(/separator/,"separator debug-item "+u);}else{t=t.replace(/separator/,"separator minty-item "+u);}}return t;},_processTemplateValue:function(u,v,w){var x="";var t=(document.location.protocol==="https:")?e:q;switch(u){case"icon":if(v!==undefined){if(v==="available"){x='<img src="'+t+'" class="yucs-opi available"/>';}else{if(v==="offline"){x='<img src="'+t+'" class="yucs-opi offline"/>';}else{if(v==="invisible"){x='<img src="'+t+'" class="yucs-opi invisible"/>';}else{if(v==="busy"){x='<img src="'+t+'" class="yucs-opi busy"/>';}else{if(v==="idle"){x='<img src="'+t+'" class="yucs-opi idle"/>';}else{x='<img src="'+v+'" />';}}}}}}break;case"separatorTop":if(v){x=l;}break;case"separatorBottom":if(v){x=l;}break;case"actionData":if(v){x='data-mad="'+v+'"';}break;case"isDisabled":if(v){x="disabled";}break;case"isActive":if(v){x="sp active";}break;case"checkedAria":x=v;break;default:x=v;break;}return x;},_handleKeyup:function(t){if(27===t.keyCode||9===t.keyCode){this.menuLink.focus();c.Global.fire("ucs:mailPreviewShown");}else{if(40===t.keyCode&&!this.keyedup){if(this.panel.one("a")){this.panel.one("a").focus();}this.keyedup=true;}}},_initAria:function(){this.panel=c.one("#yucs-profile_inner");this.menu.one(p).set(i,"button");this.panel.all(p).set(i,"menuitemradio");this.panel.set(i,"menu");this.panel.all("div,ul,li").set(i,"presentation");if(!c.UA.ipad&&!c.UA.mobile){this.panel.set(a,-1);}this.focusmanager=this.panel.plug(c.Plugin.NodeFocusManager,{descendants:p,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(t){return t.get(o);}},circular:true});}};c.augment(c.ucs.UserMenu,c.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();a.use("node","ucs-usermenu",function(e){var c=e.one("#yucs-profile_inner"),d;if(c&&!c.hasClass("yucs-nv3")){d=new e.ucs.UserMenu(c);}});})();